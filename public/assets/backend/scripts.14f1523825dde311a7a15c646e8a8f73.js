if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");if(function(e){"use strict";var t=e.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1==t[0]&&9==t[1]&&t[2]<1||t[0]>3)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")}(jQuery),function(e){"use strict";function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return{end:t[n]};return!1}e.fn.emulateTransitionEnd=function(t){var n=!1,r=this;e(this).one("bsTransitionEnd",function(){n=!0});var i=function(){n||e(r).trigger(e.support.transition.end)};return setTimeout(i,t),this},e(function(){e.support.transition=t(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){if(e(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}})})}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var n=e(this),i=n.data("bs.alert");i||n.data("bs.alert",i=new r(this)),"string"==typeof t&&i[t].call(n)})}var n='[data-dismiss="alert"]',r=function(t){e(t).on("click",n,this.close)};r.VERSION="3.3.7",r.TRANSITION_DURATION=150,r.prototype.close=function(t){function n(){a.detach().trigger("closed.bs.alert").remove()}var i=e(this),o=i.attr("data-target");o||(o=i.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,""));var a=e("#"===o?[]:o);t&&t.preventDefault(),a.length||(a=i.closest(".alert")),a.trigger(t=e.Event("close.bs.alert")),t.isDefaultPrevented()||(a.removeClass("in"),e.support.transition&&a.hasClass("fade")?a.one("bsTransitionEnd",n).emulateTransitionEnd(r.TRANSITION_DURATION):n())};var i=e.fn.alert;e.fn.alert=t,e.fn.alert.Constructor=r,e.fn.alert.noConflict=function(){return e.fn.alert=i,this},e(document).on("click.bs.alert.data-api",n,r.prototype.close)}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.button"),o="object"==typeof t&&t;i||r.data("bs.button",i=new n(this,o)),"toggle"==t?i.toggle():t&&i.setState(t)})}var n=function(t,r){this.$element=e(t),this.options=e.extend({},n.DEFAULTS,r),this.isLoading=!1};n.VERSION="3.3.7",n.DEFAULTS={loadingText:"loading..."},n.prototype.setState=function(t){var n="disabled",r=this.$element,i=r.is("input")?"val":"html",o=r.data();t+="Text",null==o.resetText&&r.data("resetText",r[i]()),setTimeout(e.proxy(function(){r[i](null==o[t]?this.options[t]:o[t]),"loadingText"==t?(this.isLoading=!0,r.addClass(n).attr(n,n).prop(n,!0)):this.isLoading&&(this.isLoading=!1,r.removeClass(n).removeAttr(n).prop(n,!1))},this),0)},n.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var n=this.$element.find("input");"radio"==n.prop("type")?(n.prop("checked")&&(e=!1),t.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==n.prop("type")&&(n.prop("checked")!==this.$element.hasClass("active")&&(e=!1),this.$element.toggleClass("active")),n.prop("checked",this.$element.hasClass("active")),e&&n.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var r=e.fn.button;e.fn.button=t,e.fn.button.Constructor=n,e.fn.button.noConflict=function(){return e.fn.button=r,this},e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(n){var r=e(n.target).closest(".btn");t.call(r,"toggle"),e(n.target).is('input[type="radio"], input[type="checkbox"]')||(n.preventDefault(),r.is("input,button")?r.trigger("focus"):r.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){e(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.carousel"),o=e.extend({},n.DEFAULTS,r.data(),"object"==typeof t&&t),a="string"==typeof t?t:o.slide;i||r.data("bs.carousel",i=new n(this,o)),"number"==typeof t?i.to(t):a?i[a]():o.interval&&i.pause().cycle()})}var n=function(t,n){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",e.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",e.proxy(this.pause,this)).on("mouseleave.bs.carousel",e.proxy(this.cycle,this))};n.VERSION="3.3.7",n.TRANSITION_DURATION=600,n.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},n.prototype.keydown=function(e){if(!/input|textarea/i.test(e.target.tagName)){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()}},n.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},n.prototype.getItemIndex=function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},n.prototype.getItemForDirection=function(e,t){var n=this.getItemIndex(t);if(("prev"==e&&0===n||"next"==e&&n==this.$items.length-1)&&!this.options.wrap)return t;var r="prev"==e?-1:1,i=(n+r)%this.$items.length;return this.$items.eq(i)},n.prototype.to=function(e){var t=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(e>this.$items.length-1||e<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){t.to(e)}):n==e?this.pause().cycle():this.slide(e>n?"next":"prev",this.$items.eq(e))},n.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},n.prototype.next=function(){if(!this.sliding)return this.slide("next")},n.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},n.prototype.slide=function(t,r){var i=this.$element.find(".item.active"),o=r||this.getItemForDirection(t,i),a=this.interval,s="next"==t?"left":"right",l=this;if(o.hasClass("active"))return this.sliding=!1;var c=o[0],u=e.Event("slide.bs.carousel",{relatedTarget:c,direction:s});if(this.$element.trigger(u),!u.isDefaultPrevented()){if(this.sliding=!0,a&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var d=e(this.$indicators.children()[this.getItemIndex(o)]);d&&d.addClass("active")}var f=e.Event("slid.bs.carousel",{relatedTarget:c,direction:s});return e.support.transition&&this.$element.hasClass("slide")?(o.addClass(t),o[0].offsetWidth,i.addClass(s),o.addClass(s),i.one("bsTransitionEnd",function(){o.removeClass([t,s].join(" ")).addClass("active"),i.removeClass(["active",s].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(f)},0)}).emulateTransitionEnd(n.TRANSITION_DURATION)):(i.removeClass("active"),o.addClass("active"),this.sliding=!1,this.$element.trigger(f)),a&&this.cycle(),this}};var r=e.fn.carousel;e.fn.carousel=t,e.fn.carousel.Constructor=n,e.fn.carousel.noConflict=function(){return e.fn.carousel=r,this};var i=function(n){var r,i=e(this),o=e(i.attr("data-target")||(r=i.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,""));if(o.hasClass("carousel")){var a=e.extend({},o.data(),i.data()),s=i.attr("data-slide-to");s&&(a.interval=!1),t.call(o,a),s&&o.data("bs.carousel").to(s),n.preventDefault()}};e(document).on("click.bs.carousel.data-api","[data-slide]",i).on("click.bs.carousel.data-api","[data-slide-to]",i),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var n=e(this);t.call(n,n.data())})})}(jQuery),function(e){"use strict";function t(t){var n,r=t.attr("data-target")||(n=t.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return e(r)}function n(t){return this.each(function(){var n=e(this),i=n.data("bs.collapse"),o=e.extend({},r.DEFAULTS,n.data(),"object"==typeof t&&t);!i&&o.toggle&&/show|hide/.test(t)&&(o.toggle=!1),i||n.data("bs.collapse",i=new r(this,o)),"string"==typeof t&&i[t]()})}var r=function(t,n){this.$element=e(t),this.options=e.extend({},r.DEFAULTS,n),this.$trigger=e('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};r.VERSION="3.3.7",r.TRANSITION_DURATION=350,r.DEFAULTS={toggle:!0},r.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},r.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t,i=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(i&&i.length&&(t=i.data("bs.collapse"))&&t.transitioning)){var o=e.Event("show.bs.collapse");if(this.$element.trigger(o),!o.isDefaultPrevented()){i&&i.length&&(n.call(i,"hide"),t||i.data("bs.collapse",null));var a=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[a](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("collapse in")[a](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return s.call(this);var l=e.camelCase(["scroll",a].join("-"));this.$element.one("bsTransitionEnd",e.proxy(s,this)).emulateTransitionEnd(r.TRANSITION_DURATION)[a](this.$element[0][l])}}}},r.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var i=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!e.support.transition)return i.call(this);this.$element[n](0).one("bsTransitionEnd",e.proxy(i,this)).emulateTransitionEnd(r.TRANSITION_DURATION)}}},r.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},r.prototype.getParent=function(){return e(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(e.proxy(function(n,r){var i=e(r);this.addAriaAndCollapsedClass(t(i),i)},this)).end()},r.prototype.addAriaAndCollapsedClass=function(e,t){var n=e.hasClass("in");e.attr("aria-expanded",n),t.toggleClass("collapsed",!n).attr("aria-expanded",n)};var i=e.fn.collapse;e.fn.collapse=n,e.fn.collapse.Constructor=r,e.fn.collapse.noConflict=function(){return e.fn.collapse=i,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(r){var i=e(this);i.attr("data-target")||r.preventDefault();var o=t(i),a=o.data("bs.collapse"),s=a?"toggle":i.data();n.call(o,s)})}(jQuery),function(e){"use strict";function t(t){var n=t.attr("data-target");n||(n=t.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var r=n&&e(n);return r&&r.length?r:t.parent()}function n(n){n&&3===n.which||(e(i).remove(),e(o).each(function(){var r=e(this),i=t(r),o={relatedTarget:this};i.hasClass("open")&&(n&&"click"==n.type&&/input|textarea/i.test(n.target.tagName)&&e.contains(i[0],n.target)||(i.trigger(n=e.Event("hide.bs.dropdown",o)),n.isDefaultPrevented()||(r.attr("aria-expanded","false"),i.removeClass("open").trigger(e.Event("hidden.bs.dropdown",o)))))}))}function r(t){return this.each(function(){var n=e(this),r=n.data("bs.dropdown");r||n.data("bs.dropdown",r=new a(this)),"string"==typeof t&&r[t].call(n)})}var i=".dropdown-backdrop",o='[data-toggle="dropdown"]',a=function(t){e(t).on("click.bs.dropdown",this.toggle)};a.VERSION="3.3.7",a.prototype.toggle=function(r){var i=e(this);if(!i.is(".disabled, :disabled")){var o=t(i),a=o.hasClass("open");if(n(),!a){"ontouchstart"in document.documentElement&&!o.closest(".navbar-nav").length&&e(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(e(this)).on("click",n);var s={relatedTarget:this};if(o.trigger(r=e.Event("show.bs.dropdown",s)),r.isDefaultPrevented())return;i.trigger("focus").attr("aria-expanded","true"),o.toggleClass("open").trigger(e.Event("shown.bs.dropdown",s))}return!1}},a.prototype.keydown=function(n){if(/(38|40|27|32)/.test(n.which)&&!/input|textarea/i.test(n.target.tagName)){var r=e(this);if(n.preventDefault(),n.stopPropagation(),!r.is(".disabled, :disabled")){var i=t(r),a=i.hasClass("open");if(!a&&27!=n.which||a&&27==n.which)return 27==n.which&&i.find(o).trigger("focus"),r.trigger("click");var s=i.find(".dropdown-menu li:not(.disabled):visible a");if(s.length){var l=s.index(n.target);38==n.which&&l>0&&l--,40==n.which&&l<s.length-1&&l++,~l||(l=0),s.eq(l).trigger("focus")}}}};var s=e.fn.dropdown;e.fn.dropdown=r,e.fn.dropdown.Constructor=a,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=s,this},e(document).on("click.bs.dropdown.data-api",n).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",o,a.prototype.toggle).on("keydown.bs.dropdown.data-api",o,a.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",a.prototype.keydown)}(jQuery),function(e){"use strict";function t(t,r){return this.each(function(){var i=e(this),o=i.data("bs.modal"),a=e.extend({},n.DEFAULTS,i.data(),"object"==typeof t&&t);o||i.data("bs.modal",o=new n(this,a)),"string"==typeof t?o[t](r):a.show&&o.show(r)})}var n=function(t,n){this.options=n,this.$body=e(document.body),this.$element=e(t),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.3.7",n.TRANSITION_DURATION=300,n.BACKDROP_TRANSITION_DURATION=150,n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},n.prototype.show=function(t){var r=this,i=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){r.$element.one("mouseup.dismiss.bs.modal",function(t){e(t.target).is(r.$element)&&(r.ignoreBackdropClick=!0)})}),this.backdrop(function(){var i=e.support.transition&&r.$element.hasClass("fade");r.$element.parent().length||r.$element.appendTo(r.$body),r.$element.show().scrollTop(0),r.adjustDialog(),i&&r.$element[0].offsetWidth,r.$element.addClass("in"),r.enforceFocus();var o=e.Event("shown.bs.modal",{relatedTarget:t});i?r.$dialog.one("bsTransitionEnd",function(){r.$element.trigger("focus").trigger(o)}).emulateTransitionEnd(n.TRANSITION_DURATION):r.$element.trigger("focus").trigger(o)}))},n.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(n.TRANSITION_DURATION):this.hideModal())},n.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){document===e.target||this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},n.prototype.resize=function(){this.isShown?e(window).on("resize.bs.modal",e.proxy(this.handleUpdate,this)):e(window).off("resize.bs.modal")},n.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(t){var r=this,i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var o=e.support.transition&&i;if(this.$backdrop=e(document.createElement("div")).addClass("modal-backdrop "+i).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){if(this.ignoreBackdropClick)return void(this.ignoreBackdropClick=!1);e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide())},this)),o&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;o?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):t()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var a=function(){r.removeBackdrop(),t&&t()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):a()}else t&&t()},n.prototype.handleUpdate=function(){this.adjustDialog()},n.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},n.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},n.prototype.checkScrollbar=function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e,this.scrollbarWidth=this.measureScrollbar()},n.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",e+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},n.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var r=e.fn.modal;e.fn.modal=t,e.fn.modal.Constructor=n,e.fn.modal.noConflict=function(){return e.fn.modal=r,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(n){var r=e(this),i=r.attr("href"),o=e(r.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),a=o.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(i)&&i},o.data(),r.data());r.is("a")&&n.preventDefault(),o.one("show.bs.modal",function(e){e.isDefaultPrevented()||o.one("hidden.bs.modal",function(){r.is(":visible")&&r.trigger("focus")})}),t.call(o,a,this)})}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.tooltip"),o="object"==typeof t&&t;!i&&/destroy|hide/.test(t)||(i||r.data("bs.tooltip",i=new n(this,o)),"string"==typeof t&&i[t]())})}var n=function(e,t){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",e,t)};n.VERSION="3.3.7",n.TRANSITION_DURATION=150,n.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(t,n,r){if(this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(r),this.$viewport=this.options.viewport&&e(e.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var i=this.options.trigger.split(" "),o=i.length;o--;){var a=i[o];if("click"==a)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=a){var s="hover"==a?"mouseenter":"focusin",l="hover"==a?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},n.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,r){n[e]!=r&&(t[e]=r)}),t},n.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),t instanceof e.Event&&(n.inState["focusin"==t.type?"focus":"hover"]=!0),n.tip().hasClass("in")||"in"==n.hoverState?void(n.hoverState="in"):(clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show())},n.prototype.isInStateTrue=function(){for(var e in this.inState)if(this.inState[e])return!0;return!1},n.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);if(n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),t instanceof e.Event&&(n.inState["focusout"==t.type?"focus":"hover"]=!1),!n.isInStateTrue()){if(clearTimeout(n.timeout),n.hoverState="out",!n.options.delay||!n.options.delay.hide)return n.hide();n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)}},n.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var r=e.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!r)return;var i=this,o=this.tip(),a=this.getUID(this.type);this.setContent(),o.attr("id",a),this.$element.attr("aria-describedby",a),this.options.animation&&o.addClass("fade");var s="function"==typeof this.options.placement?this.options.placement.call(this,o[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,c=l.test(s);c&&(s=s.replace(l,"")||"top"),o.detach().css({top:0,left:0,display:"block"}).addClass(s).data("bs."+this.type,this),this.options.container?o.appendTo(this.options.container):o.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var u=this.getPosition(),d=o[0].offsetWidth,f=o[0].offsetHeight;if(c){var h=s,p=this.getPosition(this.$viewport);s="bottom"==s&&u.bottom+f>p.bottom?"top":"top"==s&&u.top-f<p.top?"bottom":"right"==s&&u.right+d>p.width?"left":"left"==s&&u.left-d<p.left?"right":s,o.removeClass(h).addClass(s)}var g=this.getCalculatedOffset(s,u,d,f);this.applyPlacement(g,s);var m=function(){var e=i.hoverState;i.$element.trigger("shown.bs."+i.type),i.hoverState=null,"out"==e&&i.leave(i)};e.support.transition&&this.$tip.hasClass("fade")?o.one("bsTransitionEnd",m).emulateTransitionEnd(n.TRANSITION_DURATION):m()}},n.prototype.applyPlacement=function(t,n){var r=this.tip(),i=r[0].offsetWidth,o=r[0].offsetHeight,a=parseInt(r.css("margin-top"),10),s=parseInt(r.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(s)&&(s=0),t.top+=a,t.left+=s,e.offset.setOffset(r[0],e.extend({using:function(e){r.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),r.addClass("in");var l=r[0].offsetWidth,c=r[0].offsetHeight;"top"==n&&c!=o&&(t.top=t.top+o-c);var u=this.getViewportAdjustedDelta(n,t,l,c);u.left?t.left+=u.left:t.top+=u.top;var d=/top|bottom/.test(n),f=d?2*u.left-i+l:2*u.top-o+c,h=d?"offsetWidth":"offsetHeight";r.offset(t),this.replaceArrow(f,r[0][h],d)},n.prototype.replaceArrow=function(e,t,n){this.arrow().css(n?"left":"top",50*(1-e/t)+"%").css(n?"top":"left","")},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},n.prototype.hide=function(t){function r(){"in"!=i.hoverState&&o.detach(),i.$element&&i.$element.removeAttr("aria-describedby").trigger("hidden.bs."+i.type),t&&t()}var i=this,o=e(this.$tip),a=e.Event("hide.bs."+this.type);if(this.$element.trigger(a),!a.isDefaultPrevented())return o.removeClass("in"),e.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",r).emulateTransitionEnd(n.TRANSITION_DURATION):r(),this.hoverState=null,this},n.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(t){t=t||this.$element;var n=t[0],r="BODY"==n.tagName,i=n.getBoundingClientRect();null==i.width&&(i=e.extend({},i,{width:i.right-i.left,height:i.bottom-i.top}));var o=window.SVGElement&&n instanceof window.SVGElement,a=r?{top:0,left:0}:o?null:t.offset(),s={scroll:r?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},l=r?{width:e(window).width(),height:e(window).height()}:null;return e.extend({},i,s,l,a)},n.prototype.getCalculatedOffset=function(e,t,n,r){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-n/2}:"top"==e?{top:t.top-r,left:t.left+t.width/2-n/2}:"left"==e?{top:t.top+t.height/2-r/2,left:t.left-n}:{top:t.top+t.height/2-r/2,left:t.left+t.width}},n.prototype.getViewportAdjustedDelta=function(e,t,n,r){var i={top:0,left:0};if(!this.$viewport)return i;var o=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(e)){var s=t.top-o-a.scroll,l=t.top+o-a.scroll+r;s<a.top?i.top=a.top-s:l>a.top+a.height&&(i.top=a.top+a.height-l)}else{var c=t.left-o,u=t.left+o+n;c<a.left?i.left=a.left-c:u>a.right&&(i.left=a.left+a.width-u)}return i},n.prototype.getTitle=function(){var e=this.$element,t=this.options;return e.attr("data-original-title")||("function"==typeof t.title?t.title.call(e[0]):t.title)},n.prototype.getUID=function(e){do{e+=~~(1e6*Math.random())}while(document.getElementById(e));return e},n.prototype.tip=function(){if(!this.$tip&&(this.$tip=e(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(t){var n=this;t&&((n=e(t.currentTarget).data("bs."+this.type))||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n))),t?(n.inState.click=!n.inState.click,n.isInStateTrue()?n.enter(n):n.leave(n)):n.tip().hasClass("in")?n.leave(n):n.enter(n)},n.prototype.destroy=function(){var e=this;clearTimeout(this.timeout),this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type),e.$tip&&e.$tip.detach(),e.$tip=null,e.$arrow=null,e.$viewport=null,e.$element=null})};var r=e.fn.tooltip;e.fn.tooltip=t,e.fn.tooltip.Constructor=n,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=r,this}}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.popover"),o="object"==typeof t&&t;!i&&/destroy|hide/.test(t)||(i||r.data("bs.popover",i=new n(this,o)),"string"==typeof t&&i[t]())})}var n=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");n.VERSION="3.3.7",n.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),n.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),n.prototype.constructor=n,n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},n.prototype.hasContent=function(){return this.getTitle()||this.getContent()},n.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var r=e.fn.popover;e.fn.popover=t,e.fn.popover.Constructor=n,e.fn.popover.noConflict=function(){return e.fn.popover=r,this}}(jQuery),function(e){"use strict";function t(n,r){this.$body=e(document.body),this.$scrollElement=e(e(n).is(document.body)?window:n),this.options=e.extend({},t.DEFAULTS,r),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",e.proxy(this.process,this)),this.refresh(),this.process()}function n(n){return this.each(function(){var r=e(this),i=r.data("bs.scrollspy"),o="object"==typeof n&&n;i||r.data("bs.scrollspy",i=new t(this,o)),"string"==typeof n&&i[n]()})}t.VERSION="3.3.7",t.DEFAULTS={offset:10},t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},t.prototype.refresh=function(){var t=this,n="offset",r=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),e.isWindow(this.$scrollElement[0])||(n="position",r=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var t=e(this),i=t.data("target")||t.attr("href"),o=/^#./.test(i)&&e(i);return o&&o.length&&o.is(":visible")&&[[o[n]().top+r,i]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},t.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),r=this.options.offset+n-this.$scrollElement.height(),i=this.offsets,o=this.targets,a=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),t>=r)return a!=(e=o[o.length-1])&&this.activate(e);if(a&&t<i[0])return this.activeTarget=null,this.clear();for(e=i.length;e--;)a!=o[e]&&t>=i[e]&&(void 0===i[e+1]||t<i[e+1])&&this.activate(o[e])},t.prototype.activate=function(t){
this.activeTarget=t,this.clear();var n=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',r=e(n).parents("li").addClass("active");r.parent(".dropdown-menu").length&&(r=r.closest("li.dropdown").addClass("active")),r.trigger("activate.bs.scrollspy")},t.prototype.clear=function(){e(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var r=e.fn.scrollspy;e.fn.scrollspy=n,e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=r,this},e(window).on("load.bs.scrollspy.data-api",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);n.call(t,t.data())})})}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.tab");i||r.data("bs.tab",i=new n(this)),"string"==typeof t&&i[t]()})}var n=function(t){this.element=e(t)};n.VERSION="3.3.7",n.TRANSITION_DURATION=150,n.prototype.show=function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),r=t.data("target");if(r||(r=t.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var i=n.find(".active:last a"),o=e.Event("hide.bs.tab",{relatedTarget:t[0]}),a=e.Event("show.bs.tab",{relatedTarget:i[0]});if(i.trigger(o),t.trigger(a),!a.isDefaultPrevented()&&!o.isDefaultPrevented()){var s=e(r);this.activate(t.closest("li"),n),this.activate(s,s.parent(),function(){i.trigger({type:"hidden.bs.tab",relatedTarget:t[0]}),t.trigger({type:"shown.bs.tab",relatedTarget:i[0]})})}}},n.prototype.activate=function(t,r,i){function o(){a.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),t.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),s?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu").length&&t.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),i&&i()}var a=r.find("> .active"),s=i&&e.support.transition&&(a.length&&a.hasClass("fade")||!!r.find("> .fade").length);a.length&&s?a.one("bsTransitionEnd",o).emulateTransitionEnd(n.TRANSITION_DURATION):o(),a.removeClass("in")};var r=e.fn.tab;e.fn.tab=t,e.fn.tab.Constructor=n,e.fn.tab.noConflict=function(){return e.fn.tab=r,this};var i=function(n){n.preventDefault(),t.call(e(this),"show")};e(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',i).on("click.bs.tab.data-api",'[data-toggle="pill"]',i)}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.affix"),o="object"==typeof t&&t;i||r.data("bs.affix",i=new n(this,o)),"string"==typeof t&&i[t]()})}var n=function(t,r){this.options=e.extend({},n.DEFAULTS,r),this.$target=e(this.options.target).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(t),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};n.VERSION="3.3.7",n.RESET="affix affix-top affix-bottom",n.DEFAULTS={offset:0,target:window},n.prototype.getState=function(e,t,n,r){var i=this.$target.scrollTop(),o=this.$element.offset(),a=this.$target.height();if(null!=n&&"top"==this.affixed)return i<n&&"top";if("bottom"==this.affixed)return null!=n?!(i+this.unpin<=o.top)&&"bottom":!(i+a<=e-r)&&"bottom";var s=null==this.affixed,l=s?i:o.top,c=s?a:t;return null!=n&&i<=n?"top":null!=r&&l+c>=e-r&&"bottom"},n.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(n.RESET).addClass("affix");var e=this.$target.scrollTop(),t=this.$element.offset();return this.pinnedOffset=t.top-e},n.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},n.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t=this.$element.height(),r=this.options.offset,i=r.top,o=r.bottom,a=Math.max(e(document).height(),e(document.body).height());"object"!=typeof r&&(o=i=r),"function"==typeof i&&(i=r.top(this.$element)),"function"==typeof o&&(o=r.bottom(this.$element));var s=this.getState(a,t,i,o);if(this.affixed!=s){null!=this.unpin&&this.$element.css("top","");var l="affix"+(s?"-"+s:""),c=e.Event(l+".bs.affix");if(this.$element.trigger(c),c.isDefaultPrevented())return;this.affixed=s,this.unpin="bottom"==s?this.getPinnedOffset():null,this.$element.removeClass(n.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==s&&this.$element.offset({top:a-t-o})}};var r=e.fn.affix;e.fn.affix=t,e.fn.affix.Constructor=n,e.fn.affix.noConflict=function(){return e.fn.affix=r,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var n=e(this),r=n.data();r.offset=r.offset||{},null!=r.offsetBottom&&(r.offset.bottom=r.offsetBottom),null!=r.offsetTop&&(r.offset.top=r.offsetTop),t.call(n,r)})})}(jQuery),function(e){"use strict";function t(e){for(var t=window,n=e.split("."),r=n.pop(),i=0,o=n.length;i<o;i++)t=t[n[i]];return function(){t[r].call(this)}}var n;if(!e.fn.popover)throw new Error("Confirmation requires popover.js");var r=function(e,t){this.init(e,t)};r.VERSION="2.4.2",r.KEYMAP={13:"Enter",27:"Escape",39:"ArrowRight",40:"ArrowDown"},r.DEFAULTS=e.extend({},e.fn.popover.Constructor.DEFAULTS,{placement:"top",title:"Are you sure?",trigger:"click",confirmationEvent:void 0,popout:!1,singleton:!1,copyAttributes:"href target",buttons:null,onConfirm:e.noop,onCancel:e.noop,btnOkClass:"btn-xs btn-primary",btnOkIcon:"glyphicon glyphicon-ok",btnOkLabel:"Yes",btnCancelClass:"btn-xs btn-default",btnCancelIcon:"glyphicon glyphicon-remove",btnCancelLabel:"No",template:'<div class="popover confirmation"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"><p class="confirmation-content"></p><div class="confirmation-buttons text-center"><div class="btn-group"><a href="#" class="btn" data-apply="confirmation"></a><a href="#" class="btn" data-dismiss="confirmation"></a></div></div></div></div>'}),r.prototype=e.extend({},e.fn.popover.Constructor.prototype),r.prototype.constructor=r,r.prototype.getDefaults=function(){return r.DEFAULTS},r.prototype.init=function(t,n){if(e.fn.popover.Constructor.prototype.init.call(this,"confirmation",t,n),(this.options.popout||this.options.singleton)&&!n.rootSelector)throw new Error("The rootSelector option is required to use popout and singleton features since jQuery 3.");this.options._isDelegate=!1,n.selector?this.options._selector=this._options._selector=n.rootSelector+" "+n.selector:n._selector?(this.options._selector=n._selector,this.options._isDelegate=!0):this.options._selector=n.rootSelector,void 0===this.options.confirmationEvent&&(this.options.confirmationEvent=this.options.trigger);var r=this;this.options.selector?this.$element.on(this.options.trigger,this.options.selector,function(e,t){t||(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation())}):(this.options._attributes={},this.options.copyAttributes?"string"==typeof this.options.copyAttributes&&(this.options.copyAttributes=this.options.copyAttributes.split(" ")):this.options.copyAttributes=[],this.options.copyAttributes.forEach(function(e){this.options._attributes[e]=this.$element.attr(e)},this),this.$element.on(this.options.trigger,function(e,t){t||(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation())}),this.$element.on("show.bs.confirmation",function(t){r.options.singleton&&e(r.options._selector).not(e(this)).filter(function(){return void 0!==e(this).data("bs.confirmation")}).confirmation("hide")})),this.options._isDelegate||(this.eventBody=!1,this.uid=this.$element[0].id||this.getUID("group_"),this.$element.on("shown.bs.confirmation",function(t){r.options.popout&&!r.eventBody&&(r.eventBody=e("body").on("click.bs.confirmation."+r.uid,function(t){e(r.options._selector).is(t.target)||(e(r.options._selector).filter(function(){return void 0!==e(this).data("bs.confirmation")}).confirmation("hide"),e("body").off("click.bs."+r.uid),r.eventBody=!1)}))}))},r.prototype.hasContent=function(){return!0},r.prototype.setContent=function(){var t=this,r=this.tip(),i=this.getTitle(),o=this.getContent();if(r.find(".popover-title")[this.options.html?"html":"text"](i),r.find(".confirmation-content").toggle(!!o).children().detach().end()[this.options.html?"string"==typeof o?"html":"append":"text"](o),r.on("click",function(e){e.stopPropagation()}),this.options.buttons){var a=r.find(".confirmation-buttons .btn-group").empty();this.options.buttons.forEach(function(n){a.append(e('<a href="#"></a>').addClass(n.class||"btn btn-xs btn-default").html(n.label||"").attr(n.attr||{}).prepend(e("<i></i>").addClass(n.icon)," ").one("click",function(r){"#"===e(this).attr("href")&&r.preventDefault(),n.onClick&&n.onClick.call(t.$element),n.cancel?(t.getOnCancel().call(t.$element,n.value),t.$element.trigger("canceled.bs.confirmation",[n.value])):(t.getOnConfirm().call(t.$element,n.value),t.$element.trigger("confirmed.bs.confirmation",[n.value])),t.inState&&(t.inState.click=!1),t.hide()}))},this)}else r.find('[data-apply="confirmation"]').addClass(this.options.btnOkClass).html(this.options.btnOkLabel).attr(this.options._attributes).prepend(e("<i></i>").addClass(this.options.btnOkIcon)," ").off("click").one("click",function(n){"#"===e(this).attr("href")&&n.preventDefault(),t.getOnConfirm().call(t.$element),t.$element.trigger("confirmed.bs.confirmation"),t.$element.trigger(t.options.confirmationEvent,[!0]),t.hide()}),r.find('[data-dismiss="confirmation"]').addClass(this.options.btnCancelClass).html(this.options.btnCancelLabel).prepend(e("<i></i>").addClass(this.options.btnCancelIcon)," ").off("click").one("click",function(e){e.preventDefault(),t.getOnCancel().call(t.$element),t.$element.trigger("canceled.bs.confirmation"),t.inState&&(t.inState.click=!1),t.hide()});r.removeClass("fade top bottom left right in"),r.find(".popover-title").html()||r.find(".popover-title").hide(),n=this,e(window).off("keyup.bs.confirmation").on("keyup.bs.confirmation",this._onKeyup.bind(this))},r.prototype.destroy=function(){n===this&&(n=void 0,e(window).off("keyup.bs.confirmation")),e.fn.popover.Constructor.prototype.destroy.call(this)},r.prototype.hide=function(){n===this&&(n=void 0,e(window).off("keyup.bs.confirmation")),e.fn.popover.Constructor.prototype.hide.call(this)},r.prototype._onKeyup=function(t){if(!this.$tip)return n=void 0,void e(window).off("keyup.bs.confirmation");var i,o=t.key||r.KEYMAP[t.keyCode||t.which],a=this.$tip.find(".confirmation-buttons .btn-group"),s=a.find(".active");switch(o){case"Escape":this.hide();break;case"ArrowRight":i=s.length&&s.next().length?s.next():a.children().first(),s.removeClass("active"),i.addClass("active").focus();break;case"ArrowLeft":i=s.length&&s.prev().length?s.prev():a.children().last(),s.removeClass("active"),i.addClass("active").focus()}},r.prototype.getOnConfirm=function(){return this.$element.attr("data-on-confirm")?t(this.$element.attr("data-on-confirm")):this.options.onConfirm},r.prototype.getOnCancel=function(){return this.$element.attr("data-on-cancel")?t(this.$element.attr("data-on-cancel")):this.options.onCancel};var i=e.fn.confirmation;e.fn.confirmation=function(t){var n="object"==typeof t&&t||{};return n.rootSelector=this.selector||n.rootSelector,this.each(function(){var i=e(this),o=i.data("bs.confirmation");(o||"destroy"!=t)&&(o||i.data("bs.confirmation",o=new r(this,n)),"string"==typeof t&&(o[t](),"hide"==t&&o.inState&&(o.inState.click=!1)))})},e.fn.confirmation.Constructor=r,e.fn.confirmation.noConflict=function(){return e.fn.confirmation=i,this}}(jQuery),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e,t){function n(){return new Date(Date.UTC.apply(Date,arguments))}function r(){var e=new Date;return n(e.getFullYear(),e.getMonth(),e.getDate())}function i(e,t){return e.getUTCFullYear()===t.getUTCFullYear()&&e.getUTCMonth()===t.getUTCMonth()&&e.getUTCDate()===t.getUTCDate()}function o(n,r){return function(){return r!==t&&e.fn.datepicker.deprecated(r),this[n].apply(this,arguments)}}function a(e){return e&&!isNaN(e.getTime())}function s(t,n){function r(e,t){return t.toLowerCase()}var i,o=e(t).data(),a={},s=new RegExp("^"+n.toLowerCase()+"([A-Z])");n=new RegExp("^"+n.toLowerCase());for(var l in o)n.test(l)&&(i=l.replace(s,r),a[i]=o[l]);return a}function l(t){var n={};if(m[t]||(t=t.split("-")[0],m[t])){var r=m[t];return e.each(g,function(e,t){t in r&&(n[t]=r[t])}),n}}var c=function(){var t={get:function(e){return this.slice(e)[0]},contains:function(e){for(var t=e&&e.valueOf(),n=0,r=this.length;n<r;n++)if(0<=this[n].valueOf()-t&&this[n].valueOf()-t<864e5)return n;return-1},remove:function(e){this.splice(e,1)},replace:function(t){t&&(e.isArray(t)||(t=[t]),this.clear(),this.push.apply(this,t))},clear:function(){this.length=0},copy:function(){var e=new c;return e.replace(this),e}};return function(){var n=[];return n.push.apply(n,arguments),e.extend(n,t),n}}(),u=function(t,n){e.data(t,"datepicker",this),this._process_options(n),this.dates=new c,this.viewDate=this.o.defaultViewDate,this.focusDate=null,this.element=e(t),this.isInput=this.element.is("input"),this.inputField=this.isInput?this.element:this.element.find("input"),this.component=!!this.element.hasClass("date")&&this.element.find(".add-on, .input-group-addon, .btn"),this.component&&0===this.component.length&&(this.component=!1),this.isInline=!this.component&&this.element.is("div"),this.picker=e(v.template),this._check_template(this.o.templates.leftArrow)&&this.picker.find(".prev").html(this.o.templates.leftArrow),this._check_template(this.o.templates.rightArrow)&&this.picker.find(".next").html(this.o.templates.rightArrow),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&this.picker.addClass("datepicker-rtl"),this.o.calendarWeeks&&this.picker.find(".datepicker-days .datepicker-switch, thead .datepicker-title, tfoot .today, tfoot .clear").attr("colspan",function(e,t){return Number(t)+1}),this._process_options({startDate:this._o.startDate,endDate:this._o.endDate,daysOfWeekDisabled:this.o.daysOfWeekDisabled,daysOfWeekHighlighted:this.o.daysOfWeekHighlighted,datesDisabled:this.o.datesDisabled}),this._allow_update=!1,this.setViewMode(this.o.startView),this._allow_update=!0,this.fillDow(),this.fillMonths(),this.update(),this.isInline&&this.show()};u.prototype={constructor:u,_resolveViewName:function(t){return e.each(v.viewModes,function(n,r){if(t===n||-1!==e.inArray(t,r.names))return t=n,!1}),t},_resolveDaysOfWeek:function(t){return e.isArray(t)||(t=t.split(/[,\s]*/)),e.map(t,Number)},_check_template:function(n){try{if(n===t||""===n)return!1;if((n.match(/[<>]/g)||[]).length<=0)return!0;return e(n).length>0}catch(e){return!1}},_process_options:function(t){this._o=e.extend({},this._o,t);var i=this.o=e.extend({},this._o),o=i.language;m[o]||(o=o.split("-")[0],m[o]||(o=p.language)),i.language=o,i.startView=this._resolveViewName(i.startView),i.minViewMode=this._resolveViewName(i.minViewMode),i.maxViewMode=this._resolveViewName(i.maxViewMode),i.startView=Math.max(this.o.minViewMode,Math.min(this.o.maxViewMode,i.startView)),!0!==i.multidate&&(i.multidate=Number(i.multidate)||!1,!1!==i.multidate&&(i.multidate=Math.max(0,i.multidate))),i.multidateSeparator=String(i.multidateSeparator),i.weekStart%=7,i.weekEnd=(i.weekStart+6)%7;var a=v.parseFormat(i.format);i.startDate!==-1/0&&(i.startDate?i.startDate instanceof Date?i.startDate=this._local_to_utc(this._zero_time(i.startDate)):i.startDate=v.parseDate(i.startDate,a,i.language,i.assumeNearbyYear):i.startDate=-1/0),i.endDate!==1/0&&(i.endDate?i.endDate instanceof Date?i.endDate=this._local_to_utc(this._zero_time(i.endDate)):i.endDate=v.parseDate(i.endDate,a,i.language,i.assumeNearbyYear):i.endDate=1/0),i.daysOfWeekDisabled=this._resolveDaysOfWeek(i.daysOfWeekDisabled||[]),i.daysOfWeekHighlighted=this._resolveDaysOfWeek(i.daysOfWeekHighlighted||[]),i.datesDisabled=i.datesDisabled||[],e.isArray(i.datesDisabled)||(i.datesDisabled=i.datesDisabled.split(",")),i.datesDisabled=e.map(i.datesDisabled,function(e){return v.parseDate(e,a,i.language,i.assumeNearbyYear)});var s=String(i.orientation).toLowerCase().split(/\s+/g),l=i.orientation.toLowerCase();if(s=e.grep(s,function(e){return/^auto|left|right|top|bottom$/.test(e)}),i.orientation={x:"auto",y:"auto"},l&&"auto"!==l)if(1===s.length)switch(s[0]){case"top":case"bottom":i.orientation.y=s[0];break;case"left":case"right":i.orientation.x=s[0]}else l=e.grep(s,function(e){return/^left|right$/.test(e)}),i.orientation.x=l[0]||"auto",l=e.grep(s,function(e){return/^top|bottom$/.test(e)}),i.orientation.y=l[0]||"auto";else;if(i.defaultViewDate instanceof Date||"string"==typeof i.defaultViewDate)i.defaultViewDate=v.parseDate(i.defaultViewDate,a,i.language,i.assumeNearbyYear);else if(i.defaultViewDate){var c=i.defaultViewDate.year||(new Date).getFullYear(),u=i.defaultViewDate.month||0,d=i.defaultViewDate.day||1;i.defaultViewDate=n(c,u,d)}else i.defaultViewDate=r()},_events:[],_secondaryEvents:[],_applyEvents:function(e){for(var n,r,i,o=0;o<e.length;o++)n=e[o][0],2===e[o].length?(r=t,i=e[o][1]):3===e[o].length&&(r=e[o][1],i=e[o][2]),n.on(i,r)},_unapplyEvents:function(e){for(var n,r,i,o=0;o<e.length;o++)n=e[o][0],2===e[o].length?(i=t,r=e[o][1]):3===e[o].length&&(i=e[o][1],r=e[o][2]),n.off(r,i)},_buildEvents:function(){var t={keyup:e.proxy(function(t){-1===e.inArray(t.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:e.proxy(this.keydown,this),paste:e.proxy(this.paste,this)};!0===this.o.showOnFocus&&(t.focus=e.proxy(this.show,this)),this.isInput?this._events=[[this.element,t]]:this.component&&this.inputField.length?this._events=[[this.inputField,t],[this.component,{click:e.proxy(this.show,this)}]]:this._events=[[this.element,{click:e.proxy(this.show,this),keydown:e.proxy(this.keydown,this)}]],this._events.push([this.element,"*",{blur:e.proxy(function(e){this._focused_from=e.target},this)}],[this.element,{blur:e.proxy(function(e){this._focused_from=e.target},this)}]),this.o.immediateUpdates&&this._events.push([this.element,{"changeYear changeMonth":e.proxy(function(e){this.update(e.date)},this)}]),this._secondaryEvents=[[this.picker,{click:e.proxy(this.click,this)}],[this.picker,".prev, .next",{click:e.proxy(this.navArrowsClick,this)}],[this.picker,".day:not(.disabled)",{click:e.proxy(this.dayCellClick,this)}],[e(window),{resize:e.proxy(this.place,this)}],[e(document),{"mousedown touchstart":e.proxy(function(e){this.element.is(e.target)||this.element.find(e.target).length||this.picker.is(e.target)||this.picker.find(e.target).length||this.isInline||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(t,n){var r=n||this.dates.get(-1),i=this._utc_to_local(r);this.element.trigger({type:t,date:i,viewMode:this.viewMode,dates:e.map(this.dates,this._utc_to_local),format:e.proxy(function(e,t){0===arguments.length?(e=this.dates.length-1,t=this.o.format):"string"==typeof e&&(t=e,e=this.dates.length-1),t=t||this.o.format;var n=this.dates.get(e);return v.formatDate(n,t,this.o.language)},this)})},show:function(){if(!(this.inputField.prop("disabled")||this.inputField.prop("readonly")&&!1===this.o.enableOnReadonly))return this.isInline||this.picker.appendTo(this.o.container),this.place(),this.picker.show(),this._attachSecondaryEvents(),this._trigger("show"),(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&this.o.disableTouchKeyboard&&e(this.element).blur(),this},hide:function(){return this.isInline||!this.picker.is(":visible")?this:(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.setViewMode(this.o.startView),this.o.forceParse&&this.inputField.val()&&this.setValue(),this._trigger("hide"),this)},destroy:function(){return this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date,this},paste:function(t){var n;if(t.originalEvent.clipboardData&&t.originalEvent.clipboardData.types&&-1!==e.inArray("text/plain",t.originalEvent.clipboardData.types))n=t.originalEvent.clipboardData.getData("text/plain");else{if(!window.clipboardData)return;n=window.clipboardData.getData("Text")}this.setDate(n),this.update(),t.preventDefault()},_utc_to_local:function(e){if(!e)return e;var t=new Date(e.getTime()+6e4*e.getTimezoneOffset());return t.getTimezoneOffset()!==e.getTimezoneOffset()&&(t=new Date(e.getTime()+6e4*t.getTimezoneOffset())),t},_local_to_utc:function(e){return e&&new Date(e.getTime()-6e4*e.getTimezoneOffset())},_zero_time:function(e){return e&&new Date(e.getFullYear(),e.getMonth(),e.getDate())},_zero_utc_time:function(e){return e&&n(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate())},getDates:function(){return e.map(this.dates,this._utc_to_local)},getUTCDates:function(){return e.map(this.dates,function(e){return new Date(e)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){var e=this.dates.get(-1);return e!==t?new Date(e):null},clearDates:function(){this.inputField.val(""),this.update(),this._trigger("changeDate"),this.o.autoclose&&this.hide()},setDates:function(){var t=e.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,t),this._trigger("changeDate"),this.setValue(),this},setUTCDates:function(){var t=e.isArray(arguments[0])?arguments[0]:arguments;return this.setDates.apply(this,e.map(t,this._utc_to_local)),this},setDate:o("setDates"),setUTCDate:o("setUTCDates"),remove:o("destroy","Method `remove` is deprecated and will be removed in version 2.0. Use `destroy` instead"),setValue:function(){var e=this.getFormattedDate();return this.inputField.val(e),this},getFormattedDate:function(n){n===t&&(n=this.o.format);var r=this.o.language;return e.map(this.dates,function(e){return v.formatDate(e,n,r)}).join(this.o.multidateSeparator)},getStartDate:function(){return this.o.startDate},setStartDate:function(e){return this._process_options({startDate:e}),this.update(),this.updateNavArrows(),this},getEndDate:function(){return this.o.endDate},setEndDate:function(e){return this._process_options({endDate:e}),this.update(),this.updateNavArrows(),this},setDaysOfWeekDisabled:function(e){return this._process_options({daysOfWeekDisabled:e}),this.update(),this},setDaysOfWeekHighlighted:function(e){return this._process_options({daysOfWeekHighlighted:e}),this.update(),this},setDatesDisabled:function(e){return this._process_options({datesDisabled:e}),this.update(),this},place:function(){if(this.isInline)return this;var t=this.picker.outerWidth(),n=this.picker.outerHeight(),r=e(this.o.container),i=r.width(),o="body"===this.o.container?e(document).scrollTop():r.scrollTop(),a=r.offset(),s=[0];this.element.parents().each(function(){var t=e(this).css("z-index");"auto"!==t&&0!==Number(t)&&s.push(Number(t))});var l=Math.max.apply(Math,s)+this.o.zIndexOffset,c=this.component?this.component.parent().offset():this.element.offset(),u=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),d=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),f=c.left-a.left,h=c.top-a.top;"body"!==this.o.container&&(h+=o),this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(f-=t-d)):c.left<0?(this.picker.addClass("datepicker-orient-left"),f-=c.left-10):f+t>i?(this.picker.addClass("datepicker-orient-right"),f+=d-t):this.o.rtl?this.picker.addClass("datepicker-orient-right"):this.picker.addClass("datepicker-orient-left");var p,g=this.o.orientation.y;if("auto"===g&&(p=-o+h-n,g=p<0?"bottom":"top"),this.picker.addClass("datepicker-orient-"+g),"top"===g?h-=n+parseInt(this.picker.css("padding-top")):h+=u,this.o.rtl){var m=i-(f+d);this.picker.css({top:h,right:m,zIndex:l})}else this.picker.css({top:h,left:f,zIndex:l});return this},_allow_update:!0,update:function(){if(!this._allow_update)return this;var t=this.dates.copy(),n=[],r=!1;return arguments.length?(e.each(arguments,e.proxy(function(e,t){t instanceof Date&&(t=this._local_to_utc(t)),n.push(t)},this)),r=!0):(n=this.isInput?this.element.val():this.element.data("date")||this.inputField.val(),n=n&&this.o.multidate?n.split(this.o.multidateSeparator):[n],delete this.element.data().date),n=e.map(n,e.proxy(function(e){return v.parseDate(e,this.o.format,this.o.language,this.o.assumeNearbyYear)},this)),n=e.grep(n,e.proxy(function(e){return!this.dateWithinRange(e)||!e},this),!0),this.dates.replace(n),this.o.updateViewDate&&(this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate?this.viewDate=new Date(this.o.endDate):this.viewDate=this.o.defaultViewDate),r?(this.setValue(),this.element.change()):this.dates.length&&String(t)!==String(this.dates)&&r&&(this._trigger("changeDate"),this.element.change()),!this.dates.length&&t.length&&(this._trigger("clearDate"),this.element.change()),this.fill(),this},fillDow:function(){if(this.o.showWeekDays){var t=this.o.weekStart,n="<tr>";for(this.o.calendarWeeks&&(n+='<th class="cw">&#160;</th>');t<this.o.weekStart+7;)n+='<th class="dow',-1!==e.inArray(t,this.o.daysOfWeekDisabled)&&(n+=" disabled"),n+='">'+m[this.o.language].daysMin[t++%7]+"</th>";n+="</tr>",this.picker.find(".datepicker-days thead").append(n)}},fillMonths:function(){for(var e,t=this._utc_to_local(this.viewDate),n="",r=0;r<12;r++)e=t&&t.getMonth()===r?" focused":"",n+='<span class="month'+e+'">'+m[this.o.language].monthsShort[r]+"</span>";this.picker.find(".datepicker-months td").html(n)},setRange:function(t){t&&t.length?this.range=e.map(t,function(e){return e.valueOf()}):delete this.range,this.fill()},getClassNames:function(t){var n=[],o=this.viewDate.getUTCFullYear(),a=this.viewDate.getUTCMonth(),s=r();return t.getUTCFullYear()<o||t.getUTCFullYear()===o&&t.getUTCMonth()<a?n.push("old"):(t.getUTCFullYear()>o||t.getUTCFullYear()===o&&t.getUTCMonth()>a)&&n.push("new"),this.focusDate&&t.valueOf()===this.focusDate.valueOf()&&n.push("focused"),this.o.todayHighlight&&i(t,s)&&n.push("today"),-1!==this.dates.contains(t)&&n.push("active"),this.dateWithinRange(t)||n.push("disabled"),this.dateIsDisabled(t)&&n.push("disabled","disabled-date"),-1!==e.inArray(t.getUTCDay(),this.o.daysOfWeekHighlighted)&&n.push("highlighted"),this.range&&(t>this.range[0]&&t<this.range[this.range.length-1]&&n.push("range"),-1!==e.inArray(t.valueOf(),this.range)&&n.push("selected"),t.valueOf()===this.range[0]&&n.push("range-start"),t.valueOf()===this.range[this.range.length-1]&&n.push("range-end")),n},_fill_yearsView:function(n,r,i,o,a,s,l){for(var c,u,d,f="",h=i/10,p=this.picker.find(n),g=Math.floor(o/i)*i,m=g+9*h,v=Math.floor(this.viewDate.getFullYear()/h)*h,b=e.map(this.dates,function(e){return Math.floor(e.getUTCFullYear()/h)*h}),y=g-h;y<=m+h;y+=h)c=[r],u=null,y===g-h?c.push("old"):y===m+h&&c.push("new"),-1!==e.inArray(y,b)&&c.push("active"),(y<a||y>s)&&c.push("disabled"),y===v&&c.push("focused"),l!==e.noop&&(d=l(new Date(y,0,1)),d===t?d={}:"boolean"==typeof d?d={enabled:d}:"string"==typeof d&&(d={classes:d}),!1===d.enabled&&c.push("disabled"),d.classes&&(c=c.concat(d.classes.split(/\s+/))),d.tooltip&&(u=d.tooltip)),f+='<span class="'+c.join(" ")+'"'+(u?' title="'+u+'"':"")+">"+y+"</span>";p.find(".datepicker-switch").text(g+"-"+m),p.find("td").html(f)},fill:function(){var r,i,o=new Date(this.viewDate),a=o.getUTCFullYear(),s=o.getUTCMonth(),l=this.o.startDate!==-1/0?this.o.startDate.getUTCFullYear():-1/0,c=this.o.startDate!==-1/0?this.o.startDate.getUTCMonth():-1/0,u=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,d=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0,f=m[this.o.language].today||m.en.today||"",h=m[this.o.language].clear||m.en.clear||"",p=m[this.o.language].titleFormat||m.en.titleFormat;if(!isNaN(a)&&!isNaN(s)){this.picker.find(".datepicker-days .datepicker-switch").text(v.formatDate(o,p,this.o.language)),this.picker.find("tfoot .today").text(f).css("display",!0===this.o.todayBtn||"linked"===this.o.todayBtn?"table-cell":"none"),this.picker.find("tfoot .clear").text(h).css("display",!0===this.o.clearBtn?"table-cell":"none"),this.picker.find("thead .datepicker-title").text(this.o.title).css("display","string"==typeof this.o.title&&""!==this.o.title?"table-cell":"none"),this.updateNavArrows(),this.fillMonths();var g=n(a,s,0),b=g.getUTCDate();g.setUTCDate(b-(g.getUTCDay()-this.o.weekStart+7)%7);var y=new Date(g);g.getUTCFullYear()<100&&y.setUTCFullYear(g.getUTCFullYear()),y.setUTCDate(y.getUTCDate()+42),y=y.valueOf();for(var w,_,x=[];g.valueOf()<y;){if((w=g.getUTCDay())===this.o.weekStart&&(x.push("<tr>"),this.o.calendarWeeks)){var C=new Date(+g+(this.o.weekStart-w-7)%7*864e5),k=new Date(Number(C)+(11-C.getUTCDay())%7*864e5),T=new Date(Number(T=n(k.getUTCFullYear(),0,1))+(11-T.getUTCDay())%7*864e5),S=(k-T)/864e5/7+1;x.push('<td class="cw">'+S+"</td>")}_=this.getClassNames(g),_.push("day");var D=g.getUTCDate();this.o.beforeShowDay!==e.noop&&(i=this.o.beforeShowDay(this._utc_to_local(g)),i===t?i={}:"boolean"==typeof i?i={enabled:i}:"string"==typeof i&&(i={classes:i}),!1===i.enabled&&_.push("disabled"),i.classes&&(_=_.concat(i.classes.split(/\s+/))),i.tooltip&&(r=i.tooltip),i.content&&(D=i.content)),_=e.isFunction(e.uniqueSort)?e.uniqueSort(_):e.unique(_),x.push('<td class="'+_.join(" ")+'"'+(r?' title="'+r+'"':"")+' data-date="'+g.getTime().toString()+'">'+D+"</td>"),r=null,w===this.o.weekEnd&&x.push("</tr>"),g.setUTCDate(g.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").html(x.join(""));var E=m[this.o.language].monthsTitle||m.en.monthsTitle||"Months",N=this.picker.find(".datepicker-months").find(".datepicker-switch").text(this.o.maxViewMode<2?E:a).end().find("tbody span").removeClass("active");if(e.each(this.dates,function(e,t){t.getUTCFullYear()===a&&N.eq(t.getUTCMonth()).addClass("active")}),(a<l||a>u)&&N.addClass("disabled"),a===l&&N.slice(0,c).addClass("disabled"),a===u&&N.slice(d+1).addClass("disabled"),this.o.beforeShowMonth!==e.noop){var A=this;e.each(N,function(n,r){var i=new Date(a,n,1),o=A.o.beforeShowMonth(i);o===t?o={}:"boolean"==typeof o?o={enabled:o}:"string"==typeof o&&(o={classes:o}),!1!==o.enabled||e(r).hasClass("disabled")||e(r).addClass("disabled"),o.classes&&e(r).addClass(o.classes),o.tooltip&&e(r).prop("title",o.tooltip)})}this._fill_yearsView(".datepicker-years","year",10,a,l,u,this.o.beforeShowYear),this._fill_yearsView(".datepicker-decades","decade",100,a,l,u,this.o.beforeShowDecade),this._fill_yearsView(".datepicker-centuries","century",1e3,a,l,u,this.o.beforeShowCentury)}},updateNavArrows:function(){if(this._allow_update){var e,t,n=new Date(this.viewDate),r=n.getUTCFullYear(),i=n.getUTCMonth(),o=this.o.startDate!==-1/0?this.o.startDate.getUTCFullYear():-1/0,a=this.o.startDate!==-1/0?this.o.startDate.getUTCMonth():-1/0,s=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,l=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0,c=1;switch(this.viewMode){case 4:c*=10;case 3:c*=10;case 2:c*=10;case 1:e=Math.floor(r/c)*c<o,t=Math.floor(r/c)*c+c>s;break;case 0:e=r<=o&&i<a,t=r>=s&&i>l}this.picker.find(".prev").toggleClass("disabled",e),this.picker.find(".next").toggleClass("disabled",t)}},click:function(t){t.preventDefault(),t.stopPropagation();var i,o,a,s;i=e(t.target),
i.hasClass("datepicker-switch")&&this.viewMode!==this.o.maxViewMode&&this.setViewMode(this.viewMode+1),i.hasClass("today")&&!i.hasClass("day")&&(this.setViewMode(0),this._setDate(r(),"linked"===this.o.todayBtn?null:"view")),i.hasClass("clear")&&this.clearDates(),i.hasClass("disabled")||(i.hasClass("month")||i.hasClass("year")||i.hasClass("decade")||i.hasClass("century"))&&(this.viewDate.setUTCDate(1),o=1,1===this.viewMode?(s=i.parent().find("span").index(i),a=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(s)):(s=0,a=Number(i.text()),this.viewDate.setUTCFullYear(a)),this._trigger(v.viewModes[this.viewMode-1].e,this.viewDate),this.viewMode===this.o.minViewMode?this._setDate(n(a,s,o)):(this.setViewMode(this.viewMode-1),this.fill())),this.picker.is(":visible")&&this._focused_from&&this._focused_from.focus(),delete this._focused_from},dayCellClick:function(t){var n=e(t.currentTarget),r=n.data("date"),i=new Date(r);this.o.updateViewDate&&(i.getUTCFullYear()!==this.viewDate.getUTCFullYear()&&this._trigger("changeYear",this.viewDate),i.getUTCMonth()!==this.viewDate.getUTCMonth()&&this._trigger("changeMonth",this.viewDate)),this._setDate(i)},navArrowsClick:function(t){var n=e(t.currentTarget),r=n.hasClass("prev")?-1:1;0!==this.viewMode&&(r*=12*v.viewModes[this.viewMode].navStep),this.viewDate=this.moveMonth(this.viewDate,r),this._trigger(v.viewModes[this.viewMode].e,this.viewDate),this.fill()},_toggle_multidate:function(e){var t=this.dates.contains(e);if(e||this.dates.clear(),-1!==t?(!0===this.o.multidate||this.o.multidate>1||this.o.toggleActive)&&this.dates.remove(t):!1===this.o.multidate?(this.dates.clear(),this.dates.push(e)):this.dates.push(e),"number"==typeof this.o.multidate)for(;this.dates.length>this.o.multidate;)this.dates.remove(0)},_setDate:function(e,t){t&&"date"!==t||this._toggle_multidate(e&&new Date(e)),(!t&&this.o.updateViewDate||"view"===t)&&(this.viewDate=e&&new Date(e)),this.fill(),this.setValue(),t&&"view"===t||this._trigger("changeDate"),this.inputField.trigger("change"),!this.o.autoclose||t&&"date"!==t||this.hide()},moveDay:function(e,t){var n=new Date(e);return n.setUTCDate(e.getUTCDate()+t),n},moveWeek:function(e,t){return this.moveDay(e,7*t)},moveMonth:function(e,t){if(!a(e))return this.o.defaultViewDate;if(!t)return e;var n,r,i=new Date(e.valueOf()),o=i.getUTCDate(),s=i.getUTCMonth(),l=Math.abs(t);if(t=t>0?1:-1,1===l)r=-1===t?function(){return i.getUTCMonth()===s}:function(){return i.getUTCMonth()!==n},n=s+t,i.setUTCMonth(n),n=(n+12)%12;else{for(var c=0;c<l;c++)i=this.moveMonth(i,t);n=i.getUTCMonth(),i.setUTCDate(o),r=function(){return n!==i.getUTCMonth()}}for(;r();)i.setUTCDate(--o),i.setUTCMonth(n);return i},moveYear:function(e,t){return this.moveMonth(e,12*t)},moveAvailableDate:function(e,t,n){do{if(e=this[n](e,t),!this.dateWithinRange(e))return!1;n="moveDay"}while(this.dateIsDisabled(e));return e},weekOfDateIsDisabled:function(t){return-1!==e.inArray(t.getUTCDay(),this.o.daysOfWeekDisabled)},dateIsDisabled:function(t){return this.weekOfDateIsDisabled(t)||e.grep(this.o.datesDisabled,function(e){return i(t,e)}).length>0},dateWithinRange:function(e){return e>=this.o.startDate&&e<=this.o.endDate},keydown:function(e){if(!this.picker.is(":visible"))return void(40!==e.keyCode&&27!==e.keyCode||(this.show(),e.stopPropagation()));var t,n,r=!1,i=this.focusDate||this.viewDate;switch(e.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide(),e.preventDefault(),e.stopPropagation();break;case 37:case 38:case 39:case 40:if(!this.o.keyboardNavigation||7===this.o.daysOfWeekDisabled.length)break;t=37===e.keyCode||38===e.keyCode?-1:1,0===this.viewMode?e.ctrlKey?(n=this.moveAvailableDate(i,t,"moveYear"))&&this._trigger("changeYear",this.viewDate):e.shiftKey?(n=this.moveAvailableDate(i,t,"moveMonth"))&&this._trigger("changeMonth",this.viewDate):37===e.keyCode||39===e.keyCode?n=this.moveAvailableDate(i,t,"moveDay"):this.weekOfDateIsDisabled(i)||(n=this.moveAvailableDate(i,t,"moveWeek")):1===this.viewMode?(38!==e.keyCode&&40!==e.keyCode||(t*=4),n=this.moveAvailableDate(i,t,"moveMonth")):2===this.viewMode&&(38!==e.keyCode&&40!==e.keyCode||(t*=4),n=this.moveAvailableDate(i,t,"moveYear")),n&&(this.focusDate=this.viewDate=n,this.setValue(),this.fill(),e.preventDefault());break;case 13:if(!this.o.forceParse)break;i=this.focusDate||this.dates.get(-1)||this.viewDate,this.o.keyboardNavigation&&(this._toggle_multidate(i),r=!0),this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.setValue(),this.fill(),this.picker.is(":visible")&&(e.preventDefault(),e.stopPropagation(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}r&&(this.dates.length?this._trigger("changeDate"):this._trigger("clearDate"),this.inputField.trigger("change"))},setViewMode:function(e){this.viewMode=e,this.picker.children("div").hide().filter(".datepicker-"+v.viewModes[this.viewMode].clsName).show(),this.updateNavArrows(),this._trigger("changeViewMode",new Date(this.viewDate))}};var d=function(t,n){e.data(t,"datepicker",this),this.element=e(t),this.inputs=e.map(n.inputs,function(e){return e.jquery?e[0]:e}),delete n.inputs,this.keepEmptyValues=n.keepEmptyValues,delete n.keepEmptyValues,h.call(e(this.inputs),n).on("changeDate",e.proxy(this.dateUpdated,this)),this.pickers=e.map(this.inputs,function(t){return e.data(t,"datepicker")}),this.updateDates()};d.prototype={updateDates:function(){this.dates=e.map(this.pickers,function(e){return e.getUTCDate()}),this.updateRanges()},updateRanges:function(){var t=e.map(this.dates,function(e){return e.valueOf()});e.each(this.pickers,function(e,n){n.setRange(t)})},clearDates:function(){e.each(this.pickers,function(e,t){t.clearDates()})},dateUpdated:function(n){if(!this.updating){this.updating=!0;var r=e.data(n.target,"datepicker");if(r!==t){var i=r.getUTCDate(),o=this.keepEmptyValues,a=e.inArray(n.target,this.inputs),s=a-1,l=a+1,c=this.inputs.length;if(-1!==a){if(e.each(this.pickers,function(e,t){t.getUTCDate()||t!==r&&o||t.setUTCDate(i)}),i<this.dates[s])for(;s>=0&&i<this.dates[s];)this.pickers[s--].setUTCDate(i);else if(i>this.dates[l])for(;l<c&&i>this.dates[l];)this.pickers[l++].setUTCDate(i);this.updateDates(),delete this.updating}}}},destroy:function(){e.map(this.pickers,function(e){e.destroy()}),e(this.inputs).off("changeDate",this.dateUpdated),delete this.element.data().datepicker},remove:o("destroy","Method `remove` is deprecated and will be removed in version 2.0. Use `destroy` instead")};var f=e.fn.datepicker,h=function(n){var r=Array.apply(null,arguments);r.shift();var i;if(this.each(function(){var t=e(this),o=t.data("datepicker"),a="object"==typeof n&&n;if(!o){var c=s(this,"date"),f=e.extend({},p,c,a),h=l(f.language),g=e.extend({},p,h,c,a);t.hasClass("input-daterange")||g.inputs?(e.extend(g,{inputs:g.inputs||t.find("input").toArray()}),o=new d(this,g)):o=new u(this,g),t.data("datepicker",o)}"string"==typeof n&&"function"==typeof o[n]&&(i=o[n].apply(o,r))}),i===t||i instanceof u||i instanceof d)return this;if(this.length>1)throw new Error("Using only allowed for the collection of a single element ("+n+" function)");return i};e.fn.datepicker=h;var p=e.fn.datepicker.defaults={assumeNearbyYear:!1,autoclose:!1,beforeShowDay:e.noop,beforeShowMonth:e.noop,beforeShowYear:e.noop,beforeShowDecade:e.noop,beforeShowCentury:e.noop,calendarWeeks:!1,clearBtn:!1,toggleActive:!1,daysOfWeekDisabled:[],daysOfWeekHighlighted:[],datesDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keepEmptyValues:!1,keyboardNavigation:!0,language:"en",minViewMode:0,maxViewMode:4,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-1/0,startView:0,todayBtn:!1,todayHighlight:!1,updateViewDate:!0,weekStart:0,disableTouchKeyboard:!1,enableOnReadonly:!0,showOnFocus:!0,zIndexOffset:10,container:"body",immediateUpdates:!1,title:"",templates:{leftArrow:"&#x00AB;",rightArrow:"&#x00BB;"},showWeekDays:!0},g=e.fn.datepicker.locale_opts=["format","rtl","weekStart"];e.fn.datepicker.Constructor=u;var m=e.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",titleFormat:"MM yyyy"}},v={viewModes:[{names:["days","month"],clsName:"days",e:"changeMonth"},{names:["months","year"],clsName:"months",e:"changeYear",navStep:1},{names:["years","decade"],clsName:"years",e:"changeDecade",navStep:10},{names:["decades","century"],clsName:"decades",e:"changeCentury",navStep:100},{names:["centuries","millennium"],clsName:"centuries",e:"changeMillennium",navStep:1e3}],validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\u5e74\u6708\u65e5\[-`{-~\t\n\r]+/g,parseFormat:function(e){if("function"==typeof e.toValue&&"function"==typeof e.toDisplay)return e;var t=e.replace(this.validParts,"\0").split("\0"),n=e.match(this.validParts);if(!t||!t.length||!n||0===n.length)throw new Error("Invalid date format.");return{separators:t,parts:n}},parseDate:function(n,i,o,a){function s(e,t){return!0===t&&(t=10),e<100&&(e+=2e3)>(new Date).getFullYear()+t&&(e-=100),e}function l(){var e=this.slice(0,c[h].length),t=c[h].slice(0,e.length);return e.toLowerCase()===t.toLowerCase()}if(!n)return t;if(n instanceof Date)return n;if("string"==typeof i&&(i=v.parseFormat(i)),i.toValue)return i.toValue(n,i,o);var c,d,f,h,p,g={d:"moveDay",m:"moveMonth",w:"moveWeek",y:"moveYear"},b={yesterday:"-1d",today:"+0d",tomorrow:"+1d"};if(n in b&&(n=b[n]),/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/i.test(n)){for(c=n.match(/([\-+]\d+)([dmwy])/gi),n=new Date,h=0;h<c.length;h++)d=c[h].match(/([\-+]\d+)([dmwy])/i),f=Number(d[1]),p=g[d[2].toLowerCase()],n=u.prototype[p](n,f);return u.prototype._zero_utc_time(n)}c=n&&n.match(this.nonpunctuation)||[];var y,w,_={},x=["yyyy","yy","M","MM","m","mm","d","dd"],C={yyyy:function(e,t){return e.setUTCFullYear(a?s(t,a):t)},m:function(e,t){if(isNaN(e))return e;for(t-=1;t<0;)t+=12;for(t%=12,e.setUTCMonth(t);e.getUTCMonth()!==t;)e.setUTCDate(e.getUTCDate()-1);return e},d:function(e,t){return e.setUTCDate(t)}};C.yy=C.yyyy,C.M=C.MM=C.mm=C.m,C.dd=C.d,n=r();var k=i.parts.slice();if(c.length!==k.length&&(k=e(k).filter(function(t,n){return-1!==e.inArray(n,x)}).toArray()),c.length===k.length){var T;for(h=0,T=k.length;h<T;h++){if(y=parseInt(c[h],10),d=k[h],isNaN(y))switch(d){case"MM":w=e(m[o].months).filter(l),y=e.inArray(w[0],m[o].months)+1;break;case"M":w=e(m[o].monthsShort).filter(l),y=e.inArray(w[0],m[o].monthsShort)+1}_[d]=y}var S,D;for(h=0;h<x.length;h++)(D=x[h])in _&&!isNaN(_[D])&&(S=new Date(n),C[D](S,_[D]),isNaN(S)||(n=S))}return n},formatDate:function(t,n,r){if(!t)return"";if("string"==typeof n&&(n=v.parseFormat(n)),n.toDisplay)return n.toDisplay(t,n,r);var i={d:t.getUTCDate(),D:m[r].daysShort[t.getUTCDay()],DD:m[r].days[t.getUTCDay()],m:t.getUTCMonth()+1,M:m[r].monthsShort[t.getUTCMonth()],MM:m[r].months[t.getUTCMonth()],yy:t.getUTCFullYear().toString().substring(2),yyyy:t.getUTCFullYear()};i.dd=(i.d<10?"0":"")+i.d,i.mm=(i.m<10?"0":"")+i.m,t=[];for(var o=e.extend([],n.separators),a=0,s=n.parts.length;a<=s;a++)o.length&&t.push(o.shift()),t.push(i[n.parts[a]]);return t.join("")},headTemplate:'<thead><tr><th colspan="7" class="datepicker-title"></th></tr><tr><th class="prev">'+p.templates.leftArrow+'</th><th colspan="5" class="datepicker-switch"></th><th class="next">'+p.templates.rightArrow+"</th></tr></thead>",contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};v.template='<div class="datepicker"><div class="datepicker-days"><table class="table-condensed">'+v.headTemplate+"<tbody></tbody>"+v.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+v.headTemplate+v.contTemplate+v.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+v.headTemplate+v.contTemplate+v.footTemplate+'</table></div><div class="datepicker-decades"><table class="table-condensed">'+v.headTemplate+v.contTemplate+v.footTemplate+'</table></div><div class="datepicker-centuries"><table class="table-condensed">'+v.headTemplate+v.contTemplate+v.footTemplate+"</table></div></div>",e.fn.datepicker.DPGlobal=v,e.fn.datepicker.noConflict=function(){return e.fn.datepicker=f,this},e.fn.datepicker.version="1.8.0",e.fn.datepicker.deprecated=function(e){var t=window.console;t&&t.warn&&t.warn("DEPRECATED: "+e)},e(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(t){var n=e(this);n.data("datepicker")||(t.preventDefault(),h.call(n,"show"))}),e(function(){h.call(e('[data-provide="datepicker-inline"]'))})}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],function(t){return e(t,window,document)}):"object"==typeof exports?module.exports=function(t,n){return t||(t=window),n||(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n,t,t.document)}:e(jQuery,window,document)}(function(e,t,n,r){"use strict";function i(t){var n,r,o="a aa ai ao as b fn i m o s ",a={};e.each(t,function(e,s){(n=e.match(/^([^A-Z]+?)([A-Z])/))&&-1!==o.indexOf(n[1]+" ")&&(r=e.replace(n[0],n[2].toLowerCase()),a[r]=e,"o"===n[1]&&i(t[e]))}),t._hungarianMap=a}function o(t,n,a){t._hungarianMap||i(t);var s;e.each(n,function(i,l){(s=t._hungarianMap[i])===r||!a&&n[s]!==r||("o"===s.charAt(0)?(n[s]||(n[s]={}),e.extend(!0,n[s],n[i]),o(t[s],n[s],a)):n[s]=n[i])})}function a(e){var t=Ge.defaults.oLanguage,n=t.sDecimal;if(n&&Ue(n),e){var r=e.sZeroRecords;!e.sEmptyTable&&r&&"No data available in table"===t.sEmptyTable&&Oe(e,e,"sZeroRecords","sEmptyTable"),!e.sLoadingRecords&&r&&"Loading..."===t.sLoadingRecords&&Oe(e,e,"sZeroRecords","sLoadingRecords"),e.sInfoThousands&&(e.sThousands=e.sInfoThousands);var i=e.sDecimal;i&&n!==i&&Ue(i)}}function s(e){pt(e,"ordering","bSort"),pt(e,"orderMulti","bSortMulti"),pt(e,"orderClasses","bSortClasses"),pt(e,"orderCellsTop","bSortCellsTop"),pt(e,"order","aaSorting"),pt(e,"orderFixed","aaSortingFixed"),pt(e,"paging","bPaginate"),pt(e,"pagingType","sPaginationType"),pt(e,"pageLength","iDisplayLength"),pt(e,"searching","bFilter"),"boolean"==typeof e.sScrollX&&(e.sScrollX=e.sScrollX?"100%":""),"boolean"==typeof e.scrollX&&(e.scrollX=e.scrollX?"100%":"");var t=e.aoSearchCols;if(t)for(var n=0,r=t.length;n<r;n++)t[n]&&o(Ge.models.oSearch,t[n])}function l(t){pt(t,"orderable","bSortable"),pt(t,"orderData","aDataSort"),pt(t,"orderSequence","asSorting"),pt(t,"orderDataType","sortDataType");var n=t.aDataSort;"number"!=typeof n||e.isArray(n)||(t.aDataSort=[n])}function c(n){if(!Ge.__browser){var r={};Ge.__browser=r;var i=e("<div/>").css({position:"fixed",top:0,left:-1*e(t).scrollLeft(),height:1,width:1,overflow:"hidden"}).append(e("<div/>").css({position:"absolute",top:1,left:1,width:100,overflow:"scroll"}).append(e("<div/>").css({width:"100%",height:10}))).appendTo("body"),o=i.children(),a=o.children();r.barWidth=o[0].offsetWidth-o[0].clientWidth,r.bScrollOversize=100===a[0].offsetWidth&&100!==o[0].clientWidth,r.bScrollbarLeft=1!==Math.round(a.offset().left),r.bBounding=!!i[0].getBoundingClientRect().width,i.remove()}e.extend(n.oBrowser,Ge.__browser),n.oScroll.iBarWidth=Ge.__browser.barWidth}function u(e,t,n,i,o,a){var s,l=i,c=!1;for(n!==r&&(s=n,c=!0);l!==o;)e.hasOwnProperty(l)&&(s=c?t(s,e[l],l,e):e[l],c=!0,l+=a);return s}function d(t,r){var i=Ge.defaults.column,o=t.aoColumns.length,a=e.extend({},Ge.models.oColumn,i,{nTh:r||n.createElement("th"),sTitle:i.sTitle?i.sTitle:r?r.innerHTML:"",aDataSort:i.aDataSort?i.aDataSort:[o],mData:i.mData?i.mData:o,idx:o});t.aoColumns.push(a);var s=t.aoPreSearchCols;s[o]=e.extend({},Ge.models.oSearch,s[o]),f(t,o,e(r).data())}function f(t,n,i){var a=t.aoColumns[n],s=t.oClasses,c=e(a.nTh);if(!a.sWidthOrig){a.sWidthOrig=c.attr("width")||null;var u=(c.attr("style")||"").match(/width:\s*(\d+[pxem%]+)/);u&&(a.sWidthOrig=u[1])}i!==r&&null!==i&&(l(i),o(Ge.defaults.column,i),i.mDataProp===r||i.mData||(i.mData=i.mDataProp),i.sType&&(a._sManualType=i.sType),i.className&&!i.sClass&&(i.sClass=i.className),i.sClass&&c.addClass(i.sClass),e.extend(a,i),Oe(a,i,"sWidth","sWidthOrig"),i.iDataSort!==r&&(a.aDataSort=[i.iDataSort]),Oe(a,i,"aDataSort"));var d=a.mData,f=D(d),h=a.mRender?D(a.mRender):null,p=function(e){return"string"==typeof e&&-1!==e.indexOf("@")};a._bAttrSrc=e.isPlainObject(d)&&(p(d.sort)||p(d.type)||p(d.filter)),a._setter=null,a.fnGetData=function(e,t,n){var i=f(e,t,r,n);return h&&t?h(i,t,e,n):i},a.fnSetData=function(e,t,n){return E(d)(e,t,n)},"number"!=typeof d&&(t._rowReadObject=!0),t.oFeatures.bSort||(a.bSortable=!1,c.addClass(s.sSortableNone));var g=-1!==e.inArray("asc",a.asSorting),m=-1!==e.inArray("desc",a.asSorting);a.bSortable&&(g||m)?g&&!m?(a.sSortingClass=s.sSortableAsc,a.sSortingClassJUI=s.sSortJUIAscAllowed):!g&&m?(a.sSortingClass=s.sSortableDesc,a.sSortingClassJUI=s.sSortJUIDescAllowed):(a.sSortingClass=s.sSortable,a.sSortingClassJUI=s.sSortJUI):(a.sSortingClass=s.sSortableNone,a.sSortingClassJUI="")}function h(e){if(!1!==e.oFeatures.bAutoWidth){var t=e.aoColumns;ve(e);for(var n=0,r=t.length;n<r;n++)t[n].nTh.style.width=t[n].sWidth}var i=e.oScroll;""===i.sY&&""===i.sX||ge(e),Be(e,null,"column-sizing",[e])}function p(e,t){var n=v(e,"bVisible");return"number"==typeof n[t]?n[t]:null}function g(t,n){var r=v(t,"bVisible"),i=e.inArray(n,r);return-1!==i?i:null}function m(t){var n=0;return e.each(t.aoColumns,function(t,r){r.bVisible&&"none"!==e(r.nTh).css("display")&&n++}),n}function v(t,n){var r=[];return e.map(t.aoColumns,function(e,t){e[n]&&r.push(t)}),r}function b(e){var t,n,i,o,a,s,l,c,u,d=e.aoColumns,f=e.aoData,h=Ge.ext.type.detect;for(t=0,n=d.length;t<n;t++)if(l=d[t],u=[],!l.sType&&l._sManualType)l.sType=l._sManualType;else if(!l.sType){for(i=0,o=h.length;i<o;i++){for(a=0,s=f.length;a<s&&(u[a]===r&&(u[a]=k(e,a,t,"type")),(c=h[i](u[a],e))||i===h.length-1)&&"html"!==c;a++);if(c){l.sType=c;break}}l.sType||(l.sType="string")}}function y(t,n,i,o){var a,s,l,c,u,f,h,p=t.aoColumns;if(n)for(a=n.length-1;a>=0;a--){h=n[a];var g=h.targets!==r?h.targets:h.aTargets;for(e.isArray(g)||(g=[g]),l=0,c=g.length;l<c;l++)if("number"==typeof g[l]&&g[l]>=0){for(;p.length<=g[l];)d(t);o(g[l],h)}else if("number"==typeof g[l]&&g[l]<0)o(p.length+g[l],h);else if("string"==typeof g[l])for(u=0,f=p.length;u<f;u++)("_all"==g[l]||e(p[u].nTh).hasClass(g[l]))&&o(u,h)}if(i)for(a=0,s=i.length;a<s;a++)o(a,i[a])}function w(t,n,i,o){var a=t.aoData.length,s=e.extend(!0,{},Ge.models.oRow,{src:i?"dom":"data",idx:a});s._aData=n,t.aoData.push(s);for(var l=t.aoColumns,c=0,u=l.length;c<u;c++)l[c].sType=null;t.aiDisplayMaster.push(a);var d=t.rowIdFn(n);return d!==r&&(t.aIds[d]=s),!i&&t.oFeatures.bDeferRender||I(t,a,i,o),a}function _(t,n){var r;return n instanceof e||(n=e(n)),n.map(function(e,n){return r=O(t,n),w(t,r.data,n,r.cells)})}function x(e,t){return t._DT_RowIndex!==r?t._DT_RowIndex:null}function C(t,n,r){return e.inArray(r,t.aoData[n].anCells)}function k(e,t,n,i){var o=e.iDraw,a=e.aoColumns[n],s=e.aoData[t]._aData,l=a.sDefaultContent,c=a.fnGetData(s,i,{settings:e,row:t,col:n});if(c===r)return e.iDrawError!=o&&null===l&&(Pe(e,0,"Requested unknown parameter "+("function"==typeof a.mData?"{function}":"'"+a.mData+"'")+" for row "+t+", column "+n,4),e.iDrawError=o),l;if(c!==s&&null!==c||null===l||i===r){if("function"==typeof c)return c.call(s)}else c=l;return null===c&&"display"==i?"":c}function T(e,t,n,r){var i=e.aoColumns[n],o=e.aoData[t]._aData;i.fnSetData(o,r,{settings:e,row:t,col:n})}function S(t){return e.map(t.match(/(\\.|[^\.])+/g)||[""],function(e){return e.replace(/\\\./g,".")})}function D(t){if(e.isPlainObject(t)){var n={};return e.each(t,function(e,t){t&&(n[e]=D(t))}),function(e,t,i,o){var a=n[t]||n._;return a!==r?a(e,t,i,o):e}}if(null===t)return function(e){return e};if("function"==typeof t)return function(e,n,r,i){return t(e,n,r,i)};if("string"!=typeof t||-1===t.indexOf(".")&&-1===t.indexOf("[")&&-1===t.indexOf("("))return function(e,n){return e[t]};var i=function(t,n,o){var a,s,l,c;if(""!==o)for(var u=S(o),d=0,f=u.length;d<f;d++){if(a=u[d].match(gt),s=u[d].match(mt),a){if(u[d]=u[d].replace(gt,""),""!==u[d]&&(t=t[u[d]]),l=[],u.splice(0,d+1),c=u.join("."),e.isArray(t))for(var h=0,p=t.length;h<p;h++)l.push(i(t[h],n,c));var g=a[0].substring(1,a[0].length-1);t=""===g?l:l.join(g);break}if(s)u[d]=u[d].replace(mt,""),t=t[u[d]]();else{if(null===t||t[u[d]]===r)return r;t=t[u[d]]}}return t};return function(e,n){return i(e,n,t)}}function E(t){if(e.isPlainObject(t))return E(t._);if(null===t)return function(){};if("function"==typeof t)return function(e,n,r){t(e,"set",n,r)};if("string"!=typeof t||-1===t.indexOf(".")&&-1===t.indexOf("[")&&-1===t.indexOf("("))return function(e,n){e[t]=n};var n=function(t,i,o){for(var a,s,l,c,u,d=S(o),f=d[d.length-1],h=0,p=d.length-1;h<p;h++){if(s=d[h].match(gt),l=d[h].match(mt),s){if(d[h]=d[h].replace(gt,""),t[d[h]]=[],a=d.slice(),a.splice(0,h+1),u=a.join("."),e.isArray(i))for(var g=0,m=i.length;g<m;g++)c={},n(c,i[g],u),t[d[h]].push(c);else t[d[h]]=i;return}l&&(d[h]=d[h].replace(mt,""),t=t[d[h]](i)),null!==t[d[h]]&&t[d[h]]!==r||(t[d[h]]={}),t=t[d[h]]}f.match(mt)?t=t[f.replace(mt,"")](i):t[f.replace(gt,"")]=i};return function(e,r){return n(e,r,t)}}function N(e){return st(e.aoData,"_aData")}function A(e){e.aoData.length=0,e.aiDisplayMaster.length=0,e.aiDisplay.length=0,e.aIds={}}function R(e,t,n){for(var i=-1,o=0,a=e.length;o<a;o++)e[o]==t?i=o:e[o]>t&&e[o]--;-1!=i&&n===r&&e.splice(i,1)}function P(e,t,n,i){var o,a,s=e.aoData[t],l=function(n,r){for(;n.childNodes.length;)n.removeChild(n.firstChild);n.innerHTML=k(e,t,r,"display")};if("dom"!==n&&(n&&"auto"!==n||"dom"!==s.src)){var c=s.anCells;if(c)if(i!==r)l(c[i],i);else for(o=0,a=c.length;o<a;o++)l(c[o],o)}else s._aData=O(e,s,i,i===r?r:s._aData).data;s._aSortData=null,s._aFilterData=null;var u=e.aoColumns;if(i!==r)u[i].sType=null;else{for(o=0,a=u.length;o<a;o++)u[o].sType=null;M(e,s)}}function O(t,n,i,o){var a,s,l,c=[],u=n.firstChild,d=0,f=t.aoColumns,h=t._rowReadObject;o=o!==r?o:h?{}:[];var p=function(e,t){if("string"==typeof e){var n=e.indexOf("@");if(-1!==n){var r=e.substring(n+1);E(e)(o,t.getAttribute(r))}}},g=function(t){if(i===r||i===d)if(s=f[d],l=e.trim(t.innerHTML),s&&s._bAttrSrc){var n=E(s.mData._);n(o,l),p(s.mData.sort,t),p(s.mData.type,t),p(s.mData.filter,t)}else h?(s._setter||(s._setter=E(s.mData)),s._setter(o,l)):o[d]=l;d++};if(u)for(;u;)a=u.nodeName.toUpperCase(),"TD"!=a&&"TH"!=a||(g(u),c.push(u)),u=u.nextSibling;else{c=n.anCells;for(var m=0,v=c.length;m<v;m++)g(c[m])}var b=n.firstChild?n:n.nTr;if(b){var y=b.getAttribute("id");y&&E(t.rowId)(o,y)}return{data:o,cells:c}}function I(t,r,i,o){var a,s,l,c,u,d=t.aoData[r],f=d._aData,h=[];if(null===d.nTr){for(a=i||n.createElement("tr"),d.nTr=a,d.anCells=h,a._DT_RowIndex=r,M(t,d),c=0,u=t.aoColumns.length;c<u;c++)l=t.aoColumns[c],s=i?o[c]:n.createElement(l.sCellType),s._DT_CellIndex={row:r,column:c},h.push(s),i&&!l.mRender&&l.mData===c||e.isPlainObject(l.mData)&&l.mData._===c+".display"||(s.innerHTML=k(t,r,c,"display")),l.sClass&&(s.className+=" "+l.sClass),l.bVisible&&!i?a.appendChild(s):!l.bVisible&&i&&s.parentNode.removeChild(s),l.fnCreatedCell&&l.fnCreatedCell.call(t.oInstance,s,k(t,r,c),f,r,c);Be(t,"aoRowCreatedCallback",null,[a,f,r,h])}d.nTr.setAttribute("role","row")}function M(t,n){var r=n.nTr,i=n._aData;if(r){var o=t.rowIdFn(i);if(o&&(r.id=o),i.DT_RowClass){var a=i.DT_RowClass.split(" ");n.__rowc=n.__rowc?ht(n.__rowc.concat(a)):a,e(r).removeClass(n.__rowc.join(" ")).addClass(i.DT_RowClass)}i.DT_RowAttr&&e(r).attr(i.DT_RowAttr),i.DT_RowData&&e(r).data(i.DT_RowData)}}function j(t){var n,r,i,o,a,s=t.nTHead,l=t.nTFoot,c=0===e("th, td",s).length,u=t.oClasses,d=t.aoColumns;for(c&&(o=e("<tr/>").appendTo(s)),n=0,r=d.length;n<r;n++)a=d[n],i=e(a.nTh).addClass(a.sClass),c&&i.appendTo(o),t.oFeatures.bSort&&(i.addClass(a.sSortingClass),!1!==a.bSortable&&(i.attr("tabindex",t.iTabIndex).attr("aria-controls",t.sTableId),Se(t,a.nTh,n))),a.sTitle!=i[0].innerHTML&&i.html(a.sTitle),Fe(t,"header")(t,i,a,u);if(c&&$(t.aoHeader,s),e(s).find(">tr").attr("role","row"),e(s).find(">tr>th, >tr>td").addClass(u.sHeaderTH),e(l).find(">tr>th, >tr>td").addClass(u.sFooterTH),null!==l){var f=t.aoFooter[0];for(n=0,r=f.length;n<r;n++)a=d[n],a.nTf=f[n].cell,a.sClass&&e(a.nTf).addClass(a.sClass)}}function B(t,n,i){var o,a,s,l,c,u,d,f,h,p=[],g=[],m=t.aoColumns.length;if(n){for(i===r&&(i=!1),o=0,a=n.length;o<a;o++){for(p[o]=n[o].slice(),p[o].nTr=n[o].nTr,s=m-1;s>=0;s--)t.aoColumns[s].bVisible||i||p[o].splice(s,1);g.push([])}for(o=0,a=p.length;o<a;o++){if(d=p[o].nTr)for(;u=d.firstChild;)d.removeChild(u);for(s=0,l=p[o].length;s<l;s++)if(f=1,h=1,g[o][s]===r){for(d.appendChild(p[o][s].cell),g[o][s]=1;p[o+f]!==r&&p[o][s].cell==p[o+f][s].cell;)g[o+f][s]=1,f++;for(;p[o][s+h]!==r&&p[o][s].cell==p[o][s+h].cell;){for(c=0;c<f;c++)g[o+c][s+h]=1;h++}e(p[o][s].cell).attr("rowspan",f).attr("colspan",h)}}}}function L(t){var n=Be(t,"aoPreDrawCallback","preDraw",[t]);if(-1!==e.inArray(!1,n))return void he(t,!1);var i=[],o=0,a=t.asStripeClasses,s=a.length,l=(t.aoOpenRows.length,t.oLanguage),c=t.iInitDisplayStart,u="ssp"==He(t),d=t.aiDisplay;t.bDrawing=!0,c!==r&&-1!==c&&(t._iDisplayStart=u?c:c>=t.fnRecordsDisplay()?0:c,t.iInitDisplayStart=-1);var f=t._iDisplayStart,h=t.fnDisplayEnd();if(t.bDeferLoading)t.bDeferLoading=!1,t.iDraw++,he(t,!1);else if(u){if(!t.bDestroying&&!W(t))return}else t.iDraw++;if(0!==d.length)for(var p=u?0:f,g=u?t.aoData.length:h,v=p;v<g;v++){var b=d[v],y=t.aoData[b];null===y.nTr&&I(t,b);var w=y.nTr;if(0!==s){var _=a[o%s];y._sRowStripe!=_&&(e(w).removeClass(y._sRowStripe).addClass(_),y._sRowStripe=_)}Be(t,"aoRowCallback",null,[w,y._aData,o,v,b]),i.push(w),o++}else{var x=l.sZeroRecords;1==t.iDraw&&"ajax"==He(t)?x=l.sLoadingRecords:l.sEmptyTable&&0===t.fnRecordsTotal()&&(x=l.sEmptyTable),i[0]=e("<tr/>",{class:s?a[0]:""}).append(e("<td />",{valign:"top",colSpan:m(t),class:t.oClasses.sRowEmpty}).html(x))[0]}Be(t,"aoHeaderCallback","header",[e(t.nTHead).children("tr")[0],N(t),f,h,d]),Be(t,"aoFooterCallback","footer",[e(t.nTFoot).children("tr")[0],N(t),f,h,d]);var C=e(t.nTBody);C.children().detach(),C.append(e(i)),Be(t,"aoDrawCallback","draw",[t]),t.bSorted=!1,t.bFiltered=!1,t.bDrawing=!1}function F(e,t){var n=e.oFeatures,r=n.bSort,i=n.bFilter;r&&Ce(e),i?K(e,e.oPreviousSearch):e.aiDisplay=e.aiDisplayMaster.slice(),!0!==t&&(e._iDisplayStart=0),e._drawHold=t,L(e),e._drawHold=!1}function H(t){var n=t.oClasses,r=e(t.nTable),i=e("<div/>").insertBefore(r),o=t.oFeatures,a=e("<div/>",{id:t.sTableId+"_wrapper",class:n.sWrapper+(t.nTFoot?"":" "+n.sNoFooter)});t.nHolding=i[0],t.nTableWrapper=a[0],t.nTableReinsertBefore=t.nTable.nextSibling;for(var s,l,c,u,d,f,h=t.sDom.split(""),p=0;p<h.length;p++){if(s=null,"<"==(l=h[p])){if(c=e("<div/>")[0],"'"==(u=h[p+1])||'"'==u){for(d="",f=2;h[p+f]!=u;)d+=h[p+f],f++;if("H"==d?d=n.sJUIHeader:"F"==d&&(d=n.sJUIFooter),-1!=d.indexOf(".")){var g=d.split(".");c.id=g[0].substr(1,g[0].length-1),c.className=g[1]}else"#"==d.charAt(0)?c.id=d.substr(1,d.length-1):c.className=d;p+=f}a.append(c),a=e(c)}else if(">"==l)a=a.parent();else if("l"==l&&o.bPaginate&&o.bLengthChange)s=ce(t);else if("f"==l&&o.bFilter)s=G(t);else if("r"==l&&o.bProcessing)s=fe(t);else if("t"==l)s=pe(t);else if("i"==l&&o.bInfo)s=re(t);else if("p"==l&&o.bPaginate)s=ue(t);else if(0!==Ge.ext.feature.length)for(var m=Ge.ext.feature,v=0,b=m.length;v<b;v++)if(l==m[v].cFeature){s=m[v].fnInit(t);break}if(s){var y=t.aanFeatures;y[l]||(y[l]=[]),y[l].push(s),a.append(s)}}i.replaceWith(a),t.nHolding=null}function $(t,n){var r,i,o,a,s,l,c,u,d,f,h,p=e(n).children("tr");for(t.splice(0,t.length),o=0,l=p.length;o<l;o++)t.push([]);for(o=0,l=p.length;o<l;o++)for(r=p[o],u=0,i=r.firstChild;i;){if("TD"==i.nodeName.toUpperCase()||"TH"==i.nodeName.toUpperCase())for(d=1*i.getAttribute("colspan"),f=1*i.getAttribute("rowspan"),d=d&&0!==d&&1!==d?d:1,f=f&&0!==f&&1!==f?f:1,c=function(e,t,n){for(var r=e[t];r[n];)n++;return n}(t,o,u),h=1===d,s=0;s<d;s++)for(a=0;a<f;a++)t[o+a][c+s]={cell:i,unique:h},t[o+a].nTr=r;i=i.nextSibling}}function U(e,t,n){var r=[];n||(n=e.aoHeader,t&&(n=[],$(n,t)));for(var i=0,o=n.length;i<o;i++)for(var a=0,s=n[i].length;a<s;a++)!n[i][a].unique||r[a]&&e.bSortCellsTop||(r[a]=n[i][a].cell);return r}function z(t,n,r){if(Be(t,"aoServerParams","serverParams",[n]),n&&e.isArray(n)){var i={},o=/(.*?)\[\]$/;e.each(n,function(e,t){var n=t.name.match(o);if(n){var r=n[0];i[r]||(i[r]=[]),i[r].push(t.value)}else i[t.name]=t.value}),n=i}var a,s=t.ajax,l=t.oInstance,c=function(e){Be(t,null,"xhr",[t,e,t.jqXHR]),r(e)};if(e.isPlainObject(s)&&s.data){a=s.data;var u="function"==typeof a?a(n,t):a;n="function"==typeof a&&u?u:e.extend(!0,n,u),delete s.data}var d={data:n,success:function(e){var n=e.error||e.sError;n&&Pe(t,0,n),t.json=e,c(e)},dataType:"json",cache:!1,type:t.sServerMethod,error:function(n,r,i){var o=Be(t,null,"xhr",[t,null,t.jqXHR]);-1===e.inArray(!0,o)&&("parsererror"==r?Pe(t,0,"Invalid JSON response",1):4===n.readyState&&Pe(t,0,"Ajax error",7)),he(t,!1)}};t.oAjaxData=n,Be(t,null,"preXhr",[t,n]),t.fnServerData?t.fnServerData.call(l,t.sAjaxSource,e.map(n,function(e,t){return{name:t,value:e}}),c,t):t.sAjaxSource||"string"==typeof s?t.jqXHR=e.ajax(e.extend(d,{url:s||t.sAjaxSource})):"function"==typeof s?t.jqXHR=s.call(l,n,c,t):(t.jqXHR=e.ajax(e.extend(d,s)),s.data=a)}function W(e){return!e.bAjaxDataGet||(e.iDraw++,he(e,!0),z(e,q(e),function(t){V(e,t)}),!1)}function q(t){var n,r,i,o,a=t.aoColumns,s=a.length,l=t.oFeatures,c=t.oPreviousSearch,u=t.aoPreSearchCols,d=[],f=xe(t),h=t._iDisplayStart,p=!1!==l.bPaginate?t._iDisplayLength:-1,g=function(e,t){d.push({name:e,value:t})};g("sEcho",t.iDraw),g("iColumns",s),g("sColumns",st(a,"sName").join(",")),g("iDisplayStart",h),g("iDisplayLength",p);var m={draw:t.iDraw,columns:[],order:[],start:h,length:p,search:{value:c.sSearch,regex:c.bRegex}};for(n=0;n<s;n++)i=a[n],o=u[n],r="function"==typeof i.mData?"function":i.mData,m.columns.push({data:r,name:i.sName,searchable:i.bSearchable,orderable:i.bSortable,search:{value:o.sSearch,regex:o.bRegex}}),g("mDataProp_"+n,r),l.bFilter&&(g("sSearch_"+n,o.sSearch),g("bRegex_"+n,o.bRegex),g("bSearchable_"+n,i.bSearchable)),l.bSort&&g("bSortable_"+n,i.bSortable);l.bFilter&&(g("sSearch",c.sSearch),g("bRegex",c.bRegex)),l.bSort&&(e.each(f,function(e,t){m.order.push({column:t.col,dir:t.dir}),g("iSortCol_"+e,t.col),g("sSortDir_"+e,t.dir)}),g("iSortingCols",f.length));var v=Ge.ext.legacy.ajax;return null===v?t.sAjaxSource?d:m:v?d:m}function V(e,t){var n=function(e,n){return t[e]!==r?t[e]:t[n]},i=Y(e,t),o=n("sEcho","draw"),a=n("iTotalRecords","recordsTotal"),s=n("iTotalDisplayRecords","recordsFiltered");if(o){if(1*o<e.iDraw)return;e.iDraw=1*o}A(e),e._iRecordsTotal=parseInt(a,10),e._iRecordsDisplay=parseInt(s,10);for(var l=0,c=i.length;l<c;l++)w(e,i[l]);e.aiDisplay=e.aiDisplayMaster.slice(),e.bAjaxDataGet=!1,L(e),e._bInitComplete||se(e,t),e.bAjaxDataGet=!0,he(e,!1)}function Y(t,n){var i=e.isPlainObject(t.ajax)&&t.ajax.dataSrc!==r?t.ajax.dataSrc:t.sAjaxDataProp;return"data"===i?n.aaData||n[i]:""!==i?D(i)(n):n}function G(t){var r=t.oClasses,i=t.sTableId,o=t.oLanguage,a=t.oPreviousSearch,s=t.aanFeatures,l='<input type="search" class="'+r.sFilterInput+'"/>',c=o.sSearch;c=c.match(/_INPUT_/)?c.replace("_INPUT_",l):c+l;var u=e("<div/>",{id:s.f?null:i+"_filter",class:r.sFilter}).append(e("<label/>").append(c)),d=function(){var e=(s.f,this.value?this.value:"");e!=a.sSearch&&(K(t,{sSearch:e,bRegex:a.bRegex,bSmart:a.bSmart,bCaseInsensitive:a.bCaseInsensitive}),t._iDisplayStart=0,L(t))
},f=null!==t.searchDelay?t.searchDelay:"ssp"===He(t)?400:0,h=e("input",u).val(a.sSearch).attr("placeholder",o.sSearchPlaceholder).on("keyup.DT search.DT input.DT paste.DT cut.DT",f?_t(d,f):d).on("keypress.DT",function(e){if(13==e.keyCode)return!1}).attr("aria-controls",i);return e(t.nTable).on("search.dt.DT",function(e,r){if(t===r)try{h[0]!==n.activeElement&&h.val(a.sSearch)}catch(e){}}),u[0]}function K(e,t,n){var i=e.oPreviousSearch,o=e.aoPreSearchCols,a=function(e){i.sSearch=e.sSearch,i.bRegex=e.bRegex,i.bSmart=e.bSmart,i.bCaseInsensitive=e.bCaseInsensitive},s=function(e){return e.bEscapeRegex!==r?!e.bEscapeRegex:e.bRegex};if(b(e),"ssp"!=He(e)){Q(e,t.sSearch,n,s(t),t.bSmart,t.bCaseInsensitive),a(t);for(var l=0;l<o.length;l++)J(e,o[l].sSearch,l,s(o[l]),o[l].bSmart,o[l].bCaseInsensitive);X(e)}else a(t);e.bFiltered=!0,Be(e,null,"search",[e])}function X(t){for(var n,r,i=Ge.ext.search,o=t.aiDisplay,a=0,s=i.length;a<s;a++){for(var l=[],c=0,u=o.length;c<u;c++)r=o[c],n=t.aoData[r],i[a](t,n._aFilterData,r,n._aData,c)&&l.push(r);o.length=0,e.merge(o,l)}}function J(e,t,n,r,i,o){if(""!==t){for(var a,s=[],l=e.aiDisplay,c=Z(t,r,i,o),u=0;u<l.length;u++)a=e.aoData[l[u]]._aFilterData[n],c.test(a)&&s.push(l[u]);e.aiDisplay=s}}function Q(e,t,n,r,i,o){var a,s,l,c=Z(t,r,i,o),u=e.oPreviousSearch.sSearch,d=e.aiDisplayMaster,f=[];if(0!==Ge.ext.search.length&&(n=!0),s=ee(e),t.length<=0)e.aiDisplay=d.slice();else{for((s||n||u.length>t.length||0!==t.indexOf(u)||e.bSorted)&&(e.aiDisplay=d.slice()),a=e.aiDisplay,l=0;l<a.length;l++)c.test(e.aoData[a[l]]._sFilterRow)&&f.push(a[l]);e.aiDisplay=f}}function Z(t,n,r,i){if(t=n?t:vt(t),r){t="^(?=.*?"+e.map(t.match(/"[^"]+"|[^ ]+/g)||[""],function(e){if('"'===e.charAt(0)){var t=e.match(/^"(.*)"$/);e=t?t[1]:e}return e.replace('"',"")}).join(")(?=.*?")+").*$"}return new RegExp(t,i?"i":"")}function ee(e){var t,n,r,i,o,a,s,l,c=e.aoColumns,u=Ge.ext.type.search,d=!1;for(n=0,i=e.aoData.length;n<i;n++)if(l=e.aoData[n],!l._aFilterData){for(a=[],r=0,o=c.length;r<o;r++)t=c[r],t.bSearchable?(s=k(e,n,r,"filter"),u[t.sType]&&(s=u[t.sType](s)),null===s&&(s=""),"string"!=typeof s&&s.toString&&(s=s.toString())):s="",s.indexOf&&-1!==s.indexOf("&")&&(bt.innerHTML=s,s=yt?bt.textContent:bt.innerText),s.replace&&(s=s.replace(/[\r\n]/g,"")),a.push(s);l._aFilterData=a,l._sFilterRow=a.join("  "),d=!0}return d}function te(e){return{search:e.sSearch,smart:e.bSmart,regex:e.bRegex,caseInsensitive:e.bCaseInsensitive}}function ne(e){return{sSearch:e.search,bSmart:e.smart,bRegex:e.regex,bCaseInsensitive:e.caseInsensitive}}function re(t){var n=t.sTableId,r=t.aanFeatures.i,i=e("<div/>",{class:t.oClasses.sInfo,id:r?null:n+"_info"});return r||(t.aoDrawCallback.push({fn:ie,sName:"information"}),i.attr("role","status").attr("aria-live","polite"),e(t.nTable).attr("aria-describedby",n+"_info")),i[0]}function ie(t){var n=t.aanFeatures.i;if(0!==n.length){var r=t.oLanguage,i=t._iDisplayStart+1,o=t.fnDisplayEnd(),a=t.fnRecordsTotal(),s=t.fnRecordsDisplay(),l=s?r.sInfo:r.sInfoEmpty;s!==a&&(l+=" "+r.sInfoFiltered),l+=r.sInfoPostFix,l=oe(t,l);var c=r.fnInfoCallback;null!==c&&(l=c.call(t.oInstance,t,i,o,a,s,l)),e(n).html(l)}}function oe(e,t){var n=e.fnFormatNumber,r=e._iDisplayStart+1,i=e._iDisplayLength,o=e.fnRecordsDisplay(),a=-1===i;return t.replace(/_START_/g,n.call(e,r)).replace(/_END_/g,n.call(e,e.fnDisplayEnd())).replace(/_MAX_/g,n.call(e,e.fnRecordsTotal())).replace(/_TOTAL_/g,n.call(e,o)).replace(/_PAGE_/g,n.call(e,a?1:Math.ceil(r/i))).replace(/_PAGES_/g,n.call(e,a?1:Math.ceil(o/i)))}function ae(e){var t,n,r,i=e.iInitDisplayStart,o=e.aoColumns,a=e.oFeatures,s=e.bDeferLoading;if(!e.bInitialised)return void setTimeout(function(){ae(e)},200);for(H(e),j(e),B(e,e.aoHeader),B(e,e.aoFooter),he(e,!0),a.bAutoWidth&&ve(e),t=0,n=o.length;t<n;t++)r=o[t],r.sWidth&&(r.nTh.style.width=_e(r.sWidth));Be(e,null,"preInit",[e]),F(e);var l=He(e);("ssp"!=l||s)&&("ajax"==l?z(e,[],function(n){var r=Y(e,n);for(t=0;t<r.length;t++)w(e,r[t]);e.iInitDisplayStart=i,F(e),he(e,!1),se(e,n)},e):(he(e,!1),se(e)))}function se(e,t){e._bInitComplete=!0,(t||e.oInit.aaData)&&h(e),Be(e,null,"plugin-init",[e,t]),Be(e,"aoInitComplete","init",[e,t])}function le(e,t){var n=parseInt(t,10);e._iDisplayLength=n,Le(e),Be(e,null,"length",[e,n])}function ce(t){for(var n=t.oClasses,r=t.sTableId,i=t.aLengthMenu,o=e.isArray(i[0]),a=o?i[0]:i,s=o?i[1]:i,l=e("<select/>",{name:r+"_length","aria-controls":r,class:n.sLengthSelect}),c=0,u=a.length;c<u;c++)l[0][c]=new Option("number"==typeof s[c]?t.fnFormatNumber(s[c]):s[c],a[c]);var d=e("<div><label/></div>").addClass(n.sLength);return t.aanFeatures.l||(d[0].id=r+"_length"),d.children().append(t.oLanguage.sLengthMenu.replace("_MENU_",l[0].outerHTML)),e("select",d).val(t._iDisplayLength).on("change.DT",function(n){le(t,e(this).val()),L(t)}),e(t.nTable).on("length.dt.DT",function(n,r,i){t===r&&e("select",d).val(i)}),d[0]}function ue(t){var n=t.sPaginationType,r=Ge.ext.pager[n],i="function"==typeof r,o=function(e){L(e)},a=e("<div/>").addClass(t.oClasses.sPaging+n)[0],s=t.aanFeatures;return i||r.fnInit(t,a,o),s.p||(a.id=t.sTableId+"_paginate",t.aoDrawCallback.push({fn:function(e){if(i){var t,n,a=e._iDisplayStart,l=e._iDisplayLength,c=e.fnRecordsDisplay(),u=-1===l,d=u?0:Math.ceil(a/l),f=u?1:Math.ceil(c/l),h=r(d,f);for(t=0,n=s.p.length;t<n;t++)Fe(e,"pageButton")(e,s.p[t],t,h,d,f)}else r.fnUpdate(e,o)},sName:"pagination"})),a}function de(e,t,n){var r=e._iDisplayStart,i=e._iDisplayLength,o=e.fnRecordsDisplay();0===o||-1===i?r=0:"number"==typeof t?(r=t*i)>o&&(r=0):"first"==t?r=0:"previous"==t?(r=i>=0?r-i:0)<0&&(r=0):"next"==t?r+i<o&&(r+=i):"last"==t?r=Math.floor((o-1)/i)*i:Pe(e,0,"Unknown paging action: "+t,5);var a=e._iDisplayStart!==r;return e._iDisplayStart=r,a&&(Be(e,null,"page",[e]),n&&L(e)),a}function fe(t){return e("<div/>",{id:t.aanFeatures.r?null:t.sTableId+"_processing",class:t.oClasses.sProcessing}).html(t.oLanguage.sProcessing).insertBefore(t.nTable)[0]}function he(t,n){t.oFeatures.bProcessing&&e(t.aanFeatures.r).css("display",n?"block":"none"),Be(t,null,"processing",[t,n])}function pe(t){var n=e(t.nTable);n.attr("role","grid");var r=t.oScroll;if(""===r.sX&&""===r.sY)return t.nTable;var i=r.sX,o=r.sY,a=t.oClasses,s=n.children("caption"),l=s.length?s[0]._captionSide:null,c=e(n[0].cloneNode(!1)),u=e(n[0].cloneNode(!1)),d=n.children("tfoot"),f="<div/>",h=function(e){return e?_e(e):null};d.length||(d=null);var p=e(f,{class:a.sScrollWrapper}).append(e(f,{class:a.sScrollHead}).css({overflow:"hidden",position:"relative",border:0,width:i?h(i):"100%"}).append(e(f,{class:a.sScrollHeadInner}).css({"box-sizing":"content-box",width:r.sXInner||"100%"}).append(c.removeAttr("id").css("margin-left",0).append("top"===l?s:null).append(n.children("thead"))))).append(e(f,{class:a.sScrollBody}).css({position:"relative",overflow:"auto",width:h(i)}).append(n));d&&p.append(e(f,{class:a.sScrollFoot}).css({overflow:"hidden",border:0,width:i?h(i):"100%"}).append(e(f,{class:a.sScrollFootInner}).append(u.removeAttr("id").css("margin-left",0).append("bottom"===l?s:null).append(n.children("tfoot")))));var g=p.children(),m=g[0],v=g[1],b=d?g[2]:null;return i&&e(v).on("scroll.DT",function(e){var t=this.scrollLeft;m.scrollLeft=t,d&&(b.scrollLeft=t)}),e(v).css(o&&r.bCollapse?"max-height":"height",o),t.nScrollHead=m,t.nScrollBody=v,t.nScrollFoot=b,t.aoDrawCallback.push({fn:ge,sName:"scrolling"}),p[0]}function ge(t){var n,i,o,a,s,l,c,u,d,f=t.oScroll,g=f.sX,m=f.sXInner,v=f.sY,b=f.iBarWidth,y=e(t.nScrollHead),w=y[0].style,_=y.children("div"),x=_[0].style,C=_.children("table"),k=t.nScrollBody,T=e(k),S=k.style,D=e(t.nScrollFoot),E=D.children("div"),N=E.children("table"),A=e(t.nTHead),R=e(t.nTable),P=R[0],O=P.style,I=t.nTFoot?e(t.nTFoot):null,M=t.oBrowser,j=M.bScrollOversize,B=st(t.aoColumns,"nTh"),L=[],F=[],H=[],$=[],z=function(e){var t=e.style;t.paddingTop="0",t.paddingBottom="0",t.borderTopWidth="0",t.borderBottomWidth="0",t.height=0},W=k.scrollHeight>k.clientHeight;if(t.scrollBarVis!==W&&t.scrollBarVis!==r)return t.scrollBarVis=W,void h(t);t.scrollBarVis=W,R.children("thead, tfoot").remove(),I&&(l=I.clone().prependTo(R),i=I.find("tr"),a=l.find("tr")),s=A.clone().prependTo(R),n=A.find("tr"),o=s.find("tr"),s.find("th, td").removeAttr("tabindex"),g||(S.width="100%",y[0].style.width="100%"),e.each(U(t,s),function(e,n){c=p(t,e),n.style.width=t.aoColumns[c].sWidth}),I&&me(function(e){e.style.width=""},a),d=R.outerWidth(),""===g?(O.width="100%",j&&(R.find("tbody").height()>k.offsetHeight||"scroll"==T.css("overflow-y"))&&(O.width=_e(R.outerWidth()-b)),d=R.outerWidth()):""!==m&&(O.width=_e(m),d=R.outerWidth()),me(z,o),me(function(t){H.push(t.innerHTML),L.push(_e(e(t).css("width")))},o),me(function(t,n){-1!==e.inArray(t,B)&&(t.style.width=L[n])},n),e(o).height(0),I&&(me(z,a),me(function(t){$.push(t.innerHTML),F.push(_e(e(t).css("width")))},a),me(function(e,t){e.style.width=F[t]},i),e(a).height(0)),me(function(e,t){e.innerHTML='<div class="dataTables_sizing">'+H[t]+"</div>",e.childNodes[0].style.height="0",e.childNodes[0].style.overflow="hidden",e.style.width=L[t]},o),I&&me(function(e,t){e.innerHTML='<div class="dataTables_sizing">'+$[t]+"</div>",e.childNodes[0].style.height="0",e.childNodes[0].style.overflow="hidden",e.style.width=F[t]},a),R.outerWidth()<d?(u=k.scrollHeight>k.offsetHeight||"scroll"==T.css("overflow-y")?d+b:d,j&&(k.scrollHeight>k.offsetHeight||"scroll"==T.css("overflow-y"))&&(O.width=_e(u-b)),""!==g&&""===m||Pe(t,1,"Possible column misalignment",6)):u="100%",S.width=_e(u),w.width=_e(u),I&&(t.nScrollFoot.style.width=_e(u)),v||j&&(S.height=_e(P.offsetHeight+b));var q=R.outerWidth();C[0].style.width=_e(q),x.width=_e(q);var V=R.height()>k.clientHeight||"scroll"==T.css("overflow-y"),Y="padding"+(M.bScrollbarLeft?"Left":"Right");x[Y]=V?b+"px":"0px",I&&(N[0].style.width=_e(q),E[0].style.width=_e(q),E[0].style[Y]=V?b+"px":"0px"),R.children("colgroup").insertBefore(R.children("thead")),T.scroll(),!t.bSorted&&!t.bFiltered||t._drawHold||(k.scrollTop=0)}function me(e,t,n){for(var r,i,o=0,a=0,s=t.length;a<s;){for(r=t[a].firstChild,i=n?n[a].firstChild:null;r;)1===r.nodeType&&(n?e(r,i,o):e(r,o),o++),r=r.nextSibling,i=n?i.nextSibling:null;a++}}function ve(n){var r,i,o,a=n.nTable,s=n.aoColumns,l=n.oScroll,c=l.sY,u=l.sX,d=l.sXInner,f=s.length,g=v(n,"bVisible"),b=e("th",n.nTHead),y=a.getAttribute("width"),w=a.parentNode,_=!1,x=n.oBrowser,C=x.bScrollOversize,k=a.style.width;for(k&&-1!==k.indexOf("%")&&(y=k),r=0;r<g.length;r++)i=s[g[r]],null!==i.sWidth&&(i.sWidth=be(i.sWidthOrig,w),_=!0);if(C||!_&&!u&&!c&&f==m(n)&&f==b.length)for(r=0;r<f;r++){var T=p(n,r);null!==T&&(s[T].sWidth=_e(b.eq(r).width()))}else{var S=e(a).clone().css("visibility","hidden").removeAttr("id");S.find("tbody tr").remove();var D=e("<tr/>").appendTo(S.find("tbody"));for(S.find("thead, tfoot").remove(),S.append(e(n.nTHead).clone()).append(e(n.nTFoot).clone()),S.find("tfoot th, tfoot td").css("width",""),b=U(n,S.find("thead")[0]),r=0;r<g.length;r++)i=s[g[r]],b[r].style.width=null!==i.sWidthOrig&&""!==i.sWidthOrig?_e(i.sWidthOrig):"",i.sWidthOrig&&u&&e(b[r]).append(e("<div/>").css({width:i.sWidthOrig,margin:0,padding:0,border:0,height:1}));if(n.aoData.length)for(r=0;r<g.length;r++)o=g[r],i=s[o],e(ye(n,o)).clone(!1).append(i.sContentPadding).appendTo(D);e("[name]",S).removeAttr("name");var E=e("<div/>").css(u||c?{position:"absolute",top:0,left:0,height:1,right:0,overflow:"hidden"}:{}).append(S).appendTo(w);u&&d?S.width(d):u?(S.css("width","auto"),S.removeAttr("width"),S.width()<w.clientWidth&&y&&S.width(w.clientWidth)):c?S.width(w.clientWidth):y&&S.width(y);var N=0;for(r=0;r<g.length;r++){var A=e(b[r]),R=A.outerWidth()-A.width(),P=x.bBounding?Math.ceil(b[r].getBoundingClientRect().width):A.outerWidth();N+=P,s[g[r]].sWidth=_e(P-R)}a.style.width=_e(N),E.remove()}if(y&&(a.style.width=_e(y)),(y||u)&&!n._reszEvt){var O=function(){e(t).on("resize.DT-"+n.sInstance,_t(function(){h(n)}))};C?setTimeout(O,1e3):O(),n._reszEvt=!0}}function be(t,r){if(!t)return 0;var i=e("<div/>").css("width",_e(t)).appendTo(r||n.body),o=i[0].offsetWidth;return i.remove(),o}function ye(t,n){var r=we(t,n);if(r<0)return null;var i=t.aoData[r];return i.nTr?i.anCells[n]:e("<td/>").html(k(t,r,n,"display"))[0]}function we(e,t){for(var n,r=-1,i=-1,o=0,a=e.aoData.length;o<a;o++)n=k(e,o,t,"display")+"",n=n.replace(wt,""),n=n.replace(/&nbsp;/g," "),n.length>r&&(r=n.length,i=o);return i}function _e(e){return null===e?"0px":"number"==typeof e?e<0?"0px":e+"px":e.match(/\d$/)?e+"px":e}function xe(t){var n,i,o,a,s,l,c,u=[],d=t.aoColumns,f=t.aaSortingFixed,h=e.isPlainObject(f),p=[],g=function(t){t.length&&!e.isArray(t[0])?p.push(t):e.merge(p,t)};for(e.isArray(f)&&g(f),h&&f.pre&&g(f.pre),g(t.aaSorting),h&&f.post&&g(f.post),n=0;n<p.length;n++)for(c=p[n][0],a=d[c].aDataSort,i=0,o=a.length;i<o;i++)s=a[i],l=d[s].sType||"string",p[n]._idx===r&&(p[n]._idx=e.inArray(p[n][1],d[s].asSorting)),u.push({src:c,col:s,dir:p[n][1],index:p[n]._idx,type:l,formatter:Ge.ext.type.order[l+"-pre"]});return u}function Ce(e){var t,n,r,i,o,a=[],s=Ge.ext.type.order,l=e.aoData,c=(e.aoColumns,0),u=e.aiDisplayMaster;for(b(e),o=xe(e),t=0,n=o.length;t<n;t++)i=o[t],i.formatter&&c++,Ee(e,i.col);if("ssp"!=He(e)&&0!==o.length){for(t=0,r=u.length;t<r;t++)a[u[t]]=t;c===o.length?u.sort(function(e,t){var n,r,i,s,c,u=o.length,d=l[e]._aSortData,f=l[t]._aSortData;for(i=0;i<u;i++)if(c=o[i],n=d[c.col],r=f[c.col],0!==(s=n<r?-1:n>r?1:0))return"asc"===c.dir?s:-s;return n=a[e],r=a[t],n<r?-1:n>r?1:0}):u.sort(function(e,t){var n,r,i,c,u,d,f=o.length,h=l[e]._aSortData,p=l[t]._aSortData;for(i=0;i<f;i++)if(u=o[i],n=h[u.col],r=p[u.col],d=s[u.type+"-"+u.dir]||s["string-"+u.dir],0!==(c=d(n,r)))return c;return n=a[e],r=a[t],n<r?-1:n>r?1:0})}e.bSorted=!0}function ke(e){for(var t,n,r=e.aoColumns,i=xe(e),o=e.oLanguage.oAria,a=0,s=r.length;a<s;a++){var l=r[a],c=l.asSorting,u=l.sTitle.replace(/<.*?>/g,""),d=l.nTh;d.removeAttribute("aria-sort"),l.bSortable?(i.length>0&&i[0].col==a?(d.setAttribute("aria-sort","asc"==i[0].dir?"ascending":"descending"),n=c[i[0].index+1]||c[0]):n=c[0],t=u+("asc"===n?o.sSortAscending:o.sSortDescending)):t=u,d.setAttribute("aria-label",t)}}function Te(t,n,i,o){var a,s=t.aoColumns[n],l=t.aaSorting,c=s.asSorting,u=function(t,n){var i=t._idx;return i===r&&(i=e.inArray(t[1],c)),i+1<c.length?i+1:n?null:0};if("number"==typeof l[0]&&(l=t.aaSorting=[l]),i&&t.oFeatures.bSortMulti){var d=e.inArray(n,st(l,"0"));-1!==d?(a=u(l[d],!0),null===a&&1===l.length&&(a=0),null===a?l.splice(d,1):(l[d][1]=c[a],l[d]._idx=a)):(l.push([n,c[0],0]),l[l.length-1]._idx=0)}else l.length&&l[0][0]==n?(a=u(l[0]),l.length=1,l[0][1]=c[a],l[0]._idx=a):(l.length=0,l.push([n,c[0]]),l[0]._idx=0);F(t),"function"==typeof o&&o(t)}function Se(e,t,n,r){var i=e.aoColumns[n];Me(t,{},function(t){!1!==i.bSortable&&(e.oFeatures.bProcessing?(he(e,!0),setTimeout(function(){Te(e,n,t.shiftKey,r),"ssp"!==He(e)&&he(e,!1)},0)):Te(e,n,t.shiftKey,r))})}function De(t){var n,r,i,o=t.aLastSort,a=t.oClasses.sSortColumn,s=xe(t),l=t.oFeatures;if(l.bSort&&l.bSortClasses){for(n=0,r=o.length;n<r;n++)i=o[n].src,e(st(t.aoData,"anCells",i)).removeClass(a+(n<2?n+1:3));for(n=0,r=s.length;n<r;n++)i=s[n].src,e(st(t.aoData,"anCells",i)).addClass(a+(n<2?n+1:3))}t.aLastSort=s}function Ee(e,t){var n,r=e.aoColumns[t],i=Ge.ext.order[r.sSortDataType];i&&(n=i.call(e.oInstance,e,t,g(e,t)));for(var o,a,s=Ge.ext.type.order[r.sType+"-pre"],l=0,c=e.aoData.length;l<c;l++)o=e.aoData[l],o._aSortData||(o._aSortData=[]),o._aSortData[t]&&!i||(a=i?n[l]:k(e,l,t,"sort"),o._aSortData[t]=s?s(a):a)}function Ne(t){if(t.oFeatures.bStateSave&&!t.bDestroying){var n={time:+new Date,start:t._iDisplayStart,length:t._iDisplayLength,order:e.extend(!0,[],t.aaSorting),search:te(t.oPreviousSearch),columns:e.map(t.aoColumns,function(e,n){return{visible:e.bVisible,search:te(t.aoPreSearchCols[n])}})};Be(t,"aoStateSaveParams","stateSaveParams",[t,n]),t.oSavedState=n,t.fnStateSaveCallback.call(t.oInstance,t,n)}}function Ae(t,n,i){var o,a,s=t.aoColumns,l=function(n){if(!n||!n.time)return void i();var l=Be(t,"aoStateLoadParams","stateLoadParams",[t,n]);if(-1!==e.inArray(!1,l))return void i();var c=t.iStateDuration;if(c>0&&n.time<+new Date-1e3*c)return void i();if(n.columns&&s.length!==n.columns.length)return void i();if(t.oLoadedState=e.extend(!0,{},n),n.start!==r&&(t._iDisplayStart=n.start,t.iInitDisplayStart=n.start),n.length!==r&&(t._iDisplayLength=n.length),n.order!==r&&(t.aaSorting=[],e.each(n.order,function(e,n){t.aaSorting.push(n[0]>=s.length?[0,n[1]]:n)})),n.search!==r&&e.extend(t.oPreviousSearch,ne(n.search)),n.columns)for(o=0,a=n.columns.length;o<a;o++){var u=n.columns[o];u.visible!==r&&(s[o].bVisible=u.visible),u.search!==r&&e.extend(t.aoPreSearchCols[o],ne(u.search))}Be(t,"aoStateLoaded","stateLoaded",[t,n]),i()};if(!t.oFeatures.bStateSave)return void i();var c=t.fnStateLoadCallback.call(t.oInstance,t,l);c!==r&&l(c)}function Re(t){var n=Ge.settings,r=e.inArray(t,st(n,"nTable"));return-1!==r?n[r]:null}function Pe(e,n,r,i){if(r="DataTables warning: "+(e?"table id="+e.sTableId+" - ":"")+r,i&&(r+=". For more information about this error, please see http://datatables.net/tn/"+i),n)t.console&&console.log;else{var o=Ge.ext,a=o.sErrMode||o.errMode;if(e&&Be(e,null,"error",[e,i,r]),"alert"==a)alert(r);else{if("throw"==a)throw new Error(r);"function"==typeof a&&a(e,i,r)}}}function Oe(t,n,i,o){if(e.isArray(i))return void e.each(i,function(r,i){e.isArray(i)?Oe(t,n,i[0],i[1]):Oe(t,n,i)});o===r&&(o=i),n[i]!==r&&(t[o]=n[i])}function Ie(t,n,r){var i;for(var o in n)n.hasOwnProperty(o)&&(i=n[o],e.isPlainObject(i)?(e.isPlainObject(t[o])||(t[o]={}),e.extend(!0,t[o],i)):r&&"data"!==o&&"aaData"!==o&&e.isArray(i)?t[o]=i.slice():t[o]=i);return t}function Me(t,n,r){e(t).on("click.DT",n,function(n){e(t).blur(),r(n)}).on("keypress.DT",n,function(e){13===e.which&&(e.preventDefault(),r(e))}).on("selectstart.DT",function(){return!1})}function je(e,t,n,r){n&&e[t].push({fn:n,sName:r})}function Be(t,n,r,i){var o=[];if(n&&(o=e.map(t[n].slice().reverse(),function(e,n){return e.fn.apply(t.oInstance,i)})),null!==r){var a=e.Event(r+".dt");e(t.nTable).trigger(a,i),o.push(a.result)}return o}function Le(e){var t=e._iDisplayStart,n=e.fnDisplayEnd(),r=e._iDisplayLength;t>=n&&(t=n-r),t-=t%r,(-1===r||t<0)&&(t=0),e._iDisplayStart=t}function Fe(t,n){var r=t.renderer,i=Ge.ext.renderer[n];return e.isPlainObject(r)&&r[n]?i[r[n]]||i._:"string"==typeof r?i[r]||i._:i._}function He(e){return e.oFeatures.bServerSide?"ssp":e.ajax||e.sAjaxSource?"ajax":"dom"}function $e(e,t){var n=[],r=$t.numbers_length,i=Math.floor(r/2);return t<=r?n=ct(0,t):e<=i?(n=ct(0,r-2),n.push("ellipsis"),n.push(t-1)):e>=t-1-i?(n=ct(t-(r-2),t),n.splice(0,0,"ellipsis"),n.splice(0,0,0)):(n=ct(e-i+2,e+i-1),n.push("ellipsis"),n.push(t-1),n.splice(0,0,"ellipsis"),n.splice(0,0,0)),n.DT_el="span",n}function Ue(t){e.each({num:function(e){return Ut(e,t)},"num-fmt":function(e){return Ut(e,t,et)},"html-num":function(e){return Ut(e,t,Je)},"html-num-fmt":function(e){return Ut(e,t,Je,et)}},function(e,n){We.type.order[e+t+"-pre"]=n,e.match(/^html\-/)&&(We.type.search[e+t]=We.type.search.html)})}function ze(e){return function(){var t=[Re(this[Ge.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return Ge.ext.internal[e].apply(this,t)}}var We,qe,Ve,Ye,Ge=function(t){this.$=function(e,t){return this.api(!0).$(e,t)},this._=function(e,t){return this.api(!0).rows(e,t).data()},this.api=function(e){return new qe(e?Re(this[We.iApiIndex]):this)},this.fnAddData=function(t,n){var i=this.api(!0),o=e.isArray(t)&&(e.isArray(t[0])||e.isPlainObject(t[0]))?i.rows.add(t):i.row.add(t);return(n===r||n)&&i.draw(),o.flatten().toArray()},this.fnAdjustColumnSizing=function(e){var t=this.api(!0).columns.adjust(),n=t.settings()[0],i=n.oScroll;e===r||e?t.draw(!1):""===i.sX&&""===i.sY||ge(n)},this.fnClearTable=function(e){var t=this.api(!0).clear();(e===r||e)&&t.draw()},this.fnClose=function(e){this.api(!0).row(e).child.hide()},this.fnDeleteRow=function(e,t,n){var i=this.api(!0),o=i.rows(e),a=o.settings()[0],s=a.aoData[o[0][0]];return o.remove(),t&&t.call(this,a,s),(n===r||n)&&i.draw(),s},this.fnDestroy=function(e){this.api(!0).destroy(e)},this.fnDraw=function(e){this.api(!0).draw(e)},this.fnFilter=function(e,t,n,i,o,a){var s=this.api(!0);null===t||t===r?s.search(e,n,i,a):s.column(t).search(e,n,i,a),s.draw()},this.fnGetData=function(e,t){var n=this.api(!0);if(e!==r){var i=e.nodeName?e.nodeName.toLowerCase():"";return t!==r||"td"==i||"th"==i?n.cell(e,t).data():n.row(e).data()||null}return n.data().toArray()},this.fnGetNodes=function(e){var t=this.api(!0);return e!==r?t.row(e).node():t.rows().nodes().flatten().toArray()},this.fnGetPosition=function(e){var t=this.api(!0),n=e.nodeName.toUpperCase();if("TR"==n)return t.row(e).index();if("TD"==n||"TH"==n){var r=t.cell(e).index();return[r.row,r.columnVisible,r.column]}return null},this.fnIsOpen=function(e){return this.api(!0).row(e).child.isShown()},this.fnOpen=function(e,t,n){return this.api(!0).row(e).child(t,n).show().child()[0]},this.fnPageChange=function(e,t){var n=this.api(!0).page(e);(t===r||t)&&n.draw(!1)},this.fnSetColumnVis=function(e,t,n){var i=this.api(!0).column(e).visible(t);(n===r||n)&&i.columns.adjust().draw()},this.fnSettings=function(){return Re(this[We.iApiIndex])},this.fnSort=function(e){this.api(!0).order(e).draw()},this.fnSortListener=function(e,t,n){this.api(!0).order.listener(e,t,n)},this.fnUpdate=function(e,t,n,i,o){var a=this.api(!0);return n===r||null===n?a.row(t).data(e):a.cell(t,n).data(e),(o===r||o)&&a.columns.adjust(),(i===r||i)&&a.draw(),0},this.fnVersionCheck=We.fnVersionCheck;var n=this,i=t===r,u=this.length;i&&(t={}),this.oApi=this.internal=We.internal;for(var h in Ge.ext.internal)h&&(this[h]=ze(h));return this.each(function(){var h,p={},g=u>1?Ie(p,t,!0):t,m=0,v=this.getAttribute("id"),b=!1,x=Ge.defaults,C=e(this);if("table"!=this.nodeName.toLowerCase())return void Pe(null,0,"Non-table node initialisation ("+this.nodeName+")",2);s(x),l(x.column),o(x,x,!0),o(x.column,x.column,!0),o(x,e.extend(g,C.data()));var k=Ge.settings;for(m=0,h=k.length;m<h;m++){var T=k[m];if(T.nTable==this||T.nTHead&&T.nTHead.parentNode==this||T.nTFoot&&T.nTFoot.parentNode==this){var S=g.bRetrieve!==r?g.bRetrieve:x.bRetrieve,E=g.bDestroy!==r?g.bDestroy:x.bDestroy;if(i||S)return T.oInstance;if(E){T.oInstance.fnDestroy();break}return void Pe(T,0,"Cannot reinitialise DataTable",3)}if(T.sTableId==this.id){k.splice(m,1);break}}null!==v&&""!==v||(v="DataTables_Table_"+Ge.ext._unique++,this.id=v);var N=e.extend(!0,{},Ge.models.oSettings,{sDestroyWidth:C[0].style.width,sInstance:v,sTableId:v});N.nTable=this,N.oApi=n.internal,N.oInit=g,k.push(N),N.oInstance=1===n.length?n:C.dataTable(),s(g),a(g.oLanguage),g.aLengthMenu&&!g.iDisplayLength&&(g.iDisplayLength=e.isArray(g.aLengthMenu[0])?g.aLengthMenu[0][0]:g.aLengthMenu[0]),g=Ie(e.extend(!0,{},x),g),Oe(N.oFeatures,g,["bPaginate","bLengthChange","bFilter","bSort","bSortMulti","bInfo","bProcessing","bAutoWidth","bSortClasses","bServerSide","bDeferRender"]),Oe(N,g,["asStripeClasses","ajax","fnServerData","fnFormatNumber","sServerMethod","aaSorting","aaSortingFixed","aLengthMenu","sPaginationType","sAjaxSource","sAjaxDataProp","iStateDuration","sDom","bSortCellsTop","iTabIndex","fnStateLoadCallback","fnStateSaveCallback","renderer","searchDelay","rowId",["iCookieDuration","iStateDuration"],["oSearch","oPreviousSearch"],["aoSearchCols","aoPreSearchCols"],["iDisplayLength","_iDisplayLength"]]),Oe(N.oScroll,g,[["sScrollX","sX"],["sScrollXInner","sXInner"],["sScrollY","sY"],["bScrollCollapse","bCollapse"]]),Oe(N.oLanguage,g,"fnInfoCallback"),je(N,"aoDrawCallback",g.fnDrawCallback,"user"),je(N,"aoServerParams",g.fnServerParams,"user"),je(N,"aoStateSaveParams",g.fnStateSaveParams,"user"),je(N,"aoStateLoadParams",g.fnStateLoadParams,"user"),je(N,"aoStateLoaded",g.fnStateLoaded,"user"),je(N,"aoRowCallback",g.fnRowCallback,"user"),je(N,"aoRowCreatedCallback",g.fnCreatedRow,"user"),je(N,"aoHeaderCallback",g.fnHeaderCallback,"user"),je(N,"aoFooterCallback",g.fnFooterCallback,"user"),je(N,"aoInitComplete",g.fnInitComplete,"user"),je(N,"aoPreDrawCallback",g.fnPreDrawCallback,"user"),N.rowIdFn=D(g.rowId),c(N);var A=N.oClasses;if(e.extend(A,Ge.ext.classes,g.oClasses),C.addClass(A.sTable),N.iInitDisplayStart===r&&(N.iInitDisplayStart=g.iDisplayStart,N._iDisplayStart=g.iDisplayStart),null!==g.iDeferLoading){N.bDeferLoading=!0;var R=e.isArray(g.iDeferLoading);N._iRecordsDisplay=R?g.iDeferLoading[0]:g.iDeferLoading,N._iRecordsTotal=R?g.iDeferLoading[1]:g.iDeferLoading}var P=N.oLanguage;e.extend(!0,P,g.oLanguage),P.sUrl&&(e.ajax({dataType:"json",url:P.sUrl,success:function(t){a(t),o(x.oLanguage,t),e.extend(!0,P,t),ae(N)},error:function(){ae(N)}}),b=!0),null===g.asStripeClasses&&(N.asStripeClasses=[A.sStripeOdd,A.sStripeEven]);var O=N.asStripeClasses,I=C.children("tbody").find("tr").eq(0);-1!==e.inArray(!0,e.map(O,function(e,t){return I.hasClass(e)}))&&(e("tbody tr",this).removeClass(O.join(" ")),N.asDestroyStripes=O.slice());var M,j=[],B=this.getElementsByTagName("thead");if(0!==B.length&&($(N.aoHeader,B[0]),j=U(N)),null===g.aoColumns)for(M=[],m=0,h=j.length;m<h;m++)M.push(null);else M=g.aoColumns;for(m=0,h=M.length;m<h;m++)d(N,j?j[m]:null);if(y(N,g.aoColumnDefs,M,function(e,t){f(N,e,t)}),I.length){var L=function(e,t){return null!==e.getAttribute("data-"+t)?t:null};e(I[0]).children("th, td").each(function(e,t){var n=N.aoColumns[e];if(n.mData===e){var i=L(t,"sort")||L(t,"order"),o=L(t,"filter")||L(t,"search");null===i&&null===o||(n.mData={_:e+".display",sort:null!==i?e+".@data-"+i:r,type:null!==i?e+".@data-"+i:r,filter:null!==o?e+".@data-"+o:r},f(N,e))}})}var F=N.oFeatures,H=function(){if(g.aaSorting===r){var t=N.aaSorting;for(m=0,h=t.length;m<h;m++)t[m][1]=N.aoColumns[m].asSorting[0]}De(N),F.bSort&&je(N,"aoDrawCallback",function(){if(N.bSorted){var t=xe(N),n={};e.each(t,function(e,t){n[t.src]=t.dir}),Be(N,null,"order",[N,t,n]),ke(N)}}),je(N,"aoDrawCallback",function(){(N.bSorted||"ssp"===He(N)||F.bDeferRender)&&De(N)},"sc");var n=C.children("caption").each(function(){this._captionSide=e(this).css("caption-side")}),i=C.children("thead");0===i.length&&(i=e("<thead/>").appendTo(C)),N.nTHead=i[0];var o=C.children("tbody");0===o.length&&(o=e("<tbody/>").appendTo(C)),N.nTBody=o[0];var a=C.children("tfoot");if(0===a.length&&n.length>0&&(""!==N.oScroll.sX||""!==N.oScroll.sY)&&(a=e("<tfoot/>").appendTo(C)),0===a.length||0===a.children().length?C.addClass(A.sNoFooter):a.length>0&&(N.nTFoot=a[0],$(N.aoFooter,N.nTFoot)),g.aaData)for(m=0;m<g.aaData.length;m++)w(N,g.aaData[m]);else(N.bDeferLoading||"dom"==He(N))&&_(N,e(N.nTBody).children("tr"));N.aiDisplay=N.aiDisplayMaster.slice(),N.bInitialised=!0,!1===b&&ae(N)};g.bStateSave?(F.bStateSave=!0,je(N,"aoDrawCallback",Ne,"state_save"),Ae(N,g,H)):H()}),n=null,this},Ke={},Xe=/[\r\n]/g,Je=/<.*?>/g,Qe=/^\d{2,4}[\.\/\-]\d{1,2}[\.\/\-]\d{1,2}([T ]{1}\d{1,2}[:\.]\d{2}([\.:]\d{2})?)?$/,Ze=new RegExp("(\\"+["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^","-"].join("|\\")+")","g"),et=/[',$%\u2009\u202F\u20BD\u20a9\u20BArfk]/gi,tt=function(e){return!e||!0===e||"-"===e},nt=function(e){var t=parseInt(e,10);return!isNaN(t)&&isFinite(e)?t:null},rt=function(e,t){return Ke[t]||(Ke[t]=new RegExp(vt(t),"g")),"string"==typeof e&&"."!==t?e.replace(/\./g,"").replace(Ke[t],"."):e},it=function(e,t,n){var r="string"==typeof e;return!!tt(e)||(t&&r&&(e=rt(e,t)),n&&r&&(e=e.replace(et,"")),!isNaN(parseFloat(e))&&isFinite(e))},ot=function(e){return tt(e)||"string"==typeof e},at=function(e,t,n){return!!tt(e)||(ot(e)?!!it(dt(e),t,n)||null:null)},st=function(e,t,n){var i=[],o=0,a=e.length;if(n!==r)for(;o<a;o++)e[o]&&e[o][t]&&i.push(e[o][t][n]);else for(;o<a;o++)e[o]&&i.push(e[o][t]);return i},lt=function(e,t,n,i){var o=[],a=0,s=t.length;if(i!==r)for(;a<s;a++)e[t[a]][n]&&o.push(e[t[a]][n][i]);else for(;a<s;a++)o.push(e[t[a]][n]);return o},ct=function(e,t){var n,i=[];t===r?(t=0,n=e):(n=t,t=e);for(var o=t;o<n;o++)i.push(o);return i},ut=function(e){for(var t=[],n=0,r=e.length;n<r;n++)e[n]&&t.push(e[n]);return t},dt=function(e){return e.replace(Je,"")},ft=function(e){if(e.length<2)return!0;for(var t=e.slice().sort(),n=t[0],r=1,i=t.length;r<i;r++){if(t[r]===n)return!1;n=t[r]}return!0},ht=function(e){if(ft(e))return e.slice();var t,n,r,i=[],o=e.length,a=0;e:for(n=0;n<o;n++){for(t=e[n],r=0;r<a;r++)if(i[r]===t)continue e;i.push(t),a++}return i};Ge.util={throttle:function(e,t){var n,i,o=t!==r?t:200;return function(){var t=this,a=+new Date,s=arguments;n&&a<n+o?(clearTimeout(i),i=setTimeout(function(){n=r,e.apply(t,s)},o)):(n=a,e.apply(t,s))}},escapeRegex:function(e){return e.replace(Ze,"\\$1")}};var pt=function(e,t,n){e[t]!==r&&(e[n]=e[t])},gt=/\[.*?\]$/,mt=/\(\)$/,vt=Ge.util.escapeRegex,bt=e("<div>")[0],yt=bt.textContent!==r,wt=/<.*?>/g,_t=Ge.util.throttle,xt=[],Ct=Array.prototype,kt=function(t){var n,r,i=Ge.settings,o=e.map(i,function(e,t){return e.nTable});return t?t.nTable&&t.oApi?[t]:t.nodeName&&"table"===t.nodeName.toLowerCase()?(n=e.inArray(t,o),-1!==n?[i[n]]:null):t&&"function"==typeof t.settings?t.settings().toArray():("string"==typeof t?r=e(t):t instanceof e&&(r=t),r?r.map(function(t){return n=e.inArray(this,o),-1!==n?i[n]:null}).toArray():void 0):[]};qe=function(t,n){if(!(this instanceof qe))return new qe(t,n);var r=[],i=function(e){var t=kt(e);t&&(r=r.concat(t))};if(e.isArray(t))for(var o=0,a=t.length;o<a;o++)i(t[o]);else i(t);this.context=ht(r),n&&e.merge(this,n),this.selector={rows:null,cols:null,opts:null},qe.extend(this,this,xt)},Ge.Api=qe,e.extend(qe.prototype,{any:function(){return 0!==this.count()},concat:Ct.concat,context:[],count:function(){return this.flatten().length},each:function(e){for(var t=0,n=this.length;t<n;t++)e.call(this,this[t],t,this);return this},eq:function(e){var t=this.context;return t.length>e?new qe(t[e],this[e]):null},filter:function(e){var t=[];if(Ct.filter)t=Ct.filter.call(this,e,this);else for(var n=0,r=this.length;n<r;n++)e.call(this,this[n],n,this)&&t.push(this[n]);return new qe(this.context,t)},flatten:function(){var e=[];return new qe(this.context,e.concat.apply(e,this.toArray()))},join:Ct.join,indexOf:Ct.indexOf||function(e,t){for(var n=t||0,r=this.length;n<r;n++)if(this[n]===e)return n;return-1},iterator:function(e,t,n,i){var o,a,s,l,c,u,d,f,h=[],p=this.context,g=this.selector;for("string"==typeof e&&(i=n,n=t,t=e,e=!1),a=0,s=p.length;a<s;a++){var m=new qe(p[a]);if("table"===t)(o=n.call(m,p[a],a))!==r&&h.push(o);else if("columns"===t||"rows"===t)(o=n.call(m,p[a],this[a],a))!==r&&h.push(o);else if("column"===t||"column-rows"===t||"row"===t||"cell"===t)for(d=this[a],"column-rows"===t&&(u=At(p[a],g.opts)),l=0,c=d.length;l<c;l++)f=d[l],(o="cell"===t?n.call(m,p[a],f.row,f.column,a,l):n.call(m,p[a],f,a,l,u))!==r&&h.push(o)}if(h.length||i){var v=new qe(p,e?h.concat.apply([],h):h),b=v.selector;return b.rows=g.rows,b.cols=g.cols,b.opts=g.opts,v}return this},lastIndexOf:Ct.lastIndexOf||function(e,t){return this.indexOf.apply(this.toArray.reverse(),arguments)},length:0,map:function(e){var t=[];if(Ct.map)t=Ct.map.call(this,e,this);else for(var n=0,r=this.length;n<r;n++)t.push(e.call(this,this[n],n));return new qe(this.context,t)},pluck:function(e){return this.map(function(t){return t[e]})},pop:Ct.pop,push:Ct.push,reduce:Ct.reduce||function(e,t){return u(this,e,t,0,this.length,1)},reduceRight:Ct.reduceRight||function(e,t){return u(this,e,t,this.length-1,-1,-1)},reverse:Ct.reverse,selector:null,shift:Ct.shift,slice:function(){return new qe(this.context,this)},sort:Ct.sort,splice:Ct.splice,toArray:function(){return Ct.slice.call(this)},to$:function(){return e(this)},toJQuery:function(){return e(this)},unique:function(){return new qe(this.context,ht(this))},unshift:Ct.unshift}),qe.extend=function(t,n,r){if(r.length&&n&&(n instanceof qe||n.__dt_wrapper)){var i,o,a;for(i=0,o=r.length;i<o;i++)a=r[i],n[a.name]="function"==typeof a.val?function(e,t,n){return function(){var r=t.apply(e,arguments);return qe.extend(r,r,n.methodExt),r}}(t,a.val,a):e.isPlainObject(a.val)?{}:a.val,n[a.name].__dt_wrapper=!0,
qe.extend(t,n[a.name],a.propExt)}},qe.register=Ve=function(t,n){if(e.isArray(t))for(var r=0,i=t.length;r<i;r++)qe.register(t[r],n);else{var o,a,s,l,c=t.split("."),u=xt;for(o=0,a=c.length;o<a;o++){l=-1!==c[o].indexOf("()"),s=l?c[o].replace("()",""):c[o];var d=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n].name===t)return e[n];return null}(u,s);d||(d={name:s,val:{},methodExt:[],propExt:[]},u.push(d)),o===a-1?d.val=n:u=l?d.methodExt:d.propExt}}},qe.registerPlural=Ye=function(t,n,i){qe.register(t,i),qe.register(n,function(){var t=i.apply(this,arguments);return t===this?this:t instanceof qe?t.length?e.isArray(t[0])?new qe(t.context,t[0]):t[0]:r:t})};var Tt=function(t,n){if("number"==typeof t)return[n[t]];var r=e.map(n,function(e,t){return e.nTable});return e(r).filter(t).map(function(t){var i=e.inArray(this,r);return n[i]}).toArray()};Ve("tables()",function(e){return e?new qe(Tt(e,this.context)):this}),Ve("table()",function(e){var t=this.tables(e),n=t.context;return n.length?new qe(n[0]):t}),Ye("tables().nodes()","table().node()",function(){return this.iterator("table",function(e){return e.nTable},1)}),Ye("tables().body()","table().body()",function(){return this.iterator("table",function(e){return e.nTBody},1)}),Ye("tables().header()","table().header()",function(){return this.iterator("table",function(e){return e.nTHead},1)}),Ye("tables().footer()","table().footer()",function(){return this.iterator("table",function(e){return e.nTFoot},1)}),Ye("tables().containers()","table().container()",function(){return this.iterator("table",function(e){return e.nTableWrapper},1)}),Ve("draw()",function(e){return this.iterator("table",function(t){"page"===e?L(t):("string"==typeof e&&(e="full-hold"!==e),F(t,!1===e))})}),Ve("page()",function(e){return e===r?this.page.info().page:this.iterator("table",function(t){de(t,e)})}),Ve("page.info()",function(e){if(0===this.context.length)return r;var t=this.context[0],n=t._iDisplayStart,i=t.oFeatures.bPaginate?t._iDisplayLength:-1,o=t.fnRecordsDisplay(),a=-1===i;return{page:a?0:Math.floor(n/i),pages:a?1:Math.ceil(o/i),start:n,end:t.fnDisplayEnd(),length:i,recordsTotal:t.fnRecordsTotal(),recordsDisplay:o,serverSide:"ssp"===He(t)}}),Ve("page.len()",function(e){return e===r?0!==this.context.length?this.context[0]._iDisplayLength:r:this.iterator("table",function(t){le(t,e)})});var St=function(e,t,n){if(n){var r=new qe(e);r.one("draw",function(){n(r.ajax.json())})}if("ssp"==He(e))F(e,t);else{he(e,!0);var i=e.jqXHR;i&&4!==i.readyState&&i.abort(),z(e,[],function(n){A(e);for(var r=Y(e,n),i=0,o=r.length;i<o;i++)w(e,r[i]);F(e,t),he(e,!1)})}};Ve("ajax.json()",function(){var e=this.context;if(e.length>0)return e[0].json}),Ve("ajax.params()",function(){var e=this.context;if(e.length>0)return e[0].oAjaxData}),Ve("ajax.reload()",function(e,t){return this.iterator("table",function(n){St(n,!1===t,e)})}),Ve("ajax.url()",function(t){var n=this.context;return t===r?0===n.length?r:(n=n[0],n.ajax?e.isPlainObject(n.ajax)?n.ajax.url:n.ajax:n.sAjaxSource):this.iterator("table",function(n){e.isPlainObject(n.ajax)?n.ajax.url=t:n.ajax=t})}),Ve("ajax.url().load()",function(e,t){return this.iterator("table",function(n){St(n,!1===t,e)})});var Dt=function(t,n,i,o,a){var s,l,c,u,d,f,h=[],p=typeof n;for(n&&"string"!==p&&"function"!==p&&n.length!==r||(n=[n]),c=0,u=n.length;c<u;c++)for(l=n[c]&&n[c].split&&!n[c].match(/[\[\(:]/)?n[c].split(","):[n[c]],d=0,f=l.length;d<f;d++)(s=i("string"==typeof l[d]?e.trim(l[d]):l[d]))&&s.length&&(h=h.concat(s));var g=We.selector[t];if(g.length)for(c=0,u=g.length;c<u;c++)h=g[c](o,a,h);return ht(h)},Et=function(t){return t||(t={}),t.filter&&t.search===r&&(t.search=t.filter),e.extend({search:"none",order:"current",page:"all"},t)},Nt=function(e){for(var t=0,n=e.length;t<n;t++)if(e[t].length>0)return e[0]=e[t],e[0].length=1,e.length=1,e.context=[e.context[t]],e;return e.length=0,e},At=function(t,n){var r,i,o,a=[],s=t.aiDisplay,l=t.aiDisplayMaster,c=n.search,u=n.order,d=n.page;if("ssp"==He(t))return"removed"===c?[]:ct(0,l.length);if("current"==d)for(r=t._iDisplayStart,i=t.fnDisplayEnd();r<i;r++)a.push(s[r]);else if("current"==u||"applied"==u){if("none"==c)a=l.slice();else if("applied"==c)a=s.slice();else if("removed"==c){for(var f={},r=0,i=s.length;r<i;r++)f[s[r]]=null;a=e.map(l,function(e){return f.hasOwnProperty(e)?null:e})}}else if("index"==u||"original"==u)for(r=0,i=t.aoData.length;r<i;r++)"none"==c?a.push(r):(-1===(o=e.inArray(r,s))&&"removed"==c||o>=0&&"applied"==c)&&a.push(r);return a},Rt=function(t,n,i){var o;return Dt("row",n,function(n){var a=nt(n),s=t.aoData;if(null!==a&&!i)return[a];if(o||(o=At(t,i)),null!==a&&-1!==e.inArray(a,o))return[a];if(null===n||n===r||""===n)return o;if("function"==typeof n)return e.map(o,function(e){var t=s[e];return n(e,t._aData,t.nTr)?e:null});if(n.nodeName){var l=n._DT_RowIndex,c=n._DT_CellIndex;if(l!==r)return s[l]&&s[l].nTr===n?[l]:[];if(c)return s[c.row]&&s[c.row].nTr===n?[c.row]:[];var u=e(n).closest("*[data-dt-row]");return u.length?[u.data("dt-row")]:[]}if("string"==typeof n&&"#"===n.charAt(0)){var d=t.aIds[n.replace(/^#/,"")];if(d!==r)return[d.idx]}var f=ut(lt(t.aoData,o,"nTr"));return e(f).filter(n).map(function(){return this._DT_RowIndex}).toArray()},t,i)};Ve("rows()",function(t,n){t===r?t="":e.isPlainObject(t)&&(n=t,t=""),n=Et(n);var i=this.iterator("table",function(e){return Rt(e,t,n)},1);return i.selector.rows=t,i.selector.opts=n,i}),Ve("rows().nodes()",function(){return this.iterator("row",function(e,t){return e.aoData[t].nTr||r},1)}),Ve("rows().data()",function(){return this.iterator(!0,"rows",function(e,t){return lt(e.aoData,t,"_aData")},1)}),Ye("rows().cache()","row().cache()",function(e){return this.iterator("row",function(t,n){var r=t.aoData[n];return"search"===e?r._aFilterData:r._aSortData},1)}),Ye("rows().invalidate()","row().invalidate()",function(e){return this.iterator("row",function(t,n){P(t,n,e)})}),Ye("rows().indexes()","row().index()",function(){return this.iterator("row",function(e,t){return t},1)}),Ye("rows().ids()","row().id()",function(e){for(var t=[],n=this.context,r=0,i=n.length;r<i;r++)for(var o=0,a=this[r].length;o<a;o++){var s=n[r].rowIdFn(n[r].aoData[this[r][o]]._aData);t.push((!0===e?"#":"")+s)}return new qe(n,t)}),Ye("rows().remove()","row().remove()",function(){var e=this;return this.iterator("row",function(t,n,i){var o,a,s,l,c,u,d=t.aoData,f=d[n];for(d.splice(n,1),o=0,a=d.length;o<a;o++)if(c=d[o],u=c.anCells,null!==c.nTr&&(c.nTr._DT_RowIndex=o),null!==u)for(s=0,l=u.length;s<l;s++)u[s]._DT_CellIndex.row=o;R(t.aiDisplayMaster,n),R(t.aiDisplay,n),R(e[i],n,!1),t._iRecordsDisplay>0&&t._iRecordsDisplay--,Le(t);var h=t.rowIdFn(f._aData);h!==r&&delete t.aIds[h]}),this.iterator("table",function(e){for(var t=0,n=e.aoData.length;t<n;t++)e.aoData[t].idx=t}),this}),Ve("rows.add()",function(t){var n=this.iterator("table",function(e){var n,r,i,o=[];for(r=0,i=t.length;r<i;r++)n=t[r],n.nodeName&&"TR"===n.nodeName.toUpperCase()?o.push(_(e,n)[0]):o.push(w(e,n));return o},1),r=this.rows(-1);return r.pop(),e.merge(r,n),r}),Ve("row()",function(e,t){return Nt(this.rows(e,t))}),Ve("row().data()",function(t){var n=this.context;if(t===r)return n.length&&this.length?n[0].aoData[this[0]]._aData:r;var i=n[0].aoData[this[0]];return i._aData=t,e.isArray(t)&&i.nTr.id&&E(n[0].rowId)(t,i.nTr.id),P(n[0],this[0],"data"),this}),Ve("row().node()",function(){var e=this.context;return e.length&&this.length?e[0].aoData[this[0]].nTr||null:null}),Ve("row.add()",function(t){t instanceof e&&t.length&&(t=t[0]);var n=this.iterator("table",function(e){return t.nodeName&&"TR"===t.nodeName.toUpperCase()?_(e,t)[0]:w(e,t)});return this.row(n[0])});var Pt=function(t,n,r,i){var o=[],a=function(n,r){if(e.isArray(n)||n instanceof e)for(var i=0,s=n.length;i<s;i++)a(n[i],r);else if(n.nodeName&&"tr"===n.nodeName.toLowerCase())o.push(n);else{var l=e("<tr><td/></tr>").addClass(r);e("td",l).addClass(r).html(n)[0].colSpan=m(t),o.push(l[0])}};a(r,i),n._details&&n._details.detach(),n._details=e(o),n._detailsShow&&n._details.insertAfter(n.nTr)},Ot=function(e,t){var n=e.context;if(n.length){var i=n[0].aoData[t!==r?t:e[0]];i&&i._details&&(i._details.remove(),i._detailsShow=r,i._details=r)}},It=function(e,t){var n=e.context;if(n.length&&e.length){var r=n[0].aoData[e[0]];r._details&&(r._detailsShow=t,t?r._details.insertAfter(r.nTr):r._details.detach(),Mt(n[0]))}},Mt=function(e){var t=new qe(e),n=e.aoData;t.off("draw.dt.DT_details column-visibility.dt.DT_details destroy.dt.DT_details"),st(n,"_details").length>0&&(t.on("draw.dt.DT_details",function(r,i){e===i&&t.rows({page:"current"}).eq(0).each(function(e){var t=n[e];t._detailsShow&&t._details.insertAfter(t.nTr)})}),t.on("column-visibility.dt.DT_details",function(t,r,i,o){if(e===r)for(var a,s=m(r),l=0,c=n.length;l<c;l++)a=n[l],a._details&&a._details.children("td[colspan]").attr("colspan",s)}),t.on("destroy.dt.DT_details",function(r,i){if(e===i)for(var o=0,a=n.length;o<a;o++)n[o]._details&&Ot(t,o)}))};Ve("row().child()",function(e,t){var n=this.context;return e===r?n.length&&this.length?n[0].aoData[this[0]]._details:r:(!0===e?this.child.show():!1===e?Ot(this):n.length&&this.length&&Pt(n[0],n[0].aoData[this[0]],e,t),this)}),Ve(["row().child.show()","row().child().show()"],function(e){return It(this,!0),this}),Ve(["row().child.hide()","row().child().hide()"],function(){return It(this,!1),this}),Ve(["row().child.remove()","row().child().remove()"],function(){return Ot(this),this}),Ve("row().child.isShown()",function(){var e=this.context;return!(!e.length||!this.length)&&(e[0].aoData[this[0]]._detailsShow||!1)});var jt=/^([^:]+):(name|visIdx|visible)$/,Bt=function(e,t,n,r,i){for(var o=[],a=0,s=i.length;a<s;a++)o.push(k(e,i[a],t));return o},Lt=function(t,n,r){var i=t.aoColumns,o=st(i,"sName"),a=st(i,"nTh");return Dt("column",n,function(n){var s=nt(n);if(""===n)return ct(i.length);if(null!==s)return[s>=0?s:i.length+s];if("function"==typeof n){var l=At(t,r);return e.map(i,function(e,r){return n(r,Bt(t,r,0,0,l),a[r])?r:null})}var c="string"==typeof n?n.match(jt):"";if(c)switch(c[2]){case"visIdx":case"visible":var u=parseInt(c[1],10);if(u<0){var d=e.map(i,function(e,t){return e.bVisible?t:null});return[d[d.length+u]]}return[p(t,u)];case"name":return e.map(o,function(e,t){return e===c[1]?t:null});default:return[]}if(n.nodeName&&n._DT_CellIndex)return[n._DT_CellIndex.column];var f=e(a).filter(n).map(function(){return e.inArray(this,a)}).toArray();if(f.length||!n.nodeName)return f;var h=e(n).closest("*[data-dt-column]");return h.length?[h.data("dt-column")]:[]},t,r)},Ft=function(t,n,i){var o,a,s,l,c=t.aoColumns,u=c[n],d=t.aoData;if(i===r)return u.bVisible;if(u.bVisible!==i){if(i){var f=e.inArray(!0,st(c,"bVisible"),n+1);for(a=0,s=d.length;a<s;a++)l=d[a].nTr,o=d[a].anCells,l&&l.insertBefore(o[n],o[f]||null)}else e(st(t.aoData,"anCells",n)).detach();u.bVisible=i,B(t,t.aoHeader),B(t,t.aoFooter),t.aiDisplay.length||e(t.nTBody).find("td[colspan]").attr("colspan",m(t)),Ne(t)}};Ve("columns()",function(t,n){t===r?t="":e.isPlainObject(t)&&(n=t,t=""),n=Et(n);var i=this.iterator("table",function(e){return Lt(e,t,n)},1);return i.selector.cols=t,i.selector.opts=n,i}),Ye("columns().header()","column().header()",function(e,t){return this.iterator("column",function(e,t){return e.aoColumns[t].nTh},1)}),Ye("columns().footer()","column().footer()",function(e,t){return this.iterator("column",function(e,t){return e.aoColumns[t].nTf},1)}),Ye("columns().data()","column().data()",function(){return this.iterator("column-rows",Bt,1)}),Ye("columns().dataSrc()","column().dataSrc()",function(){return this.iterator("column",function(e,t){return e.aoColumns[t].mData},1)}),Ye("columns().cache()","column().cache()",function(e){return this.iterator("column-rows",function(t,n,r,i,o){return lt(t.aoData,o,"search"===e?"_aFilterData":"_aSortData",n)},1)}),Ye("columns().nodes()","column().nodes()",function(){return this.iterator("column-rows",function(e,t,n,r,i){return lt(e.aoData,i,"anCells",t)},1)}),Ye("columns().visible()","column().visible()",function(e,t){var n=this.iterator("column",function(t,n){if(e===r)return t.aoColumns[n].bVisible;Ft(t,n,e)});return e!==r&&(this.iterator("column",function(n,r){Be(n,null,"column-visibility",[n,r,e,t])}),(t===r||t)&&this.columns.adjust()),n}),Ye("columns().indexes()","column().index()",function(e){return this.iterator("column",function(t,n){return"visible"===e?g(t,n):n},1)}),Ve("columns.adjust()",function(){return this.iterator("table",function(e){h(e)},1)}),Ve("column.index()",function(e,t){if(0!==this.context.length){var n=this.context[0];if("fromVisible"===e||"toData"===e)return p(n,t);if("fromData"===e||"toVisible"===e)return g(n,t)}}),Ve("column()",function(e,t){return Nt(this.columns(e,t))});var Ht=function(t,n,i){var o,a,s,l,c,u,d,f=t.aoData,h=At(t,i),p=ut(lt(f,h,"anCells")),g=e([].concat.apply([],p)),m=t.aoColumns.length;return Dt("cell",n,function(n){var i="function"==typeof n;if(null===n||n===r||i){for(a=[],s=0,l=h.length;s<l;s++)for(o=h[s],c=0;c<m;c++)u={row:o,column:c},i?(d=f[o],n(u,k(t,o,c),d.anCells?d.anCells[c]:null)&&a.push(u)):a.push(u);return a}if(e.isPlainObject(n))return n.column!==r&&n.row!==r&&-1!==e.inArray(n.row,h)?[n]:[];var p=g.filter(n).map(function(e,t){return{row:t._DT_CellIndex.row,column:t._DT_CellIndex.column}}).toArray();return p.length||!n.nodeName?p:(d=e(n).closest("*[data-dt-row]"),d.length?[{row:d.data("dt-row"),column:d.data("dt-column")}]:[])},t,i)};Ve("cells()",function(t,n,i){if(e.isPlainObject(t)&&(t.row===r?(i=t,t=null):(i=n,n=null)),e.isPlainObject(n)&&(i=n,n=null),null===n||n===r)return this.iterator("table",function(e){return Ht(e,t,Et(i))});var o,a,s,l,c,u=this.columns(n),d=this.rows(t);this.iterator("table",function(e,t){for(o=[],a=0,s=d[t].length;a<s;a++)for(l=0,c=u[t].length;l<c;l++)o.push({row:d[t][a],column:u[t][l]})},1);var f=this.cells(o,i);return e.extend(f.selector,{cols:n,rows:t,opts:i}),f}),Ye("cells().nodes()","cell().node()",function(){return this.iterator("cell",function(e,t,n){var i=e.aoData[t];return i&&i.anCells?i.anCells[n]:r},1)}),Ve("cells().data()",function(){return this.iterator("cell",function(e,t,n){return k(e,t,n)},1)}),Ye("cells().cache()","cell().cache()",function(e){return e="search"===e?"_aFilterData":"_aSortData",this.iterator("cell",function(t,n,r){return t.aoData[n][e][r]},1)}),Ye("cells().render()","cell().render()",function(e){return this.iterator("cell",function(t,n,r){return k(t,n,r,e)},1)}),Ye("cells().indexes()","cell().index()",function(){return this.iterator("cell",function(e,t,n){return{row:t,column:n,columnVisible:g(e,n)}},1)}),Ye("cells().invalidate()","cell().invalidate()",function(e){return this.iterator("cell",function(t,n,r){P(t,n,e,r)})}),Ve("cell()",function(e,t,n){return Nt(this.cells(e,t,n))}),Ve("cell().data()",function(e){var t=this.context,n=this[0];return e===r?t.length&&n.length?k(t[0],n[0].row,n[0].column):r:(T(t[0],n[0].row,n[0].column,e),P(t[0],n[0].row,"data",n[0].column),this)}),Ve("order()",function(t,n){var i=this.context;return t===r?0!==i.length?i[0].aaSorting:r:("number"==typeof t?t=[[t,n]]:t.length&&!e.isArray(t[0])&&(t=Array.prototype.slice.call(arguments)),this.iterator("table",function(e){e.aaSorting=t.slice()}))}),Ve("order.listener()",function(e,t,n){return this.iterator("table",function(r){Se(r,e,t,n)})}),Ve("order.fixed()",function(t){if(!t){var n=this.context,i=n.length?n[0].aaSortingFixed:r;return e.isArray(i)?{pre:i}:i}return this.iterator("table",function(n){n.aaSortingFixed=e.extend(!0,{},t)})}),Ve(["columns().order()","column().order()"],function(t){var n=this;return this.iterator("table",function(r,i){var o=[];e.each(n[i],function(e,n){o.push([n,t])}),r.aaSorting=o})}),Ve("search()",function(t,n,i,o){var a=this.context;return t===r?0!==a.length?a[0].oPreviousSearch.sSearch:r:this.iterator("table",function(r){r.oFeatures.bFilter&&K(r,e.extend({},r.oPreviousSearch,{sSearch:t+"",bRegex:null!==n&&n,bSmart:null===i||i,bCaseInsensitive:null===o||o}),1)})}),Ye("columns().search()","column().search()",function(t,n,i,o){return this.iterator("column",function(a,s){var l=a.aoPreSearchCols;if(t===r)return l[s].sSearch;a.oFeatures.bFilter&&(e.extend(l[s],{sSearch:t+"",bRegex:null!==n&&n,bSmart:null===i||i,bCaseInsensitive:null===o||o}),K(a,a.oPreviousSearch,1))})}),Ve("state()",function(){return this.context.length?this.context[0].oSavedState:null}),Ve("state.clear()",function(){return this.iterator("table",function(e){e.fnStateSaveCallback.call(e.oInstance,e,{})})}),Ve("state.loaded()",function(){return this.context.length?this.context[0].oLoadedState:null}),Ve("state.save()",function(){return this.iterator("table",function(e){Ne(e)})}),Ge.versionCheck=Ge.fnVersionCheck=function(e){for(var t,n,r=Ge.version.split("."),i=e.split("."),o=0,a=i.length;o<a;o++)if(t=parseInt(r[o],10)||0,n=parseInt(i[o],10)||0,t!==n)return t>n;return!0},Ge.isDataTable=Ge.fnIsDataTable=function(t){var n=e(t).get(0),r=!1;return t instanceof Ge.Api||(e.each(Ge.settings,function(t,i){var o=i.nScrollHead?e("table",i.nScrollHead)[0]:null,a=i.nScrollFoot?e("table",i.nScrollFoot)[0]:null;i.nTable!==n&&o!==n&&a!==n||(r=!0)}),r)},Ge.tables=Ge.fnTables=function(t){var n=!1;e.isPlainObject(t)&&(n=t.api,t=t.visible);var r=e.map(Ge.settings,function(n){if(!t||t&&e(n.nTable).is(":visible"))return n.nTable});return n?new qe(r):r},Ge.camelToHungarian=o,Ve("$()",function(t,n){var r=this.rows(n).nodes(),i=e(r);return e([].concat(i.filter(t).toArray(),i.find(t).toArray()))}),e.each(["on","one","off"],function(t,n){Ve(n+"()",function(){var t=Array.prototype.slice.call(arguments);t[0]=e.map(t[0].split(/\s/),function(e){return e.match(/\.dt\b/)?e:e+".dt"}).join(" ");var r=e(this.tables().nodes());return r[n].apply(r,t),this})}),Ve("clear()",function(){return this.iterator("table",function(e){A(e)})}),Ve("settings()",function(){return new qe(this.context,this.context)}),Ve("init()",function(){var e=this.context;return e.length?e[0].oInit:null}),Ve("data()",function(){return this.iterator("table",function(e){return st(e.aoData,"_aData")}).flatten()}),Ve("destroy()",function(n){return n=n||!1,this.iterator("table",function(r){var i,o=r.nTableWrapper.parentNode,a=r.oClasses,s=r.nTable,l=r.nTBody,c=r.nTHead,u=r.nTFoot,d=e(s),f=e(l),h=e(r.nTableWrapper),p=e.map(r.aoData,function(e){return e.nTr});r.bDestroying=!0,Be(r,"aoDestroyCallback","destroy",[r]),n||new qe(r).columns().visible(!0),h.off(".DT").find(":not(tbody *)").off(".DT"),e(t).off(".DT-"+r.sInstance),s!=c.parentNode&&(d.children("thead").detach(),d.append(c)),u&&s!=u.parentNode&&(d.children("tfoot").detach(),d.append(u)),r.aaSorting=[],r.aaSortingFixed=[],De(r),e(p).removeClass(r.asStripeClasses.join(" ")),e("th, td",c).removeClass(a.sSortable+" "+a.sSortableAsc+" "+a.sSortableDesc+" "+a.sSortableNone),f.children().detach(),f.append(p);var g=n?"remove":"detach";d[g](),h[g](),!n&&o&&(o.insertBefore(s,r.nTableReinsertBefore),d.css("width",r.sDestroyWidth).removeClass(a.sTable),(i=r.asDestroyStripes.length)&&f.children().each(function(t){e(this).addClass(r.asDestroyStripes[t%i])}));var m=e.inArray(r,Ge.settings);-1!==m&&Ge.settings.splice(m,1)})}),e.each(["column","row","cell"],function(e,t){Ve(t+"s().every()",function(e){var n=this.selector.opts,i=this;return this.iterator(t,function(o,a,s,l,c){e.call(i[t](a,"cell"===t?s:n,"cell"===t?n:r),a,s,l,c)})})}),Ve("i18n()",function(t,n,i){var o=this.context[0],a=D(t)(o.oLanguage);return a===r&&(a=n),i!==r&&e.isPlainObject(a)&&(a=a[i]!==r?a[i]:a._),a.replace("%d",i)}),Ge.version="1.10.18",Ge.settings=[],Ge.models={},Ge.models.oSearch={bCaseInsensitive:!0,sSearch:"",bRegex:!1,bSmart:!0},Ge.models.oRow={nTr:null,anCells:null,_aData:[],_aSortData:null,_aFilterData:null,_sFilterRow:null,_sRowStripe:"",src:null,idx:-1},Ge.models.oColumn={idx:null,aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bVisible:null,_sManualType:null,_bAttrSrc:!1,fnCreatedCell:null,fnGetData:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null},Ge.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:[],ajax:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollCollapse:!1,bServerSide:!1,bSort:!0,bSortMulti:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,this.oLanguage.sThousands)},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnServerData:null,fnServerParams:null,fnStateLoadCallback:function(e){try{return JSON.parse((-1===e.iStateDuration?sessionStorage:localStorage).getItem("DataTables_"+e.sInstance+"_"+location.pathname))}catch(e){}},fnStateLoadParams:null,fnStateLoaded:null,fnStateSaveCallback:function(e,t){try{(-1===e.iStateDuration?sessionStorage:localStorage).setItem("DataTables_"+e.sInstance+"_"+location.pathname,JSON.stringify(t))}catch(e){}},fnStateSaveParams:null,iStateDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,iTabIndex:0,oClasses:{},oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sDecimal:"",sThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sSearchPlaceholder:"",sUrl:"",sZeroRecords:"No matching records found"},oSearch:e.extend({},Ge.models.oSearch),sAjaxDataProp:"data",sAjaxSource:null,sDom:"lfrtip",searchDelay:null,sPaginationType:"simple_numbers",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET",renderer:null,rowId:"DT_RowId"},i(Ge.defaults),Ge.defaults.column={aDataSort:null,iDataSort:-1,asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bVisible:!0,fnCreatedCell:null,mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null},i(Ge.defaults.column),Ge.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortMulti:null,bSortClasses:null,bStateSave:null},oScroll:{bCollapse:null,iBarWidth:0,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1,bScrollbarLeft:!1,bBounding:!1,barWidth:0},ajax:null,aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aIds:{},aoColumns:[],aoHeader:[],aoFooter:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:[],asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,searchDelay:null,sPaginationType:"two_button",iStateDuration:0,aoStateSave:[],aoStateLoad:[],oSavedState:null,oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:!0,jqXHR:null,json:r,oAjaxData:r,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iRecordsTotal:0,_iRecordsDisplay:0,oClasses:{},bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return"ssp"==He(this)?1*this._iRecordsTotal:this.aiDisplayMaster.length},fnRecordsDisplay:function(){return"ssp"==He(this)?1*this._iRecordsDisplay:this.aiDisplay.length},fnDisplayEnd:function(){var e=this._iDisplayLength,t=this._iDisplayStart,n=t+e,r=this.aiDisplay.length,i=this.oFeatures,o=i.bPaginate;return i.bServerSide?!1===o||-1===e?t+r:Math.min(t+e,this._iRecordsDisplay):!o||n>r||-1===e?r:n},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null,aLastSort:[],oPlugins:{},rowIdFn:null,rowId:null},Ge.ext=We={buttons:{},classes:{},builder:"-source-",errMode:"alert",feature:[],search:[],selector:{cell:[],column:[],row:[]},internal:{},legacy:{ajax:null},pager:{},renderer:{pageButton:{},header:{}},order:{},type:{detect:[],search:{},order:{}},_unique:0,fnVersionCheck:Ge.fnVersionCheck,iApiIndex:0,oJUIClasses:{},sVersion:Ge.version},e.extend(We,{afnFiltering:We.search,aTypes:We.type.detect,ofnSearch:We.type.search,oSort:We.type.order,afnSortData:We.order,aoFeatures:We.feature,oApi:We.internal,oStdClasses:We.classes,oPagination:We.pager}),e.extend(Ge.ext.classes,{sTable:"dataTable",sNoFooter:"no-footer",sPageButton:"paginate_button",sPageButtonActive:"current",sPageButtonDisabled:"disabled",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sFilterInput:"",sLengthSelect:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sHeaderTH:"",sFooterTH:"",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sJUIHeader:"",sJUIFooter:""});var $t=Ge.ext.pager;e.extend($t,{simple:function(e,t){return["previous","next"]},full:function(e,t){return["first","previous","next","last"]},numbers:function(e,t){return[$e(e,t)]},simple_numbers:function(e,t){return["previous",$e(e,t),"next"]},full_numbers:function(e,t){return["first","previous",$e(e,t),"next","last"]},first_last_numbers:function(e,t){return["first",$e(e,t),"last"]},_numbers:$e,numbers_length:7}),e.extend(!0,Ge.ext.renderer,{pageButton:{_:function(t,i,o,a,s,l){var c,u,d,f=t.oClasses,h=t.oLanguage.oPaginate,p=t.oLanguage.oAria.paginate||{},g=0,m=function(n,r){var i,a,d,v,b=function(e){de(t,e.data.action,!0)};for(i=0,a=r.length;i<a;i++)if(v=r[i],e.isArray(v)){var y=e("<"+(v.DT_el||"div")+"/>").appendTo(n);m(y,v)}else{switch(c=null,u="",v){case"ellipsis":n.append('<span class="ellipsis">&#x2026;</span>');break;case"first":c=h.sFirst,u=v+(s>0?"":" "+f.sPageButtonDisabled);break;case"previous":c=h.sPrevious,u=v+(s>0?"":" "+f.sPageButtonDisabled);break;case"next":c=h.sNext,u=v+(s<l-1?"":" "+f.sPageButtonDisabled);break;case"last":c=h.sLast,u=v+(s<l-1?"":" "+f.sPageButtonDisabled);break;default:c=v+1,u=s===v?f.sPageButtonActive:""}null!==c&&(d=e("<a>",{class:f.sPageButton+" "+u,"aria-controls":t.sTableId,"aria-label":p[v],"data-dt-idx":g,tabindex:t.iTabIndex,id:0===o&&"string"==typeof v?t.sTableId+"_"+v:null}).html(c).appendTo(n),Me(d,{action:v},b),g++)}};try{d=e(i).find(n.activeElement).data("dt-idx")}catch(e){}m(e(i).empty(),a),d!==r&&e(i).find("[data-dt-idx="+d+"]").focus()}}}),e.extend(Ge.ext.type.detect,[function(e,t){var n=t.oLanguage.sDecimal;return it(e,n)?"num"+n:null},function(e,t){if(e&&!(e instanceof Date)&&!Qe.test(e))return null;var n=Date.parse(e);return null!==n&&!isNaN(n)||tt(e)?"date":null},function(e,t){var n=t.oLanguage.sDecimal;return it(e,n,!0)?"num-fmt"+n:null},function(e,t){var n=t.oLanguage.sDecimal;return at(e,n)?"html-num"+n:null},function(e,t){var n=t.oLanguage.sDecimal;return at(e,n,!0)?"html-num-fmt"+n:null},function(e,t){return tt(e)||"string"==typeof e&&-1!==e.indexOf("<")?"html":null}]),e.extend(Ge.ext.type.search,{html:function(e){return tt(e)?e:"string"==typeof e?e.replace(Xe," ").replace(Je,""):""},string:function(e){return tt(e)?e:"string"==typeof e?e.replace(Xe," "):e}});var Ut=function(e,t,n,r){return 0===e||e&&"-"!==e?(t&&(e=rt(e,t)),e.replace&&(n&&(e=e.replace(n,"")),r&&(e=e.replace(r,""))),1*e):-1/0};e.extend(We.type.order,{"date-pre":function(e){var t=Date.parse(e);return isNaN(t)?-1/0:t},"html-pre":function(e){return tt(e)?"":e.replace?e.replace(/<.*?>/g,"").toLowerCase():e+""},"string-pre":function(e){return tt(e)?"":"string"==typeof e?e.toLowerCase():e.toString?e.toString():""},"string-asc":function(e,t){return e<t?-1:e>t?1:0},"string-desc":function(e,t){return e<t?1:e>t?-1:0}}),Ue(""),e.extend(!0,Ge.ext.renderer,{header:{_:function(t,n,r,i){e(t.nTable).on("order.dt.DT",function(e,o,a,s){if(t===o){var l=r.idx;n.removeClass(r.sSortingClass+" "+i.sSortAsc+" "+i.sSortDesc).addClass("asc"==s[l]?i.sSortAsc:"desc"==s[l]?i.sSortDesc:r.sSortingClass)}})},jqueryui:function(t,n,r,i){e("<div/>").addClass(i.sSortJUIWrapper).append(n.contents()).append(e("<span/>").addClass(i.sSortIcon+" "+r.sSortingClassJUI)).appendTo(n),e(t.nTable).on("order.dt.DT",function(e,o,a,s){if(t===o){var l=r.idx;n.removeClass(i.sSortAsc+" "+i.sSortDesc).addClass("asc"==s[l]?i.sSortAsc:"desc"==s[l]?i.sSortDesc:r.sSortingClass),n.find("span."+i.sSortIcon).removeClass(i.sSortJUIAsc+" "+i.sSortJUIDesc+" "+i.sSortJUI+" "+i.sSortJUIAscAllowed+" "+i.sSortJUIDescAllowed).addClass("asc"==s[l]?i.sSortJUIAsc:"desc"==s[l]?i.sSortJUIDesc:r.sSortingClassJUI)}})}}});var zt=function(e){return"string"==typeof e?e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"):e};return Ge.render={number:function(e,t,n,r,i){return{display:function(o){if("number"!=typeof o&&"string"!=typeof o)return o;var a=o<0?"-":"",s=parseFloat(o);if(isNaN(s))return zt(o);s=s.toFixed(n),o=Math.abs(s);var l=parseInt(o,10),c=n?t+(o-l).toFixed(n).substring(2):"";return a+(r||"")+l.toString().replace(/\B(?=(\d{3})+(?!\d))/g,e)+c+(i||"")}}},text:function(){return{display:zt}}},e.extend(Ge.ext.internal,{_fnExternApiFunc:ze,_fnBuildAjax:z,_fnAjaxUpdate:W,_fnAjaxParameters:q,_fnAjaxUpdateDraw:V,_fnAjaxDataSrc:Y,_fnAddColumn:d,_fnColumnOptions:f,_fnAdjustColumnSizing:h,_fnVisibleToColumnIndex:p,_fnColumnIndexToVisible:g,_fnVisbleColumns:m,_fnGetColumns:v,_fnColumnTypes:b,_fnApplyColumnDefs:y,_fnHungarianMap:i,_fnCamelToHungarian:o,_fnLanguageCompat:a,_fnBrowserDetect:c,_fnAddData:w,_fnAddTr:_,_fnNodeToDataIndex:x,_fnNodeToColumnIndex:C,_fnGetCellData:k,_fnSetCellData:T,_fnSplitObjNotation:S,_fnGetObjectDataFn:D,_fnSetObjectDataFn:E,_fnGetDataMaster:N,_fnClearTable:A,_fnDeleteIndex:R,_fnInvalidate:P,_fnGetRowElements:O,_fnCreateTr:I,_fnBuildHead:j,_fnDrawHead:B,_fnDraw:L,_fnReDraw:F,_fnAddOptionsHtml:H,_fnDetectHeader:$,_fnGetUniqueThs:U,_fnFeatureHtmlFilter:G,_fnFilterComplete:K,_fnFilterCustom:X,_fnFilterColumn:J,_fnFilter:Q,_fnFilterCreateSearch:Z,_fnEscapeRegex:vt,_fnFilterData:ee,_fnFeatureHtmlInfo:re,_fnUpdateInfo:ie,_fnInfoMacros:oe,_fnInitialise:ae,_fnInitComplete:se,_fnLengthChange:le,_fnFeatureHtmlLength:ce,_fnFeatureHtmlPaginate:ue,_fnPageChange:de,_fnFeatureHtmlProcessing:fe,_fnProcessingDisplay:he,_fnFeatureHtmlTable:pe,_fnScrollDraw:ge,_fnApplyToChildren:me,_fnCalculateColumnWidths:ve,_fnThrottle:_t,_fnConvertToWidth:be,_fnGetWidestNode:ye,_fnGetMaxLenString:we,_fnStringToCss:_e,_fnSortFlatten:xe,_fnSort:Ce,_fnSortAria:ke,_fnSortListener:Te,_fnSortAttachListener:Se,_fnSortingClasses:De,_fnSortData:Ee,_fnSaveState:Ne,_fnLoadState:Ae,_fnSettingsFromNode:Re,_fnLog:Pe,_fnMap:Oe,_fnBindAction:Me,_fnCallbackReg:je,_fnCallbackFire:Be,_fnLengthOverflow:Le,_fnRenderer:Fe,_fnDataSource:He,_fnRowAttributes:M,_fnExtend:Ie,_fnCalculateEnd:function(){}}),e.fn.dataTable=Ge,Ge.$=e,
e.fn.dataTableSettings=Ge.settings,e.fn.dataTableExt=Ge.ext,e.fn.DataTable=function(t){return e(this).dataTable(t).api()},e.each(Ge,function(t,n){e.fn.DataTable[t]=n}),e.fn.dataTable}),function(e,t){"function"==typeof define&&define.amd?define(["jquery"],function(e){return t(e)}):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(0,function(e){var t=function(e,t){var n,r=document.createElement("canvas");e.appendChild(r),"object"==typeof G_vmlCanvasManager&&G_vmlCanvasManager.initElement(r);var i=r.getContext("2d");r.width=r.height=t.size;var o=1;window.devicePixelRatio>1&&(o=window.devicePixelRatio,r.style.width=r.style.height=[t.size,"px"].join(""),r.width=r.height=t.size*o,i.scale(o,o)),i.translate(t.size/2,t.size/2),i.rotate((t.rotate/180-.5)*Math.PI);var a=(t.size-t.lineWidth)/2;t.scaleColor&&t.scaleLength&&(a-=t.scaleLength+2),Date.now=Date.now||function(){return+new Date};var s=function(e,t,n){n=Math.min(Math.max(-1,n||0),1);var r=n<=0;i.beginPath(),i.arc(0,0,a,0,2*Math.PI*n,r),i.strokeStyle=e,i.lineWidth=t,i.stroke()},l=function(){var e,n;i.lineWidth=1,i.fillStyle=t.scaleColor,i.save();for(var r=24;r>0;--r)r%6==0?(n=t.scaleLength,e=0):(n=.6*t.scaleLength,e=t.scaleLength-n),i.fillRect(-t.size/2+e,0,n,1),i.rotate(Math.PI/12);i.restore()},c=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}(),u=function(){t.scaleColor&&l(),t.trackColor&&s(t.trackColor,t.trackWidth||t.lineWidth,1)};this.getCanvas=function(){return r},this.getCtx=function(){return i},this.clear=function(){i.clearRect(t.size/-2,t.size/-2,t.size,t.size)},this.draw=function(e){t.scaleColor||t.trackColor?i.getImageData&&i.putImageData?n?i.putImageData(n,0,0):(u(),n=i.getImageData(0,0,t.size*o,t.size*o)):(this.clear(),u()):this.clear(),i.lineCap=t.lineCap;var r;r="function"==typeof t.barColor?t.barColor(e):t.barColor,s(r,t.lineWidth,e/100)}.bind(this),this.animate=function(e,n){var r=Date.now();t.onStart(e,n);var i=function(){var o=Math.min(Date.now()-r,t.animate.duration),a=t.easing(this,o,e,n-e,t.animate.duration);this.draw(a),t.onStep(e,n,a),o>=t.animate.duration?t.onStop(e,n):c(i)}.bind(this);c(i)}.bind(this)},n=function(e,n){var r={barColor:"#ef1e25",trackColor:"#f9f9f9",scaleColor:"#dfe0e0",scaleLength:5,lineCap:"round",lineWidth:3,trackWidth:void 0,size:110,rotate:0,animate:{duration:1e3,enabled:!0},easing:function(e,t,n,r,i){return t/=i/2,t<1?r/2*t*t+n:-r/2*(--t*(t-2)-1)+n},onStart:function(e,t){},onStep:function(e,t,n){},onStop:function(e,t){}};if(void 0!==t)r.renderer=t;else{if("undefined"==typeof SVGRenderer)throw new Error("Please load either the SVG- or the CanvasRenderer");r.renderer=SVGRenderer}var i={},o=0,a=function(){this.el=e,this.options=i;for(var t in r)r.hasOwnProperty(t)&&(i[t]=n&&void 0!==n[t]?n[t]:r[t],"function"==typeof i[t]&&(i[t]=i[t].bind(this)));"string"==typeof i.easing&&"undefined"!=typeof jQuery&&jQuery.isFunction(jQuery.easing[i.easing])?i.easing=jQuery.easing[i.easing]:i.easing=r.easing,"number"==typeof i.animate&&(i.animate={duration:i.animate,enabled:!0}),"boolean"!=typeof i.animate||i.animate||(i.animate={duration:1e3,enabled:i.animate}),this.renderer=new i.renderer(e,i),this.renderer.draw(o),e.dataset&&e.dataset.percent?this.update(parseFloat(e.dataset.percent)):e.getAttribute&&e.getAttribute("data-percent")&&this.update(parseFloat(e.getAttribute("data-percent")))}.bind(this);this.update=function(e){return e=parseFloat(e),i.animate.enabled?this.renderer.animate(o,e):this.renderer.draw(e),o=e,this}.bind(this),this.disableAnimation=function(){return i.animate.enabled=!1,this},this.enableAnimation=function(){return i.animate.enabled=!0,this},a()};e.fn.easyPieChart=function(t){return this.each(function(){var r;e.data(this,"easyPieChart")||(r=e.extend({},t,e(this).data()),e.data(this,"easyPieChart",new n(this,r)))})}}),function(e){function t(e,t){var n=new google.maps.Map(e,t),r=new google.maps.Marker({position:new google.maps.LatLng(54.19335,-3.92695),map:n,title:"Drag Me",draggable:t.draggable});return{map:n,marker:r,circle:null,location:r.position,radius:t.radius,locationName:t.locationName,addressComponents:{formatted_address:null,addressLine1:null,addressLine2:null,streetName:null,streetNumber:null,city:null,district:null,state:null,stateOrProvince:null},settings:t.settings,domContainer:e,geodecoder:new google.maps.Geocoder}}function n(e){return void 0!=r(e)}function r(t){return e(t).data("locationpicker")}function i(e,t){if(e){var n=s.locationFromLatLng(t.location);e.latitudeInput&&e.latitudeInput.val(n.latitude).change(),e.longitudeInput&&e.longitudeInput.val(n.longitude).change(),e.radiusInput&&e.radiusInput.val(t.radius).change(),e.locationNameInput&&e.locationNameInput.val(t.locationName).change()}}function o(t,n){t&&(t.radiusInput&&t.radiusInput.on("change",function(t){t.originalEvent&&(n.radius=e(this).val(),s.setPosition(n,n.location,function(e){e.settings.onchanged.apply(n.domContainer,[s.locationFromLatLng(e.location),e.radius,!1])}))}),t.locationNameInput&&n.settings.enableAutocomplete&&(n.autocomplete=new google.maps.places.Autocomplete(t.locationNameInput.get(0)),google.maps.event.addListener(n.autocomplete,"place_changed",function(){var e=n.autocomplete.getPlace();if(!e.geometry)return void n.settings.onlocationnotfound(e.name);s.setPosition(n,e.geometry.location,function(e){i(t,e),e.settings.onchanged.apply(n.domContainer,[s.locationFromLatLng(e.location),e.radius,!1])})})),t.latitudeInput&&t.latitudeInput.on("change",function(t){t.originalEvent&&s.setPosition(n,new google.maps.LatLng(e(this).val(),n.location.lng()),function(e){e.settings.onchanged.apply(n.domContainer,[s.locationFromLatLng(e.location),e.radius,!1])})}),t.longitudeInput&&t.longitudeInput.on("change",function(t){t.originalEvent&&s.setPosition(n,new google.maps.LatLng(n.location.lat(),e(this).val()),function(e){e.settings.onchanged.apply(n.domContainer,[s.locationFromLatLng(e.location),e.radius,!1])})}))}function a(e){google.maps.event.trigger(e.map,"resize"),setTimeout(function(){e.map.setCenter(e.marker.position)},300)}var s={drawCircle:function(t,n,r,i){return null!=t.circle&&t.circle.setMap(null),r>0?(r*=1,i=e.extend({strokeColor:"#0000FF",strokeOpacity:.35,strokeWeight:2,fillColor:"#0000FF",fillOpacity:.2},i),i.map=t.map,i.radius=r,i.center=n,t.circle=new google.maps.Circle(i),t.circle):null},setPosition:function(e,t,n){e.location=t,e.marker.setPosition(t),e.map.panTo(t),this.drawCircle(e,t,e.radius,{}),e.settings.enableReverseGeocode?e.geodecoder.geocode({latLng:e.location},function(t,r){r==google.maps.GeocoderStatus.OK&&t.length>0&&(e.locationName=t[0].formatted_address,e.addressComponents=s.address_component_from_google_geocode(t[0].address_components)),n&&n.call(this,e)}):n&&n.call(this,e)},locationFromLatLng:function(e){return{latitude:e.lat(),longitude:e.lng()}},address_component_from_google_geocode:function(e){for(var t={},n=e.length-1;n>=0;n--){var r=e[n];r.types.indexOf("postal_code")>=0?t.postalCode=r.short_name:r.types.indexOf("street_number")>=0?t.streetNumber=r.short_name:r.types.indexOf("route")>=0?t.streetName=r.short_name:r.types.indexOf("locality")>=0?t.city=r.short_name:r.types.indexOf("sublocality")>=0?t.district=r.short_name:r.types.indexOf("administrative_area_level_1")>=0?t.stateOrProvince=r.short_name:r.types.indexOf("country")>=0&&(t.country=r.short_name)}return t.addressLine1=[t.streetNumber,t.streetName].join(" ").trim(),t.addressLine2="",t}};e.fn.locationpicker=function(l,c){if("string"==typeof l){var u=this.get(0);if(!n(u))return;var d=r(u);switch(l){case"location":if(void 0==c){var f=s.locationFromLatLng(d.location);return f.radius=d.radius,f.name=d.locationName,f}c.radius&&(d.radius=c.radius),s.setPosition(d,new google.maps.LatLng(c.latitude,c.longitude),function(e){i(e.settings.inputBinding,e)});break;case"subscribe":if(void 0==c)return null;var h=c.event,p=c.callback;if(!h||!p)return null;google.maps.event.addListener(d.map,h,p);break;case"map":if(void 0==c){var g=s.locationFromLatLng(d.location);return g.formattedAddress=d.locationName,g.addressComponents=d.addressComponents,{map:d.map,marker:d.marker,location:g}}return null;case"autosize":return a(d),this}return null}return this.each(function(){var r=e(this);if(!n(this)){var a=e.extend({},e.fn.locationpicker.defaults,l),c=new t(this,{zoom:a.zoom,center:new google.maps.LatLng(a.location.latitude,a.location.longitude),mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!1,disableDoubleClickZoom:!1,scrollwheel:a.scrollwheel,streetViewControl:!1,radius:a.radius,locationName:a.locationName,settings:a,draggable:a.draggable});r.data("locationpicker",c),google.maps.event.addListener(c.marker,"dragend",function(e){s.setPosition(c,c.marker.position,function(e){var t=s.locationFromLatLng(c.location);e.settings.onchanged.apply(c.domContainer,[t,e.radius,!0]),i(c.settings.inputBinding,c)})}),s.setPosition(c,new google.maps.LatLng(a.location.latitude,a.location.longitude),function(e){i(a.inputBinding,c),o(a.inputBinding,c),e.settings.oninitialized(r)})}})},e.fn.locationpicker.defaults={location:{latitude:40.7324319,longitude:-73.82480799999996},locationName:"",radius:500,zoom:15,scrollwheel:!0,inputBinding:{latitudeInput:null,longitudeInput:null,radiusInput:null,locationNameInput:null},enableAutocomplete:!1,enableReverseGeocode:!0,draggable:!0,onchanged:function(e,t,n){},onlocationnotfound:function(e){},oninitialized:function(e){}}}(jQuery),function(e,t,n){"use strict";function r(e){var t=Array.prototype.slice.call(arguments,1);return e.prop?e.prop.apply(e,t):e.attr.apply(e,t)}function i(e,t,n){var r,i;for(r in n)n.hasOwnProperty(r)&&(i=r.replace(/ |$/g,t.eventNamespace),e.bind(i,n[r]))}function o(e,t,n){i(e,n,{focus:function(){t.addClass(n.focusClass)},blur:function(){t.removeClass(n.focusClass),t.removeClass(n.activeClass)},mouseenter:function(){t.addClass(n.hoverClass)},mouseleave:function(){t.removeClass(n.hoverClass),t.removeClass(n.activeClass)},"mousedown touchbegin":function(){e.is(":disabled")||t.addClass(n.activeClass)},"mouseup touchend":function(){t.removeClass(n.activeClass)}})}function a(e,t){e.removeClass(t.hoverClass+" "+t.focusClass+" "+t.activeClass)}function s(e,t,n){n?e.addClass(t):e.removeClass(t)}function l(e,t,n){var r="checked",i=t.is(":"+r);t.prop?t.prop(r,i):i?t.attr(r,r):t.removeAttr(r),s(e,n.checkedClass,i)}function c(e,t,n){s(e,n.disabledClass,t.is(":disabled"))}function u(e,t,n){switch(n){case"after":return e.after(t),e.next();case"before":return e.before(t),e.prev();case"wrap":return e.wrap(t),e.parent()}return null}function d(e,n,i){var o,a,s;return i||(i={}),i=t.extend({bind:{},divClass:null,divWrap:"wrap",spanClass:null,spanHtml:null,spanWrap:"wrap"},i),o=t("<div />"),a=t("<span />"),n.autoHide&&e.is(":hidden")&&"none"===e.css("display")&&o.hide(),i.divClass&&o.addClass(i.divClass),n.wrapperClass&&o.addClass(n.wrapperClass),i.spanClass&&a.addClass(i.spanClass),s=r(e,"id"),n.useID&&s&&r(o,"id",n.idPrefix+"-"+s),i.spanHtml&&a.html(i.spanHtml),o=u(e,o,i.divWrap),a=u(e,a,i.spanWrap),c(o,e,n),{div:o,span:a}}function f(e,n){var r;return n.wrapperClass?(r=t("<span />").addClass(n.wrapperClass),r=u(e,r,"wrap")):null}function h(){var n,r,i,o;return o="rgb(120,2,153)",r=t('<div style="width:0;height:0;color:'+o+'">'),t("body").append(r),i=r.get(0),n=e.getComputedStyle?e.getComputedStyle(i,"").color:(i.currentStyle||i.style||{}).color,r.remove(),n.replace(/ /g,"")!==o}function p(e){return e?t("<span />").text(e).html():""}function g(){return navigator.cpuClass&&!navigator.product}function m(e){var t;return!!e[0].multiple||!(!(t=r(e,"size"))||t<=1)}function v(){return!1}function b(e,t){i(e,t,{"selectstart dragstart mousedown":v}),e.css({MozUserSelect:"none",msUserSelect:"none",webkitUserSelect:"none",userSelect:"none"})}function y(e,t,n){var r=e.val();""===r?r=n.fileDefaultHtml:(r=r.split(/[\/\\]+/),r=r[r.length-1]),t.text(r)}function w(e,t,n){var r,i;for(r=[],e.each(function(){var e;for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r.push({el:this,name:e,old:this.style[e]}),this.style[e]=t[e])}),n();r.length;)i=r.pop(),i.el.style[i.name]=i.old}function _(e,t){var n;n=e.parents(),n.push(e[0]),n=n.not(":visible"),w(n,{visibility:"hidden",display:"block",position:"absolute"},t)}function x(e,t){return function(){e.unwrap().unwrap().unbind(t.eventNamespace)}}var C=!0,k=!1,T=[{match:function(e){return e.is("a, button, :submit, :reset, input[type='button']")},apply:function(t,n){var s,l,u,f,h;return l=n.submitDefaultHtml,t.is(":reset")&&(l=n.resetDefaultHtml),f=t.is("a, button")?function(){return t.html()||l}:function(){return p(r(t,"value"))||l},u=d(t,n,{divClass:n.buttonClass,spanHtml:f()}),s=u.div,o(t,s,n),h=!1,i(s,n,{"click touchend":function(){var n,i,o,a;h||t.is(":disabled")||(h=!0,t[0].dispatchEvent?(n=document.createEvent("MouseEvents"),n.initEvent("click",!0,!0),i=t[0].dispatchEvent(n),t.is("a")&&i&&(o=r(t,"target"),a=r(t,"href"),o&&"_self"!==o?e.open(a,o):document.location.href=a)):t.click(),h=!1)}}),b(s,n),{remove:function(){return s.after(t),s.remove(),t.unbind(n.eventNamespace),t},update:function(){a(s,n),c(s,t,n),t.detach(),u.span.html(f()).append(t)}}}},{match:function(e){return e.is(":checkbox")},apply:function(e,t){var n,r,s;return n=d(e,t,{divClass:t.checkboxClass}),r=n.div,s=n.span,o(e,r,t),i(e,t,{"click touchend":function(){l(s,e,t)}}),l(s,e,t),{remove:x(e,t),update:function(){a(r,t),s.removeClass(t.checkedClass),l(s,e,t),c(r,e,t)}}}},{match:function(e){return e.is(":file")},apply:function(e,n){function s(){y(e,h,n)}var l,f,h,p;return l=d(e,n,{divClass:n.fileClass,spanClass:n.fileButtonClass,spanHtml:n.fileButtonHtml,spanWrap:"after"}),f=l.div,p=l.span,h=t("<span />").html(n.fileDefaultHtml),h.addClass(n.filenameClass),h=u(e,h,"after"),r(e,"size")||r(e,"size",f.width()/10),o(e,f,n),s(),g()?i(e,n,{click:function(){e.trigger("change"),setTimeout(s,0)}}):i(e,n,{change:s}),b(h,n),b(p,n),{remove:function(){return h.remove(),p.remove(),e.unwrap().unbind(n.eventNamespace)},update:function(){a(f,n),y(e,h,n),c(f,e,n)}}}},{match:function(e){if(e.is("input")){return" color date datetime datetime-local email month number password search tel text time url week ".indexOf((" "+r(e,"type")+" ").toLowerCase())>=0}return!1},apply:function(e,t){var n,i;return n=r(e,"type"),e.addClass(t.inputClass),i=f(e,t),o(e,e,t),t.inputAddTypeAsClass&&e.addClass(n),{remove:function(){e.removeClass(t.inputClass),t.inputAddTypeAsClass&&e.removeClass(n),i&&e.unwrap()},update:v}}},{match:function(e){return e.is(":radio")},apply:function(e,n){var s,u,f;return s=d(e,n,{divClass:n.radioClass}),u=s.div,f=s.span,o(e,u,n),i(e,n,{"click touchend":function(){t.uniform.update(t(':radio[name="'+r(e,"name")+'"]'))}}),l(f,e,n),{remove:x(e,n),update:function(){a(u,n),l(f,e,n),c(u,e,n)}}}},{match:function(e){return!(!e.is("select")||m(e))},apply:function(e,n){var r,s,l,u;return n.selectAutoWidth&&_(e,function(){u=e.width()}),r=d(e,n,{divClass:n.selectClass,spanHtml:(e.find(":selected:first")||e.find("option:first")).html(),spanWrap:"before"}),s=r.div,l=r.span,n.selectAutoWidth?_(e,function(){w(t([l[0],s[0]]),{display:"block"},function(){var e;e=l.outerWidth()-l.width(),s.width(u+e),l.width(u)})}):s.addClass("fixedWidth"),o(e,s,n),i(e,n,{change:function(){l.html(e.find(":selected").html()),s.removeClass(n.activeClass)},"click touchend":function(){var t=e.find(":selected").html();l.html()!==t&&e.trigger("change")},keyup:function(){l.html(e.find(":selected").html())}}),b(l,n),{remove:function(){return l.remove(),e.unwrap().unbind(n.eventNamespace),e},update:function(){n.selectAutoWidth?(t.uniform.restore(e),e.uniform(n)):(a(s,n),e[0].selectedIndex=e[0].selectedIndex,l.html(e.find(":selected").html()),c(s,e,n))}}}},{match:function(e){return!(!e.is("select")||!m(e))},apply:function(e,t){var n;return e.addClass(t.selectMultiClass),n=f(e,t),o(e,e,t),{remove:function(){e.removeClass(t.selectMultiClass),n&&e.unwrap()},update:v}}},{match:function(e){return e.is("textarea")},apply:function(e,t){var n;return e.addClass(t.textareaClass),n=f(e,t),o(e,e,t),{remove:function(){e.removeClass(t.textareaClass),n&&e.unwrap()},update:v}}}];g()&&!function(){return void 0!==e.XMLHttpRequest}()&&(C=!1),t.uniform={defaults:{activeClass:"active",autoHide:!0,buttonClass:"button",checkboxClass:"checker",checkedClass:"checked",disabledClass:"disabled",eventNamespace:".uniform",fileButtonClass:"action",fileButtonHtml:"Choose File",fileClass:"uploader",fileDefaultHtml:"No file selected",filenameClass:"filename",focusClass:"focus",hoverClass:"hover",idPrefix:"uniform",inputAddTypeAsClass:!0,inputClass:"uniform-input",radioClass:"radio",resetDefaultHtml:"Reset",resetSelector:!1,selectAutoWidth:!0,selectClass:"selector",selectMultiClass:"uniform-multiselect",submitDefaultHtml:"Submit",textareaClass:"uniform",useID:!0,wrapperClass:null},elements:[]},t.fn.uniform=function(n){var r=this;return n=t.extend({},t.uniform.defaults,n),k||(k=!0,h()&&(C=!1)),C?(n.resetSelector&&t(n.resetSelector).mouseup(function(){e.setTimeout(function(){t.uniform.update(r)},10)}),this.each(function(){var e,r,i,o=t(this);if(o.data("uniformed"))return void t.uniform.update(o);for(e=0;e<T.length;e+=1)if(r=T[e],r.match(o,n))return i=r.apply(o,n),o.data("uniformed",i),void t.uniform.elements.push(o.get(0))})):this},t.uniform.restore=t.fn.uniform.restore=function(e){void 0===e&&(e=t.uniform.elements),t(e).each(function(){var e,n,r=t(this);(n=r.data("uniformed"))&&(n.remove(),e=t.inArray(this,t.uniform.elements),e>=0&&t.uniform.elements.splice(e,1),r.removeData("uniformed"))})},t.uniform.update=t.fn.uniform.update=function(e){void 0===e&&(e=t.uniform.elements),t(e).each(function(){var e,n=t(this);(e=n.data("uniformed"))&&e.update(n,e.options)})}}(this,jQuery),function(e){function t(e,t,i){var o=e[0],a=/er/.test(i)?g:/bl/.test(i)?h:d,s=i==m?{checked:o[d],disabled:o[h],indeterminate:"true"==e.attr(g)||"false"==e.attr(p)}:o[a];if(/^(ch|di|in)/.test(i)&&!s)n(e,a);else if(/^(un|en|de)/.test(i)&&s)r(e,a);else if(i==m)for(var l in s)s[l]?n(e,l,!0):r(e,l,!0);else t&&"toggle"!=i||(t||e[_]("ifClicked"),s?o[v]!==u&&r(e,a):n(e,a))}function n(t,n,i){var m=t[0],b=t.parent(),_=n==d,x=n==g,k=n==h,T=x?p:_?f:"enabled",S=o(t,T+a(m[v])),D=o(t,n+a(m[v]));if(!0!==m[n]){if(!i&&n==d&&m[v]==u&&m.name){var E=t.closest("form"),N='input[name="'+m.name+'"]';N=E.length?E.find(N):e(N),N.each(function(){this!==m&&e(this).data(l)&&r(e(this),n)})}x?(m[n]=!0,m[d]&&r(t,d,"force")):(i||(m[n]=!0),_&&m[g]&&r(t,g,!1)),s(t,_,n,i)}m[h]&&o(t,C,!0)&&b.find("."+c).css(C,"default"),b[y](D||o(t,n)||""),b.attr("role")&&!x&&b.attr("aria-"+(k?h:d),"true"),b[w](S||o(t,T)||"")}function r(e,t,n){var r=e[0],i=e.parent(),l=t==d,u=t==g,m=t==h,b=u?p:l?f:"enabled",_=o(e,b+a(r[v])),x=o(e,t+a(r[v]));!1!==r[t]&&(!u&&n&&"force"!=n||(r[t]=!1),s(e,l,b,n)),!r[h]&&o(e,C,!0)&&i.find("."+c).css(C,"pointer"),i[w](x||o(e,t)||""),i.attr("role")&&!u&&i.attr("aria-"+(m?h:d),"false"),i[y](_||o(e,b)||"")}function i(t,n){t.data(l)&&(t.parent().html(t.attr("style",t.data(l).s||"")),n&&t[_](n),t.off(".i").unwrap(),e(x+'[for="'+t[0].id+'"]').add(t.closest(x)).off(".i"))}function o(e,t,n){if(e.data(l))return e.data(l).o[t+(n?"":"Class")]}function a(e){return e.charAt(0).toUpperCase()+e.slice(1)}function s(e,t,n,r){r||(t&&e[_]("ifToggled"),e[_]("ifChanged")[_]("if"+a(n)))}var l="iCheck",c=l+"-helper",u="radio",d="checked",f="un"+d,h="disabled",p="determinate",g="in"+p,m="update",v="type",b="touchbegin.i touchend.i",y="addClass",w="removeClass",_="trigger",x="label",C="cursor",k=/ipad|iphone|ipod|android|blackberry|windows phone|opera mini|silk/i.test(navigator.userAgent);e.fn[l]=function(o,a){var s='input[type="checkbox"], input[type="'+u+'"]',f=e(),p=function(t){t.each(function(){var t=e(this);f=t.is(s)?f.add(t):f.add(t.find(s))})};if(/^(check|uncheck|toggle|indeterminate|determinate|disable|enable|update|destroy)$/i.test(o))return o=o.toLowerCase(),p(this),f.each(function(){var n=e(this);"destroy"==o?i(n,"ifDestroyed"):t(n,!0,o),e.isFunction(a)&&a()});if("object"!=typeof o&&o)return this;var C=e.extend({checkedClass:d,disabledClass:h,indeterminateClass:g,labelHover:!0},o),T=C.handle,S=C.hoverClass||"hover",D=C.focusClass||"focus",E=C.activeClass||"active",N=!!C.labelHover,A=C.labelHoverClass||"hover",R=0|(""+C.increaseArea).replace("%","");return"checkbox"!=T&&T!=u||(s='input[type="'+T+'"]'),R<-50&&(R=-50),p(this),f.each(function(){var o=e(this);i(o);var a,s=this,f=s.id,p=-R+"%",g=100+2*R+"%",T={position:"absolute",top:p,left:p,display:"block",width:g,height:g,margin:0,padding:0,background:"#fff",border:0,opacity:0},P=k?{position:"absolute",visibility:"hidden"}:R?T:{position:"absolute",opacity:0},O="checkbox"==s[v]?C.checkboxClass||"icheckbox":C.radioClass||"i"+u,I=e(x+'[for="'+f+'"]').add(o.closest(x)),M=!!C.aria,j=l+"-"+Math.random().toString(36).substr(2,6),B='<div class="'+O+'" '+(M?'role="'+s[v]+'" ':"");M&&I.each(function(){B+='aria-labelledby="',this.id?B+=this.id:(this.id=j,B+=j),B+='"'}),B=o.wrap(B+"/>")[_]("ifCreated").parent().append(C.insert),a=e('<ins class="'+c+'"/>').css(T).appendTo(B),o.data(l,{o:C,s:o.attr("style")}).css(P),!!C.inheritClass&&B[y](s.className||""),!!C.inheritID&&f&&B.attr("id",l+"-"+f),"static"==B.css("position")&&B.css("position","relative"),t(o,!0,m),I.length&&I.on("click.i mouseover.i mouseout.i "+b,function(n){var r=n[v],i=e(this);if(!s[h]){if("click"==r){if(e(n.target).is("a"))return;t(o,!1,!0)}else N&&(/ut|nd/.test(r)?(B[w](S),i[w](A)):(B[y](S),i[y](A)));if(!k)return!1;n.stopPropagation()}}),o.on("click.i focus.i blur.i keyup.i keydown.i keypress.i",function(e){var t=e[v],i=e.keyCode;return"click"!=t&&("keydown"==t&&32==i?(s[v]==u&&s[d]||(s[d]?r(o,d):n(o,d)),!1):void("keyup"==t&&s[v]==u?!s[d]&&n(o,d):/us|ur/.test(t)&&B["blur"==t?w:y](D)))}),a.on("click mousedown mouseup mouseover mouseout "+b,function(e){var n=e[v],r=/wn|up/.test(n)?E:S;if(!s[h]){if("click"==n?t(o,!1,!0):(/wn|er|in/.test(n)?B[y](r):B[w](r+" "+E),I.length&&N&&r==S&&I[/ut|nd/.test(n)?w:y](A)),!k)return!1;e.stopPropagation()}})})}}(window.jQuery||window.Zepto),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"undefined"!=typeof module&&module.exports?module.exports=e(require("jquery")):e(jQuery)}(function(e,t){"use strict";if(!e.jstree){var n=0,r=!1,i=!1,o=!1,a=[],s=e("script:last").attr("src"),l=window.document;e.jstree={version:"3.3.5",defaults:{plugins:[]},plugins:{},path:s&&-1!==s.indexOf("/")?s.replace(/\/[^\/]+$/,""):"",idregex:/[\\:&!^|()\[\]<>@*'+~#";.,=\- \/${}%?`]/g,root:"#"},e.jstree.create=function(t,r){var i=new e.jstree.core(++n),o=r;return r=e.extend(!0,{},e.jstree.defaults,r),o&&o.plugins&&(r.plugins=o.plugins),e.each(r.plugins,function(e,t){"core"!==e&&(i=i.plugin(t,r[t]))}),e(t).data("jstree",i),i.init(t,r),i},e.jstree.destroy=function(){e(".jstree:jstree").jstree("destroy"),e(l).off(".jstree")},e.jstree.core=function(e){this._id=e,this._cnt=0,this._wrk=null,this._data={core:{themes:{name:!1,dots:!1,icons:!1,ellipsis:!1},selected:[],last_error:{},working:!1,worker_queue:[],focused:null}}},e.jstree.reference=function(t){var n=null,r=null;if(!t||!t.id||t.tagName&&t.nodeType||(t=t.id),!r||!r.length)try{r=e(t)}catch(e){}if(!r||!r.length)try{r=e("#"+t.replace(e.jstree.idregex,"\\$&"))}catch(e){}return r&&r.length&&(r=r.closest(".jstree")).length&&(r=r.data("jstree"))?n=r:e(".jstree").each(function(){var r=e(this).data("jstree");if(r&&r._model.data[t])return n=r,!1}),n},e.fn.jstree=function(n){var r="string"==typeof n,i=Array.prototype.slice.call(arguments,1),o=null;return!(!0===n&&!this.length)&&(this.each(function(){var a=e.jstree.reference(this),s=r&&a?a[n]:null;if(o=r&&s?s.apply(a,i):null,a||r||n!==t&&!e.isPlainObject(n)||e.jstree.create(this,n),(a&&!r||!0===n)&&(o=a||!1),null!==o&&o!==t)return!1}),null!==o&&o!==t?o:this)},e.expr.pseudos.jstree=e.expr.createPseudo(function(n){return function(n){return e(n).hasClass("jstree")&&e(n).data("jstree")!==t}}),e.jstree.defaults.core={data:!1,strings:!1,check_callback:!1,error:e.noop,animation:200,multiple:!0,themes:{name:!1,url:!1,dir:!1,dots:!0,icons:!0,ellipsis:!1,stripes:!1,variant:!1,responsive:!1},expand_selected_onload:!0,worker:!0,force_text:!1,dblclick_toggle:!0,loaded_state:!1,restore_focus:!0,keyboard:{"ctrl-space":function(t){t.type="click",e(t.currentTarget).trigger(t)},enter:function(t){t.type="click",e(t.currentTarget).trigger(t)},left:function(t){if(t.preventDefault(),this.is_open(t.currentTarget))this.close_node(t.currentTarget);else{var n=this.get_parent(t.currentTarget);n&&n.id!==e.jstree.root&&this.get_node(n,!0).children(".jstree-anchor").focus()}},up:function(e){e.preventDefault();var t=this.get_prev_dom(e.currentTarget);t&&t.length&&t.children(".jstree-anchor").focus()},right:function(t){if(t.preventDefault(),this.is_closed(t.currentTarget))this.open_node(t.currentTarget,function(e){this.get_node(e,!0).children(".jstree-anchor").focus()});else if(this.is_open(t.currentTarget)){var n=this.get_node(t.currentTarget,!0).children(".jstree-children")[0];n&&e(this._firstChild(n)).children(".jstree-anchor").focus()}},down:function(e){e.preventDefault();var t=this.get_next_dom(e.currentTarget);t&&t.length&&t.children(".jstree-anchor").focus()},"*":function(e){this.open_all()},home:function(t){t.preventDefault();var n=this._firstChild(this.get_container_ul()[0]);n&&e(n).children(".jstree-anchor").filter(":visible").focus()},end:function(e){e.preventDefault(),this.element.find(".jstree-anchor").filter(":visible").last().focus()},f2:function(e){e.preventDefault(),this.edit(e.currentTarget)}}},e.jstree.core.prototype={plugin:function(t,n){var r=e.jstree.plugins[t];return r?(this._data[t]={},r.prototype=this,new r(n,this)):this},init:function(t,n){this._model={data:{},changed:[],force_full_redraw:!1,redraw_timeout:!1,default_state:{loaded:!0,opened:!1,selected:!1,disabled:!1}},this._model.data[e.jstree.root]={id:e.jstree.root,parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}},this.element=e(t).addClass("jstree jstree-"+this._id),this.settings=n,this._data.core.ready=!1,this._data.core.loaded=!1,this._data.core.rtl="rtl"===this.element.css("direction"),this.element[this._data.core.rtl?"addClass":"removeClass"]("jstree-rtl"),this.element.attr("role","tree"),this.settings.core.multiple&&this.element.attr("aria-multiselectable",!0),this.element.attr("tabindex")||this.element.attr("tabindex","0"),this.bind(),this.trigger("init"),this._data.core.original_container_html=this.element.find(" > ul > li").clone(!0),this._data.core.original_container_html.find("li").addBack().contents().filter(function(){return 3===this.nodeType&&(!this.nodeValue||/^\s+$/.test(this.nodeValue))}).remove(),this.element.html("<ul class='jstree-container-ul jstree-children' role='group'><li id='j"+this._id+"_loading' class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='tree-item'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading"),this._data.core.li_height=this.get_container_ul().children("li").first().outerHeight()||24,this._data.core.node=this._create_prototype_node(),this.trigger("loading"),this.load_node(e.jstree.root)},destroy:function(e){if(this.trigger("destroy"),this._wrk)try{window.URL.revokeObjectURL(this._wrk),this._wrk=null}catch(e){}e||this.element.empty(),this.teardown()},_create_prototype_node:function(){var e,t,n=l.createElement("LI");return n.setAttribute("role","treeitem"),e=l.createElement("I"),e.className="jstree-icon jstree-ocl",e.setAttribute("role","presentation"),n.appendChild(e),e=l.createElement("A"),e.className="jstree-anchor",e.setAttribute("href","#"),e.setAttribute("tabindex","-1"),t=l.createElement("I"),t.className="jstree-icon jstree-themeicon",t.setAttribute("role","presentation"),e.appendChild(t),n.appendChild(e),e=t=null,n},_kbevent_to_func:function(e){var t={8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock",16:"Shift",17:"Ctrl",18:"Alt",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*",173:"-"},n=[];e.ctrlKey&&n.push("ctrl"),e.altKey&&n.push("alt"),e.shiftKey&&n.push("shift"),n.push(t[e.which]||e.which),n=n.sort().join("-").toLowerCase();var r,i,o=this.settings.core.keyboard;for(r in o)if(o.hasOwnProperty(r)&&(i=r,"-"!==i&&"+"!==i&&(i=i.replace("--","-MINUS").replace("+-","-MINUS").replace("++","-PLUS").replace("-+","-PLUS"),i=i.split(/-|\+/).sort().join("-").replace("MINUS","-").replace("PLUS","+").toLowerCase()),i===n))return o[r];return null},teardown:function(){this.unbind(),this.element.removeClass("jstree").removeData("jstree").find("[class^='jstree']").addBack().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/gi,"")}),this.element=null},bind:function(){var t="",n=null,r=0;this.element.on("dblclick.jstree",function(e){if(e.target.tagName&&"input"===e.target.tagName.toLowerCase())return!0;if(l.selection&&l.selection.empty)l.selection.empty();else if(window.getSelection){var t=window.getSelection();try{t.removeAllRanges(),t.collapse()}catch(e){}}}).on("mousedown.jstree",e.proxy(function(e){e.target===this.element[0]&&(e.preventDefault(),r=+new Date)},this)).on("mousedown.jstree",".jstree-ocl",function(e){e.preventDefault()}).on("click.jstree",".jstree-ocl",e.proxy(function(e){this.toggle_node(e.target)},this)).on("dblclick.jstree",".jstree-anchor",e.proxy(function(e){if(e.target.tagName&&"input"===e.target.tagName.toLowerCase())return!0;this.settings.core.dblclick_toggle&&this.toggle_node(e.target)},this)).on("click.jstree",".jstree-anchor",e.proxy(function(t){t.preventDefault(),t.currentTarget!==l.activeElement&&e(t.currentTarget).focus(),this.activate_node(t.currentTarget,t)},this)).on("keydown.jstree",".jstree-anchor",e.proxy(function(e){if(e.target.tagName&&"input"===e.target.tagName.toLowerCase())return!0;this._data.core.rtl&&(37===e.which?e.which=39:39===e.which&&(e.which=37));var t=this._kbevent_to_func(e);if(t){var n=t.call(this,e);if(!1===n||!0===n)return n}},this)).on("load_node.jstree",e.proxy(function(t,n){n.status&&(n.node.id!==e.jstree.root||this._data.core.loaded||(this._data.core.loaded=!0,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.trigger("loaded")),this._data.core.ready||setTimeout(e.proxy(function(){if(this.element&&!this.get_container_ul().find(".jstree-loading").length){if(this._data.core.ready=!0,this._data.core.selected.length){if(this.settings.core.expand_selected_onload){var t,n,r=[];for(t=0,n=this._data.core.selected.length;t<n;t++)r=r.concat(this._model.data[this._data.core.selected[t]].parents);for(r=e.vakata.array_unique(r),t=0,n=r.length;t<n;t++)this.open_node(r[t],!1,0)}this.trigger("changed",{action:"ready",selected:this._data.core.selected})}this.trigger("ready")}},this),0))},this)).on("keypress.jstree",e.proxy(function(r){if(r.target.tagName&&"input"===r.target.tagName.toLowerCase())return!0;n&&clearTimeout(n),n=setTimeout(function(){t=""},500)
;var i=String.fromCharCode(r.which).toLowerCase(),o=this.element.find(".jstree-anchor").filter(":visible"),a=o.index(l.activeElement)||0,s=!1;if(t+=i,t.length>1){if(o.slice(a).each(e.proxy(function(n,r){if(0===e(r).text().toLowerCase().indexOf(t))return e(r).focus(),s=!0,!1},this)),s)return;if(o.slice(0,a).each(e.proxy(function(n,r){if(0===e(r).text().toLowerCase().indexOf(t))return e(r).focus(),s=!0,!1},this)),s)return}if(new RegExp("^"+i.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")+"+$").test(t)){if(o.slice(a+1).each(e.proxy(function(t,n){if(e(n).text().toLowerCase().charAt(0)===i)return e(n).focus(),s=!0,!1},this)),s)return;if(o.slice(0,a+1).each(e.proxy(function(t,n){if(e(n).text().toLowerCase().charAt(0)===i)return e(n).focus(),s=!0,!1},this)),s)return}},this)).on("init.jstree",e.proxy(function(){var e=this.settings.core.themes;this._data.core.themes.dots=e.dots,this._data.core.themes.stripes=e.stripes,this._data.core.themes.icons=e.icons,this._data.core.themes.ellipsis=e.ellipsis,this.set_theme(e.name||"default",e.url),this.set_theme_variant(e.variant)},this)).on("loading.jstree",e.proxy(function(){this[this._data.core.themes.dots?"show_dots":"hide_dots"](),this[this._data.core.themes.icons?"show_icons":"hide_icons"](),this[this._data.core.themes.stripes?"show_stripes":"hide_stripes"](),this[this._data.core.themes.ellipsis?"show_ellipsis":"hide_ellipsis"]()},this)).on("blur.jstree",".jstree-anchor",e.proxy(function(t){this._data.core.focused=null,e(t.currentTarget).filter(".jstree-hovered").mouseleave(),this.element.attr("tabindex","0")},this)).on("focus.jstree",".jstree-anchor",e.proxy(function(t){var n=this.get_node(t.currentTarget);n&&n.id&&(this._data.core.focused=n.id),this.element.find(".jstree-hovered").not(t.currentTarget).mouseleave(),e(t.currentTarget).mouseenter(),this.element.attr("tabindex","-1")},this)).on("focus.jstree",e.proxy(function(){if(+new Date-r>500&&!this._data.core.focused&&this.settings.core.restore_focus){r=0;var e=this.get_node(this.element.attr("aria-activedescendant"),!0);e&&e.find("> .jstree-anchor").focus()}},this)).on("mouseenter.jstree",".jstree-anchor",e.proxy(function(e){this.hover_node(e.currentTarget)},this)).on("mouseleave.jstree",".jstree-anchor",e.proxy(function(e){this.dehover_node(e.currentTarget)},this))},unbind:function(){this.element.off(".jstree"),e(l).off(".jstree-"+this._id)},trigger:function(e,t){t||(t={}),t.instance=this,this.element.triggerHandler(e.replace(".jstree","")+".jstree",t)},get_container:function(){return this.element},get_container_ul:function(){return this.element.children(".jstree-children").first()},get_string:function(t){var n=this.settings.core.strings;return e.isFunction(n)?n.call(this,t):n&&n[t]?n[t]:t},_firstChild:function(e){for(e=e?e.firstChild:null;null!==e&&1!==e.nodeType;)e=e.nextSibling;return e},_nextSibling:function(e){for(e=e?e.nextSibling:null;null!==e&&1!==e.nodeType;)e=e.nextSibling;return e},_previousSibling:function(e){for(e=e?e.previousSibling:null;null!==e&&1!==e.nodeType;)e=e.previousSibling;return e},get_node:function(t,n){t&&t.id&&(t=t.id);var r;try{if(this._model.data[t])t=this._model.data[t];else if("string"==typeof t&&this._model.data[t.replace(/^#/,"")])t=this._model.data[t.replace(/^#/,"")];else if("string"==typeof t&&(r=e("#"+t.replace(e.jstree.idregex,"\\$&"),this.element)).length&&this._model.data[r.closest(".jstree-node").attr("id")])t=this._model.data[r.closest(".jstree-node").attr("id")];else if((r=e(t,this.element)).length&&this._model.data[r.closest(".jstree-node").attr("id")])t=this._model.data[r.closest(".jstree-node").attr("id")];else{if(!(r=e(t,this.element)).length||!r.hasClass("jstree"))return!1;t=this._model.data[e.jstree.root]}return n&&(t=t.id===e.jstree.root?this.element:e("#"+t.id.replace(e.jstree.idregex,"\\$&"),this.element)),t}catch(e){return!1}},get_path:function(t,n,r){if(!(t=t.parents?t:this.get_node(t))||t.id===e.jstree.root||!t.parents)return!1;var i,o,a=[];for(a.push(r?t.id:t.text),i=0,o=t.parents.length;i<o;i++)a.push(r?t.parents[i]:this.get_text(t.parents[i]));return a=a.reverse().slice(1),n?a.join(n):a},get_next_dom:function(t,n){var r;if(t=this.get_node(t,!0),t[0]===this.element[0]){for(r=this._firstChild(this.get_container_ul()[0]);r&&0===r.offsetHeight;)r=this._nextSibling(r);return!!r&&e(r)}if(!t||!t.length)return!1;if(n){r=t[0];do{r=this._nextSibling(r)}while(r&&0===r.offsetHeight);return!!r&&e(r)}if(t.hasClass("jstree-open")){for(r=this._firstChild(t.children(".jstree-children")[0]);r&&0===r.offsetHeight;)r=this._nextSibling(r);if(null!==r)return e(r)}r=t[0];do{r=this._nextSibling(r)}while(r&&0===r.offsetHeight);return null!==r?e(r):t.parentsUntil(".jstree",".jstree-node").nextAll(".jstree-node:visible").first()},get_prev_dom:function(t,n){var r;if(t=this.get_node(t,!0),t[0]===this.element[0]){for(r=this.get_container_ul()[0].lastChild;r&&0===r.offsetHeight;)r=this._previousSibling(r);return!!r&&e(r)}if(!t||!t.length)return!1;if(n){r=t[0];do{r=this._previousSibling(r)}while(r&&0===r.offsetHeight);return!!r&&e(r)}r=t[0];do{r=this._previousSibling(r)}while(r&&0===r.offsetHeight);if(null!==r){for(t=e(r);t.hasClass("jstree-open");)t=t.children(".jstree-children").first().children(".jstree-node:visible:last");return t}return!(!(r=t[0].parentNode.parentNode)||!r.className||-1===r.className.indexOf("jstree-node"))&&e(r)},get_parent:function(t){return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&t.parent},get_children_dom:function(e){return e=this.get_node(e,!0),e[0]===this.element[0]?this.get_container_ul().children(".jstree-node"):!(!e||!e.length)&&e.children(".jstree-children").children(".jstree-node")},is_parent:function(e){return(e=this.get_node(e))&&(!1===e.state.loaded||e.children.length>0)},is_loaded:function(e){return(e=this.get_node(e))&&e.state.loaded},is_loading:function(e){return(e=this.get_node(e))&&e.state&&e.state.loading},is_open:function(e){return(e=this.get_node(e))&&e.state.opened},is_closed:function(e){return(e=this.get_node(e))&&this.is_parent(e)&&!e.state.opened},is_leaf:function(e){return!this.is_parent(e)},load_node:function(t,n){var r,i,o,a,s;if(e.isArray(t))return this._load_nodes(t.slice(),n),!0;if(!(t=this.get_node(t)))return n&&n.call(this,t,!1),!1;if(t.state.loaded){for(t.state.loaded=!1,o=0,a=t.parents.length;o<a;o++)this._model.data[t.parents[o]].children_d=e.vakata.array_filter(this._model.data[t.parents[o]].children_d,function(n){return-1===e.inArray(n,t.children_d)});for(r=0,i=t.children_d.length;r<i;r++)this._model.data[t.children_d[r]].state.selected&&(s=!0),delete this._model.data[t.children_d[r]];s&&(this._data.core.selected=e.vakata.array_filter(this._data.core.selected,function(n){return-1===e.inArray(n,t.children_d)})),t.children=[],t.children_d=[],s&&this.trigger("changed",{action:"load_node",node:t,selected:this._data.core.selected})}return t.state.failed=!1,t.state.loading=!0,this.get_node(t,!0).addClass("jstree-loading").attr("aria-busy",!0),this._load_node(t,e.proxy(function(e){t=this._model.data[t.id],t.state.loading=!1,t.state.loaded=e,t.state.failed=!t.state.loaded;var r=this.get_node(t,!0),i=0,o=0,a=this._model.data,s=!1;for(i=0,o=t.children.length;i<o;i++)if(a[t.children[i]]&&!a[t.children[i]].state.hidden){s=!0;break}t.state.loaded&&r&&r.length&&(r.removeClass("jstree-closed jstree-open jstree-leaf"),s?"#"!==t.id&&r.addClass(t.state.opened?"jstree-open":"jstree-closed"):r.addClass("jstree-leaf")),r.removeClass("jstree-loading").attr("aria-busy",!1),this.trigger("load_node",{node:t,status:e}),n&&n.call(this,t,e)},this)),!0},_load_nodes:function(e,t,n,r){var i,o,a=!0,s=function(){this._load_nodes(e,t,!0)},l=this._model.data,c=[];for(i=0,o=e.length;i<o;i++)l[e[i]]&&(!l[e[i]].state.loaded&&!l[e[i]].state.failed||!n&&r)&&(this.is_loading(e[i])||this.load_node(e[i],s),a=!1);if(a){for(i=0,o=e.length;i<o;i++)l[e[i]]&&l[e[i]].state.loaded&&c.push(e[i]);t&&!t.done&&(t.call(this,c),t.done=!0)}},load_all:function(t,n){if(t||(t=e.jstree.root),!(t=this.get_node(t)))return!1;var r,i,o=[],a=this._model.data,s=a[t.id].children_d;for(t.state&&!t.state.loaded&&o.push(t.id),r=0,i=s.length;r<i;r++)a[s[r]]&&a[s[r]].state&&!a[s[r]].state.loaded&&o.push(s[r]);o.length?this._load_nodes(o,function(){this.load_all(t,n)}):(n&&n.call(this,t),this.trigger("load_all",{node:t}))},_load_node:function(t,n){var r,i=this.settings.core.data,o=function(){return 3!==this.nodeType&&8!==this.nodeType};return i?e.isFunction(i)?i.call(this,t,e.proxy(function(r){!1===r?n.call(this,!1):this["string"==typeof r?"_append_html_data":"_append_json_data"](t,"string"==typeof r?e(e.parseHTML(r)).filter(o):r,function(e){n.call(this,e)})},this)):"object"==typeof i?i.url?(i=e.extend(!0,{},i),e.isFunction(i.url)&&(i.url=i.url.call(this,t)),e.isFunction(i.data)&&(i.data=i.data.call(this,t)),e.ajax(i).done(e.proxy(function(r,i,a){var s=a.getResponseHeader("Content-Type");return s&&-1!==s.indexOf("json")||"object"==typeof r?this._append_json_data(t,r,function(e){n.call(this,e)}):s&&-1!==s.indexOf("html")||"string"==typeof r?this._append_html_data(t,e(e.parseHTML(r)).filter(o),function(e){n.call(this,e)}):(this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:t.id,xhr:a})},this.settings.core.error.call(this,this._data.core.last_error),n.call(this,!1))},this)).fail(e.proxy(function(e){this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:t.id,xhr:e})},n.call(this,!1),this.settings.core.error.call(this,this._data.core.last_error)},this))):(r=e.isArray(i)?e.extend(!0,[],i):e.isPlainObject(i)?e.extend(!0,{},i):i,t.id===e.jstree.root?this._append_json_data(t,r,function(e){n.call(this,e)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_05",reason:"Could not load node",data:JSON.stringify({id:t.id})},this.settings.core.error.call(this,this._data.core.last_error),n.call(this,!1))):"string"==typeof i?t.id===e.jstree.root?this._append_html_data(t,e(e.parseHTML(i)).filter(o),function(e){n.call(this,e)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_06",reason:"Could not load node",data:JSON.stringify({id:t.id})},this.settings.core.error.call(this,this._data.core.last_error),n.call(this,!1)):n.call(this,!1):t.id===e.jstree.root?this._append_html_data(t,this._data.core.original_container_html.clone(!0),function(e){n.call(this,e)}):n.call(this,!1)},_node_changed:function(t){(t=this.get_node(t))&&-1===e.inArray(t.id,this._model.changed)&&this._model.changed.push(t.id)},_append_html_data:function(t,n,r){t=this.get_node(t),t.children=[],t.children_d=[];var i,o,a,s=n.is("ul")?n.children():n,l=t.id,c=[],u=[],d=this._model.data,f=d[l],h=this._data.core.selected.length;for(s.each(e.proxy(function(t,n){(i=this._parse_model_from_html(e(n),l,f.parents.concat()))&&(c.push(i),u.push(i),d[i].children_d.length&&(u=u.concat(d[i].children_d)))},this)),f.children=c,f.children_d=u,o=0,a=f.parents.length;o<a;o++)d[f.parents[o]].children_d=d[f.parents[o]].children_d.concat(u);this.trigger("model",{nodes:u,parent:l}),l!==e.jstree.root?(this._node_changed(l),this.redraw()):(this.get_container_ul().children(".jstree-initial-node").remove(),this.redraw(!0)),this._data.core.selected.length!==h&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),r.call(this,!0)},_append_json_data:function(t,n,r,i){if(null!==this.element){t=this.get_node(t),t.children=[],t.children_d=[],n.d&&"string"==typeof(n=n.d)&&(n=JSON.parse(n)),e.isArray(n)||(n=[n]);var o=null,a={df:this._model.default_state,dat:n,par:t.id,m:this._model.data,t_id:this._id,t_cnt:this._cnt,sel:this._data.core.selected},s=function(e,t){e.data&&(e=e.data);var n,r,i,o,a=e.dat,s=e.par,l=[],c=[],u=[],d=e.df,f=e.t_id,h=e.t_cnt,p=e.m,g=p[s],m=e.sel,v=function(e,n,r){r=r?r.concat():[],n&&r.unshift(n);var i,o,a,s,l=e.id.toString(),c={id:l,text:e.text||"",icon:e.icon===t||e.icon,parent:n,parents:r,children:e.children||[],children_d:e.children_d||[],data:e.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(i in d)d.hasOwnProperty(i)&&(c.state[i]=d[i]);if(e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(c.icon=e.data.jstree.icon),c.icon!==t&&null!==c.icon&&""!==c.icon||(c.icon=!0),e&&e.data&&(c.data=e.data,e.data.jstree))for(i in e.data.jstree)e.data.jstree.hasOwnProperty(i)&&(c.state[i]=e.data.jstree[i]);if(e&&"object"==typeof e.state)for(i in e.state)e.state.hasOwnProperty(i)&&(c.state[i]=e.state[i]);if(e&&"object"==typeof e.li_attr)for(i in e.li_attr)e.li_attr.hasOwnProperty(i)&&(c.li_attr[i]=e.li_attr[i]);if(c.li_attr.id||(c.li_attr.id=l),e&&"object"==typeof e.a_attr)for(i in e.a_attr)e.a_attr.hasOwnProperty(i)&&(c.a_attr[i]=e.a_attr[i]);for(e&&e.children&&!0===e.children&&(c.state.loaded=!1,c.children=[],c.children_d=[]),p[c.id]=c,i=0,o=c.children.length;i<o;i++)a=v(p[c.children[i]],c.id,r),s=p[a],c.children_d.push(a),s.children_d.length&&(c.children_d=c.children_d.concat(s.children_d));return delete e.data,delete e.children,p[c.id].original=e,c.state.selected&&u.push(c.id),c.id},b=function(e,n,r){r=r?r.concat():[],n&&r.unshift(n);var i,o,a,s,l,c=!1;do{c="j"+f+"_"+ ++h}while(p[c]);l={id:!1,text:"string"==typeof e?e:"",icon:"object"!=typeof e||e.icon===t||e.icon,parent:n,parents:r,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(i in d)d.hasOwnProperty(i)&&(l.state[i]=d[i]);if(e&&e.id&&(l.id=e.id.toString()),e&&e.text&&(l.text=e.text),e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(l.icon=e.data.jstree.icon),l.icon!==t&&null!==l.icon&&""!==l.icon||(l.icon=!0),e&&e.data&&(l.data=e.data,e.data.jstree))for(i in e.data.jstree)e.data.jstree.hasOwnProperty(i)&&(l.state[i]=e.data.jstree[i]);if(e&&"object"==typeof e.state)for(i in e.state)e.state.hasOwnProperty(i)&&(l.state[i]=e.state[i]);if(e&&"object"==typeof e.li_attr)for(i in e.li_attr)e.li_attr.hasOwnProperty(i)&&(l.li_attr[i]=e.li_attr[i]);if(l.li_attr.id&&!l.id&&(l.id=l.li_attr.id.toString()),l.id||(l.id=c),l.li_attr.id||(l.li_attr.id=l.id),e&&"object"==typeof e.a_attr)for(i in e.a_attr)e.a_attr.hasOwnProperty(i)&&(l.a_attr[i]=e.a_attr[i]);if(e&&e.children&&e.children.length){for(i=0,o=e.children.length;i<o;i++)a=b(e.children[i],l.id,r),s=p[a],l.children.push(a),s.children_d.length&&(l.children_d=l.children_d.concat(s.children_d));l.children_d=l.children_d.concat(l.children)}return e&&e.children&&!0===e.children&&(l.state.loaded=!1,l.children=[],l.children_d=[]),delete e.data,delete e.children,l.original=e,p[l.id]=l,l.state.selected&&u.push(l.id),l.id};if(a.length&&a[0].id!==t&&a[0].parent!==t){for(r=0,i=a.length;r<i;r++)a[r].children||(a[r].children=[]),a[r].state||(a[r].state={}),p[a[r].id.toString()]=a[r];for(r=0,i=a.length;r<i;r++)p[a[r].parent.toString()]?(p[a[r].parent.toString()].children.push(a[r].id.toString()),g.children_d.push(a[r].id.toString())):(this._data.core.last_error={error:"parse",plugin:"core",id:"core_07",reason:"Node with invalid parent",data:JSON.stringify({id:a[r].id.toString(),parent:a[r].parent.toString()})},this.settings.core.error.call(this,this._data.core.last_error));for(r=0,i=g.children.length;r<i;r++)n=v(p[g.children[r]],s,g.parents.concat()),c.push(n),p[n].children_d.length&&(c=c.concat(p[n].children_d));for(r=0,i=g.parents.length;r<i;r++)p[g.parents[r]].children_d=p[g.parents[r]].children_d.concat(c);o={cnt:h,mod:p,sel:m,par:s,dpc:c,add:u}}else{for(r=0,i=a.length;r<i;r++)(n=b(a[r],s,g.parents.concat()))&&(l.push(n),c.push(n),p[n].children_d.length&&(c=c.concat(p[n].children_d)));for(g.children=l,g.children_d=c,r=0,i=g.parents.length;r<i;r++)p[g.parents[r]].children_d=p[g.parents[r]].children_d.concat(c);o={cnt:h,mod:p,sel:m,par:s,dpc:c,add:u}}if("undefined"!=typeof window&&void 0!==window.document)return o;postMessage(o)},l=function(t,n){if(null!==this.element){this._cnt=t.cnt;var i,o=this._model.data;for(i in o)o.hasOwnProperty(i)&&o[i].state&&o[i].state.loading&&t.mod[i]&&(t.mod[i].state.loading=!0);if(this._model.data=t.mod,n){var a,s=t.add,l=t.sel,c=this._data.core.selected.slice();if(o=this._model.data,l.length!==c.length||e.vakata.array_unique(l.concat(c)).length!==l.length){for(i=0,a=l.length;i<a;i++)-1===e.inArray(l[i],s)&&-1===e.inArray(l[i],c)&&(o[l[i]].state.selected=!1);for(i=0,a=c.length;i<a;i++)-1===e.inArray(c[i],l)&&(o[c[i]].state.selected=!0)}}t.add.length&&(this._data.core.selected=this._data.core.selected.concat(t.add)),this.trigger("model",{nodes:t.dpc,parent:t.par}),t.par!==e.jstree.root?(this._node_changed(t.par),this.redraw()):this.redraw(!0),t.add.length&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),r.call(this,!0)}};if(this.settings.core.worker&&window.Blob&&window.URL&&window.Worker)try{null===this._wrk&&(this._wrk=window.URL.createObjectURL(new window.Blob(["self.onmessage = "+s.toString()],{type:"text/javascript"}))),!this._data.core.working||i?(this._data.core.working=!0,o=new window.Worker(this._wrk),o.onmessage=e.proxy(function(e){l.call(this,e.data,!0);try{o.terminate(),o=null}catch(e){}this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1},this),a.par?o.postMessage(a):this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1):this._data.core.worker_queue.push([t,n,r,!0])}catch(e){l.call(this,s(a),!1),this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1}else l.call(this,s(a),!1)}},_parse_model_from_html:function(n,r,i){i=i?[].concat(i):[],r&&i.unshift(r);var o,a,s,l,c,u=this._model.data,d={id:!1,text:!1,icon:!0,parent:r,parents:i,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(s in this._model.default_state)this._model.default_state.hasOwnProperty(s)&&(d.state[s]=this._model.default_state[s]);if(l=e.vakata.attributes(n,!0),e.each(l,function(t,n){if(n=e.trim(n),!n.length)return!0;d.li_attr[t]=n,"id"===t&&(d.id=n.toString())}),l=n.children("a").first(),l.length&&(l=e.vakata.attributes(l,!0),e.each(l,function(t,n){n=e.trim(n),n.length&&(d.a_attr[t]=n)})),l=n.children("a").first().length?n.children("a").first().clone():n.clone(),l.children("ins, i, ul").remove(),l=l.html(),l=e("<div />").html(l),d.text=this.settings.core.force_text?l.text():l.html(),l=n.data(),d.data=l?e.extend(!0,{},l):null,d.state.opened=n.hasClass("jstree-open"),d.state.selected=n.children("a").hasClass("jstree-clicked"),d.state.disabled=n.children("a").hasClass("jstree-disabled"),d.data&&d.data.jstree)for(s in d.data.jstree)d.data.jstree.hasOwnProperty(s)&&(d.state[s]=d.data.jstree[s]);l=n.children("a").children(".jstree-themeicon"),l.length&&(d.icon=!l.hasClass("jstree-themeicon-hidden")&&l.attr("rel")),d.state.icon!==t&&(d.icon=d.state.icon),d.icon!==t&&null!==d.icon&&""!==d.icon||(d.icon=!0),l=n.children("ul").children("li");do{c="j"+this._id+"_"+ ++this._cnt}while(u[c]);return d.id=d.li_attr.id?d.li_attr.id.toString():c,l.length?(l.each(e.proxy(function(t,n){o=this._parse_model_from_html(e(n),d.id,i),a=this._model.data[o],d.children.push(o),a.children_d.length&&(d.children_d=d.children_d.concat(a.children_d))},this)),d.children_d=d.children_d.concat(d.children)):n.hasClass("jstree-closed")&&(d.state.loaded=!1),d.li_attr.class&&(d.li_attr.class=d.li_attr.class.replace("jstree-closed","").replace("jstree-open","")),d.a_attr.class&&(d.a_attr.class=d.a_attr.class.replace("jstree-clicked","").replace("jstree-disabled","")),u[d.id]=d,d.state.selected&&this._data.core.selected.push(d.id),d.id},_parse_model_from_flat_json:function(e,n,r){r=r?r.concat():[],n&&r.unshift(n);var i,o,a,s,l=e.id.toString(),c=this._model.data,u=this._model.default_state,d={id:l,text:e.text||"",icon:e.icon===t||e.icon,parent:n,parents:r,children:e.children||[],children_d:e.children_d||[],data:e.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(i in u)u.hasOwnProperty(i)&&(d.state[i]=u[i]);if(e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(d.icon=e.data.jstree.icon),d.icon!==t&&null!==d.icon&&""!==d.icon||(d.icon=!0),e&&e.data&&(d.data=e.data,e.data.jstree))for(i in e.data.jstree)e.data.jstree.hasOwnProperty(i)&&(d.state[i]=e.data.jstree[i]);if(e&&"object"==typeof e.state)for(i in e.state)e.state.hasOwnProperty(i)&&(d.state[i]=e.state[i]);if(e&&"object"==typeof e.li_attr)for(i in e.li_attr)e.li_attr.hasOwnProperty(i)&&(d.li_attr[i]=e.li_attr[i]);if(d.li_attr.id||(d.li_attr.id=l),e&&"object"==typeof e.a_attr)for(i in e.a_attr)e.a_attr.hasOwnProperty(i)&&(d.a_attr[i]=e.a_attr[i]);for(e&&e.children&&!0===e.children&&(d.state.loaded=!1,d.children=[],d.children_d=[]),c[d.id]=d,i=0,o=d.children.length;i<o;i++)a=this._parse_model_from_flat_json(c[d.children[i]],d.id,r),s=c[a],d.children_d.push(a),s.children_d.length&&(d.children_d=d.children_d.concat(s.children_d));return delete e.data,delete e.children,c[d.id].original=e,d.state.selected&&this._data.core.selected.push(d.id),d.id},_parse_model_from_json:function(e,n,r){r=r?r.concat():[],n&&r.unshift(n);var i,o,a,s,l,c=!1,u=this._model.data,d=this._model.default_state;do{c="j"+this._id+"_"+ ++this._cnt}while(u[c]);l={id:!1,text:"string"==typeof e?e:"",icon:"object"!=typeof e||e.icon===t||e.icon,parent:n,parents:r,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(i in d)d.hasOwnProperty(i)&&(l.state[i]=d[i]);if(e&&e.id&&(l.id=e.id.toString()),e&&e.text&&(l.text=e.text),e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(l.icon=e.data.jstree.icon),l.icon!==t&&null!==l.icon&&""!==l.icon||(l.icon=!0),e&&e.data&&(l.data=e.data,e.data.jstree))for(i in e.data.jstree)e.data.jstree.hasOwnProperty(i)&&(l.state[i]=e.data.jstree[i]);if(e&&"object"==typeof e.state)for(i in e.state)e.state.hasOwnProperty(i)&&(l.state[i]=e.state[i]);if(e&&"object"==typeof e.li_attr)for(i in e.li_attr)e.li_attr.hasOwnProperty(i)&&(l.li_attr[i]=e.li_attr[i]);if(l.li_attr.id&&!l.id&&(l.id=l.li_attr.id.toString()),l.id||(l.id=c),l.li_attr.id||(l.li_attr.id=l.id),e&&"object"==typeof e.a_attr)for(i in e.a_attr)e.a_attr.hasOwnProperty(i)&&(l.a_attr[i]=e.a_attr[i]);if(e&&e.children&&e.children.length){for(i=0,o=e.children.length;i<o;i++)a=this._parse_model_from_json(e.children[i],l.id,r),s=u[a],l.children.push(a),s.children_d.length&&(l.children_d=l.children_d.concat(s.children_d));l.children_d=l.children_d.concat(l.children)}return e&&e.children&&!0===e.children&&(l.state.loaded=!1,l.children=[],l.children_d=[]),delete e.data,delete e.children,l.original=e,u[l.id]=l,l.state.selected&&this._data.core.selected.push(l.id),l.id},_redraw:function(){var t,n,r,i=this._model.force_full_redraw?this._model.data[e.jstree.root].children.concat([]):this._model.changed.concat([]),o=l.createElement("UL"),a=this._data.core.focused;for(n=0,r=i.length;n<r;n++)(t=this.redraw_node(i[n],!0,this._model.force_full_redraw))&&this._model.force_full_redraw&&o.appendChild(t);this._model.force_full_redraw&&(o.className=this.get_container_ul()[0].className,o.setAttribute("role","group"),this.element.empty().append(o)),null!==a&&(t=this.get_node(a,!0),t&&t.length&&t.children(".jstree-anchor")[0]!==l.activeElement?t.children(".jstree-anchor").focus():this._data.core.focused=null),this._model.force_full_redraw=!1,this._model.changed=[],this.trigger("redraw",{nodes:i})},redraw:function(e){e&&(this._model.force_full_redraw=!0),this._redraw()},draw_children:function(t){var n=this.get_node(t),r=!1,i=!1,o=!1,a=l;if(!n)return!1;if(n.id===e.jstree.root)return this.redraw(!0);if(!(t=this.get_node(t,!0))||!t.length)return!1;if(t.children(".jstree-children").remove(),t=t[0],n.children.length&&n.state.loaded){for(o=a.createElement("UL"),o.setAttribute("role","group"),o.className="jstree-children",r=0,i=n.children.length;r<i;r++)o.appendChild(this.redraw_node(n.children[r],!0,!0));t.appendChild(o)}},redraw_node:function(t,n,r,i){var o=this.get_node(t),a=!1,s=!1,c=!1,u=!1,d=!1,f=!1,h="",p=l,g=this._model.data,m=!1,v=null,b=0,y=0,w=!1,_=!1;if(!o)return!1;if(o.id===e.jstree.root)return this.redraw(!0);if(n=n||0===o.children.length,t=l.querySelector?this.element[0].querySelector("#"+(-1!=="0123456789".indexOf(o.id[0])?"\\3"+o.id[0]+" "+o.id.substr(1).replace(e.jstree.idregex,"\\$&"):o.id.replace(e.jstree.idregex,"\\$&"))):l.getElementById(o.id))t=e(t),r||(a=t.parent().parent()[0],a===this.element[0]&&(a=null),s=t.index()),n||!o.children.length||t.children(".jstree-children").length||(n=!0),n||(c=t.children(".jstree-children")[0]),m=t.children(".jstree-anchor")[0]===l.activeElement,t.remove();else if(n=!0,!r){if(!(null===(a=o.parent!==e.jstree.root?e("#"+o.parent.replace(e.jstree.idregex,"\\$&"),this.element)[0]:null)||a&&g[o.parent].state.opened))return!1;s=e.inArray(o.id,null===a?g[e.jstree.root].children:g[o.parent].children)}t=this._data.core.node.cloneNode(!0),h="jstree-node ";for(u in o.li_attr)if(o.li_attr.hasOwnProperty(u)){if("id"===u)continue;"class"!==u?t.setAttribute(u,o.li_attr[u]):h+=o.li_attr[u]}for(o.a_attr.id||(o.a_attr.id=o.id+"_anchor"),t.setAttribute("aria-selected",!!o.state.selected),t.setAttribute("aria-level",o.parents.length),t.setAttribute("aria-labelledby",o.a_attr.id),o.state.disabled&&t.setAttribute("aria-disabled",!0),u=0,d=o.children.length;u<d;u++)if(!g[o.children[u]].state.hidden){w=!0;break}if(null!==o.parent&&g[o.parent]&&!o.state.hidden&&(u=e.inArray(o.id,g[o.parent].children),_=o.id,-1!==u))for(u++,d=g[o.parent].children.length;u<d&&(g[g[o.parent].children[u]].state.hidden||(_=g[o.parent].children[u]),_===o.id);u++);o.state.hidden&&(h+=" jstree-hidden"),o.state.loading&&(h+=" jstree-loading"),o.state.loaded&&!w?h+=" jstree-leaf":(h+=o.state.opened&&o.state.loaded?" jstree-open":" jstree-closed",t.setAttribute("aria-expanded",o.state.opened&&o.state.loaded)),_===o.id&&(h+=" jstree-last"),t.id=o.id,t.className=h,h=(o.state.selected?" jstree-clicked":"")+(o.state.disabled?" jstree-disabled":"");for(d in o.a_attr)if(o.a_attr.hasOwnProperty(d)){if("href"===d&&"#"===o.a_attr[d])continue;"class"!==d?t.childNodes[1].setAttribute(d,o.a_attr[d]):h+=" "+o.a_attr[d]}if(h.length&&(t.childNodes[1].className="jstree-anchor "+h),(o.icon&&!0!==o.icon||!1===o.icon)&&(!1===o.icon?t.childNodes[1].childNodes[0].className+=" jstree-themeicon-hidden":-1===o.icon.indexOf("/")&&-1===o.icon.indexOf(".")?t.childNodes[1].childNodes[0].className+=" "+o.icon+" jstree-themeicon-custom":(t.childNodes[1].childNodes[0].style.backgroundImage='url("'+o.icon+'")',t.childNodes[1].childNodes[0].style.backgroundPosition="center center",t.childNodes[1].childNodes[0].style.backgroundSize="auto",t.childNodes[1].childNodes[0].className+=" jstree-themeicon-custom")),this.settings.core.force_text?t.childNodes[1].appendChild(p.createTextNode(o.text)):t.childNodes[1].innerHTML+=o.text,n&&o.children.length&&(o.state.opened||i)&&o.state.loaded){for(f=p.createElement("UL"),f.setAttribute("role","group"),f.className="jstree-children",u=0,d=o.children.length;u<d;u++)f.appendChild(this.redraw_node(o.children[u],n,!0));t.appendChild(f)}if(c&&t.appendChild(c),!r){for(a||(a=this.element[0]),u=0,d=a.childNodes.length;u<d;u++)if(a.childNodes[u]&&a.childNodes[u].className&&-1!==a.childNodes[u].className.indexOf("jstree-children")){v=a.childNodes[u];break}v||(v=p.createElement("UL"),v.setAttribute("role","group"),v.className="jstree-children",a.appendChild(v)),a=v,s<a.childNodes.length?a.insertBefore(t,a.childNodes[s]):a.appendChild(t),m&&(b=this.element[0].scrollTop,y=this.element[0].scrollLeft,t.childNodes[1].focus(),this.element[0].scrollTop=b,this.element[0].scrollLeft=y)}return o.state.opened&&!o.state.loaded&&(o.state.opened=!1,setTimeout(e.proxy(function(){this.open_node(o.id,!1,0)},this),0)),t},open_node:function(n,r,i){var o,a,s,l;if(e.isArray(n)){for(n=n.slice(),o=0,a=n.length;o<a;o++)this.open_node(n[o],r,i);return!0}return!(!(n=this.get_node(n))||n.id===e.jstree.root)&&(i=i===t?this.settings.core.animation:i,this.is_closed(n)?this.is_loaded(n)?(s=this.get_node(n,!0),l=this,s.length&&(i&&s.children(".jstree-children").length&&s.children(".jstree-children").stop(!0,!0),n.children.length&&!this._firstChild(s.children(".jstree-children")[0])&&this.draw_children(n),i?(this.trigger("before_open",{node:n}),s.children(".jstree-children").css("display","none").end().removeClass("jstree-closed").addClass("jstree-open").attr("aria-expanded",!0).children(".jstree-children").stop(!0,!0).slideDown(i,function(){this.style.display="",l.element&&l.trigger("after_open",{node:n})})):(this.trigger("before_open",{node:n}),s[0].className=s[0].className.replace("jstree-closed","jstree-open"),s[0].setAttribute("aria-expanded",!0))),n.state.opened=!0,r&&r.call(this,n,!0),s.length||this.trigger("before_open",{node:n}),this.trigger("open_node",{node:n}),i&&s.length||this.trigger("after_open",{node:n}),!0):this.is_loading(n)?setTimeout(e.proxy(function(){this.open_node(n,r,i)},this),500):void this.load_node(n,function(e,t){return t?this.open_node(e,r,i):!!r&&r.call(this,e,!1)}):(r&&r.call(this,n,!1),!1))},_open_to:function(t){if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;var n,r,i=t.parents;for(n=0,r=i.length;n<r;n+=1)n!==e.jstree.root&&this.open_node(i[n],!1,0);return e("#"+t.id.replace(e.jstree.idregex,"\\$&"),this.element)},close_node:function(n,r){var i,o,a,s;if(e.isArray(n)){for(n=n.slice(),i=0,o=n.length;i<o;i++)this.close_node(n[i],r);return!0}return!(!(n=this.get_node(n))||n.id===e.jstree.root)&&(!this.is_closed(n)&&(r=r===t?this.settings.core.animation:r,a=this,s=this.get_node(n,!0),n.state.opened=!1,this.trigger("close_node",{node:n}),void(s.length?r?s.children(".jstree-children").attr("style","display:block !important").end().removeClass("jstree-open").addClass("jstree-closed").attr("aria-expanded",!1).children(".jstree-children").stop(!0,!0).slideUp(r,function(){this.style.display="",s.children(".jstree-children").remove(),a.element&&a.trigger("after_close",{node:n})}):(s[0].className=s[0].className.replace("jstree-open","jstree-closed"),s.attr("aria-expanded",!1).children(".jstree-children").remove(),this.trigger("after_close",{node:n})):this.trigger("after_close",{node:n}))))},toggle_node:function(t){var n,r;if(e.isArray(t)){for(t=t.slice(),n=0,r=t.length;n<r;n++)this.toggle_node(t[n]);return!0}return this.is_closed(t)?this.open_node(t):this.is_open(t)?this.close_node(t):void 0},open_all:function(t,n,r){if(t||(t=e.jstree.root),!(t=this.get_node(t)))return!1;var i,o,a,s=t.id===e.jstree.root?this.get_container_ul():this.get_node(t,!0);if(!s.length){for(i=0,o=t.children_d.length;i<o;i++)this.is_closed(this._model.data[t.children_d[i]])&&(this._model.data[t.children_d[i]].state.opened=!0);return this.trigger("open_all",{node:t})}r=r||s,a=this,s=this.is_closed(t)?s.find(".jstree-closed").addBack():s.find(".jstree-closed"),s.each(function(){a.open_node(this,function(e,t){t&&this.is_parent(e)&&this.open_all(e,n,r)},n||0)}),0===r.find(".jstree-closed").length&&this.trigger("open_all",{node:this.get_node(r)})},close_all:function(t,n){if(t||(t=e.jstree.root),!(t=this.get_node(t)))return!1;var r,i,o=t.id===e.jstree.root?this.get_container_ul():this.get_node(t,!0),a=this;for(o.length&&(o=this.is_open(t)?o.find(".jstree-open").addBack():o.find(".jstree-open"),e(o.get().reverse()).each(function(){a.close_node(this,n||0)})),r=0,i=t.children_d.length;r<i;r++)this._model.data[t.children_d[r]].state.opened=!1;this.trigger("close_all",{node:t})},is_disabled:function(e){return(e=this.get_node(e))&&e.state&&e.state.disabled},enable_node:function(t){var n,r;if(e.isArray(t)){for(t=t.slice(),n=0,r=t.length;n<r;n++)this.enable_node(t[n]);return!0}if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;t.state.disabled=!1,this.get_node(t,!0).children(".jstree-anchor").removeClass("jstree-disabled").attr("aria-disabled",!1),this.trigger("enable_node",{node:t})},disable_node:function(t){var n,r;if(e.isArray(t)){for(t=t.slice(),n=0,
r=t.length;n<r;n++)this.disable_node(t[n]);return!0}if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;t.state.disabled=!0,this.get_node(t,!0).children(".jstree-anchor").addClass("jstree-disabled").attr("aria-disabled",!0),this.trigger("disable_node",{node:t})},is_hidden:function(e){return e=this.get_node(e),!0===e.state.hidden},hide_node:function(t,n){var r,i;if(e.isArray(t)){for(t=t.slice(),r=0,i=t.length;r<i;r++)this.hide_node(t[r],!0);return n||this.redraw(),!0}if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;t.state.hidden||(t.state.hidden=!0,this._node_changed(t.parent),n||this.redraw(),this.trigger("hide_node",{node:t}))},show_node:function(t,n){var r,i;if(e.isArray(t)){for(t=t.slice(),r=0,i=t.length;r<i;r++)this.show_node(t[r],!0);return n||this.redraw(),!0}if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;t.state.hidden&&(t.state.hidden=!1,this._node_changed(t.parent),n||this.redraw(),this.trigger("show_node",{node:t}))},hide_all:function(t){var n,r=this._model.data,i=[];for(n in r)r.hasOwnProperty(n)&&n!==e.jstree.root&&!r[n].state.hidden&&(r[n].state.hidden=!0,i.push(n));return this._model.force_full_redraw=!0,t||this.redraw(),this.trigger("hide_all",{nodes:i}),i},show_all:function(t){var n,r=this._model.data,i=[];for(n in r)r.hasOwnProperty(n)&&n!==e.jstree.root&&r[n].state.hidden&&(r[n].state.hidden=!1,i.push(n));return this._model.force_full_redraw=!0,t||this.redraw(),this.trigger("show_all",{nodes:i}),i},activate_node:function(e,n){if(this.is_disabled(e))return!1;if(n&&"object"==typeof n||(n={}),this._data.core.last_clicked=this._data.core.last_clicked&&this._data.core.last_clicked.id!==t?this.get_node(this._data.core.last_clicked.id):null,this._data.core.last_clicked&&!this._data.core.last_clicked.state.selected&&(this._data.core.last_clicked=null),!this._data.core.last_clicked&&this._data.core.selected.length&&(this._data.core.last_clicked=this.get_node(this._data.core.selected[this._data.core.selected.length-1])),this.settings.core.multiple&&(n.metaKey||n.ctrlKey||n.shiftKey)&&(!n.shiftKey||this._data.core.last_clicked&&this.get_parent(e)&&this.get_parent(e)===this._data.core.last_clicked.parent))if(n.shiftKey){var r,i,o=this.get_node(e).id,a=this._data.core.last_clicked.id,s=this.get_node(this._data.core.last_clicked.parent).children,l=!1;for(r=0,i=s.length;r<i;r+=1)s[r]===o&&(l=!l),s[r]===a&&(l=!l),this.is_disabled(s[r])||!l&&s[r]!==o&&s[r]!==a?this.deselect_node(s[r],!0,n):this.is_hidden(s[r])||this.select_node(s[r],!0,!1,n);this.trigger("changed",{action:"select_node",node:this.get_node(e),selected:this._data.core.selected,event:n})}else this.is_selected(e)?this.deselect_node(e,!1,n):this.select_node(e,!1,!1,n);else!this.settings.core.multiple&&(n.metaKey||n.ctrlKey||n.shiftKey)&&this.is_selected(e)?this.deselect_node(e,!1,n):(this.deselect_all(!0),this.select_node(e,!1,!1,n),this._data.core.last_clicked=this.get_node(e));this.trigger("activate_node",{node:this.get_node(e),event:n})},hover_node:function(e){if(!(e=this.get_node(e,!0))||!e.length||e.children(".jstree-hovered").length)return!1;var t=this.element.find(".jstree-hovered"),n=this.element;t&&t.length&&this.dehover_node(t),e.children(".jstree-anchor").addClass("jstree-hovered"),this.trigger("hover_node",{node:this.get_node(e)}),setTimeout(function(){n.attr("aria-activedescendant",e[0].id)},0)},dehover_node:function(e){if(!(e=this.get_node(e,!0))||!e.length||!e.children(".jstree-hovered").length)return!1;e.children(".jstree-anchor").removeClass("jstree-hovered"),this.trigger("dehover_node",{node:this.get_node(e)})},select_node:function(t,n,r,i){var o,a,s;if(e.isArray(t)){for(t=t.slice(),a=0,s=t.length;a<s;a++)this.select_node(t[a],n,r,i);return!0}if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;o=this.get_node(t,!0),t.state.selected||(t.state.selected=!0,this._data.core.selected.push(t.id),r||(o=this._open_to(t)),o&&o.length&&o.attr("aria-selected",!0).children(".jstree-anchor").addClass("jstree-clicked"),this.trigger("select_node",{node:t,selected:this._data.core.selected,event:i}),n||this.trigger("changed",{action:"select_node",node:t,selected:this._data.core.selected,event:i}))},deselect_node:function(t,n,r){var i,o,a;if(e.isArray(t)){for(t=t.slice(),i=0,o=t.length;i<o;i++)this.deselect_node(t[i],n,r);return!0}if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;a=this.get_node(t,!0),t.state.selected&&(t.state.selected=!1,this._data.core.selected=e.vakata.array_remove_item(this._data.core.selected,t.id),a.length&&a.attr("aria-selected",!1).children(".jstree-anchor").removeClass("jstree-clicked"),this.trigger("deselect_node",{node:t,selected:this._data.core.selected,event:r}),n||this.trigger("changed",{action:"deselect_node",node:t,selected:this._data.core.selected,event:r}))},select_all:function(t){var n,r,i=this._data.core.selected.concat([]);for(this._data.core.selected=this._model.data[e.jstree.root].children_d.concat(),n=0,r=this._data.core.selected.length;n<r;n++)this._model.data[this._data.core.selected[n]]&&(this._model.data[this._data.core.selected[n]].state.selected=!0);this.redraw(!0),this.trigger("select_all",{selected:this._data.core.selected}),t||this.trigger("changed",{action:"select_all",selected:this._data.core.selected,old_selection:i})},deselect_all:function(e){var t,n,r=this._data.core.selected.concat([]);for(t=0,n=this._data.core.selected.length;t<n;t++)this._model.data[this._data.core.selected[t]]&&(this._model.data[this._data.core.selected[t]].state.selected=!1);this._data.core.selected=[],this.element.find(".jstree-clicked").removeClass("jstree-clicked").parent().attr("aria-selected",!1),this.trigger("deselect_all",{selected:this._data.core.selected,node:r}),e||this.trigger("changed",{action:"deselect_all",selected:this._data.core.selected,old_selection:r})},is_selected:function(t){return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&t.state.selected},get_selected:function(t){return t?e.map(this._data.core.selected,e.proxy(function(e){return this.get_node(e)},this)):this._data.core.selected.slice()},get_top_selected:function(t){var n,r,i,o,a=this.get_selected(!0),s={};for(n=0,r=a.length;n<r;n++)s[a[n].id]=a[n];for(n=0,r=a.length;n<r;n++)for(i=0,o=a[n].children_d.length;i<o;i++)s[a[n].children_d[i]]&&delete s[a[n].children_d[i]];a=[];for(n in s)s.hasOwnProperty(n)&&a.push(n);return t?e.map(a,e.proxy(function(e){return this.get_node(e)},this)):a},get_bottom_selected:function(t){var n,r,i=this.get_selected(!0),o=[];for(n=0,r=i.length;n<r;n++)i[n].children.length||o.push(i[n].id);return t?e.map(o,e.proxy(function(e){return this.get_node(e)},this)):o},get_state:function(){var t,n={core:{open:[],loaded:[],scroll:{left:this.element.scrollLeft(),top:this.element.scrollTop()},selected:[]}};for(t in this._model.data)this._model.data.hasOwnProperty(t)&&t!==e.jstree.root&&(this._model.data[t].state.loaded&&this.settings.core.loaded_state&&n.core.loaded.push(t),this._model.data[t].state.opened&&n.core.open.push(t),this._model.data[t].state.selected&&n.core.selected.push(t));return n},set_state:function(n,r){if(n){if(n.core&&n.core.selected&&n.core.initial_selection===t&&(n.core.initial_selection=this._data.core.selected.concat([]).sort().join(",")),n.core){var i,o;if(n.core.loaded)return this.settings.core.loaded_state&&e.isArray(n.core.loaded)&&n.core.loaded.length?this._load_nodes(n.core.loaded,function(e){delete n.core.loaded,this.set_state(n,r)}):(delete n.core.loaded,this.set_state(n,r)),!1;if(n.core.open)return e.isArray(n.core.open)&&n.core.open.length?this._load_nodes(n.core.open,function(e){this.open_node(e,!1,0),delete n.core.open,this.set_state(n,r)}):(delete n.core.open,this.set_state(n,r)),!1;if(n.core.scroll)return n.core.scroll&&n.core.scroll.left!==t&&this.element.scrollLeft(n.core.scroll.left),n.core.scroll&&n.core.scroll.top!==t&&this.element.scrollTop(n.core.scroll.top),delete n.core.scroll,this.set_state(n,r),!1;if(n.core.selected)return i=this,n.core.initial_selection!==t&&n.core.initial_selection!==this._data.core.selected.concat([]).sort().join(",")||(this.deselect_all(),e.each(n.core.selected,function(e,t){i.select_node(t,!1,!0)})),delete n.core.initial_selection,delete n.core.selected,this.set_state(n,r),!1;for(o in n)n.hasOwnProperty(o)&&"core"!==o&&-1===e.inArray(o,this.settings.plugins)&&delete n[o];if(e.isEmptyObject(n.core))return delete n.core,this.set_state(n,r),!1}return!e.isEmptyObject(n)||(n=null,r&&r.call(this),this.trigger("set_state"),!1)}return!1},refresh:function(t,n){this._data.core.state=!0===n?{}:this.get_state(),n&&e.isFunction(n)&&(this._data.core.state=n.call(this,this._data.core.state)),this._cnt=0,this._model.data={},this._model.data[e.jstree.root]={id:e.jstree.root,parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}},this._data.core.selected=[],this._data.core.last_clicked=null,this._data.core.focused=null;var r=this.get_container_ul()[0].className;t||(this.element.html("<ul class='"+r+"' role='group'><li class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='treeitem' id='j"+this._id+"_loading'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading")),this.load_node(e.jstree.root,function(t,n){n&&(this.get_container_ul()[0].className=r,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.set_state(e.extend(!0,{},this._data.core.state),function(){this.trigger("refresh")})),this._data.core.state=null})},refresh_node:function(t){if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;var n=[],r=[],i=this._data.core.selected.concat([]);r.push(t.id),!0===t.state.opened&&n.push(t.id),this.get_node(t,!0).find(".jstree-open").each(function(){r.push(this.id),n.push(this.id)}),this._load_nodes(r,e.proxy(function(e){this.open_node(n,!1,0),this.select_node(i),this.trigger("refresh_node",{node:t,nodes:e})},this),!1,!0)},set_id:function(t,n){if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;var r,i,o=this._model.data,a=t.id;for(n=n.toString(),o[t.parent].children[e.inArray(t.id,o[t.parent].children)]=n,r=0,i=t.parents.length;r<i;r++)o[t.parents[r]].children_d[e.inArray(t.id,o[t.parents[r]].children_d)]=n;for(r=0,i=t.children.length;r<i;r++)o[t.children[r]].parent=n;for(r=0,i=t.children_d.length;r<i;r++)o[t.children_d[r]].parents[e.inArray(t.id,o[t.children_d[r]].parents)]=n;return r=e.inArray(t.id,this._data.core.selected),-1!==r&&(this._data.core.selected[r]=n),r=this.get_node(t.id,!0),r&&(r.attr("id",n),this.element.attr("aria-activedescendant")===t.id&&this.element.attr("aria-activedescendant",n)),delete o[t.id],t.id=n,t.li_attr.id=n,o[n]=t,this.trigger("set_id",{node:t,new:t.id,old:a}),!0},get_text:function(t){return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&t.text},set_text:function(t,n){var r,i;if(e.isArray(t)){for(t=t.slice(),r=0,i=t.length;r<i;r++)this.set_text(t[r],n);return!0}return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&(t.text=n,this.get_node(t,!0).length&&this.redraw_node(t.id),this.trigger("set_text",{obj:t,text:n}),!0)},get_json:function(t,n,r){if(!(t=this.get_node(t||e.jstree.root)))return!1;n&&n.flat&&!r&&(r=[]);var i,o,a={id:t.id,text:t.text,icon:this.get_icon(t),li_attr:e.extend(!0,{},t.li_attr),a_attr:e.extend(!0,{},t.a_attr),state:{},data:(!n||!n.no_data)&&e.extend(!0,e.isArray(t.data)?[]:{},t.data)};if(n&&n.flat?a.parent=t.parent:a.children=[],n&&n.no_state)delete a.state;else for(i in t.state)t.state.hasOwnProperty(i)&&(a.state[i]=t.state[i]);if(n&&n.no_li_attr&&delete a.li_attr,n&&n.no_a_attr&&delete a.a_attr,n&&n.no_id&&(delete a.id,a.li_attr&&a.li_attr.id&&delete a.li_attr.id,a.a_attr&&a.a_attr.id&&delete a.a_attr.id),n&&n.flat&&t.id!==e.jstree.root&&r.push(a),!n||!n.no_children)for(i=0,o=t.children.length;i<o;i++)n&&n.flat?this.get_json(t.children[i],n,r):a.children.push(this.get_json(t.children[i],n));return n&&n.flat?r:t.id===e.jstree.root?a.children:a},create_node:function(n,r,i,o,a){if(null===n&&(n=e.jstree.root),!(n=this.get_node(n)))return!1;if(i=i===t?"last":i,!i.toString().match(/^(before|after)$/)&&!a&&!this.is_loaded(n))return this.load_node(n,function(){this.create_node(n,r,i,o,!0)});r||(r={text:this.get_string("New node")}),r="string"==typeof r?{text:r}:e.extend(!0,{},r),r.text===t&&(r.text=this.get_string("New node"));var s,l,c,u;switch(n.id===e.jstree.root&&("before"===i&&(i="first"),"after"===i&&(i="last")),i){case"before":s=this.get_node(n.parent),i=e.inArray(n.id,s.children),n=s;break;case"after":s=this.get_node(n.parent),i=e.inArray(n.id,s.children)+1,n=s;break;case"inside":case"first":i=0;break;case"last":i=n.children.length;break;default:i||(i=0)}if(i>n.children.length&&(i=n.children.length),r.id||(r.id=!0),!this.check("create_node",r,n,i))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(!0===r.id&&delete r.id,!(r=this._parse_model_from_json(r,n.id,n.parents.concat())))return!1;for(s=this.get_node(r),l=[],l.push(r),l=l.concat(s.children_d),this.trigger("model",{nodes:l,parent:n.id}),n.children_d=n.children_d.concat(l),c=0,u=n.parents.length;c<u;c++)this._model.data[n.parents[c]].children_d=this._model.data[n.parents[c]].children_d.concat(l);for(r=s,s=[],c=0,u=n.children.length;c<u;c++)s[c>=i?c+1:c]=n.children[c];return s[i]=r.id,n.children=s,this.redraw_node(n,!0),this.trigger("create_node",{node:this.get_node(r),parent:n.id,position:i}),o&&o.call(this,this.get_node(r)),r.id},rename_node:function(t,n){var r,i,o;if(e.isArray(t)){for(t=t.slice(),r=0,i=t.length;r<i;r++)this.rename_node(t[r],n);return!0}return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&(o=t.text,this.check("rename_node",t,this.get_parent(t),n)?(this.set_text(t,n),this.trigger("rename_node",{node:t,text:n,old:o}),!0):(this.settings.core.error.call(this,this._data.core.last_error),!1))},delete_node:function(t){var n,r,i,o,a,s,l,c,u,d,f,h;if(e.isArray(t)){for(t=t.slice(),n=0,r=t.length;n<r;n++)this.delete_node(t[n]);return!0}if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;if(i=this.get_node(t.parent),o=e.inArray(t.id,i.children),d=!1,!this.check("delete_node",t,i,o))return this.settings.core.error.call(this,this._data.core.last_error),!1;for(-1!==o&&(i.children=e.vakata.array_remove(i.children,o)),a=t.children_d.concat([]),a.push(t.id),s=0,l=t.parents.length;s<l;s++)this._model.data[t.parents[s]].children_d=e.vakata.array_filter(this._model.data[t.parents[s]].children_d,function(t){return-1===e.inArray(t,a)});for(c=0,u=a.length;c<u;c++)if(this._model.data[a[c]].state.selected){d=!0;break}for(d&&(this._data.core.selected=e.vakata.array_filter(this._data.core.selected,function(t){return-1===e.inArray(t,a)})),this.trigger("delete_node",{node:t,parent:i.id}),d&&this.trigger("changed",{action:"delete_node",node:t,selected:this._data.core.selected,parent:i.id}),c=0,u=a.length;c<u;c++)delete this._model.data[a[c]];return-1!==e.inArray(this._data.core.focused,a)&&(this._data.core.focused=null,f=this.element[0].scrollTop,h=this.element[0].scrollLeft,i.id===e.jstree.root?this._model.data[e.jstree.root].children[0]&&this.get_node(this._model.data[e.jstree.root].children[0],!0).children(".jstree-anchor").focus():this.get_node(i,!0).children(".jstree-anchor").focus(),this.element[0].scrollTop=f,this.element[0].scrollLeft=h),this.redraw_node(i,!0),!0},check:function(t,n,r,i,o){n=n&&n.id?n:this.get_node(n),r=r&&r.id?r:this.get_node(r);var a=t.match(/^move_node|copy_node|create_node$/i)?r:n,s=this.settings.core.check_callback;return"move_node"!==t&&"copy_node"!==t||o&&o.is_multi||n.id!==r.id&&("move_node"!==t||e.inArray(n.id,r.children)!==i)&&-1===e.inArray(r.id,n.children_d)?(a&&a.data&&(a=a.data),a&&a.functions&&(!1===a.functions[t]||!0===a.functions[t])?(!1===a.functions[t]&&(this._data.core.last_error={error:"check",plugin:"core",id:"core_02",reason:"Node data prevents function: "+t,data:JSON.stringify({chk:t,pos:i,obj:!(!n||!n.id)&&n.id,par:!(!r||!r.id)&&r.id})}),a.functions[t]):!(!1===s||e.isFunction(s)&&!1===s.call(this,t,n,r,i,o)||s&&!1===s[t])||(this._data.core.last_error={error:"check",plugin:"core",id:"core_03",reason:"User config for core.check_callback prevents function: "+t,data:JSON.stringify({chk:t,pos:i,obj:!(!n||!n.id)&&n.id,par:!(!r||!r.id)&&r.id})},!1)):(this._data.core.last_error={error:"check",plugin:"core",id:"core_01",reason:"Moving parent inside child",data:JSON.stringify({chk:t,pos:i,obj:!(!n||!n.id)&&n.id,par:!(!r||!r.id)&&r.id})},!1)},last_error:function(){return this._data.core.last_error},move_node:function(n,r,i,o,a,s,l){var c,u,d,f,h,p,g,m,v,b,y,w,_,x;if(r=this.get_node(r),i=i===t?0:i,!r)return!1;if(!i.toString().match(/^(before|after)$/)&&!a&&!this.is_loaded(r))return this.load_node(r,function(){this.move_node(n,r,i,o,!0,!1,l)});if(e.isArray(n)){if(1!==n.length){for(c=0,u=n.length;c<u;c++)(v=this.move_node(n[c],r,i,o,a,!1,l))&&(r=v,i="after");return this.redraw(),!0}n=n[0]}if(!(n=n&&n.id?n:this.get_node(n))||n.id===e.jstree.root)return!1;if(d=(n.parent||e.jstree.root).toString(),h=i.toString().match(/^(before|after)$/)&&r.id!==e.jstree.root?this.get_node(r.parent):r,p=l||(this._model.data[n.id]?this:e.jstree.reference(n.id)),g=!p||!p._id||this._id!==p._id,f=p&&p._id&&d&&p._model.data[d]&&p._model.data[d].children?e.inArray(n.id,p._model.data[d].children):-1,p&&p._id&&(n=p._model.data[n.id]),g)return!!(v=this.copy_node(n,r,i,o,a,!1,l))&&(p&&p.delete_node(n),v);switch(r.id===e.jstree.root&&("before"===i&&(i="first"),"after"===i&&(i="last")),i){case"before":i=e.inArray(r.id,h.children);break;case"after":i=e.inArray(r.id,h.children)+1;break;case"inside":case"first":i=0;break;case"last":i=h.children.length;break;default:i||(i=0)}if(i>h.children.length&&(i=h.children.length),!this.check("move_node",n,h,i,{core:!0,origin:l,is_multi:p&&p._id&&p._id!==this._id,is_foreign:!p||!p._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(n.parent===h.id){for(m=h.children.concat(),v=e.inArray(n.id,m),-1!==v&&(m=e.vakata.array_remove(m,v),i>v&&i--),v=[],b=0,y=m.length;b<y;b++)v[b>=i?b+1:b]=m[b];v[i]=n.id,h.children=v,this._node_changed(h.id),this.redraw(h.id===e.jstree.root)}else{for(v=n.children_d.concat(),v.push(n.id),b=0,y=n.parents.length;b<y;b++){for(m=[],x=p._model.data[n.parents[b]].children_d,w=0,_=x.length;w<_;w++)-1===e.inArray(x[w],v)&&m.push(x[w]);p._model.data[n.parents[b]].children_d=m}for(p._model.data[d].children=e.vakata.array_remove_item(p._model.data[d].children,n.id),b=0,y=h.parents.length;b<y;b++)this._model.data[h.parents[b]].children_d=this._model.data[h.parents[b]].children_d.concat(v);for(m=[],b=0,y=h.children.length;b<y;b++)m[b>=i?b+1:b]=h.children[b];for(m[i]=n.id,h.children=m,h.children_d.push(n.id),h.children_d=h.children_d.concat(n.children_d),n.parent=h.id,v=h.parents.concat(),v.unshift(h.id),x=n.parents.length,n.parents=v,v=v.concat(),b=0,y=n.children_d.length;b<y;b++)this._model.data[n.children_d[b]].parents=this._model.data[n.children_d[b]].parents.slice(0,-1*x),Array.prototype.push.apply(this._model.data[n.children_d[b]].parents,v);d!==e.jstree.root&&h.id!==e.jstree.root||(this._model.force_full_redraw=!0),this._model.force_full_redraw||(this._node_changed(d),this._node_changed(h.id)),s||this.redraw()}return o&&o.call(this,n,h,i),this.trigger("move_node",{node:n,parent:h.id,position:i,old_parent:d,old_position:f,is_multi:p&&p._id&&p._id!==this._id,is_foreign:!p||!p._id,old_instance:p,new_instance:this}),n.id},copy_node:function(n,r,i,o,a,s,l){var c,u,d,f,h,p,g,m,v,b;if(r=this.get_node(r),i=i===t?0:i,!r)return!1;if(!i.toString().match(/^(before|after)$/)&&!a&&!this.is_loaded(r))return this.load_node(r,function(){this.copy_node(n,r,i,o,!0,!1,l)});if(e.isArray(n)){if(1!==n.length){for(c=0,u=n.length;c<u;c++)(f=this.copy_node(n[c],r,i,o,a,!0,l))&&(r=f,i="after");return this.redraw(),!0}n=n[0]}if(!(n=n&&n.id?n:this.get_node(n))||n.id===e.jstree.root)return!1;switch(m=(n.parent||e.jstree.root).toString(),v=i.toString().match(/^(before|after)$/)&&r.id!==e.jstree.root?this.get_node(r.parent):r,b=l||(this._model.data[n.id]?this:e.jstree.reference(n.id)),!b||!b._id||this._id!==b._id,b&&b._id&&(n=b._model.data[n.id]),r.id===e.jstree.root&&("before"===i&&(i="first"),"after"===i&&(i="last")),i){case"before":i=e.inArray(r.id,v.children);break;case"after":i=e.inArray(r.id,v.children)+1;break;case"inside":case"first":i=0;break;case"last":i=v.children.length;break;default:i||(i=0)}if(i>v.children.length&&(i=v.children.length),!this.check("copy_node",n,v,i,{core:!0,origin:l,is_multi:b&&b._id&&b._id!==this._id,is_foreign:!b||!b._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(!(g=b?b.get_json(n,{no_id:!0,no_data:!0,no_state:!0}):n))return!1;if(!0===g.id&&delete g.id,!(g=this._parse_model_from_json(g,v.id,v.parents.concat())))return!1;for(f=this.get_node(g),n&&n.state&&!1===n.state.loaded&&(f.state.loaded=!1),d=[],d.push(g),d=d.concat(f.children_d),this.trigger("model",{nodes:d,parent:v.id}),h=0,p=v.parents.length;h<p;h++)this._model.data[v.parents[h]].children_d=this._model.data[v.parents[h]].children_d.concat(d);for(d=[],h=0,p=v.children.length;h<p;h++)d[h>=i?h+1:h]=v.children[h];return d[i]=f.id,v.children=d,v.children_d.push(f.id),v.children_d=v.children_d.concat(f.children_d),v.id===e.jstree.root&&(this._model.force_full_redraw=!0),this._model.force_full_redraw||this._node_changed(v.id),s||this.redraw(v.id===e.jstree.root),o&&o.call(this,f,v,i),this.trigger("copy_node",{node:f,original:n,parent:v.id,position:i,old_parent:m,old_position:b&&b._id&&m&&b._model.data[m]&&b._model.data[m].children?e.inArray(n.id,b._model.data[m].children):-1,is_multi:b&&b._id&&b._id!==this._id,is_foreign:!b||!b._id,old_instance:b,new_instance:this}),f.id},cut:function(t){if(t||(t=this._data.core.selected.concat()),e.isArray(t)||(t=[t]),!t.length)return!1;var n,a,s,l=[];for(a=0,s=t.length;a<s;a++)(n=this.get_node(t[a]))&&n.id&&n.id!==e.jstree.root&&l.push(n);if(!l.length)return!1;r=l,o=this,i="move_node",this.trigger("cut",{node:t})},copy:function(t){if(t||(t=this._data.core.selected.concat()),e.isArray(t)||(t=[t]),!t.length)return!1;var n,a,s,l=[];for(a=0,s=t.length;a<s;a++)(n=this.get_node(t[a]))&&n.id&&n.id!==e.jstree.root&&l.push(n);if(!l.length)return!1;r=l,o=this,i="copy_node",this.trigger("copy",{node:t})},get_buffer:function(){return{mode:i,node:r,inst:o}},can_paste:function(){return!1!==i&&!1!==r},paste:function(e,t){if(!((e=this.get_node(e))&&i&&i.match(/^(copy_node|move_node)$/)&&r))return!1;this[i](r,e,t,!1,!1,!1,o)&&this.trigger("paste",{parent:e.id,node:r,mode:i}),r=!1,i=!1,o=!1},clear_buffer:function(){r=!1,i=!1,o=!1,this.trigger("clear_buffer")},edit:function(t,n,r){var i,o,a,s,c,u,d,f,h,p=!1;return!!(t=this.get_node(t))&&(this.check("edit",t,this.get_parent(t))?(h=t,n="string"==typeof n?n:t.text,this.set_text(t,""),t=this._open_to(t),h.text=n,i=this._data.core.rtl,o=this.element.width(),this._data.core.focused=h.id,a=t.children(".jstree-anchor").focus(),s=e("<span>"),c=n,u=e("<div />",{css:{position:"absolute",top:"-200px",left:i?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),d=e("<input />",{value:c,class:"jstree-rename-input",css:{padding:"0",border:"1px solid silver","box-sizing":"border-box",display:"inline-block",height:this._data.core.li_height+"px",lineHeight:this._data.core.li_height+"px",width:"150px"},blur:e.proxy(function(n){n.stopImmediatePropagation(),n.preventDefault();var i,o=s.children(".jstree-rename-input"),l=o.val(),f=this.settings.core.force_text;""===l&&(l=c),u.remove(),s.replaceWith(a),s.remove(),c=f?c:e("<div></div>").append(e.parseHTML(c)).html(),this.set_text(t,c),i=!!this.rename_node(t,f?e("<div></div>").text(l).text():e("<div></div>").append(e.parseHTML(l)).html()),i||this.set_text(t,c),this._data.core.focused=h.id,setTimeout(e.proxy(function(){var e=this.get_node(h.id,!0);e.length&&(this._data.core.focused=h.id,e.children(".jstree-anchor").focus())},this),0),r&&r.call(this,h,i,p),d=null},this),keydown:function(e){var t=e.which;27===t&&(p=!0,this.value=c),27!==t&&13!==t&&37!==t&&38!==t&&39!==t&&40!==t&&32!==t||e.stopImmediatePropagation(),27!==t&&13!==t||(e.preventDefault(),this.blur())},click:function(e){e.stopImmediatePropagation()},mousedown:function(e){e.stopImmediatePropagation()},keyup:function(e){d.width(Math.min(u.text("pW"+this.value).width(),o))},keypress:function(e){if(13===e.which)return!1}}),f={fontFamily:a.css("fontFamily")||"",fontSize:a.css("fontSize")||"",fontWeight:a.css("fontWeight")||"",fontStyle:a.css("fontStyle")||"",fontStretch:a.css("fontStretch")||"",fontVariant:a.css("fontVariant")||"",letterSpacing:a.css("letterSpacing")||"",wordSpacing:a.css("wordSpacing")||""},s.attr("class",a.attr("class")).append(a.contents().clone()).append(d),a.replaceWith(s),u.css(f),d.css(f).width(Math.min(u.text("pW"+d[0].value).width(),o))[0].select(),void e(l).one("mousedown.jstree touchstart.jstree dnd_start.vakata",function(t){d&&t.target!==d&&e(d).blur()})):(this.settings.core.error.call(this,this._data.core.last_error),!1))},set_theme:function(t,n){if(!t)return!1;if(!0===n){var r=this.settings.core.themes.dir;r||(r=e.jstree.path+"/themes"),n=r+"/"+t+"/style.css"}n&&-1===e.inArray(n,a)&&(e("head").append('<link rel="stylesheet" href="'+n+'" type="text/css" />'),a.push(n)),this._data.core.themes.name&&this.element.removeClass("jstree-"+this._data.core.themes.name),this._data.core.themes.name=t,this.element.addClass("jstree-"+t),this.element[this.settings.core.themes.responsive?"addClass":"removeClass"]("jstree-"+t+"-responsive"),this.trigger("set_theme",{theme:t})},get_theme:function(){return this._data.core.themes.name},set_theme_variant:function(e){this._data.core.themes.variant&&this.element.removeClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant),this._data.core.themes.variant=e,e&&this.element.addClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant)},get_theme_variant:function(){return this._data.core.themes.variant},show_stripes:function(){this._data.core.themes.stripes=!0,this.get_container_ul().addClass("jstree-striped"),this.trigger("show_stripes")},hide_stripes:function(){this._data.core.themes.stripes=!1,this.get_container_ul().removeClass("jstree-striped"),this.trigger("hide_stripes")},toggle_stripes:function(){this._data.core.themes.stripes?this.hide_stripes():this.show_stripes()},show_dots:function(){this._data.core.themes.dots=!0,this.get_container_ul().removeClass("jstree-no-dots"),this.trigger("show_dots")},hide_dots:function(){this._data.core.themes.dots=!1,this.get_container_ul().addClass("jstree-no-dots"),this.trigger("hide_dots")},toggle_dots:function(){this._data.core.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this._data.core.themes.icons=!0,this.get_container_ul().removeClass("jstree-no-icons"),this.trigger("show_icons")},hide_icons:function(){this._data.core.themes.icons=!1,this.get_container_ul().addClass("jstree-no-icons"),this.trigger("hide_icons")},toggle_icons:function(){this._data.core.themes.icons?this.hide_icons():this.show_icons()},show_ellipsis:function(){this._data.core.themes.ellipsis=!0,this.get_container_ul().addClass("jstree-ellipsis"),this.trigger("show_ellipsis")},hide_ellipsis:function(){this._data.core.themes.ellipsis=!1,this.get_container_ul().removeClass("jstree-ellipsis"),this.trigger("hide_ellipsis")},toggle_ellipsis:function(){this._data.core.themes.ellipsis?this.hide_ellipsis():this.show_ellipsis()},set_icon:function(n,r){var i,o,a,s;if(e.isArray(n)){for(n=n.slice(),i=0,o=n.length;i<o;i++)this.set_icon(n[i],r);return!0}return!(!(n=this.get_node(n))||n.id===e.jstree.root)&&(s=n.icon,n.icon=!0===r||null===r||r===t||""===r||r,a=this.get_node(n,!0).children(".jstree-anchor").children(".jstree-themeicon"),!1===r?(a.removeClass("jstree-themeicon-custom "+s).css("background","").removeAttr("rel"),this.hide_icon(n)):!0===r||null===r||r===t||""===r?(a.removeClass("jstree-themeicon-custom "+s).css("background","").removeAttr("rel"),!1===s&&this.show_icon(n)):-1===r.indexOf("/")&&-1===r.indexOf(".")?(a.removeClass(s).css("background",""),a.addClass(r+" jstree-themeicon-custom").attr("rel",r),!1===s&&this.show_icon(n)):(a.removeClass(s).css("background",""),a.addClass("jstree-themeicon-custom").css("background","url('"+r+"') center center no-repeat").attr("rel",r),!1===s&&this.show_icon(n)),!0)},get_icon:function(t){return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&t.icon},hide_icon:function(t){var n,r;if(e.isArray(t)){for(t=t.slice(),n=0,r=t.length;n<r;n++)this.hide_icon(t[n]);return!0}return!(!(t=this.get_node(t))||t===e.jstree.root)&&(t.icon=!1,this.get_node(t,!0).children(".jstree-anchor").children(".jstree-themeicon").addClass("jstree-themeicon-hidden"),!0)},show_icon:function(t){var n,r,i;if(e.isArray(t)){for(t=t.slice(),n=0,r=t.length;n<r;n++)this.show_icon(t[n]);return!0}return!(!(t=this.get_node(t))||t===e.jstree.root)&&(i=this.get_node(t,!0),t.icon=!i.length||i.children(".jstree-anchor").children(".jstree-themeicon").attr("rel"),t.icon||(t.icon=!0),i.children(".jstree-anchor").children(".jstree-themeicon").removeClass("jstree-themeicon-hidden"),!0)}},e.vakata={},e.vakata.attributes=function(t,n){t=e(t)[0];var r=n?{}:[];return t&&t.attributes&&e.each(t.attributes,function(t,i){-1===e.inArray(i.name.toLowerCase(),["style","contenteditable","hasfocus","tabindex"])&&null!==i.value&&""!==e.trim(i.value)&&(n?r[i.name]=i.value:r.push(i.name))}),r},e.vakata.array_unique=function(e){var n,r,i=[],o={};for(n=0,r=e.length;n<r;n++)o[e[n]]===t&&(i.push(e[n]),o[e[n]]=!0);return i},e.vakata.array_remove=function(e,t){return e.splice(t,1),e},e.vakata.array_remove_item=function(t,n){var r=e.inArray(n,t);return-1!==r?e.vakata.array_remove(t,r):t},e.vakata.array_filter=function(e,t,n,r,i){if(e.filter)return e.filter(t,n);r=[];for(i in e)~~i+""==i+""&&i>=0&&t.call(n,e[i],+i,e)&&r.push(e[i]);return r},e.jstree.plugins.changed=function(e,t){var n=[];this.trigger=function(e,r){var i,o;if(r||(r={}),"changed"===e.replace(".jstree","")){r.changed={selected:[],deselected:[]};var a={};for(i=0,o=n.length;i<o;i++)a[n[i]]=1;for(i=0,o=r.selected.length;i<o;i++)a[r.selected[i]]?a[r.selected[i]]=2:r.changed.selected.push(r.selected[i]);for(i=0,o=n.length;i<o;i++)1===a[n[i]]&&r.changed.deselected.push(n[i]);n=r.selected.slice()}t.trigger.call(this,e,r)},this.refresh=function(e,r){return n=[],t.refresh.apply(this,arguments)}};var c=l.createElement("I");c.className="jstree-icon jstree-checkbox",c.setAttribute("role","presentation"),e.jstree.defaults.checkbox={visible:!0,three_state:!0,whole_node:!0,keep_selected_style:!0,cascade:"",tie_selection:!0,cascade_to_disabled:!0,cascade_to_hidden:!0},e.jstree.plugins.checkbox=function(n,r){this.bind=function(){r.bind.call(this),this._data.checkbox.uto=!1,this._data.checkbox.selected=[],this.settings.checkbox.three_state&&(this.settings.checkbox.cascade="up+down+undetermined"),this.element.on("init.jstree",e.proxy(function(){this._data.checkbox.visible=this.settings.checkbox.visible,this.settings.checkbox.keep_selected_style||this.element.addClass("jstree-checkbox-no-clicked"),this.settings.checkbox.tie_selection&&this.element.addClass("jstree-checkbox-selection")},this)).on("loading.jstree",e.proxy(function(){this[this._data.checkbox.visible?"show_checkboxes":"hide_checkboxes"]()},this)),-1!==this.settings.checkbox.cascade.indexOf("undetermined")&&this.element.on("changed.jstree uncheck_node.jstree check_node.jstree uncheck_all.jstree check_all.jstree move_node.jstree copy_node.jstree redraw.jstree open_node.jstree",e.proxy(function(){this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(e.proxy(this._undetermined,this),50)},this)),this.settings.checkbox.tie_selection||this.element.on("model.jstree",e.proxy(function(e,t){var n,r,i=this._model.data,o=(i[t.parent],
t.nodes);for(n=0,r=o.length;n<r;n++)i[o[n]].state.checked=i[o[n]].state.checked||i[o[n]].original&&i[o[n]].original.state&&i[o[n]].original.state.checked,i[o[n]].state.checked&&this._data.checkbox.selected.push(o[n])},this)),-1===this.settings.checkbox.cascade.indexOf("up")&&-1===this.settings.checkbox.cascade.indexOf("down")||this.element.on("model.jstree",e.proxy(function(t,n){var r,i,o,a,s,l,c=this._model.data,u=c[n.parent],d=n.nodes,f=[],h=this.settings.checkbox.cascade,p=this.settings.checkbox.tie_selection;if(-1!==h.indexOf("down"))if(u.state[p?"selected":"checked"]){for(i=0,o=d.length;i<o;i++)c[d[i]].state[p?"selected":"checked"]=!0;this._data[p?"core":"checkbox"].selected=this._data[p?"core":"checkbox"].selected.concat(d)}else for(i=0,o=d.length;i<o;i++)if(c[d[i]].state[p?"selected":"checked"]){for(a=0,s=c[d[i]].children_d.length;a<s;a++)c[c[d[i]].children_d[a]].state[p?"selected":"checked"]=!0;this._data[p?"core":"checkbox"].selected=this._data[p?"core":"checkbox"].selected.concat(c[d[i]].children_d)}if(-1!==h.indexOf("up")){for(i=0,o=u.children_d.length;i<o;i++)c[u.children_d[i]].children.length||f.push(c[u.children_d[i]].parent);for(f=e.vakata.array_unique(f),a=0,s=f.length;a<s;a++)for(u=c[f[a]];u&&u.id!==e.jstree.root;){for(r=0,i=0,o=u.children.length;i<o;i++)r+=c[u.children[i]].state[p?"selected":"checked"];if(r!==o)break;u.state[p?"selected":"checked"]=!0,this._data[p?"core":"checkbox"].selected.push(u.id),(l=this.get_node(u,!0))&&l.length&&l.attr("aria-selected",!0).children(".jstree-anchor").addClass(p?"jstree-clicked":"jstree-checked"),u=this.get_node(u.parent)}}this._data[p?"core":"checkbox"].selected=e.vakata.array_unique(this._data[p?"core":"checkbox"].selected)},this)).on(this.settings.checkbox.tie_selection?"select_node.jstree":"check_node.jstree",e.proxy(function(t,n){var r,i,o,a,s=n.node,l=this._model.data,c=this.get_node(s.parent),u=this.settings.checkbox.cascade,d=this.settings.checkbox.tie_selection,f={},h=this._data[d?"core":"checkbox"].selected;for(r=0,i=h.length;r<i;r++)f[h[r]]=!0;if(-1!==u.indexOf("down")){var p=this._cascade_new_checked_state(s.id,!0),g=s.children_d.concat(s.id);for(r=0,i=g.length;r<i;r++)p.indexOf(g[r])>-1?f[g[r]]=!0:delete f[g[r]]}if(-1!==u.indexOf("up"))for(;c&&c.id!==e.jstree.root;){for(o=0,r=0,i=c.children.length;r<i;r++)o+=l[c.children[r]].state[d?"selected":"checked"];if(o!==i)break;c.state[d?"selected":"checked"]=!0,f[c.id]=!0,(a=this.get_node(c,!0))&&a.length&&a.attr("aria-selected",!0).children(".jstree-anchor").addClass(d?"jstree-clicked":"jstree-checked"),c=this.get_node(c.parent)}h=[];for(r in f)f.hasOwnProperty(r)&&h.push(r);this._data[d?"core":"checkbox"].selected=h},this)).on(this.settings.checkbox.tie_selection?"deselect_all.jstree":"uncheck_all.jstree",e.proxy(function(t,n){var r,i,o,a=this.get_node(e.jstree.root),s=this._model.data;for(r=0,i=a.children_d.length;r<i;r++)(o=s[a.children_d[r]])&&o.original&&o.original.state&&o.original.state.undetermined&&(o.original.state.undetermined=!1)},this)).on(this.settings.checkbox.tie_selection?"deselect_node.jstree":"uncheck_node.jstree",e.proxy(function(e,t){var n,r,i,o=t.node,a=(this.get_node(o,!0),this.settings.checkbox.cascade),s=this.settings.checkbox.tie_selection,l=this._data[s?"core":"checkbox"].selected,c=o.children_d.concat(o.id);if(-1!==a.indexOf("down")){var u=this._cascade_new_checked_state(o.id,!1);l=l.filter(function(e){return-1===c.indexOf(e)||u.indexOf(e)>-1})}if(-1!==a.indexOf("up")&&-1===l.indexOf(o.id)){for(n=0,r=o.parents.length;n<r;n++)i=this._model.data[o.parents[n]],i.state[s?"selected":"checked"]=!1,i&&i.original&&i.original.state&&i.original.state.undetermined&&(i.original.state.undetermined=!1),(i=this.get_node(o.parents[n],!0))&&i.length&&i.attr("aria-selected",!1).children(".jstree-anchor").removeClass(s?"jstree-clicked":"jstree-checked");l=l.filter(function(e){return-1===o.parents.indexOf(e)})}this._data[s?"core":"checkbox"].selected=l},this)),-1!==this.settings.checkbox.cascade.indexOf("up")&&this.element.on("delete_node.jstree",e.proxy(function(t,n){for(var r,i,o,a,s=this.get_node(n.parent),l=this._model.data,c=this.settings.checkbox.tie_selection;s&&s.id!==e.jstree.root&&!s.state[c?"selected":"checked"];){for(o=0,r=0,i=s.children.length;r<i;r++)o+=l[s.children[r]].state[c?"selected":"checked"];if(!(i>0&&o===i))break;s.state[c?"selected":"checked"]=!0,this._data[c?"core":"checkbox"].selected.push(s.id),(a=this.get_node(s,!0))&&a.length&&a.attr("aria-selected",!0).children(".jstree-anchor").addClass(c?"jstree-clicked":"jstree-checked"),s=this.get_node(s.parent)}},this)).on("move_node.jstree",e.proxy(function(t,n){var r,i,o,a,s,l=n.is_multi,c=n.old_parent,u=this.get_node(n.parent),d=this._model.data,f=this.settings.checkbox.tie_selection;if(!l)for(r=this.get_node(c);r&&r.id!==e.jstree.root&&!r.state[f?"selected":"checked"];){for(i=0,o=0,a=r.children.length;o<a;o++)i+=d[r.children[o]].state[f?"selected":"checked"];if(!(a>0&&i===a))break;r.state[f?"selected":"checked"]=!0,this._data[f?"core":"checkbox"].selected.push(r.id),(s=this.get_node(r,!0))&&s.length&&s.attr("aria-selected",!0).children(".jstree-anchor").addClass(f?"jstree-clicked":"jstree-checked"),r=this.get_node(r.parent)}for(r=u;r&&r.id!==e.jstree.root;){for(i=0,o=0,a=r.children.length;o<a;o++)i+=d[r.children[o]].state[f?"selected":"checked"];if(i===a)r.state[f?"selected":"checked"]||(r.state[f?"selected":"checked"]=!0,this._data[f?"core":"checkbox"].selected.push(r.id),(s=this.get_node(r,!0))&&s.length&&s.attr("aria-selected",!0).children(".jstree-anchor").addClass(f?"jstree-clicked":"jstree-checked"));else{if(!r.state[f?"selected":"checked"])break;r.state[f?"selected":"checked"]=!1,this._data[f?"core":"checkbox"].selected=e.vakata.array_remove_item(this._data[f?"core":"checkbox"].selected,r.id),(s=this.get_node(r,!0))&&s.length&&s.attr("aria-selected",!1).children(".jstree-anchor").removeClass(f?"jstree-clicked":"jstree-checked")}r=this.get_node(r.parent)}},this))},this.get_undetermined=function(n){if(-1===this.settings.checkbox.cascade.indexOf("undetermined"))return[];var r,i,o,a,s={},l=this._model.data,c=this.settings.checkbox.tie_selection,u=this._data[c?"core":"checkbox"].selected,d=[],f=this,h=[];for(r=0,i=u.length;r<i;r++)if(l[u[r]]&&l[u[r]].parents)for(o=0,a=l[u[r]].parents.length;o<a&&s[l[u[r]].parents[o]]===t;o++)l[u[r]].parents[o]!==e.jstree.root&&(s[l[u[r]].parents[o]]=!0,d.push(l[u[r]].parents[o]));for(this.element.find(".jstree-closed").not(":has(.jstree-children)").each(function(){var n,c=f.get_node(this);if(c)if(c.state.loaded){for(r=0,i=c.children_d.length;r<i;r++)if(n=l[c.children_d[r]],!n.state.loaded&&n.original&&n.original.state&&n.original.state.undetermined&&!0===n.original.state.undetermined)for(s[n.id]===t&&n.id!==e.jstree.root&&(s[n.id]=!0,d.push(n.id)),o=0,a=n.parents.length;o<a;o++)s[n.parents[o]]===t&&n.parents[o]!==e.jstree.root&&(s[n.parents[o]]=!0,d.push(n.parents[o]))}else if(c.original&&c.original.state&&c.original.state.undetermined&&!0===c.original.state.undetermined)for(s[c.id]===t&&c.id!==e.jstree.root&&(s[c.id]=!0,d.push(c.id)),o=0,a=c.parents.length;o<a;o++)s[c.parents[o]]===t&&c.parents[o]!==e.jstree.root&&(s[c.parents[o]]=!0,d.push(c.parents[o]))}),r=0,i=d.length;r<i;r++)l[d[r]].state[c?"selected":"checked"]||h.push(n?l[d[r]]:d[r]);return h},this._undetermined=function(){if(null!==this.element){var e,t,n,r=this.get_undetermined(!1);for(this.element.find(".jstree-undetermined").removeClass("jstree-undetermined"),e=0,t=r.length;e<t;e++)(n=this.get_node(r[e],!0))&&n.length&&n.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-undetermined")}},this.redraw_node=function(t,n,i,o){if(t=r.redraw_node.apply(this,arguments)){var a,s,l=null,u=null;for(a=0,s=t.childNodes.length;a<s;a++)if(t.childNodes[a]&&t.childNodes[a].className&&-1!==t.childNodes[a].className.indexOf("jstree-anchor")){l=t.childNodes[a];break}l&&(!this.settings.checkbox.tie_selection&&this._model.data[t.id].state.checked&&(l.className+=" jstree-checked"),u=c.cloneNode(!1),this._model.data[t.id].state.checkbox_disabled&&(u.className+=" jstree-checkbox-disabled"),l.insertBefore(u,l.childNodes[0]))}return i||-1===this.settings.checkbox.cascade.indexOf("undetermined")||(this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(e.proxy(this._undetermined,this),50)),t},this.show_checkboxes=function(){this._data.core.themes.checkboxes=!0,this.get_container_ul().removeClass("jstree-no-checkboxes")},this.hide_checkboxes=function(){this._data.core.themes.checkboxes=!1,this.get_container_ul().addClass("jstree-no-checkboxes")},this.toggle_checkboxes=function(){this._data.core.themes.checkboxes?this.hide_checkboxes():this.show_checkboxes()},this.is_undetermined=function(t){t=this.get_node(t);var n,r,i=this.settings.checkbox.cascade,o=this.settings.checkbox.tie_selection,a=this._data[o?"core":"checkbox"].selected,s=this._model.data;if(!t||!0===t.state[o?"selected":"checked"]||-1===i.indexOf("undetermined")||-1===i.indexOf("down")&&-1===i.indexOf("up"))return!1;if(!t.state.loaded&&!0===t.original.state.undetermined)return!0;for(n=0,r=t.children_d.length;n<r;n++)if(-1!==e.inArray(t.children_d[n],a)||!s[t.children_d[n]].state.loaded&&s[t.children_d[n]].original.state.undetermined)return!0;return!1},this.disable_checkbox=function(t){var n,r,i;if(e.isArray(t)){for(t=t.slice(),n=0,r=t.length;n<r;n++)this.disable_checkbox(t[n]);return!0}if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;i=this.get_node(t,!0),t.state.checkbox_disabled||(t.state.checkbox_disabled=!0,i&&i.length&&i.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-checkbox-disabled"),this.trigger("disable_checkbox",{node:t}))},this.enable_checkbox=function(t){var n,r,i;if(e.isArray(t)){for(t=t.slice(),n=0,r=t.length;n<r;n++)this.enable_checkbox(t[n]);return!0}if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;i=this.get_node(t,!0),t.state.checkbox_disabled&&(t.state.checkbox_disabled=!1,i&&i.length&&i.children(".jstree-anchor").children(".jstree-checkbox").removeClass("jstree-checkbox-disabled"),this.trigger("enable_checkbox",{node:t}))},this.activate_node=function(t,n){return!e(n.target).hasClass("jstree-checkbox-disabled")&&(this.settings.checkbox.tie_selection&&(this.settings.checkbox.whole_node||e(n.target).hasClass("jstree-checkbox"))&&(n.ctrlKey=!0),this.settings.checkbox.tie_selection||!this.settings.checkbox.whole_node&&!e(n.target).hasClass("jstree-checkbox")?r.activate_node.call(this,t,n):!this.is_disabled(t)&&(this.is_checked(t)?this.uncheck_node(t,n):this.check_node(t,n),void this.trigger("activate_node",{node:this.get_node(t)})))},this._cascade_new_checked_state=function(e,t){var n,r,i,o=this,a=this.settings.checkbox.tie_selection,s=this._model.data[e],l=[],c=[];if(!this.settings.checkbox.cascade_to_disabled&&s.state.disabled||!this.settings.checkbox.cascade_to_hidden&&s.state.hidden)i=this.get_checked_descendants(e),s.state[a?"selected":"checked"]&&i.push(s.id),l=l.concat(i);else{if(s.children)for(n=0,r=s.children.length;n<r;n++){var u=s.children[n];i=o._cascade_new_checked_state(u,t),l=l.concat(i),i.indexOf(u)>-1&&c.push(u)}var d=o.get_node(s,!0),f=c.length>0&&c.length<s.children.length;s.original&&s.original.state&&s.original.state.undetermined&&(s.original.state.undetermined=f),f?(s.state[a?"selected":"checked"]=!1,d.attr("aria-selected",!1).children(".jstree-anchor").removeClass(a?"jstree-clicked":"jstree-checked")):t&&c.length===s.children.length?(s.state[a?"selected":"checked"]=t,l.push(s.id),d.attr("aria-selected",!0).children(".jstree-anchor").addClass(a?"jstree-clicked":"jstree-checked")):(s.state[a?"selected":"checked"]=!1,d.attr("aria-selected",!1).children(".jstree-anchor").removeClass(a?"jstree-clicked":"jstree-checked"))}return l},this.get_checked_descendants=function(e){var t=this,n=t.settings.checkbox.tie_selection;return t._model.data[e].children_d.filter(function(e){return t._model.data[e].state[n?"selected":"checked"]})},this.check_node=function(t,n){if(this.settings.checkbox.tie_selection)return this.select_node(t,!1,!0,n);var r,i,o;if(e.isArray(t)){for(t=t.slice(),i=0,o=t.length;i<o;i++)this.check_node(t[i],n);return!0}if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;r=this.get_node(t,!0),t.state.checked||(t.state.checked=!0,this._data.checkbox.selected.push(t.id),r&&r.length&&r.children(".jstree-anchor").addClass("jstree-checked"),this.trigger("check_node",{node:t,selected:this._data.checkbox.selected,event:n}))},this.uncheck_node=function(t,n){if(this.settings.checkbox.tie_selection)return this.deselect_node(t,!1,n);var r,i,o;if(e.isArray(t)){for(t=t.slice(),r=0,i=t.length;r<i;r++)this.uncheck_node(t[r],n);return!0}if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;o=this.get_node(t,!0),t.state.checked&&(t.state.checked=!1,this._data.checkbox.selected=e.vakata.array_remove_item(this._data.checkbox.selected,t.id),o.length&&o.children(".jstree-anchor").removeClass("jstree-checked"),this.trigger("uncheck_node",{node:t,selected:this._data.checkbox.selected,event:n}))},this.check_all=function(){if(this.settings.checkbox.tie_selection)return this.select_all();var t,n;this._data.checkbox.selected.concat([]);for(this._data.checkbox.selected=this._model.data[e.jstree.root].children_d.concat(),t=0,n=this._data.checkbox.selected.length;t<n;t++)this._model.data[this._data.checkbox.selected[t]]&&(this._model.data[this._data.checkbox.selected[t]].state.checked=!0);this.redraw(!0),this.trigger("check_all",{selected:this._data.checkbox.selected})},this.uncheck_all=function(){if(this.settings.checkbox.tie_selection)return this.deselect_all();var e,t,n=this._data.checkbox.selected.concat([]);for(e=0,t=this._data.checkbox.selected.length;e<t;e++)this._model.data[this._data.checkbox.selected[e]]&&(this._model.data[this._data.checkbox.selected[e]].state.checked=!1);this._data.checkbox.selected=[],this.element.find(".jstree-checked").removeClass("jstree-checked"),this.trigger("uncheck_all",{selected:this._data.checkbox.selected,node:n})},this.is_checked=function(t){return this.settings.checkbox.tie_selection?this.is_selected(t):!(!(t=this.get_node(t))||t.id===e.jstree.root)&&t.state.checked},this.get_checked=function(t){return this.settings.checkbox.tie_selection?this.get_selected(t):t?e.map(this._data.checkbox.selected,e.proxy(function(e){return this.get_node(e)},this)):this._data.checkbox.selected},this.get_top_checked=function(t){if(this.settings.checkbox.tie_selection)return this.get_top_selected(t);var n,r,i,o,a=this.get_checked(!0),s={};for(n=0,r=a.length;n<r;n++)s[a[n].id]=a[n];for(n=0,r=a.length;n<r;n++)for(i=0,o=a[n].children_d.length;i<o;i++)s[a[n].children_d[i]]&&delete s[a[n].children_d[i]];a=[];for(n in s)s.hasOwnProperty(n)&&a.push(n);return t?e.map(a,e.proxy(function(e){return this.get_node(e)},this)):a},this.get_bottom_checked=function(t){if(this.settings.checkbox.tie_selection)return this.get_bottom_selected(t);var n,r,i=this.get_checked(!0),o=[];for(n=0,r=i.length;n<r;n++)i[n].children.length||o.push(i[n].id);return t?e.map(o,e.proxy(function(e){return this.get_node(e)},this)):o},this.load_node=function(t,n){var i,o,a;if(!e.isArray(t)&&!this.settings.checkbox.tie_selection&&(a=this.get_node(t))&&a.state.loaded)for(i=0,o=a.children_d.length;i<o;i++)this._model.data[a.children_d[i]].state.checked&&(!0,this._data.checkbox.selected=e.vakata.array_remove_item(this._data.checkbox.selected,a.children_d[i]));return r.load_node.apply(this,arguments)},this.get_state=function(){var e=r.get_state.apply(this,arguments);return this.settings.checkbox.tie_selection?e:(e.checkbox=this._data.checkbox.selected.slice(),e)},this.set_state=function(t,n){var i=r.set_state.apply(this,arguments);if(i&&t.checkbox){if(!this.settings.checkbox.tie_selection){this.uncheck_all();var o=this;e.each(t.checkbox,function(e,t){o.check_node(t)})}return delete t.checkbox,this.set_state(t,n),!1}return i},this.refresh=function(e,t){return this.settings.checkbox.tie_selection||(this._data.checkbox.selected=[]),r.refresh.apply(this,arguments)}},e.jstree.defaults.conditionalselect=function(){return!0},e.jstree.plugins.conditionalselect=function(e,t){this.activate_node=function(e,n){if(this.settings.conditionalselect.call(this,this.get_node(e),n))return t.activate_node.call(this,e,n)}},e.jstree.defaults.contextmenu={select_node:!0,show_at_node:!0,items:function(t,n){return{create:{separator_before:!1,separator_after:!0,_disabled:!1,label:"Create",action:function(t){var n=e.jstree.reference(t.reference),r=n.get_node(t.reference);n.create_node(r,{},"last",function(e){try{n.edit(e)}catch(t){setTimeout(function(){n.edit(e)},0)}})}},rename:{separator_before:!1,separator_after:!1,_disabled:!1,label:"Rename",action:function(t){var n=e.jstree.reference(t.reference),r=n.get_node(t.reference);n.edit(r)}},remove:{separator_before:!1,icon:!1,separator_after:!1,_disabled:!1,label:"Delete",action:function(t){var n=e.jstree.reference(t.reference),r=n.get_node(t.reference);n.is_selected(r)?n.delete_node(n.get_selected()):n.delete_node(r)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,separator_after:!1,label:"Cut",action:function(t){var n=e.jstree.reference(t.reference),r=n.get_node(t.reference);n.is_selected(r)?n.cut(n.get_top_selected()):n.cut(r)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(t){var n=e.jstree.reference(t.reference),r=n.get_node(t.reference);n.is_selected(r)?n.copy(n.get_top_selected()):n.copy(r)}},paste:{separator_before:!1,icon:!1,_disabled:function(t){return!e.jstree.reference(t.reference).can_paste()},separator_after:!1,label:"Paste",action:function(t){var n=e.jstree.reference(t.reference),r=n.get_node(t.reference);n.paste(r)}}}}}}},e.jstree.plugins.contextmenu=function(n,r){this.bind=function(){r.bind.call(this);var t,n,i=0,o=null;this.element.on("init.jstree loading.jstree ready.jstree",e.proxy(function(){this.get_container_ul().addClass("jstree-contextmenu")},this)).on("contextmenu.jstree",".jstree-anchor",e.proxy(function(e,t){"input"!==e.target.tagName.toLowerCase()&&(e.preventDefault(),i=e.ctrlKey?+new Date:0,(t||o)&&(i=+new Date+1e4),o&&clearTimeout(o),this.is_loading(e.currentTarget)||this.show_contextmenu(e.currentTarget,e.pageX,e.pageY,e))},this)).on("click.jstree",".jstree-anchor",e.proxy(function(t){this._data.contextmenu.visible&&(!i||+new Date-i>250)&&e.vakata.context.hide(),i=0},this)).on("touchstart.jstree",".jstree-anchor",function(r){r.originalEvent&&r.originalEvent.changedTouches&&r.originalEvent.changedTouches[0]&&(t=r.originalEvent.changedTouches[0].clientX,n=r.originalEvent.changedTouches[0].clientY,o=setTimeout(function(){e(r.currentTarget).trigger("contextmenu",!0)},750))}).on("touchmove.vakata.jstree",function(r){o&&r.originalEvent&&r.originalEvent.changedTouches&&r.originalEvent.changedTouches[0]&&(Math.abs(t-r.originalEvent.changedTouches[0].clientX)>10||Math.abs(n-r.originalEvent.changedTouches[0].clientY)>10)&&(clearTimeout(o),e.vakata.context.hide())}).on("touchend.vakata.jstree",function(e){o&&clearTimeout(o)}),e(l).on("context_hide.vakata.jstree",e.proxy(function(t,n){this._data.contextmenu.visible=!1,e(n.reference).removeClass("jstree-context")},this))},this.teardown=function(){this._data.contextmenu.visible&&e.vakata.context.hide(),r.teardown.call(this)},this.show_contextmenu=function(n,r,i,o){if(!(n=this.get_node(n))||n.id===e.jstree.root)return!1;var a=this.settings.contextmenu,s=this.get_node(n,!0),l=s.children(".jstree-anchor"),c=!1,u=!1;(a.show_at_node||r===t||i===t)&&(c=l.offset(),r=c.left,i=c.top+this._data.core.li_height),this.settings.contextmenu.select_node&&!this.is_selected(n)&&this.activate_node(n,o),u=a.items,e.isFunction(u)&&(u=u.call(this,n,e.proxy(function(e){this._show_contextmenu(n,r,i,e)},this))),e.isPlainObject(u)&&this._show_contextmenu(n,r,i,u)},this._show_contextmenu=function(t,n,r,i){var o=this.get_node(t,!0),a=o.children(".jstree-anchor");e(l).one("context_show.vakata.jstree",e.proxy(function(t,n){var r="jstree-contextmenu jstree-"+this.get_theme()+"-contextmenu";e(n.element).addClass(r),a.addClass("jstree-context")},this)),this._data.contextmenu.visible=!0,e.vakata.context.show(a,{x:n,y:r},i),this.trigger("show_contextmenu",{node:t,x:n,y:r})}},function(e){var t=!1,n={element:!1,reference:!1,position_x:0,position_y:0,items:[],html:"",is_visible:!1};e.vakata.context={settings:{hide_onmouseleave:0,icons:!0},_trigger:function(t){e(l).triggerHandler("context_"+t+".vakata",{reference:n.reference,element:n.element,position:{x:n.position_x,y:n.position_y}})},_execute:function(t){return!(!(t=n.items[t])||t._disabled&&(!e.isFunction(t._disabled)||t._disabled({item:t,reference:n.reference,element:n.element}))||!t.action)&&t.action.call(null,{item:t,reference:n.reference,element:n.element,position:{x:n.position_x,y:n.position_y}})},_parse:function(t,r){if(!t)return!1;r||(n.html="",n.items=[]);var i,o="",a=!1;return r&&(o+="<ul>"),e.each(t,function(t,r){if(!r)return!0;n.items.push(r),!a&&r.separator_before&&(o+="<li class='vakata-context-separator'><a href='#' "+(e.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>"),a=!1,o+="<li class='"+(r._class||"")+(!0===r._disabled||e.isFunction(r._disabled)&&r._disabled({item:r,reference:n.reference,element:n.element})?" vakata-contextmenu-disabled ":"")+"' "+(r.shortcut?" data-shortcut='"+r.shortcut+"' ":"")+">",o+="<a href='#' rel='"+(n.items.length-1)+"' "+(r.title?"title='"+r.title+"'":"")+">",e.vakata.context.settings.icons&&(o+="<i ",r.icon&&(-1!==r.icon.indexOf("/")||-1!==r.icon.indexOf(".")?o+=" style='background:url(\""+r.icon+"\") center center no-repeat' ":o+=" class='"+r.icon+"' "),o+="></i><span class='vakata-contextmenu-sep'>&#160;</span>"),o+=(e.isFunction(r.label)?r.label({item:t,reference:n.reference,element:n.element}):r.label)+(r.shortcut?' <span class="vakata-contextmenu-shortcut vakata-contextmenu-shortcut-'+r.shortcut+'">'+(r.shortcut_label||"")+"</span>":"")+"</a>",r.submenu&&(i=e.vakata.context._parse(r.submenu,!0))&&(o+=i),o+="</li>",r.separator_after&&(o+="<li class='vakata-context-separator'><a href='#' "+(e.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>",a=!0)}),o=o.replace(/<li class\='vakata-context-separator'\><\/li\>$/,""),r&&(o+="</ul>"),r||(n.html=o,e.vakata.context._trigger("parse")),o.length>10&&o},_show_submenu:function(n){if(n=e(n),n.length&&n.children("ul").length){var r=n.children("ul"),i=n.offset().left,o=i+n.outerWidth(),a=n.offset().top,s=r.width(),l=r.height(),c=e(window).width()+e(window).scrollLeft(),u=e(window).height()+e(window).scrollTop();t?n[o-(s+10+n.outerWidth())<0?"addClass":"removeClass"]("vakata-context-left"):n[o+s>c&&i>c-o?"addClass":"removeClass"]("vakata-context-right"),a+l+10>u&&r.css("bottom","-1px"),n.hasClass("vakata-context-right")?i<s&&r.css("margin-right",i-s):c-o<s&&r.css("margin-left",c-o-s),r.show()}},show:function(r,i,o){var a,s,l,c,u,d,f,h;switch(n.element&&n.element.length&&n.element.width(""),!0){case!i&&!r:return!1;case!!i&&!!r:n.reference=r,n.position_x=i.x,n.position_y=i.y;break;case!i&&!!r:n.reference=r,a=r.offset(),n.position_x=a.left+r.outerHeight(),n.position_y=a.top;break;case!!i&&!r:n.position_x=i.x,n.position_y=i.y}r&&!o&&e(r).data("vakata_contextmenu")&&(o=e(r).data("vakata_contextmenu")),e.vakata.context._parse(o)&&n.element.html(n.html),n.items.length&&(n.element.appendTo("body"),s=n.element,l=n.position_x,c=n.position_y,u=s.width(),d=s.height(),f=e(window).width()+e(window).scrollLeft(),h=e(window).height()+e(window).scrollTop(),t&&(l-=s.outerWidth()-e(r).outerWidth())<e(window).scrollLeft()+20&&(l=e(window).scrollLeft()+20),l+u+20>f&&(l=f-(u+20)),c+d+20>h&&(c=h-(d+20)),n.element.css({left:l,top:c}).show().find("a").first().focus().parent().addClass("vakata-context-hover"),n.is_visible=!0,e.vakata.context._trigger("show"))},hide:function(){n.is_visible&&(n.element.hide().find("ul").hide().end().find(":focus").blur().end().detach(),n.is_visible=!1,e.vakata.context._trigger("hide"))}},e(function(){t="rtl"===e("body").css("direction");var r=!1;n.element=e("<ul class='vakata-context'></ul>"),n.element.on("mouseenter","li",function(t){t.stopImmediatePropagation(),e.contains(this,t.relatedTarget)||(r&&clearTimeout(r),n.element.find(".vakata-context-hover").removeClass("vakata-context-hover").end(),e(this).siblings().find("ul").hide().end().end().parentsUntil(".vakata-context","li").addBack().addClass("vakata-context-hover"),e.vakata.context._show_submenu(this))}).on("mouseleave","li",function(t){e.contains(this,t.relatedTarget)||e(this).find(".vakata-context-hover").addBack().removeClass("vakata-context-hover")}).on("mouseleave",function(t){e(this).find(".vakata-context-hover").removeClass("vakata-context-hover"),e.vakata.context.settings.hide_onmouseleave&&(r=setTimeout(function(t){return function(){e.vakata.context.hide()}}(),e.vakata.context.settings.hide_onmouseleave))}).on("click","a",function(t){t.preventDefault(),e(this).blur().parent().hasClass("vakata-context-disabled")||!1===e.vakata.context._execute(e(this).attr("rel"))||e.vakata.context.hide()}).on("keydown","a",function(t){var r=null;switch(t.which){case 13:case 32:t.type="click",t.preventDefault(),e(t.currentTarget).trigger(t);break;case 37:n.is_visible&&(n.element.find(".vakata-context-hover").last().closest("li").first().find("ul").hide().find(".vakata-context-hover").removeClass("vakata-context-hover").end().end().children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 38:n.is_visible&&(r=n.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").prevAll("li:not(.vakata-context-separator)").first(),r.length||(r=n.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").last()),r.addClass("vakata-context-hover").children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 39:n.is_visible&&(n.element.find(".vakata-context-hover").last().children("ul").show().children("li:not(.vakata-context-separator)").removeClass("vakata-context-hover").first().addClass("vakata-context-hover").children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 40:n.is_visible&&(r=n.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").nextAll("li:not(.vakata-context-separator)").first(),r.length||(r=n.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").first()),r.addClass("vakata-context-hover").children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 27:e.vakata.context.hide(),t.preventDefault()}}).on("keydown",function(e){e.preventDefault();var t=n.element.find(".vakata-contextmenu-shortcut-"+e.which).parent();t.parent().not(".vakata-context-disabled")&&t.click()}),e(l).on("mousedown.vakata.jstree",function(t){n.is_visible&&n.element[0]!==t.target&&!e.contains(n.element[0],t.target)&&e.vakata.context.hide()}).on("context_show.vakata.jstree",function(e,r){n.element.find("li:has(ul)").children("a").addClass("vakata-context-parent"),t&&n.element.addClass("vakata-context-rtl").css("direction","rtl"),n.element.find("ul").hide().end()})})}(e),e.jstree.defaults.dnd={copy:!0,open_timeout:500,is_draggable:!0,check_while_dragging:!0,always_copy:!1,inside_pos:0,drag_selection:!0,touch:!0,large_drop_target:!1,large_drag_target:!1,use_html5:!1};var u,d;e.jstree.plugins.dnd=function(t,n){this.init=function(e,t){n.init.call(this,e,t),this.settings.dnd.use_html5=this.settings.dnd.use_html5&&"draggable"in l.createElement("span")},this.bind=function(){n.bind.call(this),this.element.on(this.settings.dnd.use_html5?"dragstart.jstree":"mousedown.jstree touchstart.jstree",this.settings.dnd.large_drag_target?".jstree-node":".jstree-anchor",e.proxy(function(t){if(this.settings.dnd.large_drag_target&&e(t.target).closest(".jstree-node")[0]!==t.currentTarget)return!0;if("touchstart"===t.type&&(!this.settings.dnd.touch||"selected"===this.settings.dnd.touch&&!e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").hasClass("jstree-clicked")))return!0;var n=this.get_node(t.target),r=this.is_selected(n)&&this.settings.dnd.drag_selection?this.get_top_selected().length:1,i=r>1?r+" "+this.get_string("nodes"):this.get_text(t.currentTarget);if(this.settings.core.force_text&&(i=e.vakata.html.escape(i)),n&&n.id&&n.id!==e.jstree.root&&(1===t.which||"touchstart"===t.type||"dragstart"===t.type)&&(!0===this.settings.dnd.is_draggable||e.isFunction(this.settings.dnd.is_draggable)&&this.settings.dnd.is_draggable.call(this,r>1?this.get_top_selected(!0):[n],t))){if(u={jstree:!0,origin:this,obj:this.get_node(n,!0),nodes:r>1?this.get_top_selected():[n.id]},d=t.currentTarget,!this.settings.dnd.use_html5)return this.element.trigger("mousedown.jstree"),e.vakata.dnd.start(t,u,'<div id="jstree-dnd" class="jstree-'+this.get_theme()+" jstree-"+this.get_theme()+"-"+this.get_theme_variant()+" "+(this.settings.core.themes.responsive?" jstree-dnd-responsive":"")+'"><i class="jstree-icon jstree-er"></i>'+i+'<ins class="jstree-copy" style="display:none;">+</ins></div>');e.vakata.dnd._trigger("start",t,{helper:e(),element:d,data:u})}},this)),this.settings.dnd.use_html5&&this.element.on("dragover.jstree",function(t){return t.preventDefault(),e.vakata.dnd._trigger("move",t,{helper:e(),element:d,data:u}),!1}).on("drop.jstree",e.proxy(function(t){return t.preventDefault(),e.vakata.dnd._trigger("stop",t,{helper:e(),element:d,data:u}),!1},this))},this.redraw_node=function(e,t,r,i){if((e=n.redraw_node.apply(this,arguments))&&this.settings.dnd.use_html5)if(this.settings.dnd.large_drag_target)e.setAttribute("draggable",!0);else{var o,a,s=null;for(o=0,a=e.childNodes.length;o<a;o++)if(e.childNodes[o]&&e.childNodes[o].className&&-1!==e.childNodes[o].className.indexOf("jstree-anchor")){s=e.childNodes[o];break}s&&s.setAttribute("draggable",!0)}return e}},e(function(){var n=!1,r=!1,i=!1,o=!1,a=e('<div id="jstree-marker">&#160;</div>').hide();e(l).on("dnd_start.vakata.jstree",function(e,t){n=!1,i=!1,t&&t.data&&t.data.jstree&&a.appendTo("body")}).on("dnd_move.vakata.jstree",function(s,l){var c=l.event.target!==i.target;if(o&&(l.event&&"dragover"===l.event.type&&!c||clearTimeout(o)),l&&l.data&&l.data.jstree&&(!l.event.target.id||"jstree-marker"!==l.event.target.id)){i=l.event;var u,d,f,h,p,g,m,v,b,y,w,_,x,C,k,T,S=e.jstree.reference(l.event.target),D=!1,E=!1,N=!1;if(S&&S._data&&S._data.dnd)if(a.attr("class","jstree-"+S.get_theme()+(S.settings.core.themes.responsive?" jstree-dnd-responsive":"")),k=l.data.origin&&(l.data.origin.settings.dnd.always_copy||l.data.origin.settings.dnd.copy&&(l.event.metaKey||l.event.ctrlKey)),l.helper.children().attr("class","jstree-"+S.get_theme()+" jstree-"+S.get_theme()+"-"+S.get_theme_variant()+" "+(S.settings.core.themes.responsive?" jstree-dnd-responsive":"")).find(".jstree-copy").first()[k?"show":"hide"](),l.event.target!==S.element[0]&&l.event.target!==S.get_container_ul()[0]||0!==S.get_container_ul().children().length){if((D=S.settings.dnd.large_drop_target?e(l.event.target).closest(".jstree-node").children(".jstree-anchor"):e(l.event.target).closest(".jstree-anchor"))&&D.length&&D.parent().is(".jstree-closed, .jstree-open, .jstree-leaf")&&(E=D.offset(),N=(l.event.pageY!==t?l.event.pageY:l.event.originalEvent.pageY)-E.top,f=D.outerHeight(),g=N<f/3?["b","i","a"]:N>f-f/3?["a","i","b"]:N>f/2?["i","a","b"]:["i","b","a"],e.each(g,function(t,i){switch(i){case"b":u=E.left-6,d=E.top,h=S.get_parent(D),p=D.parent().index();break;case"i":x=S.settings.dnd.inside_pos,C=S.get_node(D.parent()),u=E.left-2,d=E.top+f/2+1,h=C.id,p="first"===x?0:"last"===x?C.children.length:Math.min(x,C.children.length);break;case"a":u=E.left-6,d=E.top+f,h=S.get_parent(D),p=D.parent().index()+1}for(m=!0,v=0,
b=l.data.nodes.length;v<b;v++)if(y=l.data.origin&&(l.data.origin.settings.dnd.always_copy||l.data.origin.settings.dnd.copy&&(l.event.metaKey||l.event.ctrlKey))?"copy_node":"move_node",w=p,"move_node"===y&&"a"===i&&l.data.origin&&l.data.origin===S&&h===S.get_parent(l.data.nodes[v])&&(_=S.get_node(h),w>e.inArray(l.data.nodes[v],_.children)&&(w-=1)),!(m=m&&(S&&S.settings&&S.settings.dnd&&!1===S.settings.dnd.check_while_dragging||S.check(y,l.data.origin&&l.data.origin!==S?l.data.origin.get_node(l.data.nodes[v]):l.data.nodes[v],h,w,{dnd:!0,ref:S.get_node(D.parent()),pos:i,origin:l.data.origin,is_multi:l.data.origin&&l.data.origin!==S,is_foreign:!l.data.origin})))){S&&S.last_error&&(r=S.last_error());break}if("i"===i&&D.parent().is(".jstree-closed")&&S.settings.dnd.open_timeout&&(l.event&&"dragover"===l.event.type&&!c||(o&&clearTimeout(o),o=setTimeout(function(e,t){return function(){e.open_node(t)}}(S,D),S.settings.dnd.open_timeout))),m)return T=S.get_node(h,!0),T.hasClass(".jstree-dnd-parent")||(e(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),T.addClass("jstree-dnd-parent")),n={ins:S,par:h,pos:"i"!==i||"last"!==x||0!==p||S.is_loaded(C)?p:"last"},a.css({left:u+"px",top:d+"px"}).show(),l.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok"),l.event.originalEvent&&l.event.originalEvent.dataTransfer&&(l.event.originalEvent.dataTransfer.dropEffect=k?"copy":"move"),r={},g=!0,!1}),!0===g))return}else{for(m=!0,v=0,b=l.data.nodes.length;v<b&&(m=m&&S.check(l.data.origin&&(l.data.origin.settings.dnd.always_copy||l.data.origin.settings.dnd.copy&&(l.event.metaKey||l.event.ctrlKey))?"copy_node":"move_node",l.data.origin&&l.data.origin!==S?l.data.origin.get_node(l.data.nodes[v]):l.data.nodes[v],e.jstree.root,"last",{dnd:!0,ref:S.get_node(e.jstree.root),pos:"i",origin:l.data.origin,is_multi:l.data.origin&&l.data.origin!==S,is_foreign:!l.data.origin}));v++);if(m)return n={ins:S,par:e.jstree.root,pos:"last"},a.hide(),l.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok"),void(l.event.originalEvent&&l.event.originalEvent.dataTransfer&&(l.event.originalEvent.dataTransfer.dropEffect=k?"copy":"move"))}e(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),n=!1,l.helper.find(".jstree-icon").removeClass("jstree-ok").addClass("jstree-er"),l.event.originalEvent&&l.event.originalEvent.dataTransfer&&(l.event.originalEvent.dataTransfer.dropEffect="none"),a.hide()}}).on("dnd_scroll.vakata.jstree",function(e,t){t&&t.data&&t.data.jstree&&(a.hide(),n=!1,i=!1,t.helper.find(".jstree-icon").first().removeClass("jstree-ok").addClass("jstree-er"))}).on("dnd_stop.vakata.jstree",function(t,s){if(e(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),o&&clearTimeout(o),s&&s.data&&s.data.jstree){a.hide().detach();var l,c,u=[];if(n){for(l=0,c=s.data.nodes.length;l<c;l++)u[l]=s.data.origin?s.data.origin.get_node(s.data.nodes[l]):s.data.nodes[l];n.ins[s.data.origin&&(s.data.origin.settings.dnd.always_copy||s.data.origin.settings.dnd.copy&&(s.event.metaKey||s.event.ctrlKey))?"copy_node":"move_node"](u,n.par,n.pos,!1,!1,!1,s.data.origin)}else l=e(s.event.target).closest(".jstree"),l.length&&r&&r.error&&"check"===r.error&&(l=l.jstree(!0))&&l.settings.core.error.call(this,r);i=!1,n=!1}}).on("keyup.jstree keydown.jstree",function(t,s){(s=e.vakata.dnd._get())&&s.data&&s.data.jstree&&("keyup"===t.type&&27===t.which?(o&&clearTimeout(o),n=!1,r=!1,i=!1,o=!1,a.hide().detach(),e.vakata.dnd._clean()):(s.helper.find(".jstree-copy").first()[s.data.origin&&(s.data.origin.settings.dnd.always_copy||s.data.origin.settings.dnd.copy&&(t.metaKey||t.ctrlKey))?"show":"hide"](),i&&(i.metaKey=t.metaKey,i.ctrlKey=t.ctrlKey,e.vakata.dnd._trigger("move",i))))})}),function(e){e.vakata.html={div:e("<div />"),escape:function(t){return e.vakata.html.div.text(t).html()},strip:function(t){return e.vakata.html.div.empty().append(e.parseHTML(t)).text()}};var n={element:!1,target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1};e.vakata.dnd={settings:{scroll_speed:10,scroll_proximity:20,helper_left:5,helper_top:10,threshold:5,threshold_touch:10},_trigger:function(n,r,i){i===t&&(i=e.vakata.dnd._get()),i.event=r,e(l).triggerHandler("dnd_"+n+".vakata",i)},_get:function(){return{data:n.data,element:n.element,helper:n.helper}},_clean:function(){n.helper&&n.helper.remove(),n.scroll_i&&(clearInterval(n.scroll_i),n.scroll_i=!1),n={element:!1,target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1},e(l).off("mousemove.vakata.jstree touchmove.vakata.jstree",e.vakata.dnd.drag),e(l).off("mouseup.vakata.jstree touchend.vakata.jstree",e.vakata.dnd.stop)},_scroll:function(t){if(!n.scroll_e||!n.scroll_l&&!n.scroll_t)return n.scroll_i&&(clearInterval(n.scroll_i),n.scroll_i=!1),!1;if(!n.scroll_i)return n.scroll_i=setInterval(e.vakata.dnd._scroll,100),!1;if(!0===t)return!1;var r=n.scroll_e.scrollTop(),i=n.scroll_e.scrollLeft();n.scroll_e.scrollTop(r+n.scroll_t*e.vakata.dnd.settings.scroll_speed),n.scroll_e.scrollLeft(i+n.scroll_l*e.vakata.dnd.settings.scroll_speed),r===n.scroll_e.scrollTop()&&i===n.scroll_e.scrollLeft()||e.vakata.dnd._trigger("scroll",n.scroll_e)},start:function(t,r,i){"touchstart"===t.type&&t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0]&&(t.pageX=t.originalEvent.changedTouches[0].pageX,t.pageY=t.originalEvent.changedTouches[0].pageY,t.target=l.elementFromPoint(t.originalEvent.changedTouches[0].pageX-window.pageXOffset,t.originalEvent.changedTouches[0].pageY-window.pageYOffset)),n.is_drag&&e.vakata.dnd.stop({});try{t.currentTarget.unselectable="on",t.currentTarget.onselectstart=function(){return!1},t.currentTarget.style&&(t.currentTarget.style.touchAction="none",t.currentTarget.style.msTouchAction="none",t.currentTarget.style.MozUserSelect="none")}catch(e){}return n.init_x=t.pageX,n.init_y=t.pageY,n.data=r,n.is_down=!0,n.element=t.currentTarget,n.target=t.target,n.is_touch="touchstart"===t.type,!1!==i&&(n.helper=e("<div id='vakata-dnd'></div>").html(i).css({display:"block",margin:"0",padding:"0",position:"absolute",top:"-2000px",lineHeight:"16px",zIndex:"10000"})),e(l).on("mousemove.vakata.jstree touchmove.vakata.jstree",e.vakata.dnd.drag),e(l).on("mouseup.vakata.jstree touchend.vakata.jstree",e.vakata.dnd.stop),!1},drag:function(t){if("touchmove"===t.type&&t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0]&&(t.pageX=t.originalEvent.changedTouches[0].pageX,t.pageY=t.originalEvent.changedTouches[0].pageY,t.target=l.elementFromPoint(t.originalEvent.changedTouches[0].pageX-window.pageXOffset,t.originalEvent.changedTouches[0].pageY-window.pageYOffset)),n.is_down){if(!n.is_drag){if(!(Math.abs(t.pageX-n.init_x)>(n.is_touch?e.vakata.dnd.settings.threshold_touch:e.vakata.dnd.settings.threshold)||Math.abs(t.pageY-n.init_y)>(n.is_touch?e.vakata.dnd.settings.threshold_touch:e.vakata.dnd.settings.threshold)))return;n.helper&&(n.helper.appendTo("body"),n.helper_w=n.helper.outerWidth()),n.is_drag=!0,e(n.target).one("click.vakata",!1),e.vakata.dnd._trigger("start",t)}var r=!1,i=!1,o=!1,a=!1,s=!1,c=!1,u=!1,d=!1,f=!1,h=!1;return n.scroll_t=0,n.scroll_l=0,n.scroll_e=!1,e(e(t.target).parentsUntil("body").addBack().get().reverse()).filter(function(){return/^auto|scroll$/.test(e(this).css("overflow"))&&(this.scrollHeight>this.offsetHeight||this.scrollWidth>this.offsetWidth)}).each(function(){var r=e(this),i=r.offset();if(this.scrollHeight>this.offsetHeight&&(i.top+r.height()-t.pageY<e.vakata.dnd.settings.scroll_proximity&&(n.scroll_t=1),t.pageY-i.top<e.vakata.dnd.settings.scroll_proximity&&(n.scroll_t=-1)),this.scrollWidth>this.offsetWidth&&(i.left+r.width()-t.pageX<e.vakata.dnd.settings.scroll_proximity&&(n.scroll_l=1),t.pageX-i.left<e.vakata.dnd.settings.scroll_proximity&&(n.scroll_l=-1)),n.scroll_t||n.scroll_l)return n.scroll_e=e(this),!1}),n.scroll_e||(r=e(l),i=e(window),o=r.height(),a=i.height(),s=r.width(),c=i.width(),u=r.scrollTop(),d=r.scrollLeft(),o>a&&t.pageY-u<e.vakata.dnd.settings.scroll_proximity&&(n.scroll_t=-1),o>a&&a-(t.pageY-u)<e.vakata.dnd.settings.scroll_proximity&&(n.scroll_t=1),s>c&&t.pageX-d<e.vakata.dnd.settings.scroll_proximity&&(n.scroll_l=-1),s>c&&c-(t.pageX-d)<e.vakata.dnd.settings.scroll_proximity&&(n.scroll_l=1),(n.scroll_t||n.scroll_l)&&(n.scroll_e=r)),n.scroll_e&&e.vakata.dnd._scroll(!0),n.helper&&(f=parseInt(t.pageY+e.vakata.dnd.settings.helper_top,10),h=parseInt(t.pageX+e.vakata.dnd.settings.helper_left,10),o&&f+25>o&&(f=o-50),s&&h+n.helper_w>s&&(h=s-(n.helper_w+2)),n.helper.css({left:h+"px",top:f+"px"})),e.vakata.dnd._trigger("move",t),!1}},stop:function(t){if("touchend"===t.type&&t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0]&&(t.pageX=t.originalEvent.changedTouches[0].pageX,t.pageY=t.originalEvent.changedTouches[0].pageY,t.target=l.elementFromPoint(t.originalEvent.changedTouches[0].pageX-window.pageXOffset,t.originalEvent.changedTouches[0].pageY-window.pageYOffset)),n.is_drag)t.target!==n.target&&e(n.target).off("click.vakata"),e.vakata.dnd._trigger("stop",t);else if("touchend"===t.type&&t.target===n.target){var r=setTimeout(function(){e(t.target).click()},100);e(t.target).one("click",function(){r&&clearTimeout(r)})}return e.vakata.dnd._clean(),!1}}}(e),e.jstree.defaults.massload=null,e.jstree.plugins.massload=function(t,n){this.init=function(e,t){this._data.massload={},n.init.call(this,e,t)},this._load_nodes=function(t,r,i,o){var a,s,l,c=this.settings.massload,u=(JSON.stringify(t),[]),d=this._model.data;if(!i){for(a=0,s=t.length;a<s;a++)d[t[a]]&&(d[t[a]].state.loaded||d[t[a]].state.failed)&&!o||(u.push(t[a]),(l=this.get_node(t[a],!0))&&l.length&&l.addClass("jstree-loading").attr("aria-busy",!0));if(this._data.massload={},u.length){if(e.isFunction(c))return c.call(this,u,e.proxy(function(e){var a,s;if(e)for(a in e)e.hasOwnProperty(a)&&(this._data.massload[a]=e[a]);for(a=0,s=t.length;a<s;a++)(l=this.get_node(t[a],!0))&&l.length&&l.removeClass("jstree-loading").attr("aria-busy",!1);n._load_nodes.call(this,t,r,i,o)},this));if("object"==typeof c&&c&&c.url)return c=e.extend(!0,{},c),e.isFunction(c.url)&&(c.url=c.url.call(this,u)),e.isFunction(c.data)&&(c.data=c.data.call(this,u)),e.ajax(c).done(e.proxy(function(e,a,s){var c,u;if(e)for(c in e)e.hasOwnProperty(c)&&(this._data.massload[c]=e[c]);for(c=0,u=t.length;c<u;c++)(l=this.get_node(t[c],!0))&&l.length&&l.removeClass("jstree-loading").attr("aria-busy",!1);n._load_nodes.call(this,t,r,i,o)},this)).fail(e.proxy(function(e){n._load_nodes.call(this,t,r,i,o)},this))}}return n._load_nodes.call(this,t,r,i,o)},this._load_node=function(t,r){var i,o=this._data.massload[t.id],a=null;return o?(a=this["string"==typeof o?"_append_html_data":"_append_json_data"](t,"string"==typeof o?e(e.parseHTML(o)).filter(function(){return 3!==this.nodeType}):o,function(e){r.call(this,e)}),i=this.get_node(t.id,!0),i&&i.length&&i.removeClass("jstree-loading").attr("aria-busy",!1),delete this._data.massload[t.id],a):n._load_node.call(this,t,r)}},e.jstree.defaults.search={ajax:!1,fuzzy:!1,case_sensitive:!1,show_only_matches:!1,show_only_matches_children:!1,close_opened_onclear:!0,search_leaves_only:!1,search_callback:!1},e.jstree.plugins.search=function(n,r){this.bind=function(){r.bind.call(this),this._data.search.str="",this._data.search.dom=e(),this._data.search.res=[],this._data.search.opn=[],this._data.search.som=!1,this._data.search.smc=!1,this._data.search.hdn=[],this.element.on("search.jstree",e.proxy(function(t,n){if(this._data.search.som&&n.res.length){var r,i,o,a,s=this._model.data,l=[];for(r=0,i=n.res.length;r<i;r++)if(s[n.res[r]]&&!s[n.res[r]].state.hidden&&(l.push(n.res[r]),l=l.concat(s[n.res[r]].parents),this._data.search.smc))for(o=0,a=s[n.res[r]].children_d.length;o<a;o++)s[s[n.res[r]].children_d[o]]&&!s[s[n.res[r]].children_d[o]].state.hidden&&l.push(s[n.res[r]].children_d[o]);l=e.vakata.array_remove_item(e.vakata.array_unique(l),e.jstree.root),this._data.search.hdn=this.hide_all(!0),this.show_node(l,!0),this.redraw(!0)}},this)).on("clear_search.jstree",e.proxy(function(e,t){this._data.search.som&&t.res.length&&(this.show_node(this._data.search.hdn,!0),this.redraw(!0))},this))},this.search=function(n,r,i,o,a,s){if(!1===n||""===e.trim(n.toString()))return this.clear_search();o=this.get_node(o),o=o&&o.id?o.id:null,n=n.toString();var l,c,u=this.settings.search,d=!!u.ajax&&u.ajax,f=this._model.data,h=null,p=[],g=[];if(this._data.search.res.length&&!a&&this.clear_search(),i===t&&(i=u.show_only_matches),s===t&&(s=u.show_only_matches_children),!r&&!1!==d)return e.isFunction(d)?d.call(this,n,e.proxy(function(t){t&&t.d&&(t=t.d),this._load_nodes(e.isArray(t)?e.vakata.array_unique(t):[],function(){this.search(n,!0,i,o,a,s)})},this),o):(d=e.extend({},d),d.data||(d.data={}),d.data.str=n,o&&(d.data.inside=o),this._data.search.lastRequest&&this._data.search.lastRequest.abort(),this._data.search.lastRequest=e.ajax(d).fail(e.proxy(function(){this._data.core.last_error={error:"ajax",plugin:"search",id:"search_01",reason:"Could not load search parents",data:JSON.stringify(d)},this.settings.core.error.call(this,this._data.core.last_error)},this)).done(e.proxy(function(t){t&&t.d&&(t=t.d),this._load_nodes(e.isArray(t)?e.vakata.array_unique(t):[],function(){this.search(n,!0,i,o,a,s)})},this)),this._data.search.lastRequest);if(a||(this._data.search.str=n,this._data.search.dom=e(),this._data.search.res=[],this._data.search.opn=[],this._data.search.som=i,this._data.search.smc=s),h=new e.vakata.search(n,!0,{caseSensitive:u.case_sensitive,fuzzy:u.fuzzy}),e.each(f[o||e.jstree.root].children_d,function(e,t){var r=f[t];r.text&&!r.state.hidden&&(!u.search_leaves_only||r.state.loaded&&0===r.children.length)&&(u.search_callback&&u.search_callback.call(this,n,r)||!u.search_callback&&h.search(r.text).isMatch)&&(p.push(t),g=g.concat(r.parents))}),p.length){for(g=e.vakata.array_unique(g),l=0,c=g.length;l<c;l++)g[l]!==e.jstree.root&&f[g[l]]&&!0===this.open_node(g[l],null,0)&&this._data.search.opn.push(g[l]);a?(this._data.search.dom=this._data.search.dom.add(e(this.element[0].querySelectorAll("#"+e.map(p,function(t){return-1!=="0123456789".indexOf(t[0])?"\\3"+t[0]+" "+t.substr(1).replace(e.jstree.idregex,"\\$&"):t.replace(e.jstree.idregex,"\\$&")}).join(", #")))),this._data.search.res=e.vakata.array_unique(this._data.search.res.concat(p))):(this._data.search.dom=e(this.element[0].querySelectorAll("#"+e.map(p,function(t){return-1!=="0123456789".indexOf(t[0])?"\\3"+t[0]+" "+t.substr(1).replace(e.jstree.idregex,"\\$&"):t.replace(e.jstree.idregex,"\\$&")}).join(", #"))),this._data.search.res=p),this._data.search.dom.children(".jstree-anchor").addClass("jstree-search")}this.trigger("search",{nodes:this._data.search.dom,str:n,res:this._data.search.res,show_only_matches:i})},this.clear_search=function(){this.settings.search.close_opened_onclear&&this.close_node(this._data.search.opn,0),this.trigger("clear_search",{nodes:this._data.search.dom,str:this._data.search.str,res:this._data.search.res}),this._data.search.res.length&&(this._data.search.dom=e(this.element[0].querySelectorAll("#"+e.map(this._data.search.res,function(t){return-1!=="0123456789".indexOf(t[0])?"\\3"+t[0]+" "+t.substr(1).replace(e.jstree.idregex,"\\$&"):t.replace(e.jstree.idregex,"\\$&")}).join(", #"))),this._data.search.dom.children(".jstree-anchor").removeClass("jstree-search")),this._data.search.str="",this._data.search.res=[],this._data.search.opn=[],this._data.search.dom=e()},this.redraw_node=function(t,n,i,o){if((t=r.redraw_node.apply(this,arguments))&&-1!==e.inArray(t.id,this._data.search.res)){var a,s,l=null;for(a=0,s=t.childNodes.length;a<s;a++)if(t.childNodes[a]&&t.childNodes[a].className&&-1!==t.childNodes[a].className.indexOf("jstree-anchor")){l=t.childNodes[a];break}l&&(l.className+=" jstree-search")}return t}},function(e){e.vakata.search=function(t,n,r){r=r||{},r=e.extend({},e.vakata.search.defaults,r),!1!==r.fuzzy&&(r.fuzzy=!0),t=r.caseSensitive?t:t.toLowerCase();var i,o,a,s,l=r.location,c=r.distance,u=r.threshold,d=t.length;return d>32&&(r.fuzzy=!1),r.fuzzy&&(i=1<<d-1,o=function(){var e={},n=0;for(n=0;n<d;n++)e[t.charAt(n)]=0;for(n=0;n<d;n++)e[t.charAt(n)]|=1<<d-n-1;return e}(),a=function(e,t){var n=e/d,r=Math.abs(l-t);return c?n+r/c:r?1:n}),s=function(e){if(e=r.caseSensitive?e:e.toLowerCase(),t===e||-1!==e.indexOf(t))return{isMatch:!0,score:0};if(!r.fuzzy)return{isMatch:!1,score:1};var n,s,c,f,h,p,g,m,v,b=e.length,y=u,w=e.indexOf(t,l),_=d+b,x=1,C=[];for(-1!==w&&(y=Math.min(a(0,w),y),-1!==(w=e.lastIndexOf(t,l+d))&&(y=Math.min(a(0,w),y))),w=-1,n=0;n<d;n++){for(c=0,f=_;c<f;)a(n,l+f)<=y?c=f:_=f,f=Math.floor((_-c)/2+c);for(_=f,p=Math.max(1,l-f+1),g=Math.min(l+f,b)+d,m=new Array(g+2),m[g+1]=(1<<n)-1,s=g;s>=p;s--)if(v=o[e.charAt(s-1)],m[s]=0===n?(m[s+1]<<1|1)&v:(m[s+1]<<1|1)&v|(h[s+1]|h[s])<<1|1|h[s+1],m[s]&i&&(x=a(n,s-1))<=y){if(y=x,w=s-1,C.push(w),!(w>l))break;p=Math.max(1,2*l-w)}if(a(n+1,l)>y)break;h=m}return{isMatch:w>=0,score:x}},!0===n?{search:s}:s(n)},e.vakata.search.defaults={location:0,distance:100,threshold:.6,fuzzy:!1,caseSensitive:!1}}(e),e.jstree.defaults.sort=function(e,t){return this.get_text(e)>this.get_text(t)?1:-1},e.jstree.plugins.sort=function(t,n){this.bind=function(){n.bind.call(this),this.element.on("model.jstree",e.proxy(function(e,t){this.sort(t.parent,!0)},this)).on("rename_node.jstree create_node.jstree",e.proxy(function(e,t){this.sort(t.parent||t.node.parent,!1),this.redraw_node(t.parent||t.node.parent,!0)},this)).on("move_node.jstree copy_node.jstree",e.proxy(function(e,t){this.sort(t.parent,!1),this.redraw_node(t.parent,!0)},this))},this.sort=function(t,n){var r,i;if((t=this.get_node(t))&&t.children&&t.children.length&&(t.children.sort(e.proxy(this.settings.sort,this)),n))for(r=0,i=t.children_d.length;r<i;r++)this.sort(t.children_d[r],!1)}};var f=!1;e.jstree.defaults.state={key:"jstree",events:"changed.jstree open_node.jstree close_node.jstree check_node.jstree uncheck_node.jstree",ttl:!1,filter:!1,preserve_loaded:!1},e.jstree.plugins.state=function(t,n){this.bind=function(){n.bind.call(this);var t=e.proxy(function(){this.element.on(this.settings.state.events,e.proxy(function(){f&&clearTimeout(f),f=setTimeout(e.proxy(function(){this.save_state()},this),100)},this)),this.trigger("state_ready")},this);this.element.on("ready.jstree",e.proxy(function(e,n){this.element.one("restore_state.jstree",t),this.restore_state()||t()},this))},this.save_state=function(){var t=this.get_state();this.settings.state.preserve_loaded||delete t.core.loaded;var n={state:t,ttl:this.settings.state.ttl,sec:+new Date};e.vakata.storage.set(this.settings.state.key,JSON.stringify(n))},this.restore_state=function(){var t=e.vakata.storage.get(this.settings.state.key);if(t)try{t=JSON.parse(t)}catch(e){return!1}return!(t&&t.ttl&&t.sec&&+new Date-t.sec>t.ttl)&&(t&&t.state&&(t=t.state),t&&e.isFunction(this.settings.state.filter)&&(t=this.settings.state.filter.call(this,t)),!!t&&(this.settings.state.preserve_loaded||delete t.core.loaded,this.element.one("set_state.jstree",function(n,r){r.instance.trigger("restore_state",{state:e.extend(!0,{},t)})}),this.set_state(t),!0))},this.clear_state=function(){return e.vakata.storage.del(this.settings.state.key)}},function(e,t){e.vakata.storage={set:function(e,t){return window.localStorage.setItem(e,t)},get:function(e){return window.localStorage.getItem(e)},del:function(e){return window.localStorage.removeItem(e)}}}(e),e.jstree.defaults.types={default:{}},e.jstree.defaults.types[e.jstree.root]={},e.jstree.plugins.types=function(n,r){this.init=function(n,i){var o,a;if(i&&i.types&&i.types.default)for(o in i.types)if("default"!==o&&o!==e.jstree.root&&i.types.hasOwnProperty(o))for(a in i.types.default)i.types.default.hasOwnProperty(a)&&i.types[o][a]===t&&(i.types[o][a]=i.types.default[a]);r.init.call(this,n,i),this._model.data[e.jstree.root].type=e.jstree.root},this.refresh=function(t,n){r.refresh.call(this,t,n),this._model.data[e.jstree.root].type=e.jstree.root},this.bind=function(){this.element.on("model.jstree",e.proxy(function(n,r){var i,o,a,s=this._model.data,l=r.nodes,c=this.settings.types,u="default";for(i=0,o=l.length;i<o;i++){if(u="default",s[l[i]].original&&s[l[i]].original.type&&c[s[l[i]].original.type]&&(u=s[l[i]].original.type),s[l[i]].data&&s[l[i]].data.jstree&&s[l[i]].data.jstree.type&&c[s[l[i]].data.jstree.type]&&(u=s[l[i]].data.jstree.type),s[l[i]].type=u,!0===s[l[i]].icon&&c[u].icon!==t&&(s[l[i]].icon=c[u].icon),c[u].li_attr!==t&&"object"==typeof c[u].li_attr)for(a in c[u].li_attr)if(c[u].li_attr.hasOwnProperty(a)){if("id"===a)continue;s[l[i]].li_attr[a]===t?s[l[i]].li_attr[a]=c[u].li_attr[a]:"class"===a&&(s[l[i]].li_attr.class=c[u].li_attr.class+" "+s[l[i]].li_attr.class)}if(c[u].a_attr!==t&&"object"==typeof c[u].a_attr)for(a in c[u].a_attr)if(c[u].a_attr.hasOwnProperty(a)){if("id"===a)continue;s[l[i]].a_attr[a]===t?s[l[i]].a_attr[a]=c[u].a_attr[a]:"href"===a&&"#"===s[l[i]].a_attr[a]?s[l[i]].a_attr.href=c[u].a_attr.href:"class"===a&&(s[l[i]].a_attr.class=c[u].a_attr.class+" "+s[l[i]].a_attr.class)}}s[e.jstree.root].type=e.jstree.root},this)),r.bind.call(this)},this.get_json=function(t,n,i){var o,a,s=this._model.data,l=n?e.extend(!0,{},n,{no_id:!1}):{},c=r.get_json.call(this,t,l,i);if(!1===c)return!1;if(e.isArray(c))for(o=0,a=c.length;o<a;o++)c[o].type=c[o].id&&s[c[o].id]&&s[c[o].id].type?s[c[o].id].type:"default",n&&n.no_id&&(delete c[o].id,c[o].li_attr&&c[o].li_attr.id&&delete c[o].li_attr.id,c[o].a_attr&&c[o].a_attr.id&&delete c[o].a_attr.id);else c.type=c.id&&s[c.id]&&s[c.id].type?s[c.id].type:"default",n&&n.no_id&&(c=this._delete_ids(c));return c},this._delete_ids=function(t){if(e.isArray(t)){for(var n=0,r=t.length;n<r;n++)t[n]=this._delete_ids(t[n]);return t}return delete t.id,t.li_attr&&t.li_attr.id&&delete t.li_attr.id,t.a_attr&&t.a_attr.id&&delete t.a_attr.id,t.children&&e.isArray(t.children)&&(t.children=this._delete_ids(t.children)),t},this.check=function(n,i,o,a,s){if(!1===r.check.call(this,n,i,o,a,s))return!1;i=i&&i.id?i:this.get_node(i),o=o&&o.id?o:this.get_node(o);var l,c,u,d,f=i&&i.id?s&&s.origin?s.origin:e.jstree.reference(i.id):null;switch(f=f&&f._model&&f._model.data?f._model.data:null,n){case"create_node":case"move_node":case"copy_node":if("move_node"!==n||-1===e.inArray(i.id,o.children)){if(l=this.get_rules(o),l.max_children!==t&&-1!==l.max_children&&l.max_children===o.children.length)return this._data.core.last_error={error:"check",plugin:"types",id:"types_01",reason:"max_children prevents function: "+n,data:JSON.stringify({chk:n,pos:a,obj:!(!i||!i.id)&&i.id,par:!(!o||!o.id)&&o.id})},!1;if(l.valid_children!==t&&-1!==l.valid_children&&-1===e.inArray(i.type||"default",l.valid_children))return this._data.core.last_error={error:"check",plugin:"types",id:"types_02",reason:"valid_children prevents function: "+n,data:JSON.stringify({chk:n,pos:a,obj:!(!i||!i.id)&&i.id,par:!(!o||!o.id)&&o.id})},!1;if(f&&i.children_d&&i.parents){for(c=0,u=0,d=i.children_d.length;u<d;u++)c=Math.max(c,f[i.children_d[u]].parents.length);c=c-i.parents.length+1}(c<=0||c===t)&&(c=1);do{if(l.max_depth!==t&&-1!==l.max_depth&&l.max_depth<c)return this._data.core.last_error={error:"check",plugin:"types",id:"types_03",reason:"max_depth prevents function: "+n,data:JSON.stringify({chk:n,pos:a,obj:!(!i||!i.id)&&i.id,par:!(!o||!o.id)&&o.id})},!1;o=this.get_node(o.parent),l=this.get_rules(o),c++}while(o)}}return!0},this.get_rules=function(e){if(!(e=this.get_node(e)))return!1;var n=this.get_type(e,!0);return n.max_depth===t&&(n.max_depth=-1),n.max_children===t&&(n.max_children=-1),n.valid_children===t&&(n.valid_children=-1),n},this.get_type=function(t,n){return!!(t=this.get_node(t))&&(n?e.extend({type:t.type},this.settings.types[t.type]):t.type)},this.set_type=function(n,r){var i,o,a,s,l,c,u,d,f=this._model.data;if(e.isArray(n)){for(n=n.slice(),o=0,a=n.length;o<a;o++)this.set_type(n[o],r);return!0}if(i=this.settings.types,n=this.get_node(n),!i[r]||!n)return!1;if(u=this.get_node(n,!0),u&&u.length&&(d=u.children(".jstree-anchor")),s=n.type,l=this.get_icon(n),n.type=r,(!0===l||!i[s]||i[s].icon!==t&&l===i[s].icon)&&this.set_icon(n,i[r].icon===t||i[r].icon),i[s]&&i[s].li_attr!==t&&"object"==typeof i[s].li_attr)for(c in i[s].li_attr)if(i[s].li_attr.hasOwnProperty(c)){if("id"===c)continue;"class"===c?(f[n.id].li_attr.class=(f[n.id].li_attr.class||"").replace(i[s].li_attr[c],""),u&&u.removeClass(i[s].li_attr[c])):f[n.id].li_attr[c]===i[s].li_attr[c]&&(f[n.id].li_attr[c]=null,u&&u.removeAttr(c))}if(i[s]&&i[s].a_attr!==t&&"object"==typeof i[s].a_attr)for(c in i[s].a_attr)if(i[s].a_attr.hasOwnProperty(c)){if("id"===c)continue;"class"===c?(f[n.id].a_attr.class=(f[n.id].a_attr.class||"").replace(i[s].a_attr[c],""),d&&d.removeClass(i[s].a_attr[c])):f[n.id].a_attr[c]===i[s].a_attr[c]&&("href"===c?(f[n.id].a_attr[c]="#",d&&d.attr("href","#")):(delete f[n.id].a_attr[c],d&&d.removeAttr(c)))}if(i[r].li_attr!==t&&"object"==typeof i[r].li_attr)for(c in i[r].li_attr)if(i[r].li_attr.hasOwnProperty(c)){if("id"===c)continue;f[n.id].li_attr[c]===t?(f[n.id].li_attr[c]=i[r].li_attr[c],u&&("class"===c?u.addClass(i[r].li_attr[c]):u.attr(c,i[r].li_attr[c]))):"class"===c&&(f[n.id].li_attr.class=i[r].li_attr[c]+" "+f[n.id].li_attr.class,u&&u.addClass(i[r].li_attr[c]))}if(i[r].a_attr!==t&&"object"==typeof i[r].a_attr)for(c in i[r].a_attr)if(i[r].a_attr.hasOwnProperty(c)){if("id"===c)continue;f[n.id].a_attr[c]===t?(f[n.id].a_attr[c]=i[r].a_attr[c],d&&("class"===c?d.addClass(i[r].a_attr[c]):d.attr(c,i[r].a_attr[c]))):"href"===c&&"#"===f[n.id].a_attr[c]?(f[n.id].a_attr.href=i[r].a_attr.href,d&&d.attr("href",i[r].a_attr.href)):"class"===c&&(f[n.id].a_attr.class=i[r].a_attr.class+" "+f[n.id].a_attr.class,d&&d.addClass(i[r].a_attr[c]))}return!0}},e.jstree.defaults.unique={case_sensitive:!1,trim_whitespace:!1,duplicate:function(e,t){return e+" ("+t+")"}},e.jstree.plugins.unique=function(n,r){this.check=function(t,n,i,o,a){if(!1===r.check.call(this,t,n,i,o,a))return!1;if(n=n&&n.id?n:this.get_node(n),!(i=i&&i.id?i:this.get_node(i))||!i.children)return!0;var s,l,c,u="rename_node"===t?o:n.text,d=[],f=this.settings.unique.case_sensitive,h=this.settings.unique.trim_whitespace,p=this._model.data;for(s=0,l=i.children.length;s<l;s++)c=p[i.children[s]].text,f||(c=c.toLowerCase()),h&&(c=c.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")),d.push(c);switch(f||(u=u.toLowerCase()),h&&(u=u.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")),t){case"delete_node":return!0;case"rename_node":return c=n.text||"",f||(c=c.toLowerCase()),h&&(c=c.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")),s=-1===e.inArray(u,d)||n.text&&c===u,s||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_01",reason:"Child with name "+u+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:o,obj:!(!n||!n.id)&&n.id,par:!(!i||!i.id)&&i.id})}),s;case"create_node":return s=-1===e.inArray(u,d),s||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_04",reason:"Child with name "+u+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:o,obj:!(!n||!n.id)&&n.id,par:!(!i||!i.id)&&i.id})}),s;case"copy_node":return s=-1===e.inArray(u,d),s||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_02",reason:"Child with name "+u+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:o,obj:!(!n||!n.id)&&n.id,par:!(!i||!i.id)&&i.id})}),s;case"move_node":return s=n.parent===i.id&&(!a||!a.is_multi)||-1===e.inArray(u,d),s||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_03",reason:"Child with name "+u+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:o,obj:!(!n||!n.id)&&n.id,par:!(!i||!i.id)&&i.id})}),s}return!0},this.create_node=function(n,i,o,a,s){if(!i||i.text===t){if(null===n&&(n=e.jstree.root),!(n=this.get_node(n)))return r.create_node.call(this,n,i,o,a,s);if(o=o===t?"last":o,!o.toString().match(/^(before|after)$/)&&!s&&!this.is_loaded(n))return r.create_node.call(this,n,i,o,a,s);i||(i={});var l,c,u,d,f,h,p=this._model.data,g=this.settings.unique.case_sensitive,m=this.settings.unique.trim_whitespace,v=this.settings.unique.duplicate;for(c=l=this.get_string("New node"),u=[],d=0,f=n.children.length;d<f;d++)h=p[n.children[d]].text,g||(h=h.toLowerCase()),m&&(h=h.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")),u.push(h);for(d=1,h=c,g||(h=h.toLowerCase()),m&&(h=h.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""));-1!==e.inArray(h,u);)c=v.call(this,l,++d).toString(),h=c,g||(h=h.toLowerCase()),m&&(h=h.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""));i.text=c}return r.create_node.call(this,n,i,o,a,s)}};var h=l.createElement("DIV");if(h.setAttribute("unselectable","on"),h.setAttribute("role","presentation"),h.className="jstree-wholerow",h.innerHTML="&#160;",e.jstree.plugins.wholerow=function(t,n){this.bind=function(){n.bind.call(this),this.element.on("ready.jstree set_state.jstree",e.proxy(function(){this.hide_dots()},this)).on("init.jstree loading.jstree ready.jstree",e.proxy(function(){this.get_container_ul().addClass("jstree-wholerow-ul")},this)).on("deselect_all.jstree",e.proxy(function(e,t){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked")},this)).on("changed.jstree",e.proxy(function(e,t){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked");var n,r,i=!1;for(n=0,r=t.selected.length;n<r;n++)(i=this.get_node(t.selected[n],!0))&&i.length&&i.children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("open_node.jstree",e.proxy(function(e,t){this.get_node(t.node,!0).find(".jstree-clicked").parent().children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("hover_node.jstree dehover_node.jstree",e.proxy(function(e,t){"hover_node"===e.type&&this.is_disabled(t.node)||this.get_node(t.node,!0).children(".jstree-wholerow")["hover_node"===e.type?"addClass":"removeClass"]("jstree-wholerow-hovered")},this)).on("contextmenu.jstree",".jstree-wholerow",e.proxy(function(t){if(this._data.contextmenu){t.preventDefault();var n=e.Event("contextmenu",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,pageX:t.pageX,pageY:t.pageY});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(n)}},this)).on("click.jstree",".jstree-wholerow",function(t){t.stopImmediatePropagation();var n=e.Event("click",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(n).focus()}).on("dblclick.jstree",".jstree-wholerow",function(t){t.stopImmediatePropagation();var n=e.Event("dblclick",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(n).focus()}).on("click.jstree",".jstree-leaf > .jstree-ocl",e.proxy(function(t){t.stopImmediatePropagation();var n=e.Event("click",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(n).focus()},this)).on("mouseover.jstree",".jstree-wholerow, .jstree-icon",e.proxy(function(e){return e.stopImmediatePropagation(),this.is_disabled(e.currentTarget)||this.hover_node(e.currentTarget),!1},this)).on("mouseleave.jstree",".jstree-node",e.proxy(function(e){this.dehover_node(e.currentTarget)},this))},this.teardown=function(){this.settings.wholerow&&this.element.find(".jstree-wholerow").remove(),n.teardown.call(this)},this.redraw_node=function(t,r,i,o){if(t=n.redraw_node.apply(this,arguments)){var a=h.cloneNode(!0);-1!==e.inArray(t.id,this._data.core.selected)&&(a.className+=" jstree-wholerow-clicked"),this._data.core.focused&&this._data.core.focused===t.id&&(a.className+=" jstree-wholerow-hovered"),t.insertBefore(a,t.childNodes[0])}return t}},
l.registerElement&&Object&&Object.create){var p=Object.create(HTMLElement.prototype);p.createdCallback=function(){var t,n={core:{},plugins:[]};for(t in e.jstree.plugins)e.jstree.plugins.hasOwnProperty(t)&&this.attributes[t]&&(n.plugins.push(t),this.getAttribute(t)&&JSON.parse(this.getAttribute(t))&&(n[t]=JSON.parse(this.getAttribute(t))));for(t in e.jstree.defaults.core)e.jstree.defaults.core.hasOwnProperty(t)&&this.attributes[t]&&(n.core[t]=JSON.parse(this.getAttribute(t))||this.getAttribute(t));e(this).jstree(n)};try{l.registerElement("vakata-jstree",{prototype:p})}catch(e){}}}}),function(e){void 0===e.fn.each2&&e.extend(e.fn,{each2:function(t){for(var n=e([0]),r=-1,i=this.length;++r<i&&(n.context=n[0]=this[r])&&!1!==t.call(n[0],r,n););return this}})}(jQuery),function(e,t){"use strict";function n(t){var n=e(document.createTextNode(""));t.before(n),n.before(t),n.remove()}function r(e){function t(e){return H[e]||e}return e.replace(/[^\u0000-\u007E]/g,t)}function i(e,t){for(var n=0,r=t.length;n<r;n+=1)if(a(e,t[n]))return n;return-1}function o(){var t=e(F);t.appendTo("body");var n={width:t.width()-t[0].clientWidth,height:t.height()-t[0].clientHeight};return t.remove(),n}function a(e,n){return e===n||e!==t&&n!==t&&(null!==e&&null!==n&&(e.constructor===String?e+""==n+"":n.constructor===String&&n+""==e+""))}function s(t,n){var r,i,o;if(null===t||t.length<1)return[];for(r=t.split(n),i=0,o=r.length;i<o;i+=1)r[i]=e.trim(r[i]);return r}function l(e){return e.outerWidth(!1)-e.width()}function c(n){var r="keyup-change-value";n.on("keydown",function(){e.data(n,r)===t&&e.data(n,r,n.val())}),n.on("keyup",function(){var i=e.data(n,r);i!==t&&n.val()!==i&&(e.removeData(n,r),n.trigger("keyup-change"))})}function u(n){n.on("mousemove",function(n){var r=L;r!==t&&r.x===n.pageX&&r.y===n.pageY||e(n.target).trigger("mousemove-filtered",n)})}function d(e,n,r){r=r||t;var i;return function(){var t=arguments;window.clearTimeout(i),i=window.setTimeout(function(){n.apply(r,t)},e)}}function f(e,t){var n=d(e,function(e){t.trigger("scroll-debounced",e)});t.on("scroll",function(e){i(e.target,t.get())>=0&&n(e)})}function h(e){e[0]!==document.activeElement&&window.setTimeout(function(){var t,n=e[0],r=e.val().length;e.focus(),(n.offsetWidth>0||n.offsetHeight>0)&&n===document.activeElement&&(n.setSelectionRange?n.setSelectionRange(r,r):n.createTextRange&&(t=n.createTextRange(),t.collapse(!1),t.select()))},0)}function p(t){t=e(t)[0];var n=0,r=0;if("selectionStart"in t)n=t.selectionStart,r=t.selectionEnd-n;else if("selection"in document){t.focus();var i=document.selection.createRange();r=document.selection.createRange().text.length,i.moveStart("character",-t.value.length),n=i.text.length-r}return{offset:n,length:r}}function g(e){e.preventDefault(),e.stopPropagation()}function m(e){e.preventDefault(),e.stopImmediatePropagation()}function v(t){if(!M){var n=t[0].currentStyle||window.getComputedStyle(t[0],null);M=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:n.fontSize,fontFamily:n.fontFamily,fontStyle:n.fontStyle,fontWeight:n.fontWeight,letterSpacing:n.letterSpacing,textTransform:n.textTransform,whiteSpace:"nowrap"}),M.attr("class","select2-sizer"),e("body").append(M)}return M.text(t.val()),M.width()}function b(t,n,r){var i,o,a=[];i=e.trim(t.attr("class")),i&&(i=""+i,e(i.split(/\s+/)).each2(function(){0===this.indexOf("select2-")&&a.push(this)})),i=e.trim(n.attr("class")),i&&(i=""+i,e(i.split(/\s+/)).each2(function(){0!==this.indexOf("select2-")&&(o=r(this))&&a.push(o)})),t.attr("class",a.join(" "))}function y(e,t,n,i){var o=r(e.toUpperCase()).indexOf(r(t.toUpperCase())),a=t.length;if(o<0)return void n.push(i(e));n.push(i(e.substring(0,o))),n.push("<span class='select2-match'>"),n.push(i(e.substring(o,o+a))),n.push("</span>"),n.push(i(e.substring(o+a,e.length)))}function w(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})}function _(n){var r,i=null,o=n.quietMillis||100,a=n.url,s=this;return function(l){window.clearTimeout(r),r=window.setTimeout(function(){var r=n.data,o=a,c=n.transport||e.fn.select2.ajaxDefaults.transport,u={type:n.type||"GET",cache:n.cache||!1,jsonpCallback:n.jsonpCallback||t,dataType:n.dataType||"json"},d=e.extend({},e.fn.select2.ajaxDefaults.params,u);r=r?r.call(s,l.term,l.page,l.context):null,o="function"==typeof o?o.call(s,l.term,l.page,l.context):o,i&&"function"==typeof i.abort&&i.abort(),n.params&&(e.isFunction(n.params)?e.extend(d,n.params.call(s)):e.extend(d,n.params)),e.extend(d,{url:o,dataType:n.dataType,data:r,success:function(e){var t=n.results(e,l.page,l);l.callback(t)},error:function(e,t,n){var r={hasError:!0,jqXHR:e,textStatus:t,errorThrown:n};l.callback(r)}}),i=c.call(s,d)},o)}}function x(t){var n,r,i=t,o=function(e){return""+e.text};e.isArray(i)&&(r=i,i={results:r}),!1===e.isFunction(i)&&(r=i,i=function(){return r});var a=i();return a.text&&(o=a.text,e.isFunction(o)||(n=a.text,o=function(e){return e[n]})),function(t){var n,r=t.term,a={results:[]};if(""===r)return void t.callback(i());n=function(i,a){var s,l;if(i=i[0],i.children){s={};for(l in i)i.hasOwnProperty(l)&&(s[l]=i[l]);s.children=[],e(i.children).each2(function(e,t){n(t,s.children)}),(s.children.length||t.matcher(r,o(s),i))&&a.push(s)}else t.matcher(r,o(i),i)&&a.push(i)},e(i().results).each2(function(e,t){n(t,a.results)}),t.callback(a)}}function C(n){var r=e.isFunction(n);return function(i){var o=i.term,a={results:[]},s=r?n(i):n;e.isArray(s)&&(e(s).each(function(){var e=this.text!==t,n=e?this.text:this;(""===o||i.matcher(o,n))&&a.results.push(e?this:{id:this,text:this})}),i.callback(a))}}function k(t,n){if(e.isFunction(t))return!0;if(!t)return!1;if("string"==typeof t)return!0;throw new Error(n+" must be a string, function, or falsy value")}function T(t,n){if(e.isFunction(t)){var r=Array.prototype.slice.call(arguments,2);return t.apply(n,r)}return t}function S(t){var n=0;return e.each(t,function(e,t){t.children?n+=S(t.children):n++}),n}function D(e,n,r,i){var o,s,l,c,u,d=e,f=!1;if(!i.createSearchChoice||!i.tokenSeparators||i.tokenSeparators.length<1)return t;for(;;){for(s=-1,l=0,c=i.tokenSeparators.length;l<c&&(u=i.tokenSeparators[l],!((s=e.indexOf(u))>=0));l++);if(s<0)break;if(o=e.substring(0,s),e=e.substring(s+u.length),o.length>0&&(o=i.createSearchChoice.call(this,o,n))!==t&&null!==o&&i.id(o)!==t&&null!==i.id(o)){for(f=!1,l=0,c=n.length;l<c;l++)if(a(i.id(o),i.id(n[l]))){f=!0;break}f||r(o)}}return d!==e?e:void 0}function E(){var t=this;e.each(arguments,function(e,n){t[n].remove(),t[n]=null})}function N(t,n){var r=function(){};return r.prototype=new t,r.prototype.constructor=r,r.prototype.parent=t.prototype,r.prototype=e.extend(r.prototype,n),r}if(window.Select2===t){var A,R,P,O,I,M,j,B,L={x:0,y:0},A={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){switch(e=e.which?e.which:e){case A.LEFT:case A.RIGHT:case A.UP:case A.DOWN:return!0}return!1},isControl:function(e){switch(e.which){case A.SHIFT:case A.CTRL:case A.ALT:return!0}return!!e.metaKey},isFunctionKey:function(e){return(e=e.which?e.which:e)>=112&&e<=123}},F="<div class='select2-measure-scrollbar'></div>",H={"":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"AA","":"AE","":"AE","":"AE","":"AO","":"AU","":"AV","":"AV","":"AY","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"DZ","":"DZ","":"Dz","":"Dz","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"F","":"F","":"F","":"F","":"F","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"J","":"J","":"J","":"J","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"LJ","":"Lj","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"NJ","":"Nj","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"OI","":"OO","":"OU","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"Q","":"Q","":"Q","":"Q","":"Q","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"TZ","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"VY","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"X","":"X","":"X","":"X","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"aa","":"ae","":"ae","":"ae","":"ao","":"au","":"av","":"av","":"ay","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"dz","":"dz","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"f","":"f","":"f","":"f","":"f","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"hv","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"j","":"j","":"j","":"j","":"j","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"lj","":"m","":"m","":"m","":"m","":"m","":"m","":"m","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"nj","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"oi","":"ou","":"oo","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"q","":"q","":"q","":"q","":"q","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"tz","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"vy","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"x","":"x","":"x","":"x","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};j=e(document),I=function(){var e=1;return function(){return e++}}(),R=N(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(n){var r,i;this.opts=n=this.prepareOpts(n),this.id=n.id,n.element.data("select2")!==t&&null!==n.element.data("select2")&&n.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body),this.containerId="s2id_"+(n.element.attr("id")||"autogen"+I()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",n.element.attr("title")),this.body=e("body"),b(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",n.element.attr("style")),this.container.css(T(n.containerCss,this.opts.element)),this.container.addClass(T(n.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",g),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),b(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(T(n.dropdownCssClass,this.opts.element)),this.dropdown.data("select2",this),this.dropdown.on("click",g),this.results=r=this.container.find(".select2-results"),this.search=i=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",g),u(this.results),this.dropdown.on("mousemove-filtered",".select2-results",this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",".select2-results",this.bind(function(e){this._touchEvent=!0,this.highlightUnderEvent(e)})),this.dropdown.on("touchmove",".select2-results",this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",".select2-results",this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind(function(e){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())})),f(80,this.results),this.dropdown.on("scroll-debounced",".select2-results",this.bind(this.loadMoreIfNeeded)),e(this.container).on("change",".select2-input",function(e){e.stopPropagation()}),e(this.dropdown).on("change",".select2-input",function(e){e.stopPropagation()}),e.fn.mousewheel&&r.mousewheel(function(e,t,n,i){var o=r.scrollTop();i>0&&o-i<=0?(r.scrollTop(0),g(e)):i<0&&r.get(0).scrollHeight-r.scrollTop()+i<=r.height()&&(r.scrollTop(r.get(0).scrollHeight-r.height()),g(e))}),c(i),i.on("keyup-change input paste",this.bind(this.updateResults)),i.on("focus",function(){i.addClass("select2-focused")}),i.on("blur",function(){i.removeClass("select2-focused")}),this.dropdown.on("mouseup",".select2-results",this.bind(function(t){e(t.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(t),this.selectHighlighted(t))})),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",function(e){e.stopPropagation()}),this.nextSearchTerm=t,e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==n.maximumInputLength&&this.search.attr("maxlength",n.maximumInputLength);var a=n.element.prop("disabled");a===t&&(a=!1),this.enable(!a);var s=n.element.prop("readonly");s===t&&(s=!1),this.readonly(s),B=B||o(),this.autofocus=n.element.prop("autofocus"),n.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",n.searchInputPlaceholder)},destroy:function(){var e=this.opts.element,n=e.data("select2"),r=this;this.close(),e.length&&e[0].detachEvent&&e.each(function(){this.detachEvent("onpropertychange",r._sync)}),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,n!==t&&(n.container.remove(),n.liveRegion.remove(),n.dropdown.remove(),e.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?e.attr({tabindex:this.elementTabIndex}):e.removeAttr("tabindex"),e.show()),E.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(e){return e.is("option")?{id:e.prop("value"),text:e.text(),element:e.get(),css:e.attr("class"),disabled:e.prop("disabled"),locked:a(e.attr("locked"),"locked")||a(e.data("locked"),!0)}:e.is("optgroup")?{text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")}:void 0},prepareOpts:function(n){var r,i,o,l,c=this;if(r=n.element,"select"===r.get(0).tagName.toLowerCase()&&(this.select=i=n.element),i&&e.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in n)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),n=e.extend({},{populateResults:function(r,i,o){var a,s=this.opts.id,l=this.liveRegion;(a=function(r,i,u){var d,f,h,p,g,m,v,b,y,w;r=n.sortResults(r,i,o);var _=[];for(d=0,f=r.length;d<f;d+=1)h=r[d],g=!0===h.disabled,p=!g&&s(h)!==t,m=h.children&&h.children.length>0,v=e("<li></li>"),v.addClass("select2-results-dept-"+u),v.addClass("select2-result"),v.addClass(p?"select2-result-selectable":"select2-result-unselectable"),g&&v.addClass("select2-disabled"),m&&v.addClass("select2-result-with-children"),v.addClass(c.opts.formatResultCssClass(h)),v.attr("role","presentation"),b=e(document.createElement("div")),b.addClass("select2-result-label"),b.attr("id","select2-result-label-"+I()),b.attr("role","option"),w=n.formatResult(h,b,o,c.opts.escapeMarkup),w!==t&&(b.html(w),v.append(b)),m&&(y=e("<ul></ul>"),y.addClass("select2-result-sub"),a(h.children,y,u+1),v.append(y)),v.data("select2-data",h),_.push(v[0]);i.append(_),l.text(n.formatMatches(r.length))})(i,r,0)}},e.fn.select2.defaults,n),"function"!=typeof n.id&&(o=n.id,n.id=function(e){return e[o]}),e.isArray(n.element.data("select2Tags"))){if("tags"in n)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+n.element.attr("id");n.tags=n.element.data("select2Tags")}if(i?(n.query=this.bind(function(e){var n,i,o,a={results:[],more:!1},s=e.term;o=function(t,n){var r;t.is("option")?e.matcher(s,t.text(),t)&&n.push(c.optionToData(t)):t.is("optgroup")&&(r=c.optionToData(t),t.children().each2(function(e,t){o(t,r.children)}),r.children.length>0&&n.push(r))},n=r.children(),this.getPlaceholder()!==t&&n.length>0&&(i=this.getPlaceholderOption())&&(n=n.not(i)),n.each2(function(e,t){o(t,a.results)}),e.callback(a)}),n.id=function(e){return e.id}):"query"in n||("ajax"in n?(l=n.element.data("ajax-url"),l&&l.length>0&&(n.ajax.url=l),n.query=_.call(n.element,n.ajax)):"data"in n?n.query=x(n.data):"tags"in n&&(n.query=C(n.tags),n.createSearchChoice===t&&(n.createSearchChoice=function(t){return{id:e.trim(t),text:e.trim(t)}}),n.initSelection===t&&(n.initSelection=function(t,r){var i=[];e(s(t.val(),n.separator)).each(function(){var t={id:this,text:this},r=n.tags;e.isFunction(r)&&(r=r()),e(r).each(function(){if(a(this.id,t.id))return t=this,!1}),i.push(t)}),r(i)}))),"function"!=typeof n.query)throw"query function not defined for Select2 "+n.element.attr("id");if("top"===n.createSearchChoicePosition)n.createSearchChoicePosition=function(e,t){e.unshift(t)};else if("bottom"===n.createSearchChoicePosition)n.createSearchChoicePosition=function(e,t){e.push(t)};else if("function"!=typeof n.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return n},monitorSource:function(){var n,r=this.opts.element,i=this;r.on("change.select2",this.bind(function(e){!0!==this.opts.element.data("select2-change-triggered")&&this.initSelection()})),this._sync=this.bind(function(){var e=r.prop("disabled");e===t&&(e=!1),this.enable(!e);var n=r.prop("readonly");n===t&&(n=!1),this.readonly(n),b(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(T(this.opts.containerCssClass,this.opts.element)),b(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(T(this.opts.dropdownCssClass,this.opts.element))}),r.length&&r[0].attachEvent&&r.each(function(){this.attachEvent("onpropertychange",i._sync)}),(n=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)!==t&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new n(function(t){e.each(t,i._sync)}),this.propertyObserver.observe(r.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(t){var n=e.Event("select2-selecting",{val:this.id(t),object:t,choice:t});return this.opts.element.trigger(n),!n.isDefaultPrevented()},triggerChange:function(t){t=t||{},t=e.extend({},t,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(t),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return!0===this.enabledInterface},enableInterface:function(){var e=this._enabled&&!this._readonly,t=!e;return e!==this.enabledInterface&&(this.container.toggleClass("select2-container-disabled",t),this.close(),this.enabledInterface=e,!0)},enable:function(e){e===t&&(e=!0),this._enabled!==e&&(this._enabled=e,this.opts.element.prop("disabled",!e),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(e){e===t&&(e=!1),this._readonly!==e&&(this._readonly=e,this.opts.element.prop("readonly",e),this.enableInterface())},opened:function(){return!!this.container&&this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var t,n,r,i,o,a=this.dropdown,s=this.container.offset(),l=this.container.outerHeight(!1),c=this.container.outerWidth(!1),u=a.outerHeight(!1),d=e(window),f=d.width(),h=d.height(),p=d.scrollLeft()+f,g=d.scrollTop()+h,m=s.top+l,v=s.left,b=m+u<=g,y=s.top-u>=d.scrollTop(),w=a.outerWidth(!1),_=v+w<=p,x=a.hasClass("select2-drop-above");x?(n=!0,!y&&b&&(r=!0,n=!1)):(n=!1,!b&&y&&(r=!0,n=!0)),r&&(a.hide(),s=this.container.offset(),l=this.container.outerHeight(!1),c=this.container.outerWidth(!1),u=a.outerHeight(!1),p=d.scrollLeft()+f,g=d.scrollTop()+h,m=s.top+l,v=s.left,w=a.outerWidth(!1),_=v+w<=p,a.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(o=e(".select2-results",a)[0],a.addClass("select2-drop-auto-width"),a.css("width",""),w=a.outerWidth(!1)+(o.scrollHeight===o.clientHeight?0:B.width),w>c?c=w:w=c,u=a.outerHeight(!1),_=v+w<=p):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(t=this.body.offset(),m-=t.top,v-=t.left),_||(v=s.left+this.container.outerWidth(!1)-w),i={left:v,width:c},n?(i.top=s.top-u,i.bottom="auto",this.container.addClass("select2-drop-above"),a.addClass("select2-drop-above")):(i.top=m,i.bottom="auto",this.container.removeClass("select2-drop-above"),a.removeClass("select2-drop-above")),i=e.extend(i,T(this.opts.dropdownCss,this.opts.element)),a.css(i)},shouldOpen:function(){var t;return!this.opened()&&(!1!==this._enabled&&!0!==this._readonly&&(t=e.Event("select2-opening"),this.opts.element.trigger(t),!t.isDefaultPrevented()))},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return!!this.shouldOpen()&&(this.opening(),j.on("mousemove.select2Event",function(e){L.x=e.pageX,L.y=e.pageY}),!0)},opening:function(){var t,r=this.containerEventName,i="scroll."+r,o="resize."+r,a="orientationchange."+r;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),t=e("#select2-drop-mask"),0==t.length&&(t=e(document.createElement("div")),t.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),t.hide(),t.appendTo(this.body),t.on("mousedown touchstart click",function(r){n(t);var i,o=e("#select2-drop");o.length>0&&(i=o.data("select2"),i.opts.selectOnBlur&&i.selectHighlighted({noFocus:!0}),i.close(),r.preventDefault(),r.stopPropagation())})),this.dropdown.prev()[0]!==t[0]&&this.dropdown.before(t),e("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),t.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var s=this;this.container.parents().add(window).each(function(){e(this).on(o+" "+i+" "+a,function(e){s.opened()&&s.positionDropdown()})})},close:function(){if(this.opened()){var t=this.containerEventName,n="scroll."+t,r="resize."+t,i="orientationchange."+t;this.container.parents().add(window).each(function(){e(this).off(n).off(r).off(i)}),this.clearDropdownAlignmentPreference(),e("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),j.off("mousemove.select2Event"),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(e.Event("select2-close"))}},externalSearch:function(e){this.open(),this.search.val(e),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return T(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var t,n,r,i,o,a,s,l,c=this.results;if(!((n=this.highlight())<0)){if(0==n)return void c.scrollTop(0);t=this.findHighlightableChoices().find(".select2-result-label"),r=e(t[n]),l=(r.offset()||{}).top||0,i=l+r.outerHeight(!0),n===t.length-1&&(s=c.find("li.select2-more-results"),s.length>0&&(i=s.offset().top+s.outerHeight(!0))),o=c.offset().top+c.outerHeight(!0),i>o&&c.scrollTop(c.scrollTop()+(i-o)),a=l-c.offset().top,a<0&&"none"!=r.css("display")&&c.scrollTop(c.scrollTop()+a)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(t){for(var n=this.findHighlightableChoices(),r=this.highlight();r>-1&&r<n.length;){r+=t;var i=e(n[r]);if(i.hasClass("select2-result-selectable")&&!i.hasClass("select2-disabled")&&!i.hasClass("select2-selected")){this.highlight(r);break}}},highlight:function(t){var n,r,o=this.findHighlightableChoices();if(0===arguments.length)return i(o.filter(".select2-highlighted")[0],o.get());t>=o.length&&(t=o.length-1),t<0&&(t=0),this.removeHighlight(),n=e(o[t]),n.addClass("select2-highlighted"),this.search.attr("aria-activedescendant",n.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(n.text()),(r=n.data("select2-data"))&&this.opts.element.trigger({type:"select2-highlight",val:this.id(r),choice:r})},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(t){var n=e(t.target).closest(".select2-result-selectable");if(n.length>0&&!n.is(".select2-highlighted")){var r=this.findHighlightableChoices();this.highlight(r.index(n))}else 0==n.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var e=this.results,t=e.find("li.select2-more-results"),n=this.resultsPage+1,r=this,i=this.search.val(),o=this.context;0!==t.length&&t.offset().top-e.offset().top-e.height()<=this.opts.loadMorePadding&&(t.addClass("select2-active"),this.opts.query({element:this.opts.element,term:i,page:n,context:o,matcher:this.opts.matcher,callback:this.bind(function(a){r.opened()&&(r.opts.populateResults.call(this,e,a.results,{term:i,page:n,context:o}),r.postprocessResults(a,!1,!1),!0===a.more?(t.detach().appendTo(e).text(T(r.opts.formatLoadMore,r.opts.element,n+1)),window.setTimeout(function(){r.loadMoreIfNeeded()},10)):t.remove(),r.positionDropdown(),r.resultsPage=n,r.context=a.context,this.opts.element.trigger({type:"select2-loaded",items:a}))})}))},tokenize:function(){},updateResults:function(n){function r(){c.removeClass("select2-active"),f.positionDropdown(),u.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?f.liveRegion.text(u.text()):f.liveRegion.text(f.opts.formatMatches(u.find(".select2-result-selectable").length))}function i(e){u.html(e),r()}var o,s,l,c=this.search,u=this.results,d=this.opts,f=this,h=c.val(),p=e.data(this.container,"select2-last-term");if((!0===n||!p||!a(h,p))&&(e.data(this.container,"select2-last-term",h),!0===n||!1!==this.showSearchInput&&this.opened())){l=++this.queryCount;var g=this.getMaximumSelectionSize();if(g>=1&&(o=this.data(),e.isArray(o)&&o.length>=g&&k(d.formatSelectionTooBig,"formatSelectionTooBig")))return void i("<li class='select2-selection-limit'>"+T(d.formatSelectionTooBig,d.element,g)+"</li>");if(c.val().length<d.minimumInputLength)return i(k(d.formatInputTooShort,"formatInputTooShort")?"<li class='select2-no-results'>"+T(d.formatInputTooShort,d.element,c.val(),d.minimumInputLength)+"</li>":""),void(n&&this.showSearch&&this.showSearch(!0));if(d.maximumInputLength&&c.val().length>d.maximumInputLength)return void i(k(d.formatInputTooLong,"formatInputTooLong")?"<li class='select2-no-results'>"+T(d.formatInputTooLong,d.element,c.val(),d.maximumInputLength)+"</li>":"");d.formatSearching&&0===this.findHighlightableChoices().length&&i("<li class='select2-searching'>"+T(d.formatSearching,d.element)+"</li>"),c.addClass("select2-active"),this.removeHighlight(),s=this.tokenize(),s!=t&&null!=s&&c.val(s),this.resultsPage=1,d.query({element:d.element,term:c.val(),page:this.resultsPage,context:null,matcher:d.matcher,callback:this.bind(function(o){var s;if(l==this.queryCount){
if(!this.opened())return void this.search.removeClass("select2-active");if(o.hasError!==t&&k(d.formatAjaxError,"formatAjaxError"))return void i("<li class='select2-ajax-error'>"+T(d.formatAjaxError,d.element,o.jqXHR,o.textStatus,o.errorThrown)+"</li>");if(this.context=o.context===t?null:o.context,this.opts.createSearchChoice&&""!==c.val()&&(s=this.opts.createSearchChoice.call(f,c.val(),o.results))!==t&&null!==s&&f.id(s)!==t&&null!==f.id(s)&&0===e(o.results).filter(function(){return a(f.id(this),f.id(s))}).length&&this.opts.createSearchChoicePosition(o.results,s),0===o.results.length&&k(d.formatNoMatches,"formatNoMatches"))return void i("<li class='select2-no-results'>"+T(d.formatNoMatches,d.element,c.val())+"</li>");u.empty(),f.opts.populateResults.call(this,u,o.results,{term:c.val(),page:this.resultsPage,context:null}),!0===o.more&&k(d.formatLoadMore,"formatLoadMore")&&(u.append("<li class='select2-more-results'>"+d.escapeMarkup(T(d.formatLoadMore,d.element,this.resultsPage))+"</li>"),window.setTimeout(function(){f.loadMoreIfNeeded()},10)),this.postprocessResults(o,n),r(),this.opts.element.trigger({type:"select2-loaded",items:o})}})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){h(this.search)},selectHighlighted:function(e){if(this._touchMoved)return void this.clearTouchMoved();var t=this.highlight(),n=this.results.find(".select2-highlighted"),r=n.closest(".select2-result").data("select2-data");r?(this.highlight(t),this.onSelect(r,e)):e&&e.noFocus&&this.close()},getPlaceholder:function(){var e;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((e=this.getPlaceholderOption())!==t?e.text():t)},getPlaceholderOption:function(){if(this.select){var n=this.select.children("option").first();if(this.opts.placeholderOption!==t)return"first"===this.opts.placeholderOption&&n||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===e.trim(n.text())&&""===n.val())return n}},initContainerWidth:function(){function n(){var n,r,i,o,a,s;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if((n=this.opts.element.attr("style"))!==t)for(r=n.split(";"),o=0,a=r.length;o<a;o+=1)if(s=r[o].replace(/\s/g,""),null!==(i=s.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i))&&i.length>=1)return i[1];return"resolve"===this.opts.width?(n=this.opts.element.css("width"),n.indexOf("%")>0?n:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}var r=n.call(this);null!==r&&this.container.css("width",r)}}),P=N(R,{createContainer:function(){return e(document.createElement("div")).attr({class:"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""))},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var n,r,i;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),!1!==this.showSearchInput&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),n=this.search.get(0),n.createTextRange?(r=n.createTextRange(),r.collapse(!1),r.select()):n.setSelectionRange&&(i=this.search.val().length,n.setSelectionRange(i,i))),""===this.search.val()&&this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){e("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),E.call(this,"selection","focusser")},initContainer:function(){var t,r,i=this.container,o=this.dropdown,a=I();this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=t=i.find(".select2-choice"),this.focusser=i.find(".select2-focusser"),t.find(".select2-chosen").attr("id","select2-chosen-"+a),this.focusser.attr("aria-labelledby","select2-chosen-"+a),this.results.attr("id","select2-results-"+a),this.search.attr("aria-owns","select2-results-"+a),this.focusser.attr("id","s2id_autogen"+a),r=e("label[for='"+this.opts.element.attr("id")+"']"),this.focusser.prev().text(r.text()).attr("for",this.focusser.attr("id"));var s=this.opts.element.attr("title");this.opts.element.attr("title",s||r.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(e("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&229!=e.keyCode){if(e.which===A.PAGE_UP||e.which===A.PAGE_DOWN)return void g(e);switch(e.which){case A.UP:case A.DOWN:return this.moveHighlight(e.which===A.UP?-1:1),void g(e);case A.ENTER:return this.selectHighlighted(),void g(e);case A.TAB:return void this.selectHighlighted({noFocus:!0});case A.ESC:return this.cancel(e),void g(e)}}})),this.search.on("blur",this.bind(function(e){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind(function(){this.opened()&&this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&e.which!==A.TAB&&!A.isControl(e)&&!A.isFunctionKey(e)&&e.which!==A.ESC){if(!1===this.opts.openOnEnter&&e.which===A.ENTER)return void g(e);if(e.which==A.DOWN||e.which==A.UP||e.which==A.ENTER&&this.opts.openOnEnter){if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return;return this.open(),void g(e)}return e.which==A.DELETE||e.which==A.BACKSPACE?(this.opts.allowClear&&this.clear(),void g(e)):void 0}})),c(this.focusser),this.focusser.on("keyup-change input",this.bind(function(e){if(this.opts.minimumResultsForSearch>=0){if(e.stopPropagation(),this.opened())return;this.open()}})),t.on("mousedown touchstart","abbr",this.bind(function(e){this.isInterfaceEnabled()&&(this.clear(),m(e),this.close(),this.selection.focus())})),t.on("mousedown touchstart",this.bind(function(r){n(t),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),g(r)})),o.on("mousedown touchstart",this.bind(function(){this.opts.shouldFocusInput(this)&&this.search.focus()})),t.on("focus",this.bind(function(e){g(e)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(e.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.setPlaceholder()},clear:function(t){var n=this.selection.data("select2-data");if(n){var r=e.Event("select2-clearing");if(this.opts.element.trigger(r),r.isDefaultPrevented())return;var i=this.getPlaceholderOption();this.opts.element.val(i?i.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),!1!==t&&(this.opts.element.trigger({type:"select2-removed",val:this.id(n),choice:n}),this.triggerChange({removed:n}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var e=this;this.opts.initSelection.call(null,this.opts.element,function(n){n!==t&&null!==n&&(e.updateSelection(n),e.close(),e.setPlaceholder(),e.nextSearchTerm=e.opts.nextSearchTerm(n,e.search.val()))})}},isPlaceholderOptionSelected:function(){var e;return this.getPlaceholder()!==t&&((e=this.getPlaceholderOption())!==t&&e.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===t||null===this.opts.element.val())},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var r=e.find("option").filter(function(){return this.selected&&!this.disabled});t(n.optionToData(r))}:"data"in t&&(t.initSelection=t.initSelection||function(n,r){var i=n.val(),o=null;t.query({matcher:function(e,n,r){var s=a(i,t.id(r));return s&&(o=r),s},callback:e.isFunction(r)?function(){r(o)}:e.noop})}),t},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===t?t:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var e=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&e!==t){if(this.select&&this.getPlaceholderOption()===t)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(e,t,n){var r=0,i=this;if(this.findHighlightableChoices().each2(function(e,t){if(a(i.id(t.data("select2-data")),i.opts.element.val()))return r=e,!1}),!1!==n&&(!0===t&&r>=0?this.highlight(r):this.highlight(0)),!0===t){var o=this.opts.minimumResultsForSearch;o>=0&&this.showSearch(S(e.results)>=o)}},showSearch:function(t){this.showSearchInput!==t&&(this.showSearchInput=t,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!t),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!t),e(this.dropdown,this.container).toggleClass("select2-with-searchbox",t))},onSelect:function(e,t){if(this.triggerSelect(e)){var n=this.opts.element.val(),r=this.data();this.opts.element.val(this.id(e)),this.updateSelection(e),this.opts.element.trigger({type:"select2-selected",val:this.id(e),choice:e}),this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val()),this.close(),t&&t.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),a(n,this.id(e))||this.triggerChange({added:e,removed:r})}},updateSelection:function(e){var n,r,i=this.selection.find(".select2-chosen");this.selection.data("select2-data",e),i.empty(),null!==e&&(n=this.opts.formatSelection(e,i,this.opts.escapeMarkup)),n!==t&&i.append(n),r=this.opts.formatSelectionCssClass(e,i),r!==t&&i.addClass(r),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==t&&this.container.addClass("select2-allowclear")},val:function(){var e,n=!1,r=null,i=this,o=this.data();if(0===arguments.length)return this.opts.element.val();if(e=arguments[0],arguments.length>1&&(n=arguments[1]),this.select)this.select.val(e).find("option").filter(function(){return this.selected}).each2(function(e,t){return r=i.optionToData(t),!1}),this.updateSelection(r),this.setPlaceholder(),n&&this.triggerChange({added:r,removed:o});else{if(!e&&0!==e)return void this.clear(n);if(this.opts.initSelection===t)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(e),this.opts.initSelection(this.opts.element,function(e){i.opts.element.val(e?i.id(e):""),i.updateSelection(e),i.setPlaceholder(),n&&i.triggerChange({added:e,removed:o})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(e){var n,r=!1;if(0===arguments.length)return n=this.selection.data("select2-data"),n==t&&(n=null),n;arguments.length>1&&(r=arguments[1]),e?(n=this.data(),this.opts.element.val(e?this.id(e):""),this.updateSelection(e),r&&this.triggerChange({added:e,removed:n})):this.clear(r)}}),O=N(R,{createContainer:function(){return e(document.createElement("div")).attr({class:"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""))},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var r=[];e.find("option").filter(function(){return this.selected&&!this.disabled}).each2(function(e,t){r.push(n.optionToData(t))}),t(r)}:"data"in t&&(t.initSelection=t.initSelection||function(n,r){var i=s(n.val(),t.separator),o=[];t.query({matcher:function(n,r,s){var l=e.grep(i,function(e){return a(e,t.id(s))}).length;return l&&o.push(s),l},callback:e.isFunction(r)?function(){for(var e=[],n=0;n<i.length;n++)for(var s=i[n],l=0;l<o.length;l++){var c=o[l];if(a(s,t.id(c))){e.push(c),o.splice(l,1);break}}r(e)}:e.noop})}),t},selectChoice:function(e){var t=this.container.find(".select2-search-choice-focus");t.length&&e&&e[0]==t[0]||(t.length&&this.opts.element.trigger("choice-deselected",t),t.removeClass("select2-search-choice-focus"),e&&e.length&&(this.close(),e.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",e)))},destroy:function(){e("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),E.call(this,"searchContainer","selection")},initContainer:function(){var t,n=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=t=this.container.find(n);var r=this;this.selection.on("click",".select2-search-choice:not(.select2-locked)",function(t){r.search[0].focus(),r.selectChoice(e(this))}),this.search.attr("id","s2id_autogen"+I()),this.search.prev().text(e("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("input paste",this.bind(function(){this.search.attr("placeholder")&&0==this.search.val().length||this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()){++this.keydowns;var n=t.find(".select2-search-choice-focus"),r=n.prev(".select2-search-choice:not(.select2-locked)"),i=n.next(".select2-search-choice:not(.select2-locked)"),o=p(this.search);if(n.length&&(e.which==A.LEFT||e.which==A.RIGHT||e.which==A.BACKSPACE||e.which==A.DELETE||e.which==A.ENTER)){var a=n;return e.which==A.LEFT&&r.length?a=r:e.which==A.RIGHT?a=i.length?i:null:e.which===A.BACKSPACE?this.unselect(n.first())&&(this.search.width(10),a=r.length?r:i):e.which==A.DELETE?this.unselect(n.first())&&(this.search.width(10),a=i.length?i:null):e.which==A.ENTER&&(a=null),this.selectChoice(a),g(e),void(a&&a.length||this.open())}if((e.which===A.BACKSPACE&&1==this.keydowns||e.which==A.LEFT)&&0==o.offset&&!o.length)return this.selectChoice(t.find(".select2-search-choice:not(.select2-locked)").last()),void g(e);if(this.selectChoice(null),this.opened())switch(e.which){case A.UP:case A.DOWN:return this.moveHighlight(e.which===A.UP?-1:1),void g(e);case A.ENTER:return this.selectHighlighted(),void g(e);case A.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case A.ESC:return this.cancel(e),void g(e)}if(e.which!==A.TAB&&!A.isControl(e)&&!A.isFunctionKey(e)&&e.which!==A.BACKSPACE&&e.which!==A.ESC){if(e.which===A.ENTER){if(!1===this.opts.openOnEnter)return;if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return}this.open(),e.which!==A.PAGE_UP&&e.which!==A.PAGE_DOWN||g(e),e.which===A.ENTER&&g(e)}}})),this.search.on("keyup",this.bind(function(e){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(t){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),t.stopImmediatePropagation(),this.opts.element.trigger(e.Event("select2-blur"))})),this.container.on("click",n,this.bind(function(t){this.isInterfaceEnabled()&&(e(t.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.open(),this.focusSearch(),t.preventDefault()))})),this.container.on("focus",n,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var e=this;this.opts.initSelection.call(null,this.opts.element,function(n){n!==t&&null!==n&&(e.updateSelection(n),e.close(),e.clearSearch())})}},clearSearch:function(){var e=this.getPlaceholder(),n=this.getMaxSearchWidth();e!==t&&0===this.getVal().length&&!1===this.search.hasClass("select2-focused")?(this.search.val(e).addClass("select2-default"),this.search.width(n>0?n:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),""===this.search.val()&&this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.search.select()),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(t){var n=[],r=[],o=this;e(t).each(function(){i(o.id(this),n)<0&&(n.push(o.id(this)),r.push(this))}),t=r,this.selection.find(".select2-search-choice").remove(),e(t).each(function(){o.addSelectedChoice(this)}),o.postprocessResults()},tokenize:function(){var e=this.search.val();null!=(e=this.opts.tokenizer.call(this,e,this.data(),this.bind(this.onSelect),this.opts))&&e!=t&&(this.search.val(e),e.length>0&&this.open())},onSelect:function(e,n){this.triggerSelect(e)&&""!==e.text&&(this.addSelectedChoice(e),this.opts.element.trigger({type:"selected",val:this.id(e),choice:e}),this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val()),this.clearSearch(),this.updateResults(),!this.select&&this.opts.closeOnSelect||this.postprocessResults(e,!1,!0===this.opts.closeOnSelect),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.updateResults(),this.search.select()),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:e}),n&&n.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(n){var r,i,o=!n.locked,a=e("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),s=e("<li class='select2-search-choice select2-locked'><div></div></li>"),l=o?a:s,c=this.id(n),u=this.getVal();r=this.opts.formatSelection(n,l.find("div"),this.opts.escapeMarkup),r!=t&&l.find("div").replaceWith("<div>"+r+"</div>"),i=this.opts.formatSelectionCssClass(n,l.find("div")),i!=t&&l.addClass(i),o&&l.find(".select2-search-choice-close").on("mousedown",g).on("click dblclick",this.bind(function(t){this.isInterfaceEnabled()&&(this.unselect(e(t.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),g(t),this.close(),this.focusSearch())})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),l.data("select2-data",n),l.insertBefore(this.searchContainer),u.push(c),this.setVal(u)},unselect:function(t){var n,r,o=this.getVal();if(t=t.closest(".select2-search-choice"),0===t.length)throw"Invalid argument: "+t+". Must be .select2-search-choice";if(n=t.data("select2-data")){var a=e.Event("select2-removing");if(a.val=this.id(n),a.choice=n,this.opts.element.trigger(a),a.isDefaultPrevented())return!1;for(;(r=i(this.id(n),o))>=0;)o.splice(r,1),this.setVal(o),this.select&&this.postprocessResults();return t.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(n),choice:n}),this.triggerChange({removed:n}),!0}},postprocessResults:function(e,t,n){var r=this.getVal(),o=this.results.find(".select2-result"),a=this.results.find(".select2-result-with-children"),s=this;o.each2(function(e,t){i(s.id(t.data("select2-data")),r)>=0&&(t.addClass("select2-selected"),t.find(".select2-result-selectable").addClass("select2-selected"))}),a.each2(function(e,t){t.is(".select2-result-selectable")||0!==t.find(".select2-result-selectable:not(.select2-selected)").length||t.addClass("select2-selected")}),-1==this.highlight()&&!1!==n&&s.highlight(0),!this.opts.createSearchChoice&&!o.filter(".select2-result:not(.select2-selected)").length>0&&(!e||e&&!e.more&&0===this.results.find(".select2-no-results").length)&&k(s.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+T(s.opts.formatNoMatches,s.opts.element,s.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-l(this.search)},resizeSearch:function(){var e,t,n,r,i,o=l(this.search);e=v(this.search)+10,t=this.search.offset().left,n=this.selection.width(),r=this.selection.offset().left,i=n-(t-r)-o,i<e&&(i=n-o),i<40&&(i=n-o),i<=0&&(i=e),this.search.width(Math.floor(i))},getVal:function(){var e;return this.select?(e=this.select.val(),null===e?[]:e):(e=this.opts.element.val(),s(e,this.opts.separator))},setVal:function(t){var n;this.select?this.select.val(t):(n=[],e(t).each(function(){i(this,n)<0&&n.push(this)}),this.opts.element.val(0===n.length?"":n.join(this.opts.separator)))},buildChangeDetails:function(e,t){for(var t=t.slice(0),e=e.slice(0),n=0;n<t.length;n++)for(var r=0;r<e.length;r++)a(this.opts.id(t[n]),this.opts.id(e[r]))&&(t.splice(n,1),n>0&&n--,e.splice(r,1),r--);return{added:t,removed:e}},val:function(n,r){var i,o=this;if(0===arguments.length)return this.getVal();if(i=this.data(),i.length||(i=[]),!n&&0!==n)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(r&&this.triggerChange({added:this.data(),removed:i}));if(this.setVal(n),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),r&&this.triggerChange(this.buildChangeDetails(i,this.data()));else{if(this.opts.initSelection===t)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(t){var n=e.map(t,o.id);o.setVal(n),o.updateSelection(t),o.clearSearch(),r&&o.triggerChange(o.buildChangeDetails(i,o.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var t=[],n=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){t.push(n.opts.id(e(this).data("select2-data")))}),this.setVal(t),this.triggerChange()},data:function(t,n){var r,i,o=this;if(0===arguments.length)return this.selection.children(".select2-search-choice").map(function(){return e(this).data("select2-data")}).get();i=this.data(),t||(t=[]),r=e.map(t,function(e){return o.opts.id(e)}),this.setVal(r),this.updateSelection(t),this.clearSearch(),n&&this.triggerChange(this.buildChangeDetails(i,this.data()))}}),e.fn.select2=function(){var n,r,o,a,s,l=Array.prototype.slice.call(arguments,0),c=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],u=["opened","isFocused","container","dropdown"],d=["val","data"],f={search:"externalSearch"};return this.each(function(){if(0===l.length||"object"==typeof l[0])n=0===l.length?{}:e.extend({},l[0]),n.element=e(this),"select"===n.element.get(0).tagName.toLowerCase()?s=n.element.prop("multiple"):(s=n.multiple||!1,"tags"in n&&(n.multiple=s=!0)),r=s?new window.Select2.class.multi:new window.Select2.class.single,r.init(n);else{if("string"!=typeof l[0])throw"Invalid arguments to select2 plugin: "+l;if(i(l[0],c)<0)throw"Unknown method: "+l[0];if(a=t,(r=e(this).data("select2"))===t)return;if(o=l[0],"container"===o?a=r.container:"dropdown"===o?a=r.dropdown:(f[o]&&(o=f[o]),a=r[o].apply(r,l.slice(1))),i(l[0],u)>=0||i(l[0],d)>=0&&1==l.length)return!1}}),a===t?this:a},e.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,t,n,r){var i=[];return y(e.text,n.term,i,r),i.join("")},formatSelection:function(e,n,r){return e?r(e.text):t},sortResults:function(e,t,n){return e},formatResultCssClass:function(e){return e.css},formatSelectionCssClass:function(e,n){return t},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e==t?null:e.id},matcher:function(e,t){return r(""+t).toUpperCase().indexOf(r(""+e).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:D,escapeMarkup:w,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(e){return e},adaptDropdownCssClass:function(e){return null},nextSearchTerm:function(e,n){return t},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(e){return!(("ontouchstart"in window||navigator.msMaxTouchPoints>0)&&e.opts.minimumResultsForSearch<0)}},e.fn.select2.locales=[],e.fn.select2.locales.en={formatMatches:function(e){return 1===e?"One result is available, press enter to select it.":e+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(e,t,n){return"Loading failed"},formatInputTooShort:function(e,t){var n=t-e.length;return"Please enter "+n+" or more character"+(1==n?"":"s")},formatInputTooLong:function(e,t){var n=e.length-t;return"Please delete "+n+" character"+(1==n?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(1==e?"":"s")},formatLoadMore:function(e){return"Loading more results"},formatSearching:function(){return"Searching"}},e.extend(e.fn.select2.defaults,e.fn.select2.locales.en),e.fn.select2.ajaxDefaults={transport:e.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:_,local:x,tags:C},util:{debounce:d,markMatch:y,escapeMarkup:w,stripDiacritics:r},class:{abstract:R,single:P,multi:O}}}}(jQuery),function(e){e.fn.extend({slimScroll:function(n){var r={width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:.2,railDraggable:!0,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:"7px",railBorderRadius:"7px"},i=e.extend(r,n);return this.each(function(){function r(t){if(c){var t=t||window.event,n=0;t.wheelDelta&&(n=-t.wheelDelta/120),t.detail&&(n=t.detail/3);var r=t.target||t.srcTarget||t.srcElement;e(r).closest("."+i.wrapperClass).is(w.parent())&&o(n,!0),t.preventDefault&&!y&&t.preventDefault(),y||(t.returnValue=!1)}}function o(e,t,n){y=!1;var r=e,o=w.outerHeight()-S.outerHeight();if(t&&(r=parseInt(S.css("top"))+e*parseInt(i.wheelStep)/100*S.outerHeight(),r=Math.min(Math.max(r,0),o),r=e>0?Math.ceil(r):Math.floor(r),S.css({top:r+"px"})),g=parseInt(S.css("top"))/(w.outerHeight()-S.outerHeight()),r=g*(w[0].scrollHeight-w.outerHeight()),n){r=e;var a=r/w[0].scrollHeight*w.outerHeight();a=Math.min(Math.max(a,0),o),S.css({top:a+"px"})}w.scrollTop(r),w.trigger("slimscrolling",~~r),s(),l()}function a(){p=Math.max(w.outerHeight()/w[0].scrollHeight*w.outerHeight(),b),S.css({height:p+"px"});var e=p==w.outerHeight()?"none":"block";S.css({display:e})}function s(){if(a(),clearTimeout(f),g==~~g){if(y=i.allowPageScroll,m!=g){var e=0==~~g?"top":"bottom";w.trigger("slimscroll",e)}}else y=!1;if(m=g,p>=w.outerHeight())return void(y=!0);S.stop(!0,!0).fadeIn("fast"),i.railVisible&&T.stop(!0,!0).fadeIn("fast")}function l(){i.alwaysVisible||(f=setTimeout(function(){i.disableFadeOut&&c||u||d||(S.fadeOut("slow"),T.fadeOut("slow"))},1e3))}var c,u,d,f,h,p,g,m,v="<div></div>",b=30,y=!1,w=e(this);if(w.parent().hasClass(i.wrapperClass)){var _=w.scrollTop();if(S=w.siblings("."+i.barClass),T=w.siblings("."+i.railClass),a(),e.isPlainObject(n)){if("height"in n&&"auto"==n.height){w.parent().css("height","auto"),w.css("height","auto");var x=w.parent().parent().height();w.parent().css("height",x),w.css("height",x)}else if("height"in n){var C=n.height;w.parent().css("height",C),w.css("height",C)}if("scrollTo"in n)_=parseInt(i.scrollTo);else if("scrollBy"in n)_+=parseInt(i.scrollBy);else if("destroy"in n)return S.remove(),T.remove(),void w.unwrap();o(_,!1,!0)}}else if(!(e.isPlainObject(n)&&"destroy"in n)){i.height="auto"==i.height?w.parent().height():i.height;var k=e(v).addClass(i.wrapperClass).css({position:"relative",overflow:"hidden",width:i.width,height:i.height});w.css({overflow:"hidden",width:i.width,height:i.height})
;var T=e(v).addClass(i.railClass).css({width:i.size,height:"100%",position:"absolute",top:0,display:i.alwaysVisible&&i.railVisible?"block":"none","border-radius":i.railBorderRadius,background:i.railColor,opacity:i.railOpacity,zIndex:90}),S=e(v).addClass(i.barClass).css({background:i.color,width:i.size,position:"absolute",top:0,opacity:i.opacity,display:i.alwaysVisible?"block":"none","border-radius":i.borderRadius,BorderRadius:i.borderRadius,MozBorderRadius:i.borderRadius,WebkitBorderRadius:i.borderRadius,zIndex:99}),D="right"==i.position?{right:i.distance}:{left:i.distance};T.css(D),S.css(D),w.wrap(k),w.parent().append(S),w.parent().append(T),i.railDraggable&&S.bind("mousedown",function(n){var r=e(document);return d=!0,t=parseFloat(S.css("top")),pageY=n.pageY,r.bind("mousemove.slimscroll",function(e){currTop=t+e.pageY-pageY,S.css("top",currTop),o(0,S.position().top,!1)}),r.bind("mouseup.slimscroll",function(e){d=!1,l(),r.unbind(".slimscroll")}),!1}).bind("selectstart.slimscroll",function(e){return e.stopPropagation(),e.preventDefault(),!1}),T.hover(function(){s()},function(){l()}),S.hover(function(){u=!0},function(){u=!1}),w.hover(function(){c=!0,s(),l()},function(){c=!1,l()}),w.bind("touchstart",function(e,t){e.originalEvent.touches.length&&(h=e.originalEvent.touches[0].pageY)}),w.bind("touchmove",function(e){if(y||e.originalEvent.preventDefault(),e.originalEvent.touches.length){o((h-e.originalEvent.touches[0].pageY)/i.touchScrollStep,!0),h=e.originalEvent.touches[0].pageY}}),a(),"bottom"===i.start?(S.css({top:w.outerHeight()-S.outerHeight()}),o(0,!0)):"top"!==i.start&&(o(e(i.start).position().top,null,!0),i.alwaysVisible||S.hide()),function(e){window.addEventListener?(e.addEventListener("DOMMouseScroll",r,!1),e.addEventListener("mousewheel",r,!1)):document.attachEvent("onmousewheel",r)}(this)}}),this}}),e.fn.extend({slimscroll:e.fn.slimScroll})}(jQuery),function(){!function(){"use strict";function e(){function e(n,r){return t.push(n+" ")>qt.cacheLength&&delete e[t.shift()],e[n+" "]=r}var t=[];return e}function t(e){return e[cn]=!0,e}function n(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||bn)-(~e.sourceIndex||bn);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function r(e){return t(function(n){return n=+n,t(function(t,r){for(var i,o=e([],t.length,n),a=o.length;a--;)t[i=o[a]]&&(t[i]=!(r[i]=t[i]))})})}function i(e){return e&&typeof e.getElementsByTagName!==vn&&e}function o(){}function a(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function s(e,t,n){var r=t.dir,i=n&&"parentNode"===r,o=fn++;return t.first?function(t,n,o){for(;t=t[r];)if(1===t.nodeType||i)return e(t,n,o)}:function(t,n,a){var s,l,c=[dn,o];if(a){for(;t=t[r];)if((1===t.nodeType||i)&&e(t,n,a))return!0}else for(;t=t[r];)if(1===t.nodeType||i){if(l=t[cn]||(t[cn]={}),(s=l[r])&&s[0]===dn&&s[1]===o)return c[2]=s[2];if(l[r]=c,c[2]=e(t,n,a))return!0}}}function l(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function c(e,t,n){for(var r=0,i=t.length;r<i;r++)qn(e,t[r],n);return n}function u(e,t,n,r,i){for(var o,a=[],s=0,l=e.length,c=null!=t;s<l;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),c&&t.push(s)));return a}function d(e,n,r,i,o,a){return i&&!i[cn]&&(i=d(i)),o&&!o[cn]&&(o=d(o,a)),t(function(t,a,s,l){var d,f,h,p=[],g=[],m=a.length,v=t||c(n||"*",s.nodeType?[s]:s,[]),b=!e||!t&&n?v:u(v,p,e,s,l),y=r?o||(t?e:m||i)?[]:a:b;if(r&&r(b,y,s,l),i)for(d=u(y,g),i(d,[],s,l),f=d.length;f--;)(h=d[f])&&(y[g[f]]=!(b[g[f]]=h));if(t){if(o||e){if(o){for(d=[],f=y.length;f--;)(h=y[f])&&d.push(b[f]=h);o(null,y=[],d,l)}for(f=y.length;f--;)(h=y[f])&&(d=o?Tn.call(t,h):p[f])>-1&&(t[d]=!(a[d]=h))}}else y=u(y===a?y.splice(m,y.length):y),o?o(null,a,y,l):Cn.apply(a,y)})}function f(e){for(var t,n,r,i=e.length,o=qt.relative[e[0].type],c=o||qt.relative[" "],u=o?1:0,h=s(function(e){return e===t},c,!0),p=s(function(e){return Tn.call(t,e)>-1},c,!0),g=[function(e,n,r){return!o&&(r||n!==Jt)||((t=n).nodeType?h(e,n,r):p(e,n,r))}];u<i;u++)if(n=qt.relative[e[u].type])g=[s(l(g),n)];else{if(n=qt.filter[e[u].type].apply(null,e[u].matches),n[cn]){for(r=++u;r<i&&!qt.relative[e[r].type];r++);return d(u>1&&l(g),u>1&&a(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace(An,"$1"),n,u<r&&f(e.slice(u,r)),r<i&&f(e=e.slice(r)),r<i&&a(e))}g.push(n)}return l(g)}function h(e,n){var r=n.length>0,i=e.length>0,o=function(t,o,a,s,l){var c,d,f,h=0,p="0",g=t&&[],m=[],v=Jt,b=t||i&&qt.find.TAG("*",l),y=dn+=null==v?1:Math.random()||.1,w=b.length;for(l&&(Jt=o!==tn&&o);p!==w&&null!=(c=b[p]);p++){if(i&&c){for(d=0;f=e[d++];)if(f(c,o,a)){s.push(c);break}l&&(dn=y)}r&&((c=!f&&c)&&h--,t&&g.push(c))}if(h+=p,r&&p!==h){for(d=0;f=n[d++];)f(g,m,o,a);if(t){if(h>0)for(;p--;)g[p]||m[p]||(m[p]=_n.call(s));m=u(m)}Cn.apply(s,m),l&&!t&&m.length>0&&h+n.length>1&&qn.uniqueSort(s)}return l&&(dn=y,Jt=v),g};return r?t(o):o}function p(e,t,n){var r=e.isiOS()&&!0===/ipad/i.test(n),i=e.isiOS()&&!r,o=e.isAndroid()&&3===e.version.major,a=e.isAndroid()&&4===e.version.major,s=r||o||a&&!0===/mobile/i.test(n),l=e.isiOS()||e.isAndroid(),c=l&&!s,u=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n);return{isiPad:pe(r),isiPhone:pe(i),isTablet:pe(s),isPhone:pe(c),isTouch:pe(l),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:pe(u)}}function g(e,t){var n,r=0,i={};t=t||{},n=t.maxLoadTime||5e3;var o=function(t){e.getElementsByTagName("head")[0].appendChild(t)},a=function(t,a,s){var l,c,u,d,f=function(){for(var e=d.passed,t=e.length;t--;)e[t]();d.status=2,d.passed=[],d.failed=[]},h=function(){for(var e=d.failed,t=e.length;t--;)e[t]();d.status=3,d.passed=[],d.failed=[]},p=function(e,t){e()||((new Date).getTime()-u<n?Rt.setTimeout(t):h())},g=function(){p(function(){for(var t,n,r=e.styleSheets,i=r.length;i--;)if(t=r[i],(n=t.ownerNode?t.ownerNode:t.owningElement)&&n.id===l.id)return f(),!0},g)},m=function(){p(function(){try{var e=c.sheet.cssRules;return f(),!!e}catch(e){}},m)};if(t=gr._addCacheSuffix(t),i[t]?d=i[t]:(d={passed:[],failed:[]},i[t]=d),a&&d.passed.push(a),s&&d.failed.push(s),1!==d.status){if(2===d.status)return void f();if(3===d.status)return void h();if(d.status=1,l=e.createElement("link"),l.rel="stylesheet",l.type="text/css",l.id="u"+r++,l.async=!1,l.defer=!1,u=(new Date).getTime(),"onload"in l&&!function(){var e=navigator.userAgent.match(/WebKit\/(\d*)/);return!!(e&&parseInt(e[1],10)<536)}())l.onload=g,l.onerror=h;else{if(navigator.userAgent.indexOf("Firefox")>0)return c=e.createElement("style"),c.textContent='@import "'+t+'"',m(),void o(c);g()}o(l),l.href=t}},s=function(e){return Ea.nu(function(t){a(e,he(t,pe(Oa.value(e))),he(t,pe(Oa.error(e))))})},l=function(e){return e.fold(ge,ge)};return{load:a,loadAll:function(e,t,n){Aa(He(e,s)).get(function(e){var r=ze(e,function(e){return e.isValue()});r.fail.length>0?n(r.fail.map(l)):t(r.pass.map(l))})}}}function m(e,t){var n=e,r=function(e,n,r,i){var o,a;if(e){if(!i&&e[n])return e[n];if(e!==t){if(o=e[r])return o;for(a=e.parentNode;a&&a!==t;a=a.parentNode)if(o=a[r])return o}}},i=function(e,n,r,i){var o,a,s;if(e){if(o=e[r],t&&o===t)return;if(o){if(!i)for(s=o[n];s;s=s[n])if(!s[n])return s;return o}if((a=e.parentNode)&&a!==t)return a}};this.current=function(){return n},this.next=function(e){return n=r(n,"firstChild","nextSibling",e)},this.prev=function(e){return n=r(n,"lastChild","previousSibling",e)},this.prev2=function(e){return n=i(n,"lastChild","previousSibling",e)}}function v(e){var t,n,r,i,o,a,s,l,c,u,d,f,h,p={},g={},m=[],v={},b={},y=function(t,n,r){var i=e[t];return i?i=Hs(i,/[, ]/,Hs(i.toUpperCase(),/[, ]/)):(i=Ls[t])||(i=Hs(n," ",Hs(n.toUpperCase()," ")),i=Us(i,r),Ls[t]=i),i};e=e||{},r=Vs(e.schema),!1===e.verify_html&&(e.valid_elements="*[*]"),t=Ys(e.valid_styles),n=Ys(e.invalid_styles,"map"),l=Ys(e.valid_classes,"map"),i=y("whitespace_elements","pre script noscript style textarea video audio iframe object code"),o=y("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),a=y("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),s=y("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),u=y("non_empty_elements","td th iframe video audio object script pre code",a),d=y("move_caret_before_on_enter_elements","table",u),f=y("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure"),c=y("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",f),h=y("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp"),$s((e.special||"script noscript noframes noembed title style textarea xmp").split(" "),function(e){b[e]=new RegExp("</"+e+"[^>]*>","gi")});var w=function(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")},_=function(e){var t,n,r,i,o,a,s,l,c,u,d,f,h,g,v,b,y,_,x,C=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,k=/^([!\-])?(\w+[\\:]:\w+|[^=:<]+)?(?:([=:<])(.*))?$/,T=/[*?+]/;if(e)for(e=qs(e,","),p["@"]&&(b=p["@"].attributes,y=p["@"].attributesOrder),t=0,n=e.length;t<n;t++)if(o=C.exec(e[t])){if(g=o[1],c=o[2],v=o[3],l=o[5],f={},h=[],a={attributes:f,attributesOrder:h},"#"===g&&(a.paddEmpty=!0),"-"===g&&(a.removeEmpty=!0),"!"===o[4]&&(a.removeEmptyAttrs=!0),b){for(_ in b)f[_]=b[_];h.push.apply(h,y)}if(l)for(l=qs(l,"|"),r=0,i=l.length;r<i;r++)if(o=k.exec(l[r])){if(s={},d=o[1],u=o[2].replace(/[\\:]:/g,":"),g=o[3],x=o[4],"!"===d&&(a.attributesRequired=a.attributesRequired||[],a.attributesRequired.push(u),s.required=!0),"-"===d){delete f[u],h.splice(Ws(h,u),1);continue}g&&("="===g&&(a.attributesDefault=a.attributesDefault||[],a.attributesDefault.push({name:u,value:x}),s.defaultValue=x),":"===g&&(a.attributesForced=a.attributesForced||[],a.attributesForced.push({name:u,value:x}),s.forcedValue=x),"<"===g&&(s.validValues=Hs(x,"?"))),T.test(u)?(a.attributePatterns=a.attributePatterns||[],s.pattern=w(u),a.attributePatterns.push(s)):(f[u]||h.push(u),f[u]=s)}b||"@"!==c||(b=f,y=h),v&&(a.outputName=c,p[v]=a),T.test(c)?(a.pattern=w(c),m.push(a)):p[c]=a}},x=function(e){p={},m=[],_(e),$s(r,function(e,t){g[t]=e.children})},C=function(e){var t=/^(~)?(.+)$/;e&&(Ls.text_block_elements=Ls.block_elements=null,$s(qs(e,","),function(e){var n=t.exec(e),r="~"===n[1],i=r?"span":"div",o=n[2];if(g[o]=g[i],v[o]=i,r||(c[o.toUpperCase()]={},c[o]={}),!p[o]){var a=p[i];a=Us({},a),delete a.removeEmptyAttrs,delete a.removeEmpty,p[o]=a}$s(g,function(e,t){e[i]&&(g[t]=e=Us({},g[t]),e[o]=e[i])})}))},k=function(t){var n=/^([+\-]?)(\w+)\[([^\]]+)\]$/;Ls[e.schema]=null,t&&$s(qs(t,","),function(e){var t,r,i=n.exec(e);i&&(r=i[1],t=r?g[i[2]]:g[i[2]]={"#comment":{}},t=g[i[2]],$s(qs(i[3],"|"),function(e){"-"===r?delete t[e]:t[e]={}}))})},T=function(e){var t,n=p[e];if(n)return n;for(t=m.length;t--;)if(n=m[t],n.pattern.test(e))return n};e.valid_elements?x(e.valid_elements):($s(r,function(e,t){p[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},g[t]=e.children}),"html5"!==e.schema&&$s(qs("strong/b em/i"),function(e){e=qs(e,"/"),p[e[1]].outputName=e[0]}),$s(qs("ol ul sub sup blockquote span font a table tbody tr strong em b i"),function(e){p[e]&&(p[e].removeEmpty=!0)}),$s(qs("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),function(e){p[e].paddEmpty=!0}),$s(qs("span"),function(e){p[e].removeEmptyAttrs=!0})),C(e.custom_elements),k(e.valid_children),_(e.extended_valid_elements),k("+ol[ul|ol],+ul[ul|ol]"),$s({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},function(e,t){p[t]&&(p[t].parentsRequired=qs(e))}),e.invalid_elements&&$s(zs(e.invalid_elements),function(e){p[e]&&delete p[e]}),T("span")||_("span[!data-mce-type|*]");var S=function(){return t},D=function(){return n},E=function(){return l},N=function(){return s},A=function(){return c},R=function(){return f},P=function(){return h};return{children:g,elements:p,getValidStyles:S,getValidClasses:E,getBlockElements:A,getInvalidStyles:D,getShortEndedElements:function(){return a},getTextBlockElements:R,getTextInlineElements:P,getBoolAttrs:N,getElementRule:T,getSelfClosingElements:function(){return o},getNonEmptyElements:function(){return u},getMoveCaretBeforeOnEnterElements:function(){return d},getWhiteSpaceElements:function(){return i},getSpecialElements:function(){return b},isValidChild:function(e,t){var n=g[e.toLowerCase()];return!(!n||!n[t.toLowerCase()])},isValid:function(e,t){var n,r,i=T(e);if(i){if(!t)return!0;if(i.attributes[t])return!0;if(n=i.attributePatterns)for(r=n.length;r--;)if(n[r].pattern.test(e))return!0}return!1},getCustomElements:function(){return v},addValidElements:_,setValidElements:x,addCustomElements:C,addValidChildren:k}}function b(e,t){var n,r,i,o,a=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,s=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,l=/\s*([^:]+):\s*([^;]+);?/g,c=/\s+$/,u={};for(e=e||{},t&&(i=t.getValidStyles(),o=t.getInvalidStyles()),r="\\\" \\' \\; \\: ; : \ufeff".split(" "),n=0;n<r.length;n++)u[r[n]]="\ufeff"+n,u["\ufeff"+n]=r[n];return{toHex:function(e){return e.replace(a,Gs)},parse:function(t){var r,i,o,d,f={},h=e.url_converter,p=e.url_converter_scope||this,g=function(e,t,r){var i,o,a,s;if((i=f[e+"-top"+t])&&(o=f[e+"-right"+t])&&(a=f[e+"-bottom"+t])&&(s=f[e+"-left"+t])){var l=[i,o,a,s];for(n=l.length-1;n--&&l[n]===l[n+1];);n>-1&&r||(f[e+t]=-1===n?l[0]:l.join(" "),delete f[e+"-top"+t],delete f[e+"-right"+t],delete f[e+"-bottom"+t],delete f[e+"-left"+t])}},m=function(e){var t,n=f[e];if(n){for(n=n.split(" "),t=n.length;t--;)if(n[t]!==n[0])return!1;return f[e]=n[0],!0}},v=function(e){return d=!0,u[e]},b=function(e,t){return d&&(e=e.replace(/\uFEFF[0-9]/g,function(e){return u[e]})),t||(e=e.replace(/\\([\'\";:])/g,"$1")),e},y=function(e){return String.fromCharCode(parseInt(e.slice(1),16))},w=function(e){return e.replace(/\\[0-9a-f]+/gi,y)},_=function(t,n,r,i,o,a){if(o=o||a)return o=b(o),"'"+o.replace(/\'/g,"\\'")+"'";if(n=b(n||r||i),!e.allow_script_urls){var s=n.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(s))return"";if(!e.allow_svg_data_urls&&/^data:image\/svg/i.test(s))return""}return h&&(n=h.call(p,n,"style")),"url('"+n.replace(/\'/g,"\\'")+"')"};if(t){for(t=t.replace(/[\u0000-\u001F]/g,""),t=t.replace(/\\[\"\';:\uFEFF]/g,v).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(e){return e.replace(/[;:]/g,v)});r=l.exec(t);)if(l.lastIndex=r.index+r[0].length,i=r[1].replace(c,"").toLowerCase(),o=r[2].replace(c,""),i&&o){if(i=w(i),o=w(o),-1!==i.indexOf("\ufeff")||-1!==i.indexOf('"'))continue;if(!e.allow_script_urls&&("behavior"===i||/expression\s*\(|\/\*|\*\//.test(o)))continue;"font-weight"===i&&"700"===o?o="bold":"color"!==i&&"background-color"!==i||(o=o.toLowerCase()),o=o.replace(a,Gs),o=o.replace(s,_),f[i]=d?b(o,!0):o}g("border","",!0),g("border","-width"),g("border","-color"),g("border","-style"),g("padding",""),g("margin",""),function(e,t,n,r){m(t)&&m(n)&&m(r)&&(f[e]=f[t]+" "+f[n]+" "+f[r],delete f[t],delete f[n],delete f[r])}("border","border-width","border-style","border-color"),"medium none"===f.border&&delete f.border,"none"===f["border-image"]&&delete f["border-image"]}return f},serialize:function(e,t){var n,r,a="",s=function(t){var n,r,o,s;if(n=i[t])for(r=0,o=n.length;r<o;r++)t=n[r],(s=e[t])&&(a+=(a.length>0?" ":"")+t+": "+s+";")};if(t&&i)s("*"),s(t);else for(n in e)!(r=e[n])||o&&!function(e,t){var n;return(!(n=o["*"])||!n[e])&&(!(n=o[t])||!n[e])}(n,t)||(a+=(a.length>0?" ":"")+n+": "+r+";");return a}}}function y(e,t){var n=this;void 0===t&&(t={});var r,i={},o=window,a={},s=0,l=g(e),c=[],u=t.schema?t.schema:v({}),d=b({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),f=t.ownEvents?new Ut(t.proxy):Ut.Event,h=u.getBlockElements(),p=Mr.overrideDefaults(function(){return{context:e,element:Ne.getRoot()}}),w=function(e){if("string"==typeof e)return!!h[e];if(e){var t=e.nodeType;if(t)return!(1!==t||!h[e.nodeName])}return!1},_=function(t){if(t&&e&&"string"==typeof t){var n=e.getElementById(t);return n&&n.id!==t?e.getElementsByName(t)[1]:n}return t},x=function(e){return"string"==typeof e&&(e=_(e)),p(e)},C=function(e,t,n){var i,o,a=x(e);return a.length&&(i=r[t],o=i&&i.get?i.get(a,t):a.attr(t)),void 0===o&&(o=n||""),o},k=function(e){var t=_(e);return t?t.attributes:[]},T=function(e,n,i){var o,a;""===i&&(i=null);var s=x(e);o=s.attr(n),s.length&&(a=r[n],a&&a.set?a.set(s,i,n):s.attr(n,i),o!==i&&t.onSetAttrib&&t.onSetAttrib({attrElm:s,attrName:n,attrValue:i}))},S=function(t,n){if(!Js||1!==t.nodeType||n)return t.cloneNode(n);if(!n){var r=e.createElement(t.nodeName);return Ks(k(t),function(e){T(r,e.nodeName,C(t,e.nodeName))}),r}return null},D=function(){return t.root_element||e.body},E=function(e){var t=e||o,n=t.document,r=n.documentElement;return{x:t.pageXOffset||r.scrollLeft,y:t.pageYOffset||r.scrollTop,w:t.innerWidth||r.clientWidth,h:t.innerHeight||r.clientHeight}},N=function(t,n){return _a.getPos(e.body,_(t),n)},A=function(e,n,r){var i=x(e).css(n,r);t.update_styles&&tl(d,i)},R=function(e,n){var r=x(e).css(n);t.update_styles&&tl(d,r)},P=function(e,t,n){var r=x(e);return n?r.css(t):(t=t.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}),"float"===t&&(t=Ct.ie&&Ct.ie<12?"styleFloat":"cssFloat"),r[0]&&r[0].style?r[0].style[t]:void 0)},O=function(e){var t,n;return e=_(e),t=P(e,"width"),n=P(e,"height"),-1===t.indexOf("px")&&(t=0),-1===n.indexOf("px")&&(n=0),{w:parseInt(t,10)||e.offsetWidth||e.clientWidth,h:parseInt(n,10)||e.offsetHeight||e.clientHeight}},I=function(e){var t,n;return e=_(e),t=N(e),n=O(e),{x:t.x,y:t.y,w:n.w,h:n.h}},M=function(e,t){var n;if(!e)return!1;if(!Array.isArray(e)){if("*"===t)return 1===e.nodeType;if(Qs.test(t)){var r=t.toLowerCase().split(/,/),i=e.nodeName.toLowerCase();for(n=r.length-1;n>=0;n--)if(r[n]===i)return!0;return!1}if(e.nodeType&&1!==e.nodeType)return!1}var o=Array.isArray(e)?e:[e];return qn(t,o[0].ownerDocument||o[0],null,o).length>0},j=function(e,t,n,r){var i,o=[],a=_(e);for(r=void 0===r,n=n||("BODY"!==D().nodeName?D().parentNode:null),gr.is(t,"string")&&(i=t,t="*"===t?function(e){return 1===e.nodeType}:function(e){return M(e,i)});a&&a!==n&&a.nodeType&&9!==a.nodeType;){if(!t||"function"==typeof t&&t(a)){if(!r)return[a];o.push(a)}a=a.parentNode}return r?o:null},B=function(e,t,n){var r=j(e,t,n,!1);return r&&r.length>0?r[0]:null},L=function(e,t,n){var r=t;if(e)for("string"==typeof t&&(r=function(e){return M(e,t)}),e=e[n];e;e=e[n])if("function"==typeof r&&r(e))return e;return null},F=function(e,t){return L(e,t,"nextSibling")},H=function(e,t){return L(e,t,"previousSibling")},$=function(n,r){return qn(n,_(r)||t.root_element||e,[])},U=function(e,t,r){var i,o="string"==typeof e?_(e):e;if(!o)return!1;if(gr.isArray(o)&&(o.length||0===o.length))return i=[],Ks(o,function(e,n){e&&("string"==typeof e&&(e=_(e)),i.push(t.call(r,e,n)))}),i;var a=r||n;return t.call(a,o)},z=function(e,t){x(e).each(function(e,n){Ks(t,function(e,t){T(n,t,e)})})},W=function(e,t){var n=x(e);Js?n.each(function(e,n){if(!1!==n.canHaveHTML){for(;n.firstChild;)n.removeChild(n.firstChild);try{n.innerHTML="<br>"+t,n.removeChild(n.firstChild)}catch(e){Mr("<div></div>").html("<br>"+t).contents().slice(1).appendTo(n)}return t}}):n.html(t)},q=function(t,n,r,i,o){return U(t,function(t){var a="string"==typeof n?e.createElement(n):n;return z(a,r),i&&("string"!=typeof i&&i.nodeType?a.appendChild(i):"string"==typeof i&&W(a,i)),o?a:t.appendChild(a)})},V=function(t,n,r){return q(e.createElement(t),t,n,r,!0)},Y=Bs.decode,G=Bs.encodeAllRaw,K=function(e,t,n){var r,i="";i+="<"+e;for(r in t)t.hasOwnProperty(r)&&null!==t[r]&&void 0!==t[r]&&(i+=" "+r+'="'+G(t[r])+'"');return void 0!==n?i+">"+n+"</"+e+">":i+" />"},X=function(t){var n,r=e.createElement("div"),i=e.createDocumentFragment();for(t&&(r.innerHTML=t);n=r.firstChild;)i.appendChild(n);return i},J=function(e,t){var n=x(e);return t?n.each(function(){for(var e;e=this.firstChild;)3===e.nodeType&&0===e.data.length?this.removeChild(e):this.parentNode.insertBefore(e,this)}).remove():n.remove(),n.length>1?n.toArray():n[0]},Q=function(e){return U(e,function(e){var t,n=e.attributes;for(t=n.length-1;t>=0;t--)e.removeAttributeNode(n.item(t))})},Z=function(e){return d.parse(e)},ee=function(e,t){return d.serialize(e,t)},te=function(t){var n,r;if(Ne!==y.DOM&&e===document){if(i[t])return;i[t]=!0}r=e.getElementById("mceDefaultStyles"),r||(r=e.createElement("style"),r.id="mceDefaultStyles",r.type="text/css",n=e.getElementsByTagName("head")[0],n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r)),r.styleSheet?r.styleSheet.cssText+=t:r.appendChild(e.createTextNode(t))},ne=function(t){var n;if(Ne!==y.DOM&&e===document)return void y.DOM.loadCSS(t);t||(t=""),n=e.getElementsByTagName("head")[0],Ks(t.split(","),function(e){var t;e=gr._addCacheSuffix(e),a[e]||(a[e]=!0,t=V("link",{rel:"stylesheet",href:e}),n.appendChild(t))})},re=function(e,t,n){x(e).toggleClass(t,n).each(function(){""===this.className&&Mr(this).attr("class",null)})},ie=function(e,t){x(e).addClass(t)},oe=function(e,t){re(e,t,!1)},ae=function(e,t){return x(e).hasClass(t)},se=function(e){x(e).show()},le=function(e){x(e).hide()},ce=function(e){return"none"===x(e).css("display")},ue=function(e){return(e||"mce_")+s++},de=function(e){var t="string"==typeof e?_(e):e;return bs.isElement(t)?t.outerHTML:Mr("<div></div>").append(Mr(t).clone()).html()},fe=function(e,t){x(e).each(function(){try{if("outerHTML"in this)return void(this.outerHTML=t)}catch(e){}J(Mr(this).html(t),!0)})},he=function(e,t){var n=_(t);return U(e,function(e){var t,r;return t=n.parentNode,r=n.nextSibling,r?t.insertBefore(e,r):t.appendChild(e),e})},pe=function(e,t,n){return U(t,function(t){return gr.is(t,"array")&&(e=e.cloneNode(!0)),n&&Ks(Xs(t.childNodes),function(t){e.appendChild(t)}),t.parentNode.replaceChild(e,t)})},ge=function(e,t){var n;return e.nodeName!==t.toUpperCase()&&(n=V(t),Ks(k(e),function(t){T(n,t.nodeName,C(e,t.nodeName))}),pe(n,e,!0)),n||e},me=function(e,t){for(var n,r=e;r;){for(n=t;n&&r!==n;)n=n.parentNode;if(r===n)break;r=r.parentNode}return!r&&e.ownerDocument?e.ownerDocument.documentElement:r},ve=function(e){return d.toHex(gr.trim(e))},be=function(e,t){var n,r,i,o,a,s,l=0;if(e=e.firstChild){a=new m(e,e.parentNode),t=t||(u?u.getNonEmptyElements():null),o=u?u.getWhiteSpaceElements():{};do{if(i=e.nodeType,bs.isElement(e)){var c=e.getAttribute("data-mce-bogus");if(c){e=a.next("all"===c);continue}if(s=e.nodeName.toLowerCase(),t&&t[s]){if("br"===s){l++,e=a.next();continue}return!1}for(r=k(e),n=r.length;n--;)if("name"===(s=r[n].nodeName)||"data-mce-bookmark"===s)return!1}if(8===i)return!1;if(3===i&&!Zs.test(e.nodeValue))return!1;if(3===i&&e.parentNode&&o[e.parentNode.nodeName]&&Zs.test(e.nodeValue))return!1;e=a.next()}while(e)}return l<=1},ye=function(){return e.createRange()},we=function(e,t,n){var r,i,o,a=ye();if(e&&t)return a.setStart(e.parentNode,nl(e)),a.setEnd(t.parentNode,nl(t)),r=a.extractContents(),a=ye(),a.setStart(t.parentNode,nl(t)+1),a.setEnd(e.parentNode,nl(e)+1),i=a.extractContents(),o=e.parentNode,o.insertBefore(xs.trimNode(Ne,r),e),n?o.insertBefore(n,e):o.insertBefore(t,e),o.insertBefore(xs.trimNode(Ne,i),e),J(e),n||t},_e=function(n,r,i,a){if(gr.isArray(n)){for(var s=n.length;s--;)n[s]=_e(n[s],r,i,a);return n}return!t.collect||n!==e&&n!==o||c.push([n,r,i,a]),f.bind(n,r,i,a||Ne)},xe=function(t,n,r){var i;if(gr.isArray(t)){for(i=t.length;i--;)t[i]=xe(t[i],n,r);return t}if(c&&(t===e||t===o))for(i=c.length;i--;){var a=c[i];t!==a[0]||n&&n!==a[1]||r&&r!==a[2]||f.unbind(a[0],a[1],a[2])}return f.unbind(t,n,r)},Ce=function(e,t,n){return f.fire(e,t,n)},ke=function(e){if(e&&bs.isElement(e)){var t=e.getAttribute("data-mce-contenteditable");return t&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null}return null},Te=function(e){for(var t=D(),n=null;e&&e!==t&&null===(n=ke(e));e=e.parentNode);return n},Se=function(){if(c)for(var e=c.length;e--;){var t=c[e];f.unbind(t[0],t[1],t[2])}qn.setDocument&&qn.setDocument()},De=function(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1},Ee=function(e){return"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset},Ne={doc:e,settings:t,win:o,files:a,stdMode:!0,boxModel:!0,styleSheetLoader:l,boundEvents:c,styles:d,schema:u,events:f,isBlock:w,$:p,$$:x,root:null,clone:S,getRoot:D,getViewPort:E,getRect:I,getSize:O,getParent:B,getParents:j,get:_,getNext:F,getPrev:H,select:$,is:M,add:q,create:V,createHTML:K,createFragment:X,remove:J,setStyle:A,getStyle:P,setStyles:R,removeAllAttribs:Q,setAttrib:T,setAttribs:z,getAttrib:C,getPos:N,parseStyle:Z,serializeStyle:ee,addStyle:te,loadCSS:ne,addClass:ie,removeClass:oe,hasClass:ae,toggleClass:re,show:se,hide:le,isHidden:ce,uniqueId:ue,setHTML:W,getOuterHTML:de,setOuterHTML:fe,decode:Y,encode:G,insertAfter:he,replace:pe,rename:ge,findCommonAncestor:me,toHex:ve,run:U,getAttribs:k,isEmpty:be,createRng:ye,nodeIndex:nl,split:we,bind:_e,unbind:xe,fire:Ce,getContentEditable:ke,getContentEditableParent:Te,destroy:Se,isChildOf:De,dumpRng:Ee};return r=el(d,t,function(){return Ne}),Ne}function w(){var e=this,t=[],n={},r={},i=[],o=function(e){if(r[e])return r[e].instance},a=function(e){var t;return r[e]&&(t=r[e].dependencies),t||[]},s=function(e,t){var r=w.language;if(r&&!1!==w.languageLoad){if(t)if(t=","+t+",",-1!==t.indexOf(","+r.substr(0,2)+","))r=r.substr(0,2);else if(-1===t.indexOf(","+r+","))return;ll.ScriptLoader.add(n[e]+"/langs/"+r+".js")}},l=function(e,n,o){t.push(n),r[e]={instance:n,dependencies:o};var a=ze(i,function(t){return t.name===e});return i=a.fail,cl(a.pass,function(e){e.callback()}),n},c=function(e){delete n[e],delete r[e]},u=function(e,t){return"object"==typeof t?t:"string"==typeof e?{prefix:"",resource:t,suffix:""}:{prefix:e.prefix,resource:t,suffix:e.suffix}},d=function(t,n){var r=e.urls[t];cl(n,function(e){ll.ScriptLoader.add(r+"/"+e)})},f=function(e,t,n,r){var i=a(e);cl(i,function(e){var n=u(t,e);h(n.resource,n,void 0,void 0)}),n&&(r?n.call(r):n.call(ll))},h=function(e,t,i,o,a){if(!n[e]){var s="string"==typeof t?t:t.prefix+t.resource+t.suffix;0!==s.indexOf("/")&&-1===s.indexOf("://")&&(s=w.baseURL+"/"+s),n[e]=s.substring(0,s.lastIndexOf("/")),r[e]?f(e,t,i,o):ll.ScriptLoader.add(s,function(){return f(e,t,i,o)},o,a)}};return{items:t,urls:n,lookup:r,_listeners:i,get:o,dependencies:a,requireLangPack:s,add:l,remove:c,createUrl:u,addComponents:d,load:h,waitFor:function(e,t){r.hasOwnProperty(e)?t():i.push({name:e,callback:t})}}}function _(e,t,n){var r=n||!1,i=function(){t(),r=!0},o=function(){e(),r=!1};return{on:i,off:o,toggle:function(){(r?o:i)()},isOn:function(){return r}}}function x(e,t,n,r,i){return e(n,r)?Se.some(n):Ie(i)&&i(n)?Se.none():t(n,r,i)}function C(e,t,n){var r=function(){return nd(e),0===t},i=function(){return nd(e)?t>=e.data.length:t>=e.childNodes.length},o=function(){var n;return n=ad(e.ownerDocument),n.setStart(e,t),n.setEnd(e,t),n},a=function(){return n||(n=gd(C(e,t))),n},s=function(){return a().length>0},l=function(n){return n&&e===n.container()&&t===n.offset()},c=function(n){return od(e,n?t-1:t)};return{container:Zc.constant(e),offset:Zc.constant(t),toRange:o,getClientRects:a,isVisible:s,isAtStart:r,isAtEnd:i,isEqual:l,getNode:c}}function k(e){var t=Dc();Sc(e,t);var n=Tc(e,t);return{register:function(e,n){t.register(e,n)},annotate:function(n,r){t.lookup(n).each(function(t){Yg(e,n,t,r)})},annotationChanged:function(e,t){n.addListener(e,t)},remove:function(t){_c(e,Se.some(t)).each(function(e){var t=e.elements;$e(t,Tl.unwrap)})},getAll:function(t){var n=kc(e,t);return zi(n,function(e){return He(e,function(e){return e.dom()})})}}}function T(e){var t,n,r,i,o,a=[];return e=e||{},t=e.indent,n=Tm(e.indent_before||""),r=Tm(e.indent_after||""),i=Bs.getEncodeFunc(e.entity_encoding||"raw",e.entities),o="html"===e.element_format,{start:function(e,s,l){var c,u,d,f;if(t&&n[e]&&a.length>0&&(f=a[a.length-1],f.length>0&&"\n"!==f&&a.push("\n")),a.push("<",e),s)for(c=0,u=s.length;c<u;c++)d=s[c],a.push(" ",d.name,'="',i(d.value,!0),'"');a[a.length]=!l||o?">":" />",l&&t&&r[e]&&a.length>0&&(f=a[a.length-1],f.length>0&&"\n"!==f&&a.push("\n"))},end:function(e){var n;a.push("</",e,">"),t&&r[e]&&a.length>0&&(n=a[a.length-1],n.length>0&&"\n"!==n&&a.push("\n"))},text:function(e,t){e.length>0&&(a[a.length]=t?e:i(e))},cdata:function(e){a.push("<![CDATA[",e,"]]>")},comment:function(e){a.push("\x3c!--",e,"--\x3e")},pi:function(e,n){n?a.push("<?",e," ",i(n),"?>"):a.push("<?",e,"?>"),t&&a.push("\n")},doctype:function(e){a.push("<!DOCTYPE",e,">",t?"\n":"")},reset:function(){a.length=0},getContent:function(){return a.join("").replace(/\n$/,"")}}}function S(e,t){void 0===t&&(t=v());var n=T(e);return e=e||{},e.validate=!("validate"in e)||e.validate,{serialize:function(r){var i,o;o=e.validate,i={3:function(e){n.text(e.value,e.raw)},8:function(e){n.comment(e.value)},7:function(e){n.pi(e.name,e.value)},10:function(e){n.doctype(e.value)},4:function(e){n.cdata(e.value)},11:function(e){if(e=e.firstChild)do{a(e)}while(e=e.next)}},n.reset();var a=function(e){var r,s,l,c,u,d,f,h,p,g=i[e.type];if(g)g(e);else{if(r=e.name,s=e.shortEnded,l=e.attributes,o&&l&&l.length>1&&(d=[],d.map={},p=t.getElementRule(e.name))){for(f=0,h=p.attributesOrder.length;f<h;f++)(c=p.attributesOrder[f])in l.map&&(u=l.map[c],d.map[c]=u,d.push({name:c,value:u}));for(f=0,h=l.length;f<h;f++)(c=l[f].name)in d.map||(u=l.map[c],d.map[c]=u,d.push({name:c,value:u}));l=d}if(n.start(e.name,l,s),!s){if(e=e.firstChild)do{a(e)}while(e=e.next);n.end(r)}}};return 1!==r.type||e.inner?i[11](r):a(r),n.getContent()}}}function D(e){var t,n,r,i,o={state:{},exec:{},value:{}},a=e.settings;e.on("PreInit",function(){t=e.dom,n=e.selection,a=e.settings,r=e.formatter});var s=function(t,n,r,i){var a,s,l=!1;if(!e.removed){if(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(t)||i&&i.skip_focus?Ax.restore(e):e.focus(),i=e.fire("BeforeExecCommand",{command:t,ui:n,value:r}),i.isDefaultPrevented())return!1;if(s=t.toLowerCase(),a=o.exec[s])return a(s,n,r),e.fire("ExecCommand",{command:t,ui:n,value:r}),!0;if(Ox(e.plugins,function(i){if(i.execCommand&&i.execCommand(t,n,r))return e.fire("ExecCommand",{command:t,ui:n,value:r}),l=!0,!1}),l)return l;if(e.theme&&e.theme.execCommand&&e.theme.execCommand(t,n,r))return e.fire("ExecCommand",{command:t,ui:n,value:r}),!0;try{l=e.getDoc().execCommand(t,n,r)}catch(e){}return!!l&&(e.fire("ExecCommand",{command:t,ui:n,value:r}),!0)}},l=function(t){var n;if(!e.quirks.isHidden()&&!e.removed){if(t=t.toLowerCase(),n=o.state[t])return n(t);try{return e.getDoc().queryCommandState(t)}catch(e){}return!1}},c=function(t){var n;if(!e.quirks.isHidden()&&!e.removed){if(t=t.toLowerCase(),n=o.value[t])return n(t);try{return e.getDoc().queryCommandValue(t)}catch(e){}}},u=function(e,t){t=t||"exec",Ox(e,function(e,n){Ox(n.toLowerCase().split(","),function(n){o[t][n]=e})})},d=function(t,n,r){t=t.toLowerCase(),o.exec[t]=function(t,i,o,a){return n.call(r||e,i,o,a)}},f=function(t){if(t=t.toLowerCase(),o.exec[t])return!0;try{return e.getDoc().queryCommandSupported(t)}catch(e){}return!1},h=function(t,n,r){t=t.toLowerCase(),o.state[t]=function(){return n.call(r||e)}},p=function(t,n,r){t=t.toLowerCase(),o.value[t]=function(){return n.call(r||e)}};Ix(this,{execCommand:s,queryCommandState:l,queryCommandValue:c,queryCommandSupported:f,addCommands:u,addCommand:d,addQueryStateHandler:h,addQueryValueHandler:p,hasCustomCommand:function(e){return e=e.toLowerCase(),!!o.exec[e]}});var g=function(t,n,r){return void 0===n&&(n=!1),void 0===r&&(r=null),e.getDoc().execCommand(t,n,r)},m=function(e){return r.match(e)},v=function(t,n){r.toggle(t,n?{value:n}:void 0),e.nodeChanged()},b=function(e){
i=n.getBookmark(e)},y=function(){n.moveToBookmark(i)};u({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){e.undoManager.add()},"Cut,Copy,Paste":function(t){var n,r=e.getDoc();try{g(t)}catch(e){n=!0}if("paste"!==t||r.queryCommandEnabled(t)||(n=!0),n||!r.queryCommandSupported(t)){var i=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");Ct.mac&&(i=i.replace(/Ctrl\+/g,"+")),e.notificationManager.open({text:i,type:"error"})}},unlink:function(){if(n.isCollapsed()){var t=e.dom.getParent(e.selection.getStart(),"a");return void(t&&e.dom.remove(t,!0))}r.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(e){var t=e.substring(7);"full"===t&&(t="justify"),Ox("left,center,right,justify".split(","),function(e){t!==e&&r.remove("align"+e)}),"none"!==t&&v("align"+t)},"InsertUnorderedList,InsertOrderedList":function(e){var r,i;g(e),(r=t.getParent(n.getNode(),"ol,ul"))&&(i=r.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(i.nodeName)&&(b(),t.split(i,r),y()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){v(e)},"ForeColor,HiliteColor":function(e,t,n){v(e,n)},FontName:function(t,n,r){S_(e,r)},FontSize:function(t,n,r){E_(e,r)},RemoveFormat:function(e){r.remove(e)},mceBlockQuote:function(){v("blockquote")},FormatBlock:function(e,t,n){return v(n||"p")},mceCleanup:function(){var t=n.getBookmark();e.setContent(e.getContent()),n.moveToBookmark(t)},mceRemoveNode:function(t,r,i){var o=i||n.getNode();o!==e.getBody()&&(b(),e.dom.remove(o,!0),y())},mceSelectNodeDepth:function(r,i,o){var a=0;t.getParent(n.getNode(),function(e){if(1===e.nodeType&&a++===o)return n.select(e),!1},e.getBody())},mceSelectNode:function(e,t,r){n.select(r)},mceInsertContent:function(t,n,r){jm.insertAtCaret(e,r)},mceInsertRawHTML:function(t,r,i){var o=e.getContent();n.setContent("tiny_mce_marker"),e.setContent(o.replace(/tiny_mce_marker/g,function(){return i}))},mceToggleFormat:function(e,t,n){v(n)},mceSetContent:function(t,n,r){e.setContent(r)},"Indent,Outdent":function(t){Px(e,t)},mceRepaint:function(){},InsertHorizontalRule:function(){e.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){e.hasVisual=!e.hasVisual,e.addVisual()},mceReplaceContent:function(t,r,i){e.execCommand("mceInsertContent",!1,i.replace(/\{\$selection\}/g,n.getContent({format:"text"})))},mceInsertLink:function(e,i,o){var a;"string"==typeof o&&(o={href:o}),a=t.getParent(n.getNode(),"a"),o.href=o.href.replace(" ","%20"),a&&o.href||r.remove("link"),o.href&&r.apply("link",o,a)},selectAll:function(){var e=t.getParent(n.getStart(),bs.isContentEditableTrue);if(e){var r=t.createRng();r.selectNodeContents(e),n.setRng(r)}},delete:function(){p_.deleteCommand(e)},forwardDelete:function(){p_.forwardDeleteCommand(e)},mceNewDocument:function(){e.setContent("")},InsertLineBreak:function(t,n,r){return ix.insert(e,r),!0}});var w=function(e){return function(){var i=n.isCollapsed()?[t.getParent(n.getNode(),t.isBlock)]:n.getSelectedBlocks(),o=Mx(i,function(t){return!!r.matchNode(t,e)});return-1!==jx(o,!0)}};u({JustifyLeft:w("alignleft"),JustifyCenter:w("aligncenter"),JustifyRight:w("alignright"),JustifyFull:w("alignjustify"),"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){return m(e)},mceBlockQuote:function(){return m("blockquote")},Outdent:function(){var e;if(a.inline_styles){if((e=t.getParent(n.getStart(),t.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return!0;if((e=t.getParent(n.getEnd(),t.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return!0}return l("InsertUnorderedList")||l("InsertOrderedList")||!a.inline_styles&&!!t.getParent(n.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(e){var r=t.getParent(n.getNode(),"ul,ol");return r&&("insertunorderedlist"===e&&"UL"===r.tagName||"insertorderedlist"===e&&"OL"===r.tagName)}},"state"),u({Undo:function(){e.undoManager.undo()},Redo:function(){e.undoManager.redo()}}),p("FontName",function(){return D_(e)},this),p("FontSize",function(){return N_(e)},this)}function E(e){var t=this,n={},r=[],i=function(e){var t,n,r={};cC(uC(e,"+"),function(e){e in fC?r[e]=!0:/^[0-9]{2,}$/.test(e)?r.keyCode=parseInt(e,10):(r.charCode=e.charCodeAt(0),r.keyCode=dC[e]||e.toUpperCase().charCodeAt(0))}),t=[r.keyCode];for(n in fC)r[n]?t.push(n):r[n]=!1;return r.id=t.join(","),r.access&&(r.alt=!0,Ct.mac?r.ctrl=!0:r.shift=!0),r.meta&&(Ct.mac?r.meta=!0:(r.ctrl=!0,r.meta=!1)),r},o=function(t,n,r,o){var a;return a=gr.map(uC(t,">"),i),a[a.length-1]=gr.extend(a[a.length-1],{func:r,scope:o||e}),gr.extend(a[0],{desc:e.translate(n),subpatterns:a.slice(1)})},a=function(e){return e.altKey||e.ctrlKey||e.metaKey},s=function(e){return"keydown"===e.type&&e.keyCode>=112&&e.keyCode<=123},l=function(e,t){return!!t&&(t.ctrl===e.ctrlKey&&t.meta===e.metaKey&&(t.alt===e.altKey&&t.shift===e.shiftKey&&(!!(e.keyCode===t.keyCode||e.charCode&&e.charCode===t.charCode)&&(e.preventDefault(),!0))))},c=function(e){return e.func?e.func.call(e.scope):null};e.on("keyup keypress keydown",function(e){!a(e)&&!s(e)||e.isDefaultPrevented()||(cC(n,function(t){if(l(e,t))return r=t.subpatterns.slice(0),"keydown"===e.type&&c(t),!0}),l(e,r[0])&&(1===r.length&&"keydown"===e.type&&c(r[0]),r.shift()))}),t.add=function(t,r,i,a){var s;return s=i,"string"==typeof i?i=function(){e.execCommand(s,!1,null)}:gr.isArray(s)&&(i=function(){e.execCommand(s[0],s[1],s[2])}),cC(uC(gr.trim(t.toLowerCase())),function(e){var t=o(e,r,i,a);n[t.id]=t}),!0},t.remove=function(e){var t=o(e);return!!n[t.id]&&(delete n[t.id],!0)}}function N(){var e=function(){throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,reposition:e,getArgs:e}}function A(e){var t=[],n=function(){var t=e.theme;return t&&t.getNotificationManagerImpl?t.getNotificationManagerImpl():N()},r=function(){return Se.from(t[0])},i=function(e,t){return!(e.type!==t.type||e.text!==t.text||e.progressBar||e.timeout||t.progressBar||t.timeout)},o=function(){t.length>0&&n().reposition(t)},a=function(e){t.push(e)},s=function(e){Ge(t,function(t){return t===e}).each(function(e){t.splice(e,1)})},l=function(r){if(!e.removed&&QC.isEditorAttachedToDom(e))return Ye(t,function(e){return i(n().getArgs(e),r)}).getOrThunk(function(){e.editorManager.setActive(e);var t=n().open(r,function(){s(t),o()});return a(t),o(),t})},c=function(){r().each(function(e){n().close(e),s(e),o()})},u=function(){return t};return function(e){e.on("SkinLoaded",function(){var t=e.settings.service_message;t&&l({text:t,type:"warning",timeout:0,icon:""})}),e.on("ResizeEditor ResizeWindow",function(){Rt.requestAnimationFrame(o)}),e.on("remove",function(){$e(t,function(e){n().close(e)})})}(e),{open:l,close:c,getNotifications:u}}function R(){var e=function(){throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,alert:e,confirm:e,close:e,getParams:e,setParams:e}}function P(e){var t=[],n=function(){var t=e.theme;return t&&t.getWindowManagerImpl?t.getWindowManagerImpl():R()},r=function(e,t){return function(){return t?t.apply(e,arguments):void 0}},i=function(t){e.fire("OpenWindow",{win:t})},o=function(t){e.fire("CloseWindow",{win:t})},a=function(e){t.push(e),i(e)},s=function(n){Ge(t,function(e){return e===n}).each(function(r){t.splice(r,1),o(n),0===t.length&&e.focus()})},l=function(){return Se.from(t[t.length-1])},c=function(t,r){e.editorManager.setActive(e),Ax.store(e);var i=n().open(t,r,s);return a(i),i},u=function(e,t,i){var o=n().alert(e,r(i||this,t),s);a(o)},d=function(e,t,i){var o=n().confirm(e,r(i||this,t),s);a(o)},f=function(){l().each(function(e){n().close(e),s(e)})},h=function(){return l().map(n().getParams).getOr(null)},p=function(e){l().each(function(t){n().setParams(t,e)})},g=function(){return t};return e.on("remove",function(){$e(t.slice(0),function(e){n().close(e)})}),{windows:t,open:c,alert:u,confirm:d,close:f,getParams:h,setParams:p,getWindows:g}}function O(){return new(ht.getOrDie("XMLHttpRequest"))}function I(e,t){var n={},r=function(e,t){return e?e.replace(/\/$/,"")+"/"+t.replace(/^\//,""):t},i=function(e,n,i,o){var a,s;a=new O,a.open("POST",t.url),a.withCredentials=t.credentials,a.upload.onprogress=function(e){o(e.loaded/e.total*100)},a.onerror=function(){i("Image upload failed due to a XHR Transport error. Code: "+a.status)},a.onload=function(){var e;return a.status<200||a.status>=300?void i("HTTP Error: "+a.status):(e=JSON.parse(a.responseText))&&"string"==typeof e.location?void n(r(t.basePath,e.location)):void i("Invalid JSON: "+a.responseText)},s=new FormData,s.append("file",e.blob(),e.filename()),a.send(s)},o=function(){return new kt(function(e){e([])})},a=function(e,t){return{url:t,blobInfo:e,status:!0}},s=function(e,t){return{url:"",blobInfo:e,status:!1,error:t}},l=function(e,t){gr.each(n[e],function(e){e(t)}),delete n[e]},c=function(t,n,r){return e.markPending(t.blobUri()),new kt(function(i){var o,c,u=function(){};try{var d=function(){o&&(o.close(),c=u)},f=function(n){d(),e.markUploaded(t.blobUri(),n),l(t.blobUri(),a(t,n)),i(a(t,n))},h=function(n){d(),e.removeFailed(t.blobUri()),l(t.blobUri(),s(t,n)),i(s(t,n))};c=function(e){e<0||e>100||(o||(o=r()),o.progressBar.value(e))},n(t,f,h,c)}catch(e){i(s(t,e.message))}})},u=function(e){return e===i},d=function(e){var t=e.blobUri();return new kt(function(e){n[t]=n[t]||[],n[t].push(e)})},f=function(n,r){return n=gr.grep(n,function(t){return!e.isUploaded(t.blobUri())}),kt.all(gr.map(n,function(n){return e.isPending(n.blobUri())?d(n):c(n,t.handler,r)}))},h=function(e,n){return!t.url&&u(t.handler)?o():f(e,n)};return t=gr.extend({credentials:!1,handler:i},t),{upload:h}}function M(e,t){return new(ht.getOrDie("Blob"))(e,t)}function j(){return new(ht.getOrDie("FileReader"))}function B(e){return new(ht.getOrDie("Uint8Array"))(e)}function L(e,t){var n={};return{findAll:function(r,i){var o;i||(i=Zc.constant(!0)),o=nr.filter(xk(r),function(t){var n=t.src;return!!Ct.fileApi&&(!t.hasAttribute("data-mce-bogus")&&(!t.hasAttribute("data-mce-placeholder")&&(!(!n||n===Ct.transparentSrc)&&(0===n.indexOf("blob:")?!e.isUploaded(n):0===n.indexOf("data:")&&i(t)))))});var a=nr.map(o,function(e){if(n[e.src])return new kt(function(t){n[e.src].then(function(n){if("string"==typeof n)return n;t({image:e,blobInfo:n.blobInfo})})});var r=new kt(function(n,r){_k(t,e,n,r)}).then(function(e){return delete n[e.image.src],e}).catch(function(t){return delete n[e.src],t});return n[e.src]=r,r});return kt.all(a)}}}function F(){var e=[],t=Zc.constant,n=function(e){return{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png"}[e.toLowerCase()]||"dat"},r=function(e,t,n,r){return i("object"==typeof e?e:{id:e,name:r,blob:t,base64:n})},i=function(e){var r,i;if(!e.blob||!e.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");return r=e.id||Sk.uuid("blobid"),i=e.name||r,{id:t(r),name:t(i),filename:t(i+"."+n(e.blob.type)),blob:t(e.blob),base64:t(e.base64),blobUri:t(e.blobUri||vt.createObjectURL(e.blob)),uri:t(e.uri)}},o=function(t){a(t.id())||e.push(t)},a=function(e){return s(function(t){return t.id()===e})},s=function(t){return nr.filter(e,t)[0]};return{create:r,add:o,get:a,getByUri:function(e){return s(function(t){return t.blobUri()===e})},findFirst:s,removeByUri:function(t){e=nr.filter(e,function(e){return e.blobUri()!==t||(vt.revokeObjectURL(e.blobUri()),!1)})},destroy:function(){nr.each(e,function(e){vt.revokeObjectURL(e.blobUri())}),e=[]}}}function H(){var e={},t=function(e,t){return{status:e,resultUri:t}},n=function(t){return t in e};return{hasBlobUri:n,getResultUri:function(t){var n=e[t];return n?n.resultUri:null},isPending:function(t){return!!n(t)&&1===e[t].status},isUploaded:function(t){return!!n(t)&&2===e[t].status},markPending:function(n){e[n]=t(1,null)},markUploaded:function(n,r){e[n]=t(2,r)},removeFailed:function(t){delete e[t]},destroy:function(){e={}}}}function $(e){var t,n,r=F(),i=e.settings,o=H(),a=function(t){return function(n){return e.selection?t(n):[]}},s=function(){return"?"+(new Date).getTime()},l=function(e,t,n){var r=0;do{-1!==(r=e.indexOf(t,r))&&(e=e.substring(0,r)+n+e.substr(r+t.length),r+=n.length-t.length+1)}while(-1!==r);return e},c=function(e,t,n){return e=l(e,'src="'+t+'"','src="'+n+'"'),e=l(e,'data-mce-src="'+t+'"','data-mce-src="'+n+'"')},u=function(t,n){nr.each(e.undoManager.data,function(e){"fragmented"===e.type?e.fragments=nr.map(e.fragments,function(e){return c(e,t,n)}):e.content=c(e.content,t,n)})},d=function(){return e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})},f=function(t,n){r.removeByUri(t.src),u(t.src,n),e.$(t).attr({src:i.images_reuse_filename?n+s():n,"data-mce-src":e.convertURL(n,"src")})},h=function(n){return t||(t=I(o,{url:i.images_upload_url,basePath:i.images_upload_base_path,credentials:i.images_upload_credentials,handler:i.images_upload_handler})),m().then(a(function(r){var i;return i=nr.map(r,function(e){return e.blobInfo}),t.upload(i,d).then(a(function(t){var i=nr.map(t,function(t,n){var i=r[n].image;return t.status&&!1!==e.settings.images_replace_blob_uris?f(i,t.url):t.error&&sk.uploadError(e,t.error),{element:i,status:t.status}});return n&&n(i),i}))}))},p=function(e){if(!1!==i.automatic_uploads)return h(e)},g=function(e){return!i.images_dataimg_filter||i.images_dataimg_filter(e)},m=function(){return n||(n=L(o,r)),n.findAll(e.getBody(),g).then(a(function(t){return t=nr.filter(t,function(t){return"string"!=typeof t||(sk.displayError(e,t),!1)}),nr.each(t,function(e){u(e.image.src,e.blobInfo.blobUri()),e.image.src=e.blobInfo.blobUri(),e.image.removeAttribute("data-mce-src")}),t}))},v=function(){r.destroy(),o.destroy(),n=t=null},b=function(t){return t.replace(/src="(blob:[^"]+)"/g,function(t,n){var i=o.getResultUri(n);if(i)return'src="'+i+'"';var a=r.getByUri(n);return a||(a=nr.reduce(e.editorManager.get(),function(e,t){return e||t.editorUpload&&t.editorUpload.blobCache.getByUri(n)},null)),a?'src="data:'+a.blob().type+";base64,"+a.base64()+'"':t})};return e.on("setContent",function(){!1!==e.settings.automatic_uploads?p():m()}),e.on("RawSaveContent",function(e){e.content=b(e.content)}),e.on("getContent",function(e){e.source_view||"raw"===e.format||(e.content=b(e.content))}),e.on("PostRender",function(){e.parser.addNodeFilter("img",function(e){nr.each(e,function(e){var t=e.attr("src");if(!r.getByUri(t)){var n=o.getResultUri(t);n&&e.attr("src",n)}})})}),{blobCache:r,uploadImages:h,uploadImagesAuto:p,scanForImages:m,destroy:v}}function U(e){var t,n=[],r=function(t){var r,i;if(i=e.$(t).parentsUntil(e.getBody()).add(t),i.length===n.length){for(r=i.length;r>=0&&i[r]===n[r];r--);if(-1===r)return n=i,!0}return n=i,!1};"onselectionchange"in e.getDoc()||e.on("NodeChange Click MouseUp KeyUp Focus",function(n){var r,i;r=e.selection.getRng(),i={startContainer:r.startContainer,startOffset:r.startOffset,endContainer:r.endContainer,endOffset:r.endOffset},"nodechange"!==n.type&&R_.isEq(i,t)||e.fire("SelectionChange"),t=i}),e.on("contextmenu",function(){e.fire("SelectionChange")}),e.on("SelectionChange",function(){var t=e.selection.getStart(!0);!t||!Ct.range&&e.selection.isCollapsed()||Hk(e)&&!r(t)&&e.dom.isChildOf(t,e.getBody())&&e.nodeChanged({selectionChange:!0})}),e.on("MouseUp",function(t){!t.isDefaultPrevented()&&Hk(e)&&("IMG"===e.selection.getNode().nodeName?Rt.setEditorTimeout(e,function(){e.nodeChanged()}):e.nodeChanged())}),this.nodeChanged=function(t){var n,r,i,o=e.selection;e.initialized&&o&&!e.settings.disable_nodechange&&!e.readonly&&(i=e.getBody(),n=o.getStart(!0)||i,n.ownerDocument===e.getDoc()&&e.dom.isChildOf(n,i)||(n=i),r=[],e.dom.getParent(n,function(e){if(e===i)return!0;r.push(e)}),t=t||{},t.element=n,t.parents=r,e.fire("NodeChange",t))}}function z(e,t){void 0===t&&(t=v());var n=function(){};e=e||{},!1!==e.fix_self_closing&&(e.fix_self_closing=!0);var r=e.comment?e.comment:n,i=e.cdata?e.cdata:n,o=e.text?e.text:n,a=e.start?e.start:n,s=e.end?e.end:n,l=e.pi?e.pi:n,c=e.doctype?e.doctype:n;return{parse:function(n){var u,d,f,h,p,g,m,v,b,y,w,_,x,C,k,T,S,D,E,N,A,R,P,O,I,M,j,B,L,F,H=0,$=[],U=0,z=Bs.decode,W=gr.makeMap("src,href,data,background,formaction,poster,xlink:href"),q=/((java|vb)script|mhtml):/i,V=function(e){var t,n;for(t=$.length;t--&&$[t].name!==e;);if(t>=0){for(n=$.length-1;n>=t;n--)e=$[n],e.valid&&s(e.name);$.length=t}},Y=function(t,n,r,i,o){var a,s,l=/[\s\u0000-\u001F]+/g;if(n=n.toLowerCase(),r=n in w?n:z(r||i||o||""),x&&!v&&!1===XT(n)){if(!(a=D[n])&&E){for(s=E.length;s--&&(a=E[s],!a.pattern.test(n)););-1===s&&(a=null)}if(!a)return;if(a.validValues&&!(r in a.validValues))return}if(W[n]&&!e.allow_script_urls){var c=r.replace(l,"");try{c=decodeURIComponent(c)}catch(e){c=unescape(c)}if(q.test(c))return;if(QT(e,c))return}v&&(n in W||0===n.indexOf("on"))||(h.map[n]=r,h.push({name:n,value:r}))};for(M=new RegExp("<(?:(?:!--([\\w\\W]*?)--\x3e)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)>)|(?:([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),j=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,y=t.getShortEndedElements(),I=e.self_closing_elements||t.getSelfClosingElements(),w=t.getBoolAttrs(),x=e.validate,b=e.remove_internals,F=e.fix_self_closing,B=t.getSpecialElements(),P=n+">";u=M.exec(P);){if(H<u.index&&o(z(n.substr(H,u.index-H))),d=u[6])d=d.toLowerCase(),":"===d.charAt(0)&&(d=d.substr(1)),V(d);else if(d=u[7]){if(u.index+u[0].length>n.length){o(z(n.substr(u.index))),H=u.index+u[0].length;continue}if(d=d.toLowerCase(),":"===d.charAt(0)&&(d=d.substr(1)),_=d in y,F&&I[d]&&$.length>0&&$[$.length-1].name===d&&V(d),!x||(C=t.getElementRule(d))){if(k=!0,x&&(D=C.attributes,E=C.attributePatterns),(S=u[8])?(v=-1!==S.indexOf("data-mce-type"),v&&b&&(k=!1),h=[],h.map={},S.replace(j,Y)):(h=[],h.map={}),x&&!v){if(N=C.attributesRequired,A=C.attributesDefault,R=C.attributesForced,O=C.removeEmptyAttrs,O&&!h.length&&(k=!1),R)for(p=R.length;p--;)T=R[p],m=T.name,L=T.value,"{$uid}"===L&&(L="mce_"+U++),h.map[m]=L,h.push({name:m,value:L});if(A)for(p=A.length;p--;)T=A[p],(m=T.name)in h.map||(L=T.value,"{$uid}"===L&&(L="mce_"+U++),h.map[m]=L,h.push({name:m,value:L}));if(N){for(p=N.length;p--&&!(N[p]in h.map););-1===p&&(k=!1)}if(T=h.map["data-mce-bogus"]){if("all"===T){H=ZT(t,n,M.lastIndex),M.lastIndex=H;continue}k=!1}}k&&a(d,h,_)}else k=!1;if(f=B[d]){f.lastIndex=H=u.index+u[0].length,(u=f.exec(n))?(k&&(g=n.substr(H,u.index-H)),H=u.index+u[0].length):(g=n.substr(H),H=n.length),k&&(g.length>0&&o(g,!0),s(d)),M.lastIndex=H;continue}_||(S&&S.indexOf("/")===S.length-1?k&&s(d):$.push({name:d,valid:k}))}else(d=u[1])?(">"===d.charAt(0)&&(d=" "+d),e.allow_conditional_comments||"[if"!==d.substr(0,3).toLowerCase()||(d=" "+d),r(d)):(d=u[2])?i(JT(d)):(d=u[3])?c(d):(d=u[4])&&l(d,u[5]);H=u.index+u[0].length}for(H<n.length&&o(z(n.substr(H))),p=$.length-1;p>=0;p--)d=$[p],d.valid&&s(d.name)}}}function W(e){var t,n,r=this,i=0,o=[],a=0,s=function(){return 0===a},l=function(e){s()&&(r.typing=e)},c=function(t){e.setDirty(t)},u=function(e){l(!1),r.add({},e)},d=function(){r.typing&&(l(!1),r.add())};e.on("init",function(){r.add()}),e.on("BeforeExecCommand",function(e){var t=e.command;"Undo"!==t&&"Redo"!==t&&"mceRepaint"!==t&&(d(),r.beforeChange())}),e.on("ExecCommand",function(e){var t=e.command;"Undo"!==t&&"Redo"!==t&&"mceRepaint"!==t&&u(e)}),e.on("ObjectResizeStart Cut",function(){r.beforeChange()}),e.on("SaveContent ObjectResized blur",u),e.on("DragEnd",u),e.on("KeyUp",function(t){var i=t.keyCode;t.isDefaultPrevented()||((i>=33&&i<=36||i>=37&&i<=40||45===i||t.ctrlKey)&&(u(),e.nodeChanged()),46!==i&&8!==i||e.nodeChanged(),n&&r.typing&&!1===jS.isEq(jS.createFromEditor(e),o[0])&&(!1===e.isDirty()&&(c(!0),e.fire("change",{level:o[0],lastLevel:null})),e.fire("TypingUndo"),n=!1,e.nodeChanged()))}),e.on("KeyDown",function(e){var t=e.keyCode;if(!e.isDefaultPrevented()){if(t>=33&&t<=36||t>=37&&t<=40||45===t)return void(r.typing&&u(e));var i=e.ctrlKey&&!e.altKey||e.metaKey;!(t<16||t>20)||224===t||91===t||r.typing||i||(r.beforeChange(),l(!0),r.add({},e),n=!0)}}),e.on("MouseDown",function(e){r.typing&&u(e)});var f=function(e){return"insertReplacementText"===e.inputType},h=function(e){return"insertText"===e.inputType&&null===e.data};return e.on("input",function(e){e.inputType&&(f(e)||h(e))&&u(e)}),e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo"),e.on("AddUndo Undo Redo ClearUndos",function(t){t.isDefaultPrevented()||e.nodeChanged()}),r={data:o,typing:!1,beforeChange:function(){s()&&(t=Gd.getUndoBookmark(e.selection))},add:function(n,r){var a,l,u,d=e.settings;if(u=jS.createFromEditor(e),n=n||{},n=gr.extend(n,u),!1===s()||e.removed)return null;if(l=o[i],e.fire("BeforeAddUndo",{level:n,lastLevel:l,originalEvent:r}).isDefaultPrevented())return null;if(l&&jS.isEq(l,n))return null;if(o[i]&&(o[i].beforeBookmark=t),d.custom_undo_redo_levels&&o.length>d.custom_undo_redo_levels){for(a=0;a<o.length-1;a++)o[a]=o[a+1];o.length--,i=o.length}n.bookmark=Gd.getUndoBookmark(e.selection),i<o.length-1&&(o.length=i+1),o.push(n),i=o.length-1;var f={level:n,lastLevel:l,originalEvent:r};return e.fire("AddUndo",f),i>0&&(c(!0),e.fire("change",f)),n},undo:function(){var t;return r.typing&&(r.add(),r.typing=!1,l(!1)),i>0&&(t=o[--i],jS.applyToEditor(e,t,!0),c(!0),e.fire("undo",{level:t})),t},redo:function(){var t;return i<o.length-1&&(t=o[++i],jS.applyToEditor(e,t,!1),c(!0),e.fire("redo",{level:t})),t},clear:function(){o=[],i=0,r.typing=!1,r.data=o,e.fire("ClearUndos")},hasUndo:function(){return i>0||r.typing&&o[0]&&!jS.isEq(jS.createFromEditor(e),o[0])},hasRedo:function(){return i<o.length-1&&!r.typing},transact:function(e){return d(),r.beforeChange(),r.ignore(e),r.add()},ignore:function(e){try{a++,e()}finally{a--}},extra:function(t,n){var a,s;r.transact(t)&&(s=o[i].bookmark,a=o[i-1],jS.applyToEditor(e,a,!0),r.transact(n)&&(o[i-1].beforeBookmark=s))}}}function q(e){var t={},n=function(e){return e?t[e]:t},r=function(e,n){e&&("string"!=typeof e?gr.each(e,function(e,t){r(t,e)}):(n=n.length?n:[n],gr.each(n,function(e){void 0===e.deep&&(e.deep=!e.selector),void 0===e.split&&(e.split=!e.selector||e.inline),void 0===e.remove&&e.selector&&!e.inline&&(e.remove="none"),e.selector&&e.inline&&(e.mixed=!0,e.block_expand=!0),"string"==typeof e.classes&&(e.classes=e.classes.split(/\s+/))}),t[e]=n))},i=function(e){return e&&t[e]&&delete t[e],t};return r(sE.get(e.dom)),r(e.settings.formats),{get:n,register:r,unregister:i}}function V(e){var t=q(e),n=El(null);return yE.setup(e),dD(e),{get:t.get,register:t.register,unregister:t.unregister,apply:me(eE.applyFormat,e),remove:me(OD.remove,e),toggle:me(vE.toggle,e,t),match:me(VS.match,e),matchAll:me(VS.matchAll,e),matchNode:me(VS.matchNode,e),canApply:me(VS.canApply,e),formatChanged:me(oE.formatChanged,e,n),getCssText:me(gE.getCssText,e)}}function Y(e,t){void 0===t&&(t=v());var n={},r=[],i={},o={};e=e||{},e.validate=!("validate"in e)||e.validate,e.root_name=e.root_name||"body";var a=function(e){var n,r,i,o,a,l,c,u,d,f,h,p,g,m,v,b;for(p=YE("tr,td,th,tbody,thead,tfoot,table"),f=t.getNonEmptyElements(),h=t.getWhiteSpaceElements(),g=t.getTextBlockElements(),m=t.getSpecialElements(),n=0;n<e.length;n++)if(r=e[n],r.parent&&!r.fixed)if(g[r.name]&&"li"===r.parent.name){for(v=r.next;v&&g[v.name];)v.name="li",v.fixed=!0,r.parent.insert(v,r.parent),v=v.next;r.unwrap(r)}else{for(o=[r],i=r.parent;i&&!t.isValidChild(i.name,r.name)&&!p[i.name];i=i.parent)o.push(i);if(i&&o.length>1){for(o.reverse(),a=l=s(o[0].clone()),d=0;d<o.length-1;d++){for(t.isValidChild(l.name,o[d].name)?(c=s(o[d].clone()),l.append(c)):c=l,u=o[d].firstChild;u&&u!==o[d+1];)b=u.next,c.append(u),u=b;l=c}WE(t,f,h,a)?i.insert(r,o[0],!0):(i.insert(a,o[0],!0),i.insert(r,a)),i=o[0],(WE(t,f,h,i)||UE(i,"br"))&&i.empty().remove()}else if(r.parent){if("li"===r.name){if((v=r.prev)&&("ul"===v.name||"ul"===v.name)){v.append(r);continue}if((v=r.next)&&("ul"===v.name||"ul"===v.name)){v.insert(r,v.firstChild,!0);continue}r.wrap(s(new FE("ul",1)));continue}t.isValidChild(r.parent.name,"div")&&t.isValidChild("div",r.name)?r.wrap(s(new FE("div",1))):m[r.name]?r.empty().remove():r.unwrap()}}},s=function(e){var t,a,s;a in n&&(s=i[a],s?s.push(e):i[a]=[e]),t=r.length;for(;t--;)(a=r[t].name)in e.attributes.map&&(s=o[a],s?s.push(e):o[a]=[e]);return e},l=function(e,t){GE(KE(e),function(e){var r=n[e];r||(n[e]=r=[]),r.push(t)})},c=function(){var e=[];for(var t in n)n.hasOwnProperty(t)&&e.push({name:t,callbacks:n[t]});return e},u=function(e,t){GE(KE(e),function(e){var n;for(n=0;n<r.length;n++)if(r[n].name===e)return void r[n].callbacks.push(t);r.push({name:e,callbacks:[t]})})},d=function(){return[].concat(r)},f=function(s,l){var c,u,d,f,h,p,g,m,v,b,y,w=[];l=l||{},i={},o={},v=XE(YE("script,style,head,html,body,title,meta,param"),t.getBlockElements());var _=t.getNonEmptyElements(),x=t.children,C=e.validate,k="forced_root_block"in l?l.forced_root_block:e.forced_root_block,T=t.getWhiteSpaceElements(),S=/^[ \t\r\n]+/,D=/[ \t\r\n]+$/,E=/[ \t\r\n]+/g,N=/^[ \t\r\n]+$/;b=T.hasOwnProperty(l.context)||T.hasOwnProperty(e.root_name);var A=function(e,t){var r,o=new FE(e,t);return e in n&&(r=i[e],r?r.push(o):i[e]=[o]),o},R=function(e){var n,r,i,o,a=t.getBlockElements();for(n=e.prev;n&&3===n.type;){if(i=n.value.replace(D,""),i.length>0)return void(n.value=i);if(r=n.next){if(3===r.type&&r.value.length){n=n.prev;continue}if(!a[r.name]&&"script"!==r.name&&"style"!==r.name){n=n.prev;continue}}o=n.prev,n.remove(),n=o}};c=eS({validate:C,allow_script_urls:e.allow_script_urls,allow_conditional_comments:e.allow_conditional_comments,self_closing_elements:function(e){var t,n={};for(t in e)"li"!==t&&"p"!==t&&(n[t]=e[t]);return n}(t.getSelfClosingElements()),cdata:function(e){y.append(A("#cdata",4)).value=e},text:function(e,t){var n;b||(e=e.replace(E," "),qE(y.lastChild,v)&&(e=e.replace(S,""))),0!==e.length&&(n=A("#text",3),n.raw=!!t,y.append(n).value=e)},comment:function(e){y.append(A("#comment",8)).value=e},pi:function(e,t){y.append(A(e,7)).value=t,R(y)},doctype:function(e){var t;t=y.append(A("#doctype",10)),t.value=e,R(y)},start:function(e,n,i){var a,s,l,c,u;if(l=C?t.getElementRule(e):{}){for(a=A(l.outputName||e,1),a.attributes=n,a.shortEnded=i,y.append(a),u=x[y.name],u&&x[a.name]&&!u[a.name]&&w.push(a),s=r.length;s--;)(c=r[s].name)in n.map&&(g=o[c],g?g.push(a):o[c]=[a]);v[e]&&R(a),i||(y=a),!b&&T[e]&&(b=!0)}},end:function(n){var r,i,o,a,s;if(i=C?t.getElementRule(n):{}){if(v[n]&&!b){if((r=y.firstChild)&&3===r.type)if(o=r.value.replace(S,""),o.length>0)r.value=o,r=r.next;else for(a=r.next,r.remove(),r=a;r&&3===r.type;)o=r.value,a=r.next,(0===o.length||N.test(o))&&(r.remove(),r=a),r=a;if((r=y.lastChild)&&3===r.type)if(o=r.value.replace(D,""),o.length>0)r.value=o,r=r.prev;else for(a=r.prev,r.remove(),r=a;r&&3===r.type;)o=r.value,a=r.prev,(0===o.length||N.test(o))&&(r.remove(),r=a),r=a}if(b&&T[n]&&(b=!1),i.removeEmpty&&WE(t,_,T,y)&&!y.attributes.map.name&&!y.attr("id"))return s=y.parent,v[y.name]?y.empty().remove():y.unwrap(),void(y=s);i.paddEmpty&&($E(y)||WE(t,_,T,y))&&HE(e,l,v,y),y=y.parent}}},t);var P=y=new FE(l.context||e.root_name,11);if(c.parse(s),C&&w.length&&(l.context?l.invalid=!0:a(w)),k&&("body"===P.name||l.isRootContent)&&function(){var n,r,i=P.firstChild,o=function(e){e&&(i=e.firstChild,i&&3===i.type&&(i.value=i.value.replace(S,"")),(i=e.lastChild)&&3===i.type&&(i.value=i.value.replace(D,"")))};if(t.isValidChild(P.name,k.toLowerCase())){for(;i;)n=i.next,3===i.type||1===i.type&&"p"!==i.name&&!v[i.name]&&!i.attr("data-mce-type")?r?r.append(i):(r=A(k,1),r.attr(e.forced_root_block_attrs),P.insert(r,i),r.append(i)):(o(r),r=null),i=n;o(r)}}(),!l.invalid){for(m in i){for(g=n[m],u=i[m],h=u.length;h--;)u[h].parent||u.splice(h,1);for(d=0,f=g.length;d<f;d++)g[d](u,m,l)}for(d=0,f=r.length;d<f;d++)if(g=r[d],g.name in o){for(u=o[g.name],h=u.length;h--;)u[h].parent||u.splice(h,1);for(h=0,p=g.callbacks.length;h<p;h++)g.callbacks[h](u,g.name,l)}}return P},h={schema:t,addAttributeFilter:u,getAttributeFilters:d,addNodeFilter:l,getNodeFilters:c,filterNode:s,parse:f};return VE(h,e),ME.register(h,e),h}function G(e,t){var n,r,i,o=["data-mce-selected"];n=t&&t.dom?t.dom:rl.DOM,r=t&&t.schema?t.schema:v(e),e.entity_encoding=e.entity_encoding||"named",e.remove_trailing_brs=!("remove_trailing_brs"in e)||e.remove_trailing_brs,i=Y(e,r),TE.register(i,e,n);var a=function(o,a){var s=xE({format:"html"},a||{}),l=NE.process(t,o,s),c=ZE(n,l,s),u=eN(i,c,s);return"tree"===s.format?u:nN(t,e,r,u,s)};return{schema:r,addNodeFilter:i.addNodeFilter,addAttributeFilter:i.addAttributeFilter,serialize:a,addRules:function(e){r.addValidElements(e)},setRules:function(e){r.setValidElements(e)},addTempAttr:me(JE,i,o),getTempAttrs:function(){return o}}}function K(e,t){var n=G(e,t);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs}}function X(e){return{getBookmark:me(ig.getBookmark,e),moveToBookmark:me(ig.moveToBookmark,e)}}function J(e){var t=gr.each,n=zT.BACKSPACE,r=zT.DELETE,i=e.dom,o=e.selection,a=e.settings,s=e.parser,l=Ct.gecko,c=Ct.ie,u=Ct.webkit,d=c?"Text":"URL",f=function(t,n){try{e.getDoc().execCommand(t,!1,n)}catch(e){}},h=function(e){return e.isDefaultPrevented()},p=function(t){var n,r;t.dataTransfer&&(e.selection.isCollapsed()&&"IMG"===t.target.tagName&&o.select(t.target),n=e.selection.getContent(),n.length>0&&(r="data:text/mce-internal,"+escape(e.id)+","+escape(n),t.dataTransfer.setData(d,r)))},g=function(e){var t;return e.dataTransfer&&(t=e.dataTransfer.getData(d))&&t.indexOf("data:text/mce-internal,")>=0?(t=t.substr("data:text/mce-internal,".length).split(","),{id:unescape(t[0]),html:unescape(t[1])}):null},m=function(t,n){e.queryCommandSupported("mceInsertClipboardContent")?e.execCommand("mceInsertClipboardContent",!1,{content:t,internal:n}):e.execCommand("mceInsertContent",!1,t)},v=function(){e.shortcuts.add("meta+a",null,"SelectAll")},b=function(){e.on("keydown",function(e){if(!h(e)&&e.keyCode===n&&o.isCollapsed()&&0===o.getRng().startOffset){var t=o.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}})},y=function(){e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",function(t){var n;if("HTML"===t.target.nodeName){if(Ct.ie>11)return void e.getBody().focus();n=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(n),e.selection.normalize(),e.nodeChanged()}}))},w=function(){},_=function(){var t;return!l||e.removed?0:!(t=e.selection.getSel())||!t.rangeCount||0===t.rangeCount};return function(){e.on("keydown",function(t){var n,r,a,s,l;if(!h(t)&&t.keyCode===zT.BACKSPACE&&(n=o.getRng(),r=n.startContainer,a=n.startOffset,s=i.getRoot(),l=r,n.collapsed&&0===a)){for(;l&&l.parentNode&&l.parentNode.firstChild===l&&l.parentNode!==s;)l=l.parentNode;"BLOCKQUOTE"===l.tagName&&(e.formatter.toggle("blockquote",null,l),n=i.createRng(),n.setStart(r,0),n.setEnd(r,0),o.setRng(n))}})}(),function(){var t=function(e){var t=i.create("body"),n=e.cloneContents();return t.appendChild(n),o.serializer.serialize(t,{format:"html"})},a=function(n){var r=t(n),o=i.createRng();return o.selectNode(e.getBody()),r===t(o)};e.on("keydown",function(t){var o,s,l=t.keyCode;if(!h(t)&&(l===r||l===n)){if(o=e.selection.isCollapsed(),s=e.getBody(),o&&!i.isEmpty(s))return;if(!o&&!a(e.selection.getRng()))return;t.preventDefault(),e.setContent(""),s.firstChild&&i.isBlock(s.firstChild)?e.selection.setCursorLocation(s.firstChild,0):e.selection.setCursorLocation(s,0),e.nodeChanged()}})}(),Ct.windowsPhone||function(){e.on("keyup focusin mouseup",function(e){zT.modifierPressed(e)||o.normalize()},!0)}(),u&&(function(){
e.settings.content_editable||i.bind(e.getDoc(),"mousedown mouseup",function(t){var n;if(t.target===e.getDoc().documentElement)if(n=o.getRng(),e.getBody().focus(),"mousedown"===t.type){if(su(n.startContainer))return;o.placeCaretAt(t.clientX,t.clientY)}else o.setRng(n)})}(),function(){e.on("click",function(t){var n=t.target;/^(IMG|HR)$/.test(n.nodeName)&&"false"!==i.getContentEditableParent(n)&&(t.preventDefault(),e.selection.select(n),e.nodeChanged()),"A"===n.nodeName&&i.hasClass(n,"mce-item-anchor")&&(t.preventDefault(),o.select(n))})}(),function(){a.forced_root_block&&e.on("init",function(){f("DefaultParagraphSeparator",a.forced_root_block)})}(),function(){e.on("init",function(){e.dom.bind(e.getBody(),"submit",function(e){e.preventDefault()})})}(),b(),function(){s.addNodeFilter("br",function(e){for(var t=e.length;t--;)"Apple-interchange-newline"===e[t].attr("class")&&e[t].remove()})}(),Ct.iOS?(function(){e.inline||e.on("keydown",function(){document.activeElement===document.body&&e.getWin().focus()})}(),y(),function(){e.on("click",function(e){var t=e.target;do{if("A"===t.tagName)return void e.preventDefault()}while(t=t.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")}()):v()),Ct.ie>=11&&(y(),b()),Ct.ie&&(v(),function(){f("AutoUrlDetect",!1)}(),function(){e.on("dragstart",function(e){p(e)}),e.on("drop",function(t){if(!h(t)){var n=g(t);if(n&&n.id!==e.id){t.preventDefault();var r=hN.fromPoint(t.x,t.y,e.getDoc());o.setRng(r),m(n.html,!0)}}})}()),l&&(!function(){e.on("keydown",function(t){if(!h(t)&&t.keyCode===n){if(!e.getBody().getElementsByTagName("hr").length)return;if(o.isCollapsed()&&0===o.getRng().startOffset){var r=o.getNode(),a=r.previousSibling;if("HR"===r.nodeName)return i.remove(r),void t.preventDefault();a&&a.nodeName&&"hr"===a.nodeName.toLowerCase()&&(i.remove(a),t.preventDefault())}}})}(),function(){Range.prototype.getClientRects||e.on("mousedown",function(t){if(!h(t)&&"HTML"===t.target.nodeName){var n=e.getBody();n.blur(),Rt.setEditorTimeout(e,function(){n.focus()})}})}(),function(){var n=function(){var n=i.getAttribs(o.getStart().cloneNode(!1));return function(){var r=o.getStart();r!==e.getBody()&&(i.setAttrib(r,"style",null),t(n,function(e){r.setAttributeNode(e.cloneNode(!0))}))}},r=function(){return!o.isCollapsed()&&i.getParent(o.getStart(),i.isBlock)!==i.getParent(o.getEnd(),i.isBlock)};e.on("keypress",function(t){var i;if(!h(t)&&(8===t.keyCode||46===t.keyCode)&&r())return i=n(),e.getDoc().execCommand("delete",!1,null),i(),t.preventDefault(),!1}),i.bind(e.getDoc(),"cut",function(t){var i;!h(t)&&r()&&(i=n(),Rt.setEditorTimeout(e,function(){i()}))})}(),function(){var t=function(){f("StyleWithCSS",!1),f("enableInlineTableEditing",!1),a.object_resizing||f("enableObjectResizing",!1)};a.readonly||e.on("BeforeExecCommand MouseDown",t)}(),function(){var n=function(){t(i.select("a"),function(e){var t=e.parentNode,n=i.getRoot();if(t.lastChild===e){for(;t&&!i.isBlock(t);){if(t.parentNode.lastChild!==t||t===n)return;t=t.parentNode}i.add(t,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",function(e){"setcontent"!==e.type&&"mceInsertLink"!==e.command||n()})}(),function(){e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")}(),function(){Ct.mac&&e.on("keydown",function(t){!zT.metaKeyPressed(t)||t.shiftKey||37!==t.keyCode&&39!==t.keyCode||(t.preventDefault(),e.selection.getSel().modify("move",37===t.keyCode?"backward":"forward","lineboundary"))})}(),b()),{refreshContentEditable:w,isHidden:_}}function Q(e){return{walk:function(t,n){return jg.walk(e,t,n)},split:KS.split,normalize:function(t){return W_.normalize(e,t).fold(pe(!1),function(e){return t.setStart(e.startContainer,e.startOffset),t.setEnd(e.endContainer,e.endOffset),!0})}}}var Z,ee,te,ne,re,ie,oe,ae,se,le,ce,ue,de,fe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},he=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e(t.apply(null,arguments))}},pe=function(e){return function(){return e}},ge=function(e){return e},me=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=new Array(arguments.length-1),i=1;i<arguments.length;i++)r[i-1]=arguments[i];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var i=new Array(arguments.length),o=0;o<i.length;o++)i[o]=arguments[o];var a=r.concat(i);return e.apply(null,a)}},ve=function(e){return function(){throw new Error(e)}},be=pe(!1),ye=pe(!0),we=be,_e=ye,xe=function(){return Ce},Ce=function(){var e=function(e){return e.isNone()},t=function(e){return e()},n=function(e){return e},r=function(){},i=function(){return null},o=function(){},a={fold:function(e,t){return e()},is:we,isSome:we,isNone:_e,getOr:n,getOrThunk:t,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:i,getOrUndefined:o,or:n,orThunk:t,map:xe,ap:xe,each:r,bind:xe,flatten:xe,exists:we,forall:_e,filter:xe,equals:e,equals_:e,toArray:function(){return[]},toString:pe("none()")};return Object.freeze&&Object.freeze(a),a}(),ke=function(e){var t=function(){return e},n=function(){return o},r=function(t){return ke(t(e))},i=function(t){return t(e)},o={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:_e,isNone:we,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:r,ap:function(t){return t.fold(xe,function(t){return ke(t(e))})},each:function(t){t(e)},bind:i,flatten:t,exists:i,forall:i,filter:function(t){return t(e)?o:Ce},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(we,function(t){return n(e,t)})},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return o},Te=function(e){return null===e||void 0===e?Ce:ke(e)},Se={some:ke,none:xe,from:Te},De=function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&Array.prototype.isPrototypeOf(e)?"array":"object"===t&&String.prototype.isPrototypeOf(e)?"string":t},Ee=function(e){return function(t){return De(t)===e}},Ne=Ee("string"),Ae=Ee("object"),Re=Ee("array"),Pe=Ee("null"),Oe=Ee("boolean"),Ie=Ee("function"),Me=Ee("number"),je=function(){var e=Array.prototype.indexOf,t=function(t,n){return e.call(t,n)},n=function(e,t){return Ke(e,t)};return void 0===e?n:t}(),Be=function(e,t){var n=je(e,t);return-1===n?Se.none():Se.some(n)},Le=function(e,t){return je(e,t)>-1},Fe=function(e,t){return Ge(e,t).isSome()},He=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;i++){var o=e[i];r[i]=t(o,i,e)}return r},$e=function(e,t){for(var n=0,r=e.length;n<r;n++){t(e[n],n,e)}},Ue=function(e,t){for(var n=e.length-1;n>=0;n--){t(e[n],n,e)}},ze=function(e,t){for(var n=[],r=[],i=0,o=e.length;i<o;i++){var a=e[i];(t(a,i,e)?n:r).push(a)}return{pass:n,fail:r}},We=function(e,t){for(var n=[],r=0,i=e.length;r<i;r++){var o=e[r];t(o,r,e)&&n.push(o)}return n},qe=function(e,t,n){return Ue(e,function(e){n=t(n,e)}),n},Ve=function(e,t,n){return $e(e,function(e){n=t(n,e)}),n},Ye=function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];if(t(i,n,e))return Se.some(i)}return Se.none()},Ge=function(e,t){for(var n=0,r=e.length;n<r;n++){if(t(e[n],n,e))return Se.some(n)}return Se.none()},Ke=function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return n;return-1},Xe=Array.prototype.push,Je=function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!Array.prototype.isPrototypeOf(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);Xe.apply(t,e[n])}return t},Qe=function(e,t){var n=He(e,t);return Je(n)},Ze=function(e,t){for(var n=0,r=e.length;n<r;++n){if(!0!==t(e[n],n,e))return!1}return!0},et=Array.prototype.slice,tt=function(e){var t=et.call(e,0);return t.reverse(),t},nt=function(e,t){return We(e,function(e){return!Le(t,e)})},rt=function(e,t){for(var n={},r=0,i=e.length;r<i;r++){var o=e[r];n[String(o)]=t(o,r)}return n},it=function(e,t){var n=et.call(e,0);return n.sort(t),n},ot=function(e){return 0===e.length?Se.none():Se.some(e[0])},at=function(e){return 0===e.length?Se.none():Se.some(e[e.length-1])},st=Ie(Array.from)?Array.from:function(e){return et.call(e)},lt="undefined"!=typeof window?window:Function("return this;")(),ct=function(e,t){for(var n=void 0!==t&&null!==t?t:lt,r=0;r<e.length&&void 0!==n&&null!==n;++r)n=n[e[r]];return n},ut=function(e,t){var n=e.split(".");return ct(n,t)},dt=function(e,t){return ut(e,t)},ft=function(e,t){var n=dt(e,t);if(void 0===n||null===n)throw e+" not available on this browser";return n},ht={getOrDie:ft},pt=function(){return ht.getOrDie("URL")},gt=function(e){return pt().createObjectURL(e)},mt=function(e){pt().revokeObjectURL(e)},vt={createObjectURL:gt,revokeObjectURL:mt},bt=navigator,yt=bt.userAgent,wt=function(e){return"matchMedia"in window&&matchMedia(e).matches};Z=!1,se=/Android/.test(yt),ee=/WebKit/.test(yt),te=!ee&&!Z&&/MSIE/gi.test(yt)&&/Explorer/gi.test(bt.appName),te=te&&/MSIE (\w+)\./.exec(yt)[1],ne=-1!==yt.indexOf("Trident/")&&(-1!==yt.indexOf("rv:")||-1!==bt.appName.indexOf("Netscape"))&&11,re=-1!==yt.indexOf("Edge/")&&!te&&!ne&&12,te=te||ne||re,ie=!ee&&!ne&&/Gecko/.test(yt),oe=-1!==yt.indexOf("Mac"),ae=/(iPad|iPhone)/.test(yt),le="FormData"in window&&"FileReader"in window&&"URL"in window&&!!vt.createObjectURL,ce=wt("only screen and (max-device-width: 480px)")&&(se||ae),ue=wt("only screen and (min-width: 800px)")&&(se||ae),de=-1!==yt.indexOf("Windows Phone"),re&&(ee=!1);var _t,xt=!ae||le||parseInt(yt.match(/AppleWebKit\/(\d*)/)[1],10)>=534,Ct={opera:Z,webkit:ee,ie:te,gecko:ie,mac:oe,iOS:ae,android:se,contentEditable:xt,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:8!==te,range:window.getSelection&&"Range"in window,documentMode:te&&!re?document.documentMode||7:10,fileApi:le,ceFalse:!1===te||te>8,cacheSuffix:null,container:null,overrideViewPort:null,experimentalShadowDom:!1,canHaveCSP:!1===te||te>11,desktop:!ce&&!ue,windowsPhone:de},kt=window.Promise?window.Promise:function(){function e(e,t){return function(){e.apply(t,arguments)}}function t(e){var t=this;if(null===this._state)return void this._deferreds.push(e);c(function(){var n=t._state?e.onFulfilled:e.onRejected;if(null===n)return void(t._state?e.resolve:e.reject)(t._value);var r;try{r=n(t._value)}catch(t){return void e.reject(t)}e.resolve(r)})}function n(t){try{if(t===this)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var o=t.then;if("function"==typeof o)return void a(e(o,t),e(n,this),e(r,this))}this._state=!0,this._value=t,i.call(this)}catch(e){r.call(this,e)}}function r(e){this._state=!1,this._value=e,i.call(this)}function i(){for(var e=0,n=this._deferreds.length;e<n;e++)t.call(this,this._deferreds[e]);this._deferreds=null}function o(e,t,n,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r}function a(e,t,n){var r=!1;try{e(function(e){r||(r=!0,t(e))},function(e){r||(r=!0,n(e))})}catch(e){if(r)return;r=!0,n(e)}}var s=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},l=function(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],a(t,e(n,this),e(r,this))},c=l.immediateFn||"function"==typeof setImmediate&&setImmediate||function(e){setTimeout(e,1)};return l.prototype.catch=function(e){return this.then(null,e)},l.prototype.then=function(e,n){var r=this;return new l(function(i,a){t.call(r,new o(e,n,i,a))})},l.all=function(){var e=Array.prototype.slice.call(1===arguments.length&&s(arguments[0])?arguments[0]:arguments);return new l(function(t,n){function r(o,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(e){r(o,e)},n)}e[o]=a,0==--i&&t(e)}catch(e){n(e)}}if(0===e.length)return t([]);for(var i=e.length,o=0;o<e.length;o++)r(o,e[o])})},l.resolve=function(e){return e&&"object"==typeof e&&e.constructor===l?e:new l(function(t){t(e)})},l.reject=function(e){return new l(function(t,n){n(e)})},l.race=function(e){return new l(function(t,n){for(var r=0,i=e.length;r<i;r++)e[r].then(t,n)})},l}(),Tt=function(e,t){var n,r=window.requestAnimationFrame,i=["ms","moz","webkit"],o=function(e){window.setTimeout(e,0)};for(n=0;n<i.length&&!r;n++)r=window[i[n]+"RequestAnimationFrame"];r||(r=o),r(e,t)},St=function(e,t){return"number"!=typeof t&&(t=0),setTimeout(e,t)},Dt=function(e,t){return"number"!=typeof t&&(t=1),setInterval(e,t)},Et=function(e){return clearTimeout(e)},Nt=function(e){return clearInterval(e)},At=function(e,t){var n,r;return r=function(){var r=arguments;clearTimeout(n),n=St(function(){e.apply(this,r)},t)},r.stop=function(){clearTimeout(n)},r},Rt={requestAnimationFrame:function(e,t){if(_t)return void _t.then(e);_t=new kt(function(e){t||(t=document.body),Tt(e,t)}).then(e)},setTimeout:St,setInterval:Dt,setEditorTimeout:function(e,t,n){return St(function(){e.removed||t()},n)},setEditorInterval:function(e,t,n){var r;return r=Dt(function(){e.removed?clearInterval(r):t()},n)},debounce:At,throttle:At,clearInterval:Nt,clearTimeout:Et},Pt=/^(?:mouse|contextmenu)|click/,Ot={keyLocation:1,layerX:1,layerY:1,returnValue:1,webkitMovementX:1,webkitMovementY:1,keyIdentifier:1},It=function(e){return e.isDefaultPrevented===jt||e.isDefaultPrevented===Mt},Mt=function(){return!1},jt=function(){return!0},Bt=function(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r||!1):e.attachEvent&&e.attachEvent("on"+t,n)},Lt=function(e,t,n,r){e.removeEventListener?e.removeEventListener(t,n,r||!1):e.detachEvent&&e.detachEvent("on"+t,n)},Ft=function(e,t){if(e.composedPath){var n=e.composedPath();if(n&&n.length>0)return n[0]}return t},Ht=function(e,t){var n,r=t||{};for(n in e)Ot[n]||(r[n]=e[n]);if(r.target||(r.target=r.srcElement||document),Ct.experimentalShadowDom&&(r.target=Ft(e,r.target)),e&&Pt.test(e.type)&&void 0===e.pageX&&void 0!==e.clientX){var i=r.target.ownerDocument||document,o=i.documentElement,a=i.body;r.pageX=e.clientX+(o&&o.scrollLeft||a&&a.scrollLeft||0)-(o&&o.clientLeft||a&&a.clientLeft||0),r.pageY=e.clientY+(o&&o.scrollTop||a&&a.scrollTop||0)-(o&&o.clientTop||a&&a.clientTop||0)}return r.preventDefault=function(){r.isDefaultPrevented=jt,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},r.stopPropagation=function(){r.isPropagationStopped=jt,e&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)},r.stopImmediatePropagation=function(){r.isImmediatePropagationStopped=jt,r.stopPropagation()},!1===It(r)&&(r.isDefaultPrevented=Mt,r.isPropagationStopped=Mt,r.isImmediatePropagationStopped=Mt),void 0===r.metaKey&&(r.metaKey=!1),r},$t=function(e,t,n){var r=e.document,i={type:"ready"};if(n.domLoaded)return void t(i);var o=function(){return"complete"===r.readyState||"interactive"===r.readyState&&r.body},a=function(){n.domLoaded||(n.domLoaded=!0,t(i))},s=function(){o()&&(Lt(r,"readystatechange",s),a())},l=function(){try{r.documentElement.doScroll("left")}catch(e){return void Rt.setTimeout(l)}a()};!r.addEventListener||Ct.ie&&Ct.ie<11?(Bt(r,"readystatechange",s),r.documentElement.doScroll&&e.self===e.top&&l()):o()?a():Bt(e,"DOMContentLoaded",a),Bt(e,"load",a)},Ut=function(){var e,t,n,r,i,o=this,a={};t="mce-data-"+(+new Date).toString(32),r="onmouseenter"in document.documentElement,n="onfocusin"in document.documentElement,i={mouseenter:"mouseover",mouseleave:"mouseout"},e=1,o.domLoaded=!1,o.events=a;var s=function(e,t){var n,r,i,o,s=a[t];if(n=s&&s[e.type])for(r=0,i=n.length;r<i;r++)if(o=n[r],o&&!1===o.func.call(o.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return};o.bind=function(l,c,u,d){var f,h,p,g,m,v,b,y=window,w=function(e){s(Ht(e||y.event),f)};if(l&&3!==l.nodeType&&8!==l.nodeType){for(l[t]?f=l[t]:(f=e++,l[t]=f,a[f]={}),d=d||l,c=c.split(" "),p=c.length;p--;)g=c[p],v=w,m=b=!1,"DOMContentLoaded"===g&&(g="ready"),o.domLoaded&&"ready"===g&&"complete"===l.readyState?u.call(d,Ht({type:g})):(r||(m=i[g])&&(v=function(e){var t,n;if(t=e.currentTarget,(n=e.relatedTarget)&&t.contains)n=t.contains(n);else for(;n&&n!==t;)n=n.parentNode;n||(e=Ht(e||y.event),e.type="mouseout"===e.type?"mouseleave":"mouseenter",e.target=t,s(e,f))}),n||"focusin"!==g&&"focusout"!==g||(b=!0,m="focusin"===g?"focus":"blur",v=function(e){e=Ht(e||y.event),e.type="focus"===e.type?"focusin":"focusout",s(e,f)}),h=a[f][g],h?"ready"===g&&o.domLoaded?u({type:g}):h.push({func:u,scope:d}):(a[f][g]=h=[{func:u,scope:d}],h.fakeName=m,h.capture=b,h.nativeHandler=v,"ready"===g?$t(l,v,o):Bt(l,m||g,v,b)));return l=h=0,u}},o.unbind=function(e,n,r){var i,s,l,c,u,d;if(!e||3===e.nodeType||8===e.nodeType)return o;if(i=e[t]){if(d=a[i],n){for(n=n.split(" "),l=n.length;l--;)if(u=n[l],s=d[u]){if(r)for(c=s.length;c--;)if(s[c].func===r){var f=s.nativeHandler,h=s.fakeName,p=s.capture;s=s.slice(0,c).concat(s.slice(c+1)),s.nativeHandler=f,s.fakeName=h,s.capture=p,d[u]=s}r&&0!==s.length||(delete d[u],Lt(e,s.fakeName||u,s.nativeHandler,s.capture))}}else{for(u in d)s=d[u],Lt(e,s.fakeName||u,s.nativeHandler,s.capture);d={}}for(u in d)return o;delete a[i];try{delete e[t]}catch(n){e[t]=null}}return o},o.fire=function(e,n,r){var i;if(!e||3===e.nodeType||8===e.nodeType)return o;r=Ht(null,r),r.type=n,r.target=e;do{i=e[t],i&&s(r,i),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!r.isPropagationStopped());return o},o.clean=function(e){var n,r,i=o.unbind;if(!e||3===e.nodeType||8===e.nodeType)return o;if(e[t]&&i(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName)for(i(e),r=e.getElementsByTagName("*"),n=r.length;n--;)e=r[n],e[t]&&i(e);return o},o.destroy=function(){a={}},o.cancel=function(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}};Ut.Event=new Ut,Ut.Event.bind(window,"ready",function(){});var zt,Wt,qt,Vt,Yt,Gt,Kt,Xt,Jt,Qt,Zt,en,tn,nn,rn,on,an,sn,ln,cn="sizzle"+-new Date,un=window.document,dn=0,fn=0,hn=e(),pn=e(),gn=e(),mn=function(e,t){return e===t&&(Zt=!0),0},vn="undefined",bn=1<<31,yn={}.hasOwnProperty,wn=[],_n=wn.pop,xn=wn.push,Cn=wn.push,kn=wn.slice,Tn=wn.indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]===e)return t;return-1},Sn="[\\x20\\t\\r\\n\\f]",Dn="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",En="\\["+Sn+"*("+Dn+")(?:"+Sn+"*([*^$|!~]?=)"+Sn+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+Dn+"))|)"+Sn+"*\\]",Nn=":("+Dn+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+En+")*)|.*)\\)|)",An=new RegExp("^"+Sn+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Sn+"+$","g"),Rn=new RegExp("^"+Sn+"*,"+Sn+"*"),Pn=new RegExp("^"+Sn+"*([>+~]|"+Sn+")"+Sn+"*"),On=new RegExp("="+Sn+"*([^\\]'\"]*?)"+Sn+"*\\]","g"),In=new RegExp(Nn),Mn=new RegExp("^"+Dn+"$"),jn={ID:new RegExp("^#("+Dn+")"),CLASS:new RegExp("^\\.("+Dn+")"),TAG:new RegExp("^("+Dn+"|[*])"),ATTR:new RegExp("^"+En),PSEUDO:new RegExp("^"+Nn),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Sn+"*(even|odd|(([+-]|)(\\d*)n|)"+Sn+"*(?:([+-]|)"+Sn+"*(\\d+)|))"+Sn+"*\\)|)","i"),bool:new RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:new RegExp("^"+Sn+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Sn+"*((?:-\\d)?\\d*)"+Sn+"*\\)|)(?=[^-]|$)","i")},Bn=/^(?:input|select|textarea|button)$/i,Ln=/^h\d$/i,Fn=/^[^{]+\{\s*\[native \w/,Hn=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,$n=/[+~]/,Un=/'|\\/g,zn=new RegExp("\\\\([\\da-f]{1,6}"+Sn+"?|("+Sn+")|.)","ig"),Wn=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)};try{Cn.apply(wn=kn.call(un.childNodes),un.childNodes),wn[un.childNodes.length].nodeType}catch(e){Cn={apply:wn.length?function(e,t){xn.apply(e,kn.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}var qn=function(e,t,n,r){var o,s,l,c,u,d,f,h,p,g;if((t?t.ownerDocument||t:un)!==tn&&en(t),t=t||tn,n=n||[],!e||"string"!=typeof e)return n;if(1!==(c=t.nodeType)&&9!==c)return[];if(rn&&!r){if(o=Hn.exec(e))if(l=o[1]){if(9===c){if(!(s=t.getElementById(l))||!s.parentNode)return n;if(s.id===l)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(l))&&ln(t,s)&&s.id===l)return n.push(s),n}else{if(o[2])return Cn.apply(n,t.getElementsByTagName(e)),n;if((l=o[3])&&Wt.getElementsByClassName)return Cn.apply(n,t.getElementsByClassName(l)),n}if(Wt.qsa&&(!on||!on.test(e))){if(h=f=cn,p=t,g=9===c&&e,1===c&&"object"!==t.nodeName.toLowerCase()){for(d=Gt(e),(f=t.getAttribute("id"))?h=f.replace(Un,"\\$&"):t.setAttribute("id",h),h="[id='"+h+"'] ",u=d.length;u--;)d[u]=h+a(d[u]);p=$n.test(e)&&i(t.parentNode)||t,g=d.join(",")}if(g)try{return Cn.apply(n,p.querySelectorAll(g)),n}catch(e){}finally{f||t.removeAttribute("id")}}}return Xt(e.replace(An,"$1"),t,n,r)};Wt=qn.support={},Yt=qn.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},en=qn.setDocument=function(e){var t,r=e?e.ownerDocument||e:un,i=r.defaultView;return r!==tn&&9===r.nodeType&&r.documentElement?(tn=r,nn=r.documentElement,rn=!Yt(r),i&&i!==function(e){try{return e.top}catch(e){}return null}(i)&&(i.addEventListener?i.addEventListener("unload",function(){en()},!1):i.attachEvent&&i.attachEvent("onunload",function(){en()})),Wt.attributes=!0,Wt.getElementsByTagName=!0,Wt.getElementsByClassName=Fn.test(r.getElementsByClassName),Wt.getById=!0,qt.find.ID=function(e,t){if(typeof t.getElementById!==vn&&rn){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},qt.filter.ID=function(e){var t=e.replace(zn,Wn);return function(e){return e.getAttribute("id")===t}},qt.find.TAG=Wt.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!==vn)return t.getElementsByTagName(e)}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},qt.find.CLASS=Wt.getElementsByClassName&&function(e,t){if(rn)return t.getElementsByClassName(e)},an=[],on=[],Wt.disconnectedMatch=!0,on=on.length&&new RegExp(on.join("|")),an=an.length&&new RegExp(an.join("|")),t=Fn.test(nn.compareDocumentPosition),ln=t||Fn.test(nn.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},mn=t?function(e,t){if(e===t)return Zt=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!Wt.sortDetached&&t.compareDocumentPosition(e)===n?e===r||e.ownerDocument===un&&ln(un,e)?-1:t===r||t.ownerDocument===un&&ln(un,t)?1:Qt?Tn.call(Qt,e)-Tn.call(Qt,t):0:4&n?-1:1)}:function(e,t){if(e===t)return Zt=!0,0;var i,o=0,a=e.parentNode,s=t.parentNode,l=[e],c=[t];if(!a||!s)return e===r?-1:t===r?1:a?-1:s?1:Qt?Tn.call(Qt,e)-Tn.call(Qt,t):0;if(a===s)return n(e,t);for(i=e;i=i.parentNode;)l.unshift(i);for(i=t;i=i.parentNode;)c.unshift(i);for(;l[o]===c[o];)o++;return o?n(l[o],c[o]):l[o]===un?-1:c[o]===un?1:0},r):tn},qn.matches=function(e,t){return qn(e,null,null,t)},qn.matchesSelector=function(e,t){if((e.ownerDocument||e)!==tn&&en(e),t=t.replace(On,"='$1']"),Wt.matchesSelector&&rn&&(!an||!an.test(t))&&(!on||!on.test(t)))try{var n=sn.call(e,t);if(n||Wt.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return qn(t,tn,null,[e]).length>0},qn.contains=function(e,t){return(e.ownerDocument||e)!==tn&&en(e),ln(e,t)},qn.attr=function(e,t){(e.ownerDocument||e)!==tn&&en(e);var n=qt.attrHandle[t.toLowerCase()],r=n&&yn.call(qt.attrHandle,t.toLowerCase())?n(e,t,!rn):void 0;return void 0!==r?r:Wt.attributes||!rn?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},qn.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},qn.uniqueSort=function(e){var t,n=[],r=0,i=0;if(Zt=!Wt.detectDuplicates,Qt=!Wt.sortStable&&e.slice(0),e.sort(mn),Zt){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return Qt=null,e},Vt=qn.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=Vt(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=Vt(t);return n},qt=qn.selectors={cacheLength:50,createPseudo:t,match:jn,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(zn,Wn),e[3]=(e[3]||e[4]||e[5]||"").replace(zn,Wn),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||qn.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&qn.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return jn.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&In.test(n)&&(t=Gt(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(zn,Wn).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=hn[e+" "];return t||(t=new RegExp("(^|"+Sn+")"+e+"("+Sn+"|$)"))&&hn(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==vn&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=qn.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,l){var c,u,d,f,h,p,g=o!==a?"nextSibling":"previousSibling",m=t.parentNode,v=s&&t.nodeName.toLowerCase(),b=!l&&!s;if(m){if(o){for(;g;){for(d=t;d=d[g];)if(s?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;p=g="only"===e&&!p&&"nextSibling"}return!0}if(p=[a?m.firstChild:m.lastChild],a&&b){for(u=m[cn]||(m[cn]={}),c=u[e]||[],h=c[0]===dn&&c[1],f=c[0]===dn&&c[2],d=h&&m.childNodes[h];d=++h&&d&&d[g]||(f=h=0)||p.pop();)if(1===d.nodeType&&++f&&d===t){u[e]=[dn,h,f];break}}else if(b&&(c=(t[cn]||(t[cn]={}))[e])&&c[0]===dn)f=c[1];else for(;(d=++h&&d&&d[g]||(f=h=0)||p.pop())&&((s?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++f||(b&&((d[cn]||(d[cn]={}))[e]=[dn,f]),d!==t)););return(f-=i)===r||f%r==0&&f/r>=0}}},PSEUDO:function(e,n){var r,i=qt.pseudos[e]||qt.setFilters[e.toLowerCase()]||qn.error("unsupported pseudo: "+e);return i[cn]?i(n):i.length>1?(r=[e,e,"",n],qt.setFilters.hasOwnProperty(e.toLowerCase())?t(function(e,t){for(var r,o=i(e,n),a=o.length;a--;)r=Tn.call(e,o[a]),e[r]=!(t[r]=o[a])}):function(e){return i(e,0,r)}):i}},pseudos:{not:t(function(e){var n=[],r=[],i=Kt(e.replace(An,"$1"));return i[cn]?t(function(e,t,n,r){for(var o,a=i(e,null,r,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,t,o){return n[0]=e,i(n,null,o,r),!r.pop()}}),has:t(function(e){return function(t){return qn(e,t).length>0}}),contains:t(function(e){return e=e.replace(zn,Wn),function(t){return(t.textContent||t.innerText||Vt(t)).indexOf(e)>-1}}),lang:t(function(e){return Mn.test(e||"")||qn.error("unsupported lang: "+e),e=e.replace(zn,Wn).toLowerCase(),function(t){var n;do{if(n=rn?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(e){var t=window.location&&window.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===nn},focus:function(e){return e===tn.activeElement&&(!tn.hasFocus||tn.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!qt.pseudos.empty(e)},header:function(e){return Ln.test(e.nodeName)},input:function(e){return Bn.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:r(function(){return[0]}),last:r(function(e,t){return[t-1]}),eq:r(function(e,t,n){return[n<0?n+t:n]}),even:r(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:r(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:r(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:r(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}},qt.pseudos.nth=qt.pseudos.eq;for(zt in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})qt.pseudos[zt]=function(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}(zt);for(zt in{submit:!0,reset:!0})qt.pseudos[zt]=function(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}(zt);o.prototype=qt.filters=qt.pseudos,qt.setFilters=new o,Gt=qn.tokenize=function(e,t){var n,r,i,o,a,s,l,c=pn[e+" "];if(c)return t?0:c.slice(0);for(a=e,s=[],l=qt.preFilter;a;){n&&!(r=Rn.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=Pn.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace(An," ")}),a=a.slice(n.length));for(o in qt.filter)!(r=jn[o].exec(a))||l[o]&&!(r=l[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?qn.error(e):pn(e,s).slice(0)},Kt=qn.compile=function(e,t){var n,r=[],i=[],o=gn[e+" "];if(!o){for(t||(t=Gt(e)),n=t.length;n--;)o=f(t[n]),o[cn]?r.push(o):i.push(o);o=gn(e,h(i,r)),o.selector=e}return o},Xt=qn.select=function(e,t,n,r){var o,s,l,c,u,d="function"==typeof e&&e,f=!r&&Gt(e=d.selector||e);if(n=n||[],1===f.length){if(s=f[0]=f[0].slice(0),s.length>2&&"ID"===(l=s[0]).type&&Wt.getById&&9===t.nodeType&&rn&&qt.relative[s[1].type]){if(!(t=(qt.find.ID(l.matches[0].replace(zn,Wn),t)||[])[0]))return n;d&&(t=t.parentNode),e=e.slice(s.shift().value.length)}for(o=jn.needsContext.test(e)?0:s.length;o--&&(l=s[o],!qt.relative[c=l.type]);)if((u=qt.find[c])&&(r=u(l.matches[0].replace(zn,Wn),$n.test(s[0].type)&&i(t.parentNode)||t))){if(s.splice(o,1),!(e=r.length&&a(s)))return Cn.apply(n,r),n;break}}return(d||Kt(e,f))(r,t,!rn,n,$n.test(e)&&i(t.parentNode)||t),n},Wt.sortStable=cn.split("").sort(mn).join("")===cn,Wt.detectDuplicates=!!Zt,en(),Wt.sortDetached=!0;var Vn=Array.isArray,Yn=function(e){var t,n,r=e;if(!Vn(e))for(r=[],t=0,n=e.length;t<n;t++)r[t]=e[t];return r},Gn=function(e,t,n){var r,i;if(!e)return 0;if(n=n||e,void 0!==e.length){for(r=0,i=e.length;r<i;r++)if(!1===t.call(n,e[r],r,e))return 0}else for(r in e)if(e.hasOwnProperty(r)&&!1===t.call(n,e[r],r,e))return 0;return 1},Kn=function(e,t){var n=[];return Gn(e,function(r,i){n.push(t(r,i,e))}),n},Xn=function(e,t){var n=[];return Gn(e,function(r,i){t&&!t(r,i,e)||n.push(r)}),n},Jn=function(e,t){var n,r;if(e)for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},Qn=function(e,t,n,r){var i=0;for(arguments.length<3&&(n=e[0]);i<e.length;i++)n=t.call(r,n,e[i],i);return n},Zn=function(e,t,n){var r,i;for(r=0,i=e.length;r<i;r++)if(t.call(n,e[r],r,e))return r;return-1},er=function(e,t,n){var r=Zn(e,t,n);if(-1!==r)return e[r]},tr=function(e){return e[e.length-1]},nr={isArray:Vn,toArray:Yn,each:Gn,map:Kn,filter:Xn,indexOf:Jn,reduce:Qn,findIndex:Zn,find:er,last:tr
},rr=/^\s*|\s*$/g,ir=function(e){return null===e||void 0===e?"":(""+e).replace(rr,"")},or=function(e,t){return t?!("array"!==t||!nr.isArray(e))||typeof e===t:void 0!==e},ar=function(e,t,n){var r;for(e=e||[],t=t||",","string"==typeof e&&(e=e.split(t)),n=n||{},r=e.length;r--;)n[e[r]]={};return n},sr=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},lr=function(e,t,n){var r,i,o,a,s,l=this,c=0;if(e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e),o=e[3].match(/(^|\.)(\w+)$/i)[2],i=l.createNS(e[3].replace(/\.\w+$/,""),n),!i[o]){if("static"===e[2])return i[o]=t,void(this.onCreate&&this.onCreate(e[2],e[3],i[o]));t[o]||(t[o]=function(){},c=1),i[o]=t[o],l.extend(i[o].prototype,t),e[5]&&(r=l.resolve(e[5]).prototype,a=e[5].match(/\.(\w+)$/i)[1],s=i[o],i[o]=c?function(){return r[a].apply(this,arguments)}:function(){return this.parent=r[a],s.apply(this,arguments)},i[o].prototype[o]=i[o],l.each(r,function(e,t){i[o].prototype[t]=r[t]}),l.each(t,function(e,t){r[t]?i[o].prototype[t]=function(){return this.parent=r[t],e.apply(this,arguments)}:t!==o&&(i[o].prototype[t]=e)})),l.each(t.static,function(e,t){i[o][t]=e})}},cr=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i,o,a,s,l=arguments;for(i=1,o=l.length;i<o;i++){t=l[i];for(a in t)t.hasOwnProperty(a)&&void 0!==(s=t[a])&&(e[a]=s)}return e},ur=function(e,t,n,r){r=r||this,e&&(n&&(e=e[n]),nr.each(e,function(e,i){if(!1===t.call(r,e,i,n))return!1;ur(e,t,n,r)}))},dr=function(e,t){var n,r;for(t=t||window,e=e.split("."),n=0;n<e.length;n++)r=e[n],t[r]||(t[r]={}),t=t[r];return t},fr=function(e,t){var n,r;for(t=t||window,e=e.split("."),n=0,r=e.length;n<r&&(t=t[e[n]]);n++);return t},hr=function(e,t){return!e||or(e,"array")?e:nr.map(e.split(t||","),ir)},pr=function(e){var t=Ct.cacheSuffix;return t&&(e+=(-1===e.indexOf("?")?"?":"&")+t),e},gr={trim:ir,isArray:nr.isArray,is:or,toArray:nr.toArray,makeMap:ar,each:nr.each,map:nr.map,grep:nr.filter,inArray:nr.indexOf,hasOwn:sr,extend:cr,create:lr,walk:ur,createNS:dr,resolve:fr,explode:hr,_addCacheSuffix:pr},mr=document,vr=Array.prototype.push,br=Array.prototype.slice,yr=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,wr=Ut.Event,_r=gr.makeMap("children,contents,next,prev"),xr=function(e){return void 0!==e},Cr=function(e){return"string"==typeof e},kr=function(e){return e&&e===e.window},Tr=function(e,t){var n,r,i;for(t=t||mr,i=t.createElement("div"),n=t.createDocumentFragment(),i.innerHTML=e;r=i.firstChild;)n.appendChild(r);return n},Sr=function(e,t,n,r){var i;if(Cr(t))t=Tr(t,$r(e[0]));else if(t.length&&!t.nodeType){if(t=Mr.makeArray(t),r)for(i=t.length-1;i>=0;i--)Sr(e,t[i],n,r);else for(i=0;i<t.length;i++)Sr(e,t[i],n,r);return e}if(t.nodeType)for(i=e.length;i--;)n.call(e[i],t);return e},Dr=function(e,t){return e&&t&&-1!==(" "+e.className+" ").indexOf(" "+t+" ")},Er=function(e,t,n){var r,i;return t=Mr(t)[0],e.each(function(){var e=this;n&&r===e.parentNode?i.appendChild(e):(r=e.parentNode,i=t.cloneNode(!1),e.parentNode.insertBefore(i,e),i.appendChild(e))}),e},Nr=gr.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),Ar=gr.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),Rr={for:"htmlFor",class:"className",readonly:"readOnly"},Pr={float:"cssFloat"},Or={},Ir={},Mr=function(e,t){return new Mr.fn.init(e,t)},jr=function(e,t){var n;if(t.indexOf)return t.indexOf(e);for(n=t.length;n--;)if(t[n]===e)return n;return-1},Br=/^\s*|\s*$/g,Lr=function(e){return null===e||void 0===e?"":(""+e).replace(Br,"")},Fr=function(e,t){var n,r,i,o;if(e)if(void 0===(n=e.length)){for(r in e)if(e.hasOwnProperty(r)&&(o=e[r],!1===t.call(o,r,o)))break}else for(i=0;i<n&&(o=e[i],!1!==t.call(o,i,o));i++);return e},Hr=function(e,t){var n=[];return Fr(e,function(e,r){t(r,e)&&n.push(r)}),n},$r=function(e){return e?9===e.nodeType?e:e.ownerDocument:mr};Mr.fn=Mr.prototype={constructor:Mr,selector:"",context:null,length:0,init:function(e,t){var n,r,i=this;if(!e)return i;if(e.nodeType)return i.context=i[0]=e,i.length=1,i;if(t&&t.nodeType)i.context=t;else{if(t)return Mr(e).attr(t);i.context=t=document}if(Cr(e)){if(i.selector=e,!(n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:yr.exec(e)))return Mr(t).find(e);if(n[1])for(r=Tr(e,$r(t)).firstChild;r;)vr.call(i,r),r=r.nextSibling;else{if(!(r=$r(t).getElementById(n[2])))return i;if(r.id!==n[2])return i.find(e);i.length=1,i[0]=r}}else this.add(e,!1);return i},toArray:function(){return gr.toArray(this)},add:function(e,t){var n,r,i=this;if(Cr(e))return i.add(Mr(e));if(!1!==t)for(n=Mr.unique(i.toArray().concat(Mr.makeArray(e))),i.length=n.length,r=0;r<n.length;r++)i[r]=n[r];else vr.apply(i,Mr.makeArray(e));return i},attr:function(e,t){var n,r=this;if("object"==typeof e)Fr(e,function(e,t){r.attr(e,t)});else{if(!xr(t)){if(r[0]&&1===r[0].nodeType){if((n=Or[e])&&n.get)return n.get(r[0],e);if(Ar[e])return r.prop(e)?e:void 0;t=r[0].getAttribute(e,2),null===t&&(t=void 0)}return t}this.each(function(){var n;if(1===this.nodeType){if((n=Or[e])&&n.set)return void n.set(this,t);null===t?this.removeAttribute(e,2):this.setAttribute(e,t,2)}})}return r},removeAttr:function(e){return this.attr(e,null)},prop:function(e,t){var n=this;if("object"==typeof(e=Rr[e]||e))Fr(e,function(e,t){n.prop(e,t)});else{if(!xr(t))return n[0]&&n[0].nodeType&&e in n[0]?n[0][e]:t;this.each(function(){1===this.nodeType&&(this[e]=t)})}return n},css:function(e,t){var n,r,i=this,o=function(e){return e.replace(/-(\D)/g,function(e,t){return t.toUpperCase()})},a=function(e){return e.replace(/[A-Z]/g,function(e){return"-"+e})};if("object"==typeof e)Fr(e,function(e,t){i.css(e,t)});else if(xr(t))e=o(e),"number"!=typeof t||Nr[e]||(t=t.toString()+"px"),i.each(function(){var n=this.style;if((r=Ir[e])&&r.set)return void r.set(this,t);try{this.style[Pr[e]||e]=t}catch(e){}null!==t&&""!==t||(n.removeProperty?n.removeProperty(a(e)):n.removeAttribute(e))});else{if(n=i[0],(r=Ir[e])&&r.get)return r.get(n);if(!n.ownerDocument.defaultView)return n.currentStyle?n.currentStyle[o(e)]:"";try{return n.ownerDocument.defaultView.getComputedStyle(n,null).getPropertyValue(a(e))}catch(e){return}}return i},remove:function(){for(var e,t=this,n=this.length;n--;)e=t[n],wr.clean(e),e.parentNode&&e.parentNode.removeChild(e);return this},empty:function(){for(var e,t=this,n=this.length;n--;)for(e=t[n];e.firstChild;)e.removeChild(e.firstChild);return this},html:function(e){var t,n=this;if(xr(e)){t=n.length;try{for(;t--;)n[t].innerHTML=e}catch(r){Mr(n[t]).empty().append(e)}return n}return n[0]?n[0].innerHTML:""},text:function(e){var t,n=this;if(xr(e)){for(t=n.length;t--;)"innerText"in n[t]?n[t].innerText=e:n[0].textContent=e;return n}return n[0]?n[0].innerText||n[0].textContent:""},append:function(){return Sr(this,arguments,function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.appendChild(e)})},prepend:function(){return Sr(this,arguments,function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.insertBefore(e,this.firstChild)},!0)},before:function(){var e=this;return e[0]&&e[0].parentNode?Sr(e,arguments,function(e){this.parentNode.insertBefore(e,this)}):e},after:function(){var e=this;return e[0]&&e[0].parentNode?Sr(e,arguments,function(e){this.parentNode.insertBefore(e,this.nextSibling)},!0):e},appendTo:function(e){return Mr(e).append(this),this},prependTo:function(e){return Mr(e).prepend(this),this},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){return Er(this,e)},wrapAll:function(e){return Er(this,e,!0)},wrapInner:function(e){return this.each(function(){Mr(this).contents().wrapAll(e)}),this},unwrap:function(){return this.parent().each(function(){Mr(this).replaceWith(this.childNodes)})},clone:function(){var e=[];return this.each(function(){e.push(this.cloneNode(!0))}),Mr(e)},addClass:function(e){return this.toggleClass(e,!0)},removeClass:function(e){return this.toggleClass(e,!1)},toggleClass:function(e,t){var n=this;return"string"!=typeof e?n:(-1!==e.indexOf(" ")?Fr(e.split(" "),function(){n.toggleClass(this,t)}):n.each(function(n,r){var i,o;(o=Dr(r,e))!==t&&(i=r.className,o?r.className=Lr((" "+i+" ").replace(" "+e+" "," ")):r.className+=i?" "+e:e)}),n)},hasClass:function(e){return Dr(this[0],e)},each:function(e){return Fr(this,e)},on:function(e,t){return this.each(function(){wr.bind(this,e,t)})},off:function(e,t){return this.each(function(){wr.unbind(this,e,t)})},trigger:function(e){return this.each(function(){"object"==typeof e?wr.fire(this,e.type,e):wr.fire(this,e)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new Mr(br.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(e){var t,n,r=[];for(t=0,n=this.length;t<n;t++)Mr.find(e,this[t],r);return Mr(r)},filter:function(e){return Mr("function"==typeof e?Hr(this.toArray(),function(t,n){return e(n,t)}):Mr.filter(e,this.toArray()))},closest:function(e){var t=[];return e instanceof Mr&&(e=e[0]),this.each(function(n,r){for(;r;){if("string"==typeof e&&Mr(r).is(e)){t.push(r);break}if(r===e){t.push(r);break}r=r.parentNode}}),Mr(t)},offset:function(e){var t,n,r,i,o=0,a=0;return e?this.css(e):(t=this[0],t&&(n=t.ownerDocument,r=n.documentElement,t.getBoundingClientRect&&(i=t.getBoundingClientRect(),o=i.left+(r.scrollLeft||n.body.scrollLeft)-r.clientLeft,a=i.top+(r.scrollTop||n.body.scrollTop)-r.clientTop)),{left:o,top:a})},push:vr,sort:[].sort,splice:[].splice},gr.extend(Mr,{extend:gr.extend,makeArray:function(e){return kr(e)||e.nodeType?[e]:gr.toArray(e)},inArray:jr,isArray:gr.isArray,each:Fr,trim:Lr,grep:Hr,find:qn,expr:qn.selectors,unique:qn.uniqueSort,text:qn.getText,contains:qn.contains,filter:function(e,t,n){var r=t.length;for(n&&(e=":not("+e+")");r--;)1!==t[r].nodeType&&t.splice(r,1);return t=1===t.length?Mr.find.matchesSelector(t[0],e)?[t[0]]:[]:Mr.find.matches(e,t)}});var Ur=function(e,t,n){var r=[],i=e[t];for("string"!=typeof n&&n instanceof Mr&&(n=n[0]);i&&9!==i.nodeType;){if(void 0!==n){if(i===n)break;if("string"==typeof n&&Mr(i).is(n))break}1===i.nodeType&&r.push(i),i=i[t]}return r},zr=function(e,t,n,r){var i=[];for(r instanceof Mr&&(r=r[0]);e;e=e[t])if(!n||e.nodeType===n){if(void 0!==r){if(e===r)break;if("string"==typeof r&&Mr(e).is(r))break}i.push(e)}return i},Wr=function(e,t,n){for(e=e[t];e;e=e[t])if(e.nodeType===n)return e;return null};Fr({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return Ur(e,"parentNode")},next:function(e){return Wr(e,"nextSibling",1)},prev:function(e){return Wr(e,"previousSibling",1)},children:function(e){return zr(e.firstChild,"nextSibling",1)},contents:function(e){return gr.toArray(("iframe"===e.nodeName?e.contentDocument||e.contentWindow.document:e).childNodes)}},function(e,t){Mr.fn[e]=function(n){var r=this,i=[];return r.each(function(){var e=t.call(i,this,n,i);e&&(Mr.isArray(e)?i.push.apply(i,e):i.push(e))}),this.length>1&&(_r[e]||(i=Mr.unique(i)),0===e.indexOf("parents")&&(i=i.reverse())),i=Mr(i),n?i.filter(n):i}}),Fr({parentsUntil:function(e,t){return Ur(e,"parentNode",t)},nextUntil:function(e,t){return zr(e,"nextSibling",1,t).slice(1)},prevUntil:function(e,t){return zr(e,"previousSibling",1,t).slice(1)}},function(e,t){Mr.fn[e]=function(n,r){var i=this,o=[];return i.each(function(){var e=t.call(o,this,n,o);e&&(Mr.isArray(e)?o.push.apply(o,e):o.push(e))}),this.length>1&&(o=Mr.unique(o),0!==e.indexOf("parents")&&"prevUntil"!==e||(o=o.reverse())),o=Mr(o),r?o.filter(r):o}}),Mr.fn.is=function(e){return!!e&&this.filter(e).length>0},Mr.fn.init.prototype=Mr.fn,Mr.overrideDefaults=function(e){var t,n=function(r,i){return t=t||e(),0===arguments.length&&(r=t.element),i||(i=t.context),new n.fn.init(r,i)};return Mr.extend(n,this),n};var qr=function(e,t,n){Fr(n,function(n,r){e[n]=e[n]||{},e[n][t]=r})};Ct.ie&&Ct.ie<8&&(qr(Or,"get",{maxlength:function(e){var t=e.maxLength;if(2147483647!==t)return t},size:function(e){var t=e.size;if(20!==t)return t},class:function(e){return e.className},style:function(e){var t=e.style.cssText;if(0!==t.length)return t}}),qr(Or,"set",{class:function(e,t){e.className=t},style:function(e,t){e.style.cssText=t}})),Ct.ie&&Ct.ie<9&&(Pr.float="styleFloat",qr(Ir,"set",{opacity:function(e,t){var n=e.style;null===t||""===t?n.removeAttribute("filter"):(n.zoom=1,n.filter="alpha(opacity="+100*t+")")}})),Mr.attrHooks=Or,Mr.cssHooks=Ir;var Vr,Yr,Gr,Kr=function(e){var t,n=!1;return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return n||(n=!0,t=e.apply(null,r)),t}},Xr=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}},Jr=function(e,t){var n=Xr(e,t);if(!n)return{major:0,minor:0};var r=function(e){return Number(t.replace(n,"$"+e))};return ei(r(1),r(2))},Qr=function(e,t){var n=String(t).toLowerCase();return 0===e.length?Zr():Jr(e,n)},Zr=function(){return ei(0,0)},ei=function(e,t){return{major:e,minor:t}},ti={nu:ei,detect:Qr,unknown:Zr},ni=function(e,t){return function(){return t===e}},ri=function(){return ii({current:void 0,version:ti.unknown()})},ii=function(e){var t=e.current;return{current:t,version:e.version,isEdge:ni("Edge",t),isChrome:ni("Chrome",t),isIE:ni("IE",t),isOpera:ni("Opera",t),isFirefox:ni("Firefox",t),isSafari:ni("Safari",t)}},oi={unknown:ri,nu:ii,edge:pe("Edge"),chrome:pe("Chrome"),ie:pe("IE"),opera:pe("Opera"),firefox:pe("Firefox"),safari:pe("Safari")},ai=function(e,t){return function(){return t===e}},si=function(){return li({current:void 0,version:ti.unknown()})},li=function(e){var t=e.current;return{current:t,version:e.version,isWindows:ai("Windows",t),isiOS:ai("iOS",t),isAndroid:ai("Android",t),isOSX:ai("OSX",t),isLinux:ai("Linux",t),isSolaris:ai("Solaris",t),isFreeBSD:ai("FreeBSD",t)}},ci={unknown:si,nu:li,windows:pe("Windows"),ios:pe("iOS"),android:pe("Android"),linux:pe("Linux"),osx:pe("OSX"),solaris:pe("Solaris"),freebsd:pe("FreeBSD")},ui=function(e,t){var n=String(t).toLowerCase();return Ye(e,function(e){return e.search(n)})},di=function(e,t){return ui(e,t).map(function(e){var n=ti.detect(e.versionRegexes,t);return{current:e.name,version:n}})},fi=function(e,t){return ui(e,t).map(function(e){var n=ti.detect(e.versionRegexes,t);return{current:e.name,version:n}})},hi={detectBrowser:di,detectOs:fi},pi=function(e,t){return-1!==e.indexOf(t)},gi=function(e){return e.replace(/^\s+|\s+$/g,"")},mi=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,vi=function(e){return function(t){return pi(t,e)}},bi=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return pi(e,"edge/")&&pi(e,"chrome")&&pi(e,"safari")&&pi(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,mi],search:function(e){return pi(e,"chrome")&&!pi(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return pi(e,"msie")||pi(e,"trident")}},{name:"Opera",versionRegexes:[mi,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:vi("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:vi("firefox")},{name:"Safari",versionRegexes:[mi,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(pi(e,"safari")||pi(e,"mobile/"))&&pi(e,"applewebkit")}}],yi=[{name:"Windows",search:vi("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return pi(e,"iphone")||pi(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:vi("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:vi("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:vi("linux"),versionRegexes:[]},{name:"Solaris",search:vi("sunos"),versionRegexes:[]},{name:"FreeBSD",search:vi("freebsd"),versionRegexes:[]}],wi={browsers:pe(bi),oses:pe(yi)},_i=function(e){var t=wi.browsers(),n=wi.oses(),r=hi.detectBrowser(t,e).fold(oi.unknown,oi.nu),i=hi.detectOs(n,e).fold(ci.unknown,ci.nu);return{browser:r,os:i,deviceType:p(i,r,e)}},xi={detect:_i},Ci=Kr(function(){var e=navigator.userAgent;return xi.detect(e)}),ki={detect:Ci},Ti=function(e,t){var n=t||document,r=n.createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1)throw"HTML must have a single root node";return Ei(r.childNodes[0])},Si=function(e,t){var n=t||document,r=n.createElement(e);return Ei(r)},Di=function(e,t){var n=t||document,r=n.createTextNode(e);return Ei(r)},Ei=function(e){if(null===e||void 0===e)throw new Error("Node cannot be null or undefined");return{dom:pe(e)}},Ni=function(e,t,n){var r=e.dom();return Se.from(r.elementFromPoint(t,n)).map(Ei)},Ai={fromHtml:Ti,fromTag:Si,fromText:Di,fromDom:Ei,fromPoint:Ni},Ri={ATTRIBUTE:Node.ATTRIBUTE_NODE,CDATA_SECTION:Node.CDATA_SECTION_NODE,COMMENT:Node.COMMENT_NODE,DOCUMENT:Node.DOCUMENT_NODE,DOCUMENT_TYPE:Node.DOCUMENT_TYPE_NODE,DOCUMENT_FRAGMENT:Node.DOCUMENT_FRAGMENT_NODE,ELEMENT:Node.ELEMENT_NODE,TEXT:Node.TEXT_NODE,PROCESSING_INSTRUCTION:Node.PROCESSING_INSTRUCTION_NODE,ENTITY_REFERENCE:Node.ENTITY_REFERENCE_NODE,ENTITY:Node.ENTITY_NODE,NOTATION:Node.NOTATION_NODE},Pi=function(e){return e.dom().nodeName.toLowerCase()},Oi=function(e){return e.dom().nodeType},Ii=function(e){return e.dom().nodeValue},Mi=function(e){return function(t){return Oi(t)===e}},ji=function(e){return Oi(e)===Ri.COMMENT||"#comment"===Pi(e)},Bi=Mi(Ri.ELEMENT),Li=Mi(Ri.TEXT),Fi=Mi(Ri.DOCUMENT),Hi={name:Pi,type:Oi,value:Ii,isElement:Bi,isText:Li,isDocument:Fi,isComment:ji},$i=Object.keys,Ui=function(e,t){for(var n=$i(e),r=0,i=n.length;r<i;r++){var o=n[r];t(e[o],o,e)}},zi=function(e,t){return Wi(e,function(e,n,r){return{k:n,v:t(e,n,r)}})},Wi=function(e,t){var n={};return Ui(e,function(r,i){var o=t(r,i,e);n[o.k]=o.v}),n},qi=function(e,t){var n={},r={};return Ui(e,function(e,i){(t(e,i)?n:r)[i]=e}),{t:n,f:r}},Vi=function(e,t,n){if(!(Ne(n)||Oe(n)||Me(n)))throw new Error("Attribute value was not simple");e.setAttribute(t,n+"")},Yi=function(e,t,n){Vi(e.dom(),t,n)},Gi=function(e,t){var n=e.dom();Ui(t,function(e,t){Vi(n,t,e)})},Ki=function(e,t){var n=e.dom().getAttribute(t);return null===n?void 0:n},Xi=function(e,t){var n=e.dom();return!(!n||!n.hasAttribute)&&n.hasAttribute(t)},Ji=function(e,t){e.dom().removeAttribute(t)},Qi=function(e){var t=e.dom().attributes;return void 0===t||null===t||0===t.length},Zi=function(e){return Ve(e.dom().attributes,function(e,t){return e[t.name]=t.value,e},{})},eo=function(e,t,n){Xi(e,n)&&!Xi(t,n)&&Yi(t,n,Ki(e,n))},to=function(e,t,n){Hi.isElement(e)&&Hi.isElement(t)&&$e(n,function(n){eo(e,t,n)})},no={clone:Zi,set:Yi,setAll:Gi,get:Ki,has:Xi,remove:Ji,hasNone:Qi,transfer:to},ro=function(e){var t=Hi.isText(e)?e.dom().parentNode:e.dom();return void 0!==t&&null!==t&&t.ownerDocument.body.contains(t)},io=Kr(function(){return oo(Ai.fromDom(document))}),oo=function(e){var t=e.dom().body;if(null===t||void 0===t)throw"Body is not available yet";return Ai.fromDom(t)},ao={body:io,getBody:oo,inBody:ro},so=function(e){return void 0!==e.style},lo={isSupported:so},co=function(e,t,n){if(!Ne(n))throw new Error("CSS value must be a string: "+n);lo.isSupported(e)&&e.style.setProperty(t,n)},uo=function(e,t){lo.isSupported(e)&&e.style.removeProperty(t)},fo=function(e,t,n){var r=e.dom();co(r,t,n)},ho=function(e,t){var n=e.dom();Ui(t,function(e,t){co(n,t,e)})},po=function(e,t){var n=e.dom();Ui(t,function(e,t){e.fold(function(){uo(n,t)},function(e){co(n,t,e)})})},go=function(e,t){var n=e.dom(),r=window.getComputedStyle(n),i=r.getPropertyValue(t),o=""!==i||ao.inBody(e)?i:mo(n,t);return null===o?void 0:o},mo=function(e,t){return lo.isSupported(e)?e.style.getPropertyValue(t):""},vo=function(e,t){var n=e.dom(),r=mo(n,t);return Se.from(r).filter(function(e){return e.length>0})},bo=function(e){var t={},n=e.dom();if(lo.isSupported(n))for(var r=0;r<n.style.length;r++){var i=n.style.item(r);t[i]=n.style[i]}return t},yo=function(e,t,n){var r=Ai.fromTag(e);return fo(r,t,n),vo(r,t).isSome()},wo=function(e,t){var n=e.dom();uo(n,t),no.has(e,"style")&&""===gi(no.get(e,"style"))&&no.remove(e,"style")},_o=function(e,t){var n=no.get(e,"style"),r=t(e);return(void 0===n?no.remove:no.set)(e,"style",n),r},xo=function(e,t){var n=e.dom(),r=t.dom();lo.isSupported(n)&&lo.isSupported(r)&&(r.style.cssText=n.style.cssText)},Co=function(e){return e.dom().offsetWidth},ko=function(e,t,n){vo(e,n).each(function(e){vo(t,n).isNone()&&fo(t,n,e)})},To=function(e,t,n){Hi.isElement(e)&&Hi.isElement(t)&&$e(n,function(n){ko(e,t,n)})},So={copy:xo,set:fo,preserve:_o,setAll:ho,setOptions:po,remove:wo,get:go,getRaw:vo,getAllRaw:bo,isValidValue:yo,reflow:Co,transfer:To},Do=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(e.length!==t.length)throw new Error('Wrong number of arguments to struct. Expected "['+e.length+']", got '+t.length+" arguments");var r={};return $e(e,function(e,n){r[e]=pe(t[n])}),r}},Eo=function(e,t){var n=[],r=function(e){return n.push(e),t(e)},i=t(e);do{i=i.bind(r)}while(i.isSome());return n},No={toArray:Eo},Ao=function(){return ht.getOrDie("Node")},Ro=function(e,t,n){return 0!=(e.compareDocumentPosition(t)&n)},Po=function(e,t){return Ro(e,t,Ao().DOCUMENT_POSITION_PRECEDING)},Oo=function(e,t){return Ro(e,t,Ao().DOCUMENT_POSITION_CONTAINED_BY)},Io={documentPositionPreceding:Po,documentPositionContainedBy:Oo},Mo=Ri.ELEMENT,jo=Ri.DOCUMENT,Bo=function(e,t){var n=e.dom();if(n.nodeType!==Mo)return!1;if(void 0!==n.matches)return n.matches(t);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(t);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(t);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},Lo=function(e){return e.nodeType!==Mo&&e.nodeType!==jo||0===e.childElementCount},Fo=function(e,t){var n=void 0===t?document:t.dom();return Lo(n)?[]:He(n.querySelectorAll(e),Ai.fromDom)},Ho=function(e,t){var n=void 0===t?document:t.dom();return Lo(n)?Se.none():Se.from(n.querySelector(e)).map(Ai.fromDom)},$o={all:Fo,is:Bo,one:Ho},Uo=function(e,t){return e.dom()===t.dom()},zo=function(e,t){return e.dom().isEqualNode(t.dom())},Wo=function(e,t){return Fe(t,me(Uo,e))},qo=function(e,t){var n=e.dom(),r=t.dom();return n!==r&&n.contains(r)},Vo=function(e,t){return Io.documentPositionContainedBy(e.dom(),t.dom())},Yo=ki.detect().browser,Go=Yo.isIE()?Vo:qo,Ko={eq:Uo,isEqualNode:zo,member:Wo,contains:Go,is:$o.is},Xo=function(e){return Ai.fromDom(e.dom().ownerDocument)},Jo=function(e){return Ai.fromDom(e.dom().ownerDocument.documentElement)},Qo=function(e){var t=e.dom(),n=t.ownerDocument.defaultView;return Ai.fromDom(n)},Zo=function(e){var t=e.dom();return Se.from(t.parentNode).map(Ai.fromDom)},ea=function(e){return Zo(e).bind(function(t){var n=la(t);return Ge(n,function(t){return Ko.eq(e,t)})})},ta=function(e,t){for(var n=Ie(t)?t:pe(!1),r=e.dom(),i=[];null!==r.parentNode&&void 0!==r.parentNode;){var o=r.parentNode,a=Ai.fromDom(o);if(i.push(a),!0===n(a))break;r=o}return i},na=function(e){var t=function(t){return We(t,function(t){return!Ko.eq(e,t)})};return Zo(e).map(la).map(t).getOr([])},ra=function(e){var t=e.dom();return Se.from(t.offsetParent).map(Ai.fromDom)},ia=function(e){var t=e.dom();return Se.from(t.previousSibling).map(Ai.fromDom)},oa=function(e){var t=e.dom();return Se.from(t.nextSibling).map(Ai.fromDom)},aa=function(e){return tt(No.toArray(e,ia))},sa=function(e){return No.toArray(e,oa)},la=function(e){var t=e.dom();return He(t.childNodes,Ai.fromDom)},ca=function(e,t){var n=e.dom().childNodes;return Se.from(n[t]).map(Ai.fromDom)},ua=function(e){return ca(e,0)},da=function(e){return ca(e,e.dom().childNodes.length-1)},fa=function(e){return e.dom().childNodes.length},ha=function(e){return e.dom().hasChildNodes()},pa=Do("element","offset"),ga=function(e,t){var n=la(e);return n.length>0&&t<n.length?pa(n[t],0):pa(e,t)},ma={owner:Xo,defaultView:Qo,documentElement:Jo,parent:Zo,findIndex:ea,parents:ta,siblings:na,prevSibling:ia,offsetParent:ra,prevSiblings:aa,nextSibling:oa,nextSiblings:sa,children:la,child:ca,firstChild:ua,lastChild:da,childNodesCount:fa,hasChildNodes:ha,leaf:ga},va=ki.detect().browser,ba=function(e){return Ye(e,Hi.isElement)},ya=function(e){return va.isFirefox()&&"table"===Hi.name(e)?ba(ma.children(e)).filter(function(e){return"caption"===Hi.name(e)}).bind(function(e){return ba(ma.nextSiblings(e)).map(function(t){var n=t.dom().offsetTop,r=e.dom().offsetTop,i=e.dom().offsetHeight;return n<=r?-i:0})}).getOr(0):0},wa=function(e,t,n){var r,i,o=0,a=0,s=e.ownerDocument;if(n=n||e,t){if(n===e&&t.getBoundingClientRect&&"static"===So.get(Ai.fromDom(e),"position"))return i=t.getBoundingClientRect(),o=i.left+(s.documentElement.scrollLeft||e.scrollLeft)-s.documentElement.clientLeft,a=i.top+(s.documentElement.scrollTop||e.scrollTop)-s.documentElement.clientTop,{x:o,y:a};for(r=t;r&&r!==n&&r.nodeType;)o+=r.offsetLeft||0,a+=r.offsetTop||0,r=r.offsetParent;for(r=t.parentNode;r&&r!==n&&r.nodeType;)o-=r.scrollLeft||0,a-=r.scrollTop||0,r=r.parentNode;a+=ya(Ai.fromDom(t))}return{x:o,y:a}},_a={getPos:wa},xa=function(e){var t=Se.none(),n=[],r=function(e){return xa(function(t){i(function(n){t(e(n))})})},i=function(e){a()?l(e):n.push(e)},o=function(e){t=Se.some(e),s(n),n=[]},a=function(){return t.isSome()},s=function(e){$e(e,l)},l=function(e){t.each(function(t){setTimeout(function(){e(t)},0)})};return e(o),{get:i,map:r,isReady:a}},Ca=function(e){return xa(function(t){t(e)})},ka={nu:xa,pure:Ca},Ta=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=this;setTimeout(function(){e.apply(r,t)},0)}},Sa=function(e){var t=function(t){e(Ta(t))};return{map:function(e){return Sa(function(n){t(function(t){var r=e(t);n(r)})})},bind:function(e){return Sa(function(n){t(function(t){e(t).get(n)})})},anonBind:function(e){return Sa(function(n){t(function(t){e.get(n)})})},toLazy:function(){return ka.nu(t)},get:t}},Da=function(e){return Sa(function(t){t(e)})},Ea={nu:Sa,pure:Da},Na=function(e,t){return t(function(t){var n=[],r=0,i=function(i){return function(o){n[i]=o,++r>=e.length&&t(n)}};0===e.length?t([]):$e(e,function(e,t){e.get(i(t))})})},Aa=function(e){return Na(e,Ea.nu)},Ra=function(e){var t=function(t){return e===t},n=function(t){return Ra(e)},r=function(t){return Ra(e)},i=function(t){return Ra(t(e))},o=function(t){t(e)},a=function(t){return t(e)},s=function(t,n){return n(e)},l=function(t){return t(e)},c=function(t){return t(e)},u=function(){return Se.some(e)};return{is:t,isValue:ye,isError:be,getOr:pe(e),getOrThunk:pe(e),getOrDie:pe(e),or:n,orThunk:r,fold:s,map:i,each:o,bind:a,exists:l,forall:c,toOption:u}},Pa=function(e){var t=function(e){return e()},n=function(){return ve(String(e))()},r=function(e){return e},i=function(e){return e()},o=function(t){return Pa(e)},a=function(t){return Pa(e)};return{is:be,isValue:be,isError:ye,getOr:ge,getOrThunk:t,getOrDie:n,or:r,orThunk:i,fold:function(t,n){return t(e)},map:o,each:fe,bind:a,exists:be,forall:ye,toOption:Se.none}},Oa={value:Ra,error:Pa},Ia=["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"],Ma=["area","base","basefont","br","col","frame","hr","img","input","isindex","link","meta","param","embed","source","wbr","track"],ja=["td","th"],Ba=["thead","tbody","tfoot"],La=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],Fa=["h1","h2","h3","h4","h5","h6"],Ha=["li","dd","dt"],$a=["ul","ol","dl"],Ua=["pre","script","textarea","style"],za=function(e){var t;return function(n){return t=t||rt(e,pe(!0)),t.hasOwnProperty(Hi.name(n))}},Wa=za(Fa),qa=za(Ia),Va=function(e){return Hi.isElement(e)&&!qa(e)},Ya=function(e){return Hi.isElement(e)&&"br"===Hi.name(e)},Ga=za(La),Ka=za($a),Xa=za(Ha),Ja=za(Ma),Qa=za(Ba),Za=za(ja),es=za(Ua),ts=function(e){return function(t){return!!t&&t.nodeType===e}},ns=ts(1),rs=function(e){var t=e.toLowerCase().split(" ");return function(e){var n,r;if(e&&e.nodeType)for(r=e.nodeName.toLowerCase(),n=0;n<t.length;n++)if(r===t[n])return!0;return!1}},is=function(e,t){var n=t.toLowerCase().split(" ");return function(t){var r;if(ns(t))for(r=0;r<n.length;r++){var i=t.ownerDocument.defaultView.getComputedStyle(t,null);if((i?i.getPropertyValue(e):null)===n[r])return!0}return!1}},os=function(e,t){return function(n){return ns(n)&&n[e]===t}},as=function(e,t){return function(t){return ns(t)&&t.hasAttribute(e)}},ss=function(e,t){return function(n){return ns(n)&&n.getAttribute(e)===t}},ls=function(e){return ns(e)&&e.hasAttribute("data-mce-bogus")},cs=function(e){return ns(e)&&"all"===e.getAttribute("data-mce-bogus")},us=function(e){return ns(e)&&"TABLE"===e.tagName},ds=function(e){return function(t){if(ns(t)){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}return!1}},fs=ts(3),hs=ts(8),ps=ts(9),gs=rs("br"),ms=ds("true"),vs=ds("false"),bs={isText:fs,isElement:ns,isComment:hs,isDocument:ps,isBr:gs,isContentEditableTrue:ms,isContentEditableFalse:vs,matchNodeNames:rs,hasPropValue:os,hasAttribute:as,hasAttributeValue:ss,matchStyleValues:is,isBogus:ls,isBogusAll:cs,isTable:us},ys=function(e){var t=e.previousSibling&&"SPAN"===e.previousSibling.nodeName,n=e.nextSibling&&"SPAN"===e.nextSibling.nodeName;return t&&n},ws=function(e){return e&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")},_s=function(e,t){var n,r=t.childNodes;if(!bs.isElement(t)||!ws(t)){for(n=r.length-1;n>=0;n--)_s(e,r[n]);if(!1===bs.isDocument(t)){if(bs.isText(t)&&t.nodeValue.length>0){var i=gr.trim(t.nodeValue).length;if(e.isBlock(t.parentNode)||i>0)return;if(0===i&&ys(t))return}else if(bs.isElement(t)&&(r=t.childNodes,1===r.length&&ws(r[0])&&t.parentNode.insertBefore(r[0],t),r.length||Ja(Ai.fromDom(t))))return;e.remove(t)}return t}},xs={trimNode:_s},Cs=gr.makeMap,ks=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ts=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ss=/[<>&\"\']/g,Ds=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,Es={128:"",130:"",131:"",132:"",133:"",134:"",135:"",136:"",137:"",138:"",139:"",140:"",142:"",145:"",146:"",147:"",148:"",149:"",150:"",151:"",152:"",153:"",154:"",155:"",156:"",158:"",159:""};Yr={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},Gr={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};var Ns=function(e){var t;return t=Ai.fromTag("div").dom(),t.innerHTML=e,t.textContent||t.innerText||e},As=function(e,t){var n,r,i,o={};if(e){for(e=e.split(","),t=t||10,n=0;n<e.length;n+=2)r=String.fromCharCode(parseInt(e[n],t)),Yr[r]||(i="&"+e[n+1]+";",o[r]=i,o[i]=r);return o}}
;Vr=As("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);var Rs=function(e,t){return e.replace(t?ks:Ts,function(e){return Yr[e]||e})},Ps=function(e){return(""+e).replace(Ss,function(e){return Yr[e]||e})},Os=function(e,t){return e.replace(t?ks:Ts,function(e){return e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":Yr[e]||"&#"+e.charCodeAt(0)+";"})},Is=function(e,t,n){return n=n||Vr,e.replace(t?ks:Ts,function(e){return Yr[e]||n[e]||e})},Ms=function(e,t){var n=As(t)||Vr,r=function(e,t){return e.replace(t?ks:Ts,function(e){return void 0!==Yr[e]?Yr[e]:void 0!==n[e]?n[e]:e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":"&#"+e.charCodeAt(0)+";"})},i=function(e,t){return Is(e,t,n)},o=Cs(e.replace(/\+/g,","));return o.named&&o.numeric?r:o.named?t?i:Is:o.numeric?Os:Rs},js=function(e){return e.replace(Ds,function(e,t){return t?(t="x"===t.charAt(0).toLowerCase()?parseInt(t.substr(1),16):parseInt(t,10),t>65535?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t))):Es[t]||String.fromCharCode(t)):Gr[e]||Vr[e]||Ns(e)})},Bs={encodeRaw:Rs,encodeAllRaw:Ps,encodeNumeric:Os,encodeNamed:Is,getEncodeFunc:Ms,decode:js},Ls={},Fs={},Hs=gr.makeMap,$s=gr.each,Us=gr.extend,zs=gr.explode,Ws=gr.inArray,qs=function(e,t){return e=gr.trim(e),e?e.split(t||" "):[]},Vs=function(e){var t,n,r,i,o,a,s={},l=function(e,n,r){var i,o,a,l=function(e,t){var n,r,i={};for(n=0,r=e.length;n<r;n++)i[e[n]]=t||{};return i};for(r=r||[],n=n||"","string"==typeof r&&(r=qs(r)),e=qs(e),i=e.length;i--;)o=qs([t,n].join(" ")),a={attributes:l(o),attributesOrder:o,children:l(r,Fs)},s[e[i]]=a},c=function(e,t){var n,r,i,o;for(e=qs(e),n=e.length,t=qs(t);n--;)for(r=s[e[n]],i=0,o=t.length;i<o;i++)r.attributes[t[i]]={},r.attributesOrder.push(t[i])};return Ls[e]?Ls[e]:(t="id accesskey class dir lang style tabindex title role",n="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",r="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==e&&(t+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",n+=" article aside details dialog figure header footer hgroup section nav",r+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==e&&(t+=" xml:lang",a="acronym applet basefont big font strike tt",r=[r,a].join(" "),$s(qs(a),function(e){l(e,"",r)}),o="center dir isindex noframes",n=[n,o].join(" "),i=[n,r].join(" "),$s(qs(o),function(e){l(e,"",i)})),i=i||[n,r].join(" "),l("html","manifest","head body"),l("head","","base command link meta noscript script style title"),l("title hr noscript br"),l("base","href target"),l("link","href rel media hreflang type sizes hreflang"),l("meta","name http-equiv content charset"),l("style","media type scoped"),l("script","src async defer type charset"),l("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",i),l("address dt dd div caption","",i),l("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",r),l("blockquote","cite",i),l("ol","reversed start type","li"),l("ul","","li"),l("li","value",i),l("dl","","dt dd"),l("a","href target rel media hreflang type",r),l("q","cite",r),l("ins del","cite datetime",i),l("img","src sizes srcset alt usemap ismap width height"),l("iframe","src name width height",i),l("embed","src type width height"),l("object","data type typemustmatch name usemap form width height",[i,"param"].join(" ")),l("param","name value"),l("map","name",[i,"area"].join(" ")),l("area","alt coords shape href target rel media hreflang type"),l("table","border","caption colgroup thead tfoot tbody tr"+("html4"===e?" col":"")),l("colgroup","span","col"),l("col","span"),l("tbody thead tfoot","","tr"),l("tr","","td th"),l("td","colspan rowspan headers",i),l("th","colspan rowspan headers scope abbr",i),l("form","accept-charset action autocomplete enctype method name novalidate target",i),l("fieldset","disabled form name",[i,"legend"].join(" ")),l("label","form for",r),l("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),l("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===e?i:r),l("select","disabled form multiple name required size","option optgroup"),l("optgroup","disabled label","option"),l("option","disabled label selected value"),l("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),l("menu","type label",[i,"li"].join(" ")),l("noscript","",i),"html4"!==e&&(l("wbr"),l("ruby","",[r,"rt rp"].join(" ")),l("figcaption","",i),l("mark rt rp summary bdi","",r),l("canvas","width height",i),l("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[i,"track source"].join(" ")),l("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[i,"track source"].join(" ")),l("picture","","img source"),l("source","src srcset type media sizes"),l("track","kind src srclang label default"),l("datalist","",[r,"option"].join(" ")),l("article section nav aside header footer","",i),l("hgroup","","h1 h2 h3 h4 h5 h6"),l("figure","",[i,"figcaption"].join(" ")),l("time","datetime",r),l("dialog","open",i),l("command","type label icon disabled checked radiogroup command"),l("output","for form name",r),l("progress","value max",r),l("meter","value min max low high optimum",r),l("details","open",[i,"summary"].join(" ")),l("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==e&&(c("script","language xml:space"),c("style","xml:space"),c("object","declare classid code codebase codetype archive standby align border hspace vspace"),c("embed","align name hspace vspace"),c("param","valuetype type"),c("a","charset name rev shape coords"),c("br","clear"),c("applet","codebase archive code object alt name width height align hspace vspace"),c("img","name longdesc align border hspace vspace"),c("iframe","longdesc frameborder marginwidth marginheight scrolling align"),c("font basefont","size color face"),c("input","usemap align"),c("select","onchange"),c("textarea"),c("h1 h2 h3 h4 h5 h6 div p legend caption","align"),c("ul","type compact"),c("li","type"),c("ol dl menu dir","compact"),c("pre","width xml:space"),c("hr","align noshade size width"),c("isindex","prompt"),c("table","summary width frame rules cellspacing cellpadding align bgcolor"),c("col","width align char charoff valign"),c("colgroup","width align char charoff valign"),c("thead","align char charoff valign"),c("tr","align char charoff valign bgcolor"),c("th","axis align char charoff valign nowrap bgcolor width height"),c("form","accept"),c("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),c("tfoot","align char charoff valign"),c("tbody","align char charoff valign"),c("area","nohref"),c("body","background bgcolor text link vlink alink")),"html4"!==e&&(c("input button select textarea","autofocus"),c("input textarea","placeholder"),c("a","download"),c("link script img","crossorigin"),c("iframe","sandbox seamless allowfullscreen")),$s(qs("a form meter progress dfn"),function(e){s[e]&&delete s[e].children[e]}),delete s.caption.children.table,delete s.script,Ls[e]=s,s)},Ys=function(e,t){var n;return e&&(n={},"string"==typeof e&&(e={"*":e}),$s(e,function(e,r){n[r]=n[r.toUpperCase()]="map"===t?Hs(e,/[, ]/):zs(e,/[, ]/)})),n},Gs=function(e,t,n,r){var i=function(e){return e=parseInt(e,10).toString(16),e.length>1?e:"0"+e};return"#"+i(t)+i(n)+i(r)},Ks=gr.each,Xs=gr.grep,Js=Ct.ie,Qs=/^([a-z0-9],?)+$/i,Zs=/^[ \t\r\n]*$/,el=function(e,t,n){var r={},i=t.keep_values,o={set:function(e,r,i){t.url_converter&&(r=t.url_converter.call(t.url_converter_scope||n(),r,i,e[0])),e.attr("data-mce-"+i,r).attr(i,r)},get:function(e,t){return e.attr("data-mce-"+t)||e.attr(t)}};return r={style:{set:function(e,t){if(null!==t&&"object"==typeof t)return void e.css(t);i&&e.attr("data-mce-style",t),e.attr("style",t)},get:function(t){var n=t.attr("data-mce-style")||t.attr("style");return n=e.serialize(e.parse(n),t[0].nodeName)}}},i&&(r.href=r.src=o),r},tl=function(e,t){var n=t.attr("style"),r=e.serialize(e.parse(n),t[0].nodeName);r||(r=null),t.attr("data-mce-style",r)},nl=function(e,t){var n,r,i=0;if(e)for(n=e.nodeType,e=e.previousSibling;e;e=e.previousSibling)r=e.nodeType,(!t||3!==r||r!==n&&e.nodeValue.length)&&(i++,n=r);return i};!function(e){e.DOM=e(document),e.nodeIndex=nl}(y||(y={}));var rl=y,il=rl.DOM,ol=gr.each,al=gr.grep,sl=function(e){return"function"==typeof e},ll=function(){var e={},t=[],n={},r=[],i=0,o=function(e,t,n){var r,i,o=il,a=function(){o.remove(i),r&&(r.onreadystatechange=r.onload=r=null),t()},s=function(){sl(n)?n():"undefined"!=typeof console&&console.log};i=o.uniqueId(),r=document.createElement("script"),r.id=i,r.type="text/javascript",r.src=gr._addCacheSuffix(e),r.onload=a,r.onerror=s,(document.getElementsByTagName("head")[0]||document.body).appendChild(r)};this.isDone=function(t){return 2===e[t]},this.markDone=function(t){e[t]=2},this.add=this.load=function(r,i,o,a){void 0===e[r]&&(t.push(r),e[r]=0),i&&(n[r]||(n[r]=[]),n[r].push({success:i,failure:a,scope:o||this}))},this.remove=function(t){delete e[t],delete n[t]},this.loadQueue=function(e,n,r){this.loadScripts(t,e,n,r)},this.loadScripts=function(t,a,s,l){var c,u=[],d=function(e,t){ol(n[t],function(t){sl(t[e])&&t[e].call(t.scope)}),n[t]=void 0};r.push({success:a,failure:l,scope:s||this}),(c=function(){var n=al(t);if(t.length=0,ol(n,function(t){return 2===e[t]?void d("success",t):3===e[t]?void d("failure",t):void(1!==e[t]&&(e[t]=1,i++,o(t,function(){e[t]=2,i--,d("success",t),c()},function(){e[t]=3,i--,u.push(t),d("failure",t),c()})))}),!i){var a=r.slice(0);r.length=0,ol(a,function(e){0===u.length?sl(e.success)&&e.success.call(e.scope):sl(e.failure)&&e.failure.call(e.scope,u)})}})()}};ll.ScriptLoader=new ll;var cl=gr.each;!function(e){e.PluginManager=e(),e.ThemeManager=e()}(w||(w={}));var ul=function(e,t){ma.parent(e).each(function(n){n.dom().insertBefore(t.dom(),e.dom())})},dl=function(e,t){ma.nextSibling(e).fold(function(){ma.parent(e).each(function(e){hl(e,t)})},function(e){ul(e,t)})},fl=function(e,t){ma.firstChild(e).fold(function(){hl(e,t)},function(n){e.dom().insertBefore(t.dom(),n.dom())})},hl=function(e,t){e.dom().appendChild(t.dom())},pl=function(e,t,n){ma.child(e,n).fold(function(){hl(e,t)},function(e){ul(e,t)})},gl=function(e,t){ul(e,t),hl(t,e)},ml={before:ul,after:dl,prepend:fl,append:hl,appendAt:pl,wrap:gl},vl=function(e,t){$e(t,function(t){ml.before(e,t)})},bl=function(e,t){$e(t,function(n,r){var i=0===r?e:t[r-1];ml.after(i,n)})},yl=function(e,t){$e(t.slice().reverse(),function(t){ml.prepend(e,t)})},wl=function(e,t){$e(t,function(t){ml.append(e,t)})},_l={before:vl,after:bl,prepend:yl,append:wl},xl=function(e){e.dom().textContent="",$e(ma.children(e),function(e){Cl(e)})},Cl=function(e){var t=e.dom();null!==t.parentNode&&t.parentNode.removeChild(t)},kl=function(e){var t=ma.children(e);t.length>0&&_l.before(e,t),Cl(e)},Tl={empty:xl,remove:Cl,unwrap:kl},Sl=function(e,t){var n=null;return{cancel:function(){null!==n&&(clearTimeout(n),n=null)},throttle:function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];null===n&&(n=setTimeout(function(){e.apply(null,r),n=null},t))}}},Dl=function(e,t){var n=null;return{cancel:function(){null!==n&&(clearTimeout(n),n=null)},throttle:function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];null!==n&&clearTimeout(n),n=setTimeout(function(){e.apply(null,r),n=null},t)}}},El=function(e){var t=e,n=function(){return t};return{get:n,set:function(e){t=e},clone:function(){return El(n())}}},Nl=function(e,t){var n=no.get(e,t);return void 0===n||""===n?[]:n.split(" ")},Al=function(e,t,n){var r=Nl(e,t),i=r.concat([n]);return no.set(e,t,i.join(" ")),!0},Rl=function(e,t,n){var r=We(Nl(e,t),function(e){return e!==n});return r.length>0?no.set(e,t,r.join(" ")):no.remove(e,t),!1},Pl={read:Nl,add:Al,remove:Rl},Ol=function(e){return void 0!==e.dom().classList},Il=function(e){return Pl.read(e,"class")},Ml=function(e,t){return Pl.add(e,"class",t)},jl=function(e,t){return Pl.remove(e,"class",t)},Bl=function(e,t){return Le(Il(e),t)?jl(e,t):Ml(e,t)},Ll={get:Il,add:Ml,remove:jl,toggle:Bl,supports:Ol},Fl=function(e,t){Ll.supports(e)?e.dom().classList.add(t):Ll.add(e,t)},Hl=function(e){0===(Ll.supports(e)?e.dom().classList:Ll.get(e)).length&&no.remove(e,"class")},$l=function(e,t){if(Ll.supports(e)){e.dom().classList.remove(t)}else Ll.remove(e,t);Hl(e)},Ul=function(e,t){return Ll.supports(e)?e.dom().classList.toggle(t):Ll.toggle(e,t)},zl=function(e,t){var n=Ll.supports(e),r=e.dom().classList;return _(function(){n?r.remove(t):Ll.remove(e,t)},function(){n?r.add(t):Ll.add(e,t)},Wl(e,t))},Wl=function(e,t){return Ll.supports(e)&&e.dom().classList.contains(t)},ql={add:Fl,remove:$l,toggle:Ul,toggler:zl,has:Wl},Vl=function(e){return Xl(ao.body(),e)},Yl=function(e,t,n){return We(ma.parents(e,n),t)},Gl=function(e,t){return We(ma.siblings(e),t)},Kl=function(e,t){return We(ma.children(e),t)},Xl=function(e,t){var n=[];return $e(ma.children(e),function(e){t(e)&&(n=n.concat([e])),n=n.concat(Xl(e,t))}),n},Jl={all:Vl,ancestors:Yl,siblings:Gl,children:Kl,descendants:Xl},Ql=function(e){return $o.all(e)},Zl=function(e,t,n){return Jl.ancestors(e,function(e){return $o.is(e,t)},n)},ec=function(e,t){return Jl.siblings(e,function(e){return $o.is(e,t)})},tc=function(e,t){return Jl.children(e,function(e){return $o.is(e,t)})},nc=function(e,t){return $o.all(t,e)},rc={all:Ql,ancestors:Zl,siblings:ec,children:tc,descendants:nc},ic=function(e){return cc(ao.body(),e)},oc=function(e,t,n){for(var r=e.dom(),i=Ie(n)?n:pe(!1);r.parentNode;){r=r.parentNode;var o=Ai.fromDom(r);if(t(o))return Se.some(o);if(i(o))break}return Se.none()},ac=function(e,t,n){return x(function(e){return t(e)},oc,e,t,n)},sc=function(e,t){var n=e.dom();return n.parentNode?lc(Ai.fromDom(n.parentNode),function(n){return!Ko.eq(e,n)&&t(n)}):Se.none()},lc=function(e,t){return Ye(e.dom().childNodes,he(t,Ai.fromDom)).map(Ai.fromDom)},cc=function(e,t){var n=function(e){for(var r=0;r<e.childNodes.length;r++){if(t(Ai.fromDom(e.childNodes[r])))return Se.some(Ai.fromDom(e.childNodes[r]));var i=n(e.childNodes[r]);if(i.isSome())return i}return Se.none()};return n(e.dom())},uc={first:ic,ancestor:oc,closest:ac,sibling:sc,child:lc,descendant:cc},dc=function(e){return $o.one(e)},fc=function(e,t,n){return uc.ancestor(e,function(e){return $o.is(e,t)},n)},hc=function(e,t){return uc.sibling(e,function(e){return $o.is(e,t)})},pc=function(e,t){return uc.child(e,function(e){return $o.is(e,t)})},gc=function(e,t){return $o.one(t,e)},mc=function(e,t,n){return x($o.is,fc,e,t,n)},vc={first:dc,ancestor:fc,sibling:hc,child:pc,descendant:gc,closest:mc},bc=pe("mce-annotation"),yc=pe("data-mce-annotation"),wc=pe("data-mce-annotation-uid"),_c=function(e,t){var n=e.selection.getRng(),r=Ai.fromDom(n.startContainer),i=Ai.fromDom(e.getBody()),o=t.fold(function(){return"."+bc()},function(e){return"["+yc()+'="'+e+'"]'}),a=ma.child(r,n.startOffset).getOr(r),s=vc.closest(a,o,function(e){return Ko.eq(e,i)}),l=function(e,t){return no.has(e,t)?Se.some(no.get(e,t)):Se.none()};return s.bind(function(t){return l(t,""+wc()).bind(function(n){return l(t,""+yc()).map(function(t){var r=Cc(e,n);return{uid:n,name:t,elements:r}})})})},xc=function(e){return Hi.isElement(e)&&ql.has(e,bc())},Cc=function(e,t){var n=Ai.fromDom(e.getBody());return rc.descendants(n,"["+wc()+'="'+t+'"]')},kc=function(e,t){var n=Ai.fromDom(e.getBody()),r=rc.descendants(n,"["+yc()+'="'+t+'"]'),i={};return $e(r,function(e){var t=no.get(e,wc()),n=i.hasOwnProperty(t)?i[t]:[];i[t]=n.concat([e])}),i},Tc=function(e,t){var n=El({}),r=function(){return{listeners:[],previous:El(Se.none())}},i=function(e,t){o(e,function(e){return t(e),e})},o=function(e,t){var i=n.get(),o=i.hasOwnProperty(e)?i[e]:r(),a=t(o);i[e]=a,n.set(i)},a=function(e,t,n){i(e,function(r){$e(r.listeners,function(r){return r(!0,e,{uid:t,nodes:He(n,function(e){return e.dom()})})})})},s=function(e){i(e,function(t){$e(t.listeners,function(t){return t(!1,e)})})},l=Dl(function(){var t=n.get(),r=it($i(t));$e(r,function(t){o(t,function(n){var r=n.previous.get();return _c(e,Se.some(t)).fold(function(){r.isSome()&&(s(t),n.previous.set(Se.none()))},function(e){var t=e.uid,i=e.name,o=e.elements;r.is(t)||(a(i,t,o),n.previous.set(Se.some(t)))}),{previous:n.previous,listeners:n.listeners}})})},30);return e.on("remove",function(){l.cancel()}),e.on("nodeChange",function(){l.throttle()}),{addListener:function(e,t){o(e,function(e){return{previous:e.previous,listeners:e.listeners.concat([t])}})}}},Sc=function(e,t){var n=function(e){return Se.from(e.attributes.map[yc()]).bind(t.lookup)};e.on("init",function(){e.serializer.addNodeFilter("span",function(e){$e(e,function(e){n(e).each(function(t){!1===t.persistent&&e.unwrap()})})})})},Dc=function(){var e={};return{register:function(t,n){e[t]={name:t,settings:n}},lookup:function(t){return e.hasOwnProperty(t)?Se.from(e[t]).map(function(e){return e.settings}):Se.none()}}},Ec=0,Nc=function(e){var t=new Date,n=t.getTime(),r=Math.floor(1e9*Math.random());return Ec++,e+"_"+r+Ec+String(n)},Ac=function(e,t){$e(t,function(t){ql.add(e,t)})},Rc=function(e,t){$e(t,function(t){ql.remove(e,t)})},Pc=function(e,t){$e(t,function(t){ql.toggle(e,t)})},Oc=function(e,t){return Ze(t,function(t){return ql.has(e,t)})},Ic=function(e,t){return Fe(t,function(t){return ql.has(e,t)})},Mc=function(e){for(var t=e.dom().classList,n=new Array(t.length),r=0;r<t.length;r++)n[r]=t.item(r);return n},jc=function(e){return Ll.supports(e)?Mc(e):Ll.get(e)},Bc={add:Ac,remove:Rc,toggle:Pc,hasAll:Oc,hasAny:Ic,get:jc},Lc=function(e,t){return Ai.fromDom(e.dom().cloneNode(t))},Fc=function(e){return Lc(e,!1)},Hc=function(e){return Lc(e,!0)},$c=function(e,t){var n=Ai.fromTag(t),r=no.clone(e);return no.setAll(n,r),n},Uc=function(e,t){var n=$c(e,t),r=ma.children(Hc(e));return _l.append(n,r),n},zc=function(e,t){var n=$c(e,t);ml.before(e,n);var r=ma.children(e);return _l.append(n,r),Tl.remove(e),n},Wc={shallow:Fc,shallowAs:$c,deep:Hc,copy:Uc,mutate:zc},qc=[].slice,Vc=function(e){return function(){return e}},Yc=function(e){return function(t){return!e(t)}},Gc=function(e,t){return function(n){return e(t(n))}},Kc=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=qc.call(arguments);return function(e){for(var t=0;t<n.length;t++)if(n[t](e))return!0;return!1}},Xc=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=qc.call(arguments);return function(e){for(var t=0;t<n.length;t++)if(!n[t](e))return!1;return!0}},Jc=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=qc.call(arguments);return r.length-1>=e.length?e.apply(this,r.slice(1)):function(){var e=r.concat([].slice.call(arguments));return Jc.apply(this,e)}},Qc=function(){},Zc={constant:Vc,negate:Yc,and:Xc,or:Kc,curry:Jc,compose:Gc,noop:Qc},eu=function(e){return"\ufeff"===e},tu=function(e){return e.replace(new RegExp("\ufeff","g"),"")},nu={isZwsp:eu,ZWSP:"\ufeff",trim:tu},ru=bs.isElement,iu=bs.isText,ou=function(e){return iu(e)&&(e=e.parentNode),ru(e)&&e.hasAttribute("data-mce-caret")},au=function(e){return iu(e)&&nu.isZwsp(e.data)},su=function(e){return ou(e)||au(e)},lu=function(e){return e.firstChild!==e.lastChild||!bs.isBr(e.firstChild)},cu=function(e,t){var n,r,i,o;if(n=e.ownerDocument,i=n.createTextNode(nu.ZWSP),o=e.parentNode,t){if(r=e.previousSibling,iu(r)){if(su(r))return r;if(gu(r))return r.splitText(r.data.length-1)}o.insertBefore(i,e)}else{if(r=e.nextSibling,iu(r)){if(su(r))return r;if(pu(r))return r.splitText(1),r}e.nextSibling?o.insertBefore(i,e.nextSibling):o.appendChild(i)}return i},uu=function(e){var t=e.container();return e&&bs.isText(t)&&t.data.charAt(e.offset())===nu.ZWSP},du=function(e){var t=e.container();return e&&bs.isText(t)&&t.data.charAt(e.offset()-1)===nu.ZWSP},fu=function(){var e=document.createElement("br");return e.setAttribute("data-mce-bogus","1"),e},hu=function(e,t,n){var r,i,o;return r=t.ownerDocument,i=r.createElement(e),i.setAttribute("data-mce-caret",n?"before":"after"),i.setAttribute("data-mce-bogus","all"),i.appendChild(fu()),o=t.parentNode,n?o.insertBefore(i,t):t.nextSibling?o.insertBefore(i,t.nextSibling):o.appendChild(i),i},pu=function(e){return iu(e)&&e.data[0]===nu.ZWSP},gu=function(e){return iu(e)&&e.data[e.data.length-1]===nu.ZWSP},mu=function(e){var t=e.getElementsByTagName("br"),n=t[t.length-1];bs.isBogus(n)&&n.parentNode.removeChild(n)},vu=function(e){return e&&e.hasAttribute("data-mce-caret")?(mu(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("_moz_abspos"),e):null},bu=function(e){return ou(e.startContainer)},yu=bs.isContentEditableTrue,wu=bs.isContentEditableFalse,_u=bs.isBr,xu=bs.isText,Cu=bs.matchNodeNames("script style textarea"),ku=bs.matchNodeNames("img input textarea hr iframe video audio object"),Tu=bs.matchNodeNames("table"),Su=su,Du=function(e){return!Su(e)&&(xu(e)?!Cu(e.parentNode):ku(e)||_u(e)||Tu(e)||Nu(e))},Eu=function(e){return bs.isElement(e)&&"true"===e.getAttribute("unselectable")},Nu=function(e){return!1===Eu(e)&&wu(e)},Au=function(e,t){for(e=e.parentNode;e&&e!==t;e=e.parentNode){if(Nu(e))return!1;if(yu(e))return!0}return!0},Ru=function(e){return!!Nu(e)&&!0!==nr.reduce(e.getElementsByTagName("*"),function(e,t){return e||yu(t)},!1)},Pu=function(e){return ku(e)||Ru(e)},Ou=function(e,t){return Du(e)&&Au(e,t)},Iu=Math.round,Mu=function(e){return e?{left:Iu(e.left),top:Iu(e.top),bottom:Iu(e.bottom),right:Iu(e.right),width:Iu(e.width),height:Iu(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}},ju=function(e,t){return e=Mu(e),t?e.right=e.left:(e.left=e.left+e.width,e.right=e.left),e.width=0,e},Bu=function(e,t){return e.left===t.left&&e.top===t.top&&e.bottom===t.bottom&&e.right===t.right},Lu=function(e,t,n){return e>=0&&e<=Math.min(t.height,n.height)/2},Fu=function(e,t){return e.bottom-e.height/2<t.top||!(e.top>t.bottom)&&Lu(t.top-e.bottom,e,t)},Hu=function(e,t){return e.top>t.bottom||!(e.bottom<t.top)&&Lu(t.bottom-e.top,e,t)},$u=function(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom},Uu=function(e,t){return t.left>e.left&&t.right<e.right?0:t.left<e.left?t.left-e.left:t.right-e.right},zu=function(e,t){return t.top>e.top&&t.bottom<e.bottom?0:t.top<e.top?t.top-e.top:t.bottom-e.bottom},Wu=function(e,t){return{x:Uu(e,t),y:zu(e,t)}},qu=function(e){var t=e.startContainer,n=e.startOffset;return t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null},Vu=function(e,t){return 1===e.nodeType&&e.hasChildNodes()&&(t>=e.childNodes.length&&(t=e.childNodes.length-1),e=e.childNodes[t]),e},Yu=new RegExp("[-----------------------------------------------------------------------------------------------------------------------------------]"),Gu=function(e){return"string"==typeof e&&e.charCodeAt(0)>=768&&Yu.test(e)},Ku=function(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r];if(!i.isSome())return Se.none();n.push(i.getOrDie())}return Se.some(t.apply(null,n))},Xu=bs.isElement,Ju=Du,Qu=bs.matchStyleValues("display","block table"),Zu=bs.matchStyleValues("float","left right"),ed=Zc.and(Xu,Ju,Zc.negate(Zu)),td=Zc.negate(bs.matchStyleValues("white-space","pre pre-line pre-wrap")),nd=bs.isText,rd=bs.isBr,id=rl.nodeIndex,od=Vu,ad=function(e){return"createRange"in e?e.createRange():rl.DOM.createRng()},sd=function(e){return e&&/[\r\n\t ]/.test(e)},ld=function(e){return!!e.setStart&&!!e.setEnd},cd=function(e){var t,n=e.startContainer,r=e.startOffset;return!!(sd(e.toString())&&td(n.parentNode)&&bs.isText(n)&&(t=n.data,sd(t[r-1])||sd(t[r+1])))},ud=function(e){var t,n=e.ownerDocument,r=ad(n),i=n.createTextNode(""),o=e.parentNode;return o.insertBefore(i,e),r.setStart(i,0),r.setEnd(i,1),t=Mu(r.getBoundingClientRect()),o.removeChild(i),t},dd=function(e){var t=e.startContainer,n=e.endContainer,r=e.startOffset,i=e.endOffset;if(t===n&&bs.isText(n)&&0===r&&1===i){var o=e.cloneRange();return o.setEndAfter(n),hd(o)}return null},fd=function(e){return 0===e.left&&0===e.right&&0===e.top&&0===e.bottom},hd=function(e){var t,n;return n=e.getClientRects(),t=Mu(n.length>0?n[0]:e.getBoundingClientRect()),!ld(e)&&rd(e)&&fd(t)?ud(e):fd(t)&&ld(e)?dd(e):t},pd=function(e,t){var n=ju(e,t);return n.width=1,n.right=n.left+1,n},gd=function(e){var t,n,r=[],i=function(e){0!==e.height&&(r.length>0&&Bu(e,r[r.length-1])||r.push(e))},o=function(e,t){var n=ad(e.ownerDocument);if(t<e.data.length){if(Gu(e.data[t]))return r;if(Gu(e.data[t-1])&&(n.setStart(e,t),n.setEnd(e,t+1),!cd(n)))return i(pd(hd(n),!1)),r}t>0&&(n.setStart(e,t-1),n.setEnd(e,t),cd(n)||i(pd(hd(n),!1))),t<e.data.length&&(n.setStart(e,t),n.setEnd(e,t+1),cd(n)||i(pd(hd(n),!0)))};if(nd(e.container()))return o(e.container(),e.offset()),r;if(Xu(e.container()))if(e.isAtEnd())n=od(e.container(),e.offset()),nd(n)&&o(n,n.data.length),ed(n)&&!rd(n)&&i(pd(hd(n),!1));else{if(n=od(e.container(),e.offset()),nd(n)&&o(n,0),ed(n)&&e.isAtEnd())return i(pd(hd(n),!1)),r;t=od(e.container(),e.offset()-1),ed(t)&&!rd(t)&&(Qu(t)||Qu(n)||!ed(n))&&i(pd(hd(t),!1)),ed(n)&&i(pd(hd(n),!0))}return r};!function(e){e.fromRangeStart=function(t){return e(t.startContainer,t.startOffset)},e.fromRangeEnd=function(t){return e(t.endContainer,t.endOffset)},e.after=function(t){return e(t.parentNode,id(t)+1)},e.before=function(t){return e(t.parentNode,id(t))},e.isAbove=function(e,t){return Ku([ot(t.getClientRects()),at(e.getClientRects())],Fu).getOr(!1)},e.isBelow=function(e,t){return Ku([at(t.getClientRects()),ot(e.getClientRects())],Hu).getOr(!1)},e.isAtStart=function(e){return!!e&&e.isAtStart()},e.isAtEnd=function(e){return!!e&&e.isAtEnd()},e.isTextPosition=function(e){return!!e&&bs.isText(e.container())},e.isElementPosition=function(t){return!1===e.isTextPosition(t)}}(C||(C={}));var md,vd=C,bd=bs.isText,yd=bs.isBogus,wd=rl.nodeIndex,_d=function(e){var t=e.parentNode;return yd(t)?_d(t):t},xd=function(e){return e?nr.reduce(e.childNodes,function(e,t){return yd(t)&&"BR"!==t.nodeName?e=e.concat(xd(t)):e.push(t),e},[]):[]},Cd=function(e,t){for(;(e=e.previousSibling)&&bd(e);)t+=e.data.length;return t},kd=function(e){return function(t){return e===t}},Td=function(e){var t,n,r;return t=xd(_d(e)),n=nr.findIndex(t,kd(e),e),t=t.slice(0,n+1),r=nr.reduce(t,function(e,n,r){return bd(n)&&bd(t[r-1])&&e++,e},0),t=nr.filter(t,bs.matchNodeNames(e.nodeName)),(n=nr.findIndex(t,kd(e),e))-r},Sd=function(e){return(bd(e)?"text()":e.nodeName.toLowerCase())+"["+Td(e)+"]"},Dd=function(e,t,n){var r=[];for(t=t.parentNode;t!==e&&(!n||!n(t));t=t.parentNode)r.push(t);return r},Ed=function(e,t){var n,r,i,o,a,s=[];return n=t.container(),r=t.offset(),bd(n)?i=Cd(n,r):(o=n.childNodes,r>=o.length?(i="after",r=o.length-1):i="before",n=o[r]),s.push(Sd(n)),a=Dd(e,n),a=nr.filter(a,Zc.negate(bs.isBogus)),s=s.concat(nr.map(a,function(e){return Sd(e)})),s.reverse().join("/")+","+i},Nd=function(e,t,n){var r=xd(e);return r=nr.filter(r,function(e,t){return!bd(e)||!bd(r[t-1])}),r=nr.filter(r,bs.matchNodeNames(t)),r[n]},Ad=function(e,t){for(var n,r=e,i=0;bd(r);){if(n=r.data.length,t>=i&&t<=i+n){e=r,t-=i;break}if(!bd(r.nextSibling)){e=r,t=n;break}i+=n,r=r.nextSibling}return bd(e)&&t>e.data.length&&(t=e.data.length),vd(e,t)},Rd=function(e,t){var n,r,i;return t?(n=t.split(","),t=n[0].split("/"),i=n.length>1?n[1]:"before",r=nr.reduce(t,function(e,t){return(t=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(t))?("text()"===t[1]&&(t[1]="#text"),Nd(e,t[1],parseInt(t[2],10))):null},e),r?bd(r)?Ad(r,parseInt(i,10)):(i="after"===i?wd(r)+1:wd(r),vd(r.parentNode,i)):null):null},Pd=bs.isContentEditableFalse,Od=function(e,t,n){var r,i;for(i=e(t.data.slice(0,n)).length,r=t.previousSibling;r&&bs.isText(r);r=r.previousSibling)i+=e(r.data).length;return i},Id=function(e,t,n,r,i){var o,a=r[i?"startContainer":"endContainer"],s=r[i?"startOffset":"endOffset"],l=[],c=0,u=e.getRoot();for(bs.isText(a)?l.push(n?Od(t,a,s):s):(o=a.childNodes,s>=o.length&&o.length&&(c=1,s=Math.max(0,o.length-1)),l.push(e.nodeIndex(o[s],n)+c));a&&a!==u;a=a.parentNode)l.push(e.nodeIndex(a,n));return l},Md=function(e,t,n,r){var i=t.dom,o={};return o.start=Id(i,e,n,r,!0),t.isCollapsed()||(o.end=Id(i,e,n,r,!1)),o},jd=function(e){bs.isText(e)&&0===e.data.length&&e.parentNode.removeChild(e)},Bd=function(e,t,n){var r=0;return gr.each(e.select(t),function(e){if("all"!==e.getAttribute("data-mce-bogus"))return e!==n&&void r++}),r},Ld=function(e,t){var n,r,i,o=t?"start":"end";n=e[o+"Container"],r=e[o+"Offset"],bs.isElement(n)&&"TR"===n.nodeName&&(i=n.childNodes,(n=i[Math.min(t?r:r-1,i.length-1)])&&(r=t?0:n.childNodes.length,e["set"+(t?"Start":"End")](n,r)))},Fd=function(e){return Ld(e,!0),Ld(e,!1),e},Hd=function(e,t){var n;if(bs.isElement(e)&&(e=Vu(e,t),Pd(e)))return e;if(su(e)){if(bs.isText(e)&&ou(e)&&(e=e.parentNode),n=e.previousSibling,Pd(n))return n;if(n=e.nextSibling,Pd(n))return n}},$d=function(e){return Hd(e.startContainer,e.startOffset)||Hd(e.endContainer,e.endOffset)},Ud=function(e,t,n){var r=n.getNode(),i=r?r.nodeName:null,o=n.getRng()
;if(Pd(r)||"IMG"===i)return{name:i,index:Bd(n.dom,i,r)};var a=$d(o);return a?(i=a.tagName,{name:i,index:Bd(n.dom,i,a)}):Md(e,n,t,o)},zd=function(e){var t=e.getRng();return{start:Ed(e.dom.getRoot(),vd.fromRangeStart(t)),end:Ed(e.dom.getRoot(),vd.fromRangeEnd(t))}},Wd=function(e){return{rng:e.getRng()}},qd=function(e,t,n){var r={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",r,"&#xFEFF;"):e.create("span",r)},Vd=function(e,t){var n=e.dom,r=e.getRng(),i=n.uniqueId(),o=e.isCollapsed(),a=e.getNode(),s=a.nodeName;if("IMG"===s)return{name:s,index:Bd(n,s,a)};var l=Fd(r.cloneRange());if(!o){l.collapse(!1);var c=qd(n,i+"_end",t);l.insertNode(c),jd(c.nextSibling)}r=Fd(r),r.collapse(!0);var u=qd(n,i+"_start",t);return r.insertNode(u),jd(u.previousSibling),e.moveToBookmark({id:i,keep:1}),{id:i}},Yd=function(e,t,n){return 2===t?Ud(nu.trim,n,e):3===t?zd(e):t?Wd(e):Vd(e,!1)},Gd={getBookmark:Yd,getUndoBookmark:me(Ud,ge,!0),getPersistentBookmark:Vd},Kd=function(e){return bs.isElement(e)&&"_mce_caret"===e.id},Xd=function(e,t){for(;t&&t!==e;){if("_mce_caret"===t.id)return t;t=t.parentNode}return null},Jd=bs.isElement,Qd=bs.isText,Zd=function(e){var t=e.parentNode;t&&t.removeChild(e)},ef=function(e){try{return e.nodeValue}catch(e){return""}},tf=function(e,t){0===t.length?Zd(e):e.nodeValue=t},nf=function(e){var t=nu.trim(e);return{count:e.length-t.length,text:t}},rf=function(e,t){return uf(e),t},of=function(e,t){var n=nf(e.data.substr(0,t.offset())),r=nf(e.data.substr(t.offset())),i=n.text+r.text;return i.length>0?(tf(e,i),vd(e,t.offset()-n.count)):t},af=function(e,t){var n=t.container(),r=Be(st(n.childNodes),e).map(function(e){return e<t.offset()?vd(n,t.offset()-1):t}).getOr(t);return uf(e),r},sf=function(e,t){return Qd(e)&&t.container()===e?of(e,t):rf(e,t)},lf=function(e,t){return t.container()===e.parentNode?af(e,t):rf(e,t)},cf=function(e,t){return vd.isTextPosition(t)?sf(e,t):lf(e,t)},uf=function(e){if(Jd(e)&&su(e)&&(lu(e)?e.removeAttribute("data-mce-caret"):Zd(e)),Qd(e)){var t=nu.trim(ef(e));tf(e,t)}},df={removeAndReposition:cf,remove:uf},ff=bs.isContentEditableTrue,hf=bs.isContentEditableFalse,pf=function(e,t,n,r,i){return t._selectionOverrides.showCaret(e,n,r,i)},gf=function(e){var t=e.ownerDocument.createRange();return t.selectNode(e),t},mf=function(e,t){return e.fire("BeforeObjectSelected",{target:t}).isDefaultPrevented()?null:gf(t)},vf=function(e,t,n){var r=gp(1,e.getBody(),t),i=vd.fromRangeStart(r),o=i.getNode();if(hf(o))return pf(1,e,o,!i.isAtEnd(),!1);var a=i.getNode(!0);if(hf(a))return pf(1,e,a,!1,!1);var s=e.dom.getParent(i.getNode(),function(e){return hf(e)||ff(e)});return hf(s)?pf(1,e,s,!1,n):null},bf=function(e,t,n){if(!t||!t.collapsed)return t;var r=vf(e,t,n);return r||t};!function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"}(md||(md={}));var yf,wf=bs.isContentEditableFalse,_f=bs.isText,xf=bs.isElement,Cf=bs.isBr,kf=Du,Tf=Pu,Sf=Ou,Df=function(e,t){for(var n=[];e&&e!==t;)n.push(e),e=e.parentNode;return n},Ef=function(e,t){return e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null},Nf=function(e,t){if(rp(e)){if(kf(t.previousSibling)&&!_f(t.previousSibling))return vd.before(t);if(_f(t))return vd(t,0)}if(ip(e)){if(kf(t.nextSibling)&&!_f(t.nextSibling))return vd.after(t);if(_f(t))return vd(t,t.data.length)}return ip(e)?Cf(t)?vd.before(t):vd.after(t):vd.before(t)},Af=function(e,t){var n;return!!bs.isBr(e)&&(!!(n=Rf(1,vd.after(e),t))&&!lp(vd.before(e),vd.before(n),t))},Rf=function(e,t,n){var r,i,o,a,s;if(!xf(n)||!t)return null;if(t.isEqual(vd.after(n))&&n.lastChild){if(s=vd.after(n.lastChild),ip(e)&&kf(n.lastChild)&&xf(n.lastChild))return Cf(n.lastChild)?vd.before(n.lastChild):s}else s=t;var l=s.container(),c=s.offset();if(_f(l)){if(ip(e)&&c>0)return vd(l,--c);if(rp(e)&&c<l.length)return vd(l,++c);r=l}else{if(ip(e)&&c>0&&(i=Ef(l,c-1),kf(i)))return!Tf(i)&&(o=ap(i,e,Sf,i))?_f(o)?vd(o,o.data.length):vd.after(o):_f(i)?vd(i,i.data.length):vd.before(i);if(rp(e)&&c<l.childNodes.length&&(i=Ef(l,c),kf(i)))return Cf(i)&&n.lastChild===i?null:Af(i,n)?Rf(e,vd.after(i),n):!Tf(i)&&(o=ap(i,e,Sf,i))?_f(o)?vd(o,0):vd.before(o):_f(i)?vd(i,0):vd.after(i);r=i||s.getNode()}return(rp(e)&&s.isAtEnd()||ip(e)&&s.isAtStart())&&(r=ap(r,e,Zc.constant(!0),n,!0),Sf(r,n))?Nf(e,r):(i=ap(r,e,Sf,n),a=nr.last(nr.filter(Df(l,n),wf)),!a||i&&a.contains(i)?i?Nf(e,i):null:s=rp(e)?vd.after(a):vd.before(a))},Pf=function(e){return{next:function(t){return Rf(md.Forwards,t,e)},prev:function(t){return Rf(md.Backwards,t,e)}}};!function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"}(yf||(yf={}));var Of=function(e,t){return e===md.Backwards?t.reverse():t},If=function(e,t,n){return e===md.Forwards?t.next(n):t.prev(n)},Mf=function(e,t,n,r){return bs.isBr(r.getNode(t===md.Forwards))?yf.Br:!1===lp(n,r)?yf.Block:yf.Wrap},jf=function(e,t,n,r){for(var i,o=Pf(n),a=r,s=[];a&&(i=If(t,o,a));){if(bs.isBr(i.getNode(!1)))return t===md.Forwards?{positions:Of(t,s).concat([i]),breakType:yf.Br,breakAt:Se.some(i)}:{positions:Of(t,s),breakType:yf.Br,breakAt:Se.some(i)};if(i.isVisible()){if(e(a,i)){var l=Mf(0,t,a,i);return{positions:Of(t,s),breakType:l,breakAt:Se.some(i)}}s.push(i),a=i}else a=i}return{positions:Of(t,s),breakType:yf.Eol,breakAt:Se.none()}},Bf=function(e,t,n,r){return t(n,r).breakAt.map(function(r){var i=t(n,r).positions;return e===md.Backwards?i.concat(r):[r].concat(i)}).getOr([])},Lf=function(e,t){return Ve(e,function(e,n){return e.fold(function(){return Se.some(n)},function(r){return Ku([ot(r.getClientRects()),ot(n.getClientRects())],function(e,i){var o=Math.abs(t-e.left);return Math.abs(t-i.left)<=o?n:r}).or(e)})},Se.none())},Ff=function(e,t){return ot(t.getClientRects()).bind(function(t){return Lf(e,t.left)})},Hf=me(jf,C.isAbove,-1),$f=me(jf,C.isBelow,1),Uf=me(Bf,-1,Hf),zf=me(Bf,1,$f),Wf=function(e){return Ip.firstPositionIn(e).map(function(t){return[t].concat($f(e,t).positions)}).getOr([])},qf=function(e){return Ip.lastPositionIn(e).map(function(t){return Hf(e,t).positions.concat(t)}).getOr([])},Vf=function(e,t){return{left:e.left-t,top:e.top-t,right:e.right+2*t,bottom:e.bottom+2*t,width:e.width+t,height:e.height+t}},Yf=function(e,t){return Qe(t,function(t){var n=Vf(t.getBoundingClientRect(),-1);return[{x:n.left,y:e(n),cell:t},{x:n.right,y:e(n),cell:t}]})},Gf=function(e,t,n){return Ve(e,function(e,r){return e.fold(function(){return Se.some(r)},function(e){var i=Math.sqrt(Math.abs(e.x-t)+Math.abs(e.y-n)),o=Math.sqrt(Math.abs(r.x-t)+Math.abs(r.y-n));return Se.some(o<i?r:e)})},Se.none())},Kf=function(e,t,n,r,i){var o=rc.descendants(Ai.fromDom(n),"td,th").map(function(e){return e.dom()}),a=We(Yf(e,o),function(e){return t(e,i)});return Gf(a,r,i).map(function(e){return e.cell})},Xf=function(e){return e.bottom},Jf=function(e){return e.top},Qf=function(e,t){return e.y<t},Zf=function(e,t){return e.y>t},eh=me(Kf,Xf,Qf),th=me(Kf,Jf,Zf),nh=function(e,t){return ot(t.getClientRects()).bind(function(t){return eh(e,t.left,t.top)}).bind(function(e){return Ff(qf(e),t)})},rh=function(e,t){return at(t.getClientRects()).bind(function(t){return th(e,t.left,t.top)}).bind(function(e){return Ff(Wf(e),t)})},ih=function(e){for(var t=0,n=0,r=e;r&&r.nodeType;)t+=r.offsetLeft||0,n+=r.offsetTop||0,r=r.offsetParent;return{x:t,y:n}},oh=function(e,t,n){var r={elm:t,alignToTop:n};return e.fire("scrollIntoView",r),r.isDefaultPrevented()},ah=function(e,t,n){var r,i,o,a,s=e.dom,l=s.getRoot(),c=0;if(!oh(e,t,n)&&bs.isElement(t)){if(!1===n&&(c=t.offsetHeight),"BODY"!==l.nodeName){var u=e.selection.getScrollContainer();if(u)return r=ih(t).y-ih(u).y+c,a=u.clientHeight,o=u.scrollTop,void((r<o||r+25>o+a)&&(u.scrollTop=r<o?r:r-a+25))}i=s.getViewPort(e.getWin()),r=s.getPos(t).y+c,o=i.y,a=i.h,(r<i.y||r+25>o+a)&&e.getWin().scrollTo(0,r<o?r:r-a+25)}},sh=function(e){if(e.inline)return e.getBody().getBoundingClientRect();var t=e.getWin();return{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight,width:t.innerWidth,height:t.innerHeight}},lh=function(e,t,n){e.inline?(e.getBody().scrollLeft+=t,e.getBody().scrollTop+=n):e.getWin().scrollBy(t,n)},ch=function(e,t){ot(C.fromRangeStart(t).getClientRects()).each(function(t){var n=sh(e),r=Wu(n,t),i=r.x>0?r.x+4:r.x-4,o=r.y>0?r.y+4:r.y-4;lh(e,0!==r.x?i:0,0!==r.y?o:0)})},uh={scrollElementIntoView:ah,scrollRangeIntoView:ch},dh=function(e,t,n){var r=e.getParam(t,n);if(-1!==r.indexOf("=")){var i=e.getParam(t,"","hash");return i.hasOwnProperty(e.id)?i[e.id]:n}return r},fh=function(e){return e.getParam("iframe_attrs",{})},hh=function(e){return e.getParam("doctype","<!DOCTYPE html>")},ph=function(e){return e.getParam("document_base_url","")},gh=function(e){return dh(e,"body_id","tinymce")},mh=function(e){return dh(e,"body_class","")},vh=function(e){return e.getParam("content_security_policy","")},bh=function(e){return e.getParam("br_in_pre",!0)},yh=function(e){if(e.getParam("force_p_newlines",!1))return"p";var t=e.getParam("forced_root_block","p");return!1===t?"":t},wh=function(e){return e.getParam("forced_root_block_attrs",{})},_h=function(e){return e.getParam("br_newline_selector",".mce-toc h2,figcaption,caption")},xh=function(e){return e.getParam("no_newline_selector","")},Ch=function(e){return e.getParam("keep_styles",!0)},kh=function(e){return e.getParam("end_container_on_empty_block",!1)},Th=function(e){return gr.explode(e.getParam("font_size_style_values",""))},Sh=function(e){return gr.explode(e.getParam("font_size_classes",""))},Dh={getIframeAttrs:fh,getDocType:hh,getDocumentBaseUrl:ph,getBodyId:gh,getBodyClass:mh,getContentSecurityPolicy:vh,shouldPutBrInPre:bh,getForcedRootBlock:yh,getForcedRootBlockAttrs:wh,getBrNewLineSelector:_h,getNoNewLineSelector:xh,shouldKeepStyles:Ch,shouldEndContainerOnEmptyBlock:kh,getFontStyleValues:Th,getFontSizeClasses:Sh},Eh=ki.detect().browser,Nh=function(){return Eh.isIE()||Eh.isEdge()||Eh.isFirefox()},Ah=function(e,t){e.selection.setRng(t),uh.scrollRangeIntoView(e,t)},Rh=function(e,t,n){var r=e(t,n);return r.breakType===yf.Wrap&&0===r.positions.length?r.breakAt.map(function(n){return e(t,n).breakAt.isNone()}).getOr(!0):r.breakAt.isNone()},Ph=Zc.curry(Rh,Hf),Oh=Zc.curry(Rh,$f),Ih=function(e,t,n){var r=vd.fromRangeStart(t);return Ip.positionIn(!e,n).map(function(e){return e.isEqual(r)}).getOr(!1)},Mh=function(e,t,n,r){var i=e.selection.getRng(),o=t?1:-1;if(Nh()&&Ih(t,i,n)){var a=pf(o,e,n,!t,!0);return Ah(e,a),!0}return!1},jh=function(e,t,n){return nh(t,n).orThunk(function(){return ot(n.getClientRects()).bind(function(n){return Lf(Uf(e,vd.before(t)),n.left)})}).getOr(vd.before(t))},Bh=function(e,t,n){return rh(t,n).orThunk(function(){return ot(n.getClientRects()).bind(function(n){return Lf(zf(e,vd.after(t)),n.left)})}).getOr(vd.after(t))},Lh=function(e,t){var n=t.getNode(e);return bs.isElement(n)&&"TABLE"===n.nodeName?Se.some(n):Se.none()},Fh=function(e,t,n,r){var i=Dh.getForcedRootBlock(t);i?t.undoManager.transact(function(){var r=Ai.fromTag(i);no.setAll(r,Dh.getForcedRootBlockAttrs(t)),ml.append(r,Ai.fromTag("br")),e?ml.after(Ai.fromDom(n),r):ml.before(Ai.fromDom(n),r);var o=t.dom.createRng();o.setStart(r.dom(),0),o.setEnd(r.dom(),0),Ah(t,o)}):Ah(t,r.toRange())},Hh=function(e,t,n){var r=!1===t;(t?Lh(!0,n):Lh(!1,n)).fold(function(){return Ah(e,n.toRange())},function(i){return Ip.positionIn(r,e.getBody()).filter(function(e){return e.isEqual(n)}).fold(function(){return Ah(e,n.toRange())},function(r){return Fh(t,e,i,n)})})},$h=function(e,t,n,r){var i=e.selection.getRng(),o=vd.fromRangeStart(i),a=e.getBody();if(!t&&Ph(r,o)){var s=jh(a,n,o);return Hh(e,t,s),!0}if(t&&Oh(r,o)){var s=Bh(a,n,o);return Hh(e,t,s),!0}return!1},Uh=function(e,t){return function(){return Se.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(function(n){return Se.from(e.dom.getParent(n,"table")).map(function(n){return Mh(e,t,n)})}).getOr(!1)}},zh=function(e,t){return function(){return Se.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(function(n){return Se.from(e.dom.getParent(n,"table")).map(function(r){return $h(e,t,r,n)})}).getOr(!1)}},Wh=bs.isContentEditableFalse,qh=function(e){return bs.isElement(e)&&/^(TD|TH)$/i.test(e.tagName)},Vh=function(e,t,n){var r,i,o,a,s,l=ju(t.getBoundingClientRect(),n);return"BODY"===e.tagName?(r=e.ownerDocument.documentElement,i=e.scrollLeft||r.scrollLeft,o=e.scrollTop||r.scrollTop):(s=e.getBoundingClientRect(),i=e.scrollLeft-s.left,o=e.scrollTop-s.top),l.left+=i,l.right+=i,l.top+=o,l.bottom+=o,l.width=1,a=t.offsetWidth-t.clientWidth,a>0&&(n&&(a*=-1),l.left+=a,l.right+=a),l},Yh=function(e){var t,n,r,i,o;for(t=Mr("*[contentEditable=false]",e),i=0;i<t.length;i++)n=t[i],r=n.previousSibling,gu(r)&&(o=r.data,1===o.length?r.parentNode.removeChild(r):r.deleteData(o.length-1,1)),r=n.nextSibling,pu(r)&&(o=r.data,1===o.length?r.parentNode.removeChild(r):r.deleteData(0,1))},Gh=function(e,t,n){var r,i,o=El(Se.none()),a=function(n,r){var a,c;if(s(),qh(r))return null;if(!t(r))return i=cu(r,n),c=r.ownerDocument.createRange(),Wh(i.nextSibling)?(c.setStart(i,0),c.setEnd(i,0)):(c.setStart(i,1),c.setEnd(i,1)),c;i=hu("p",r,n),a=Vh(e,r,n),Mr(i).css("top",a.top);var u=Mr('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(a).appendTo(e)[0];return o.set(Se.some({caret:u,element:r,before:n})),o.get().each(function(e){n&&Mr(e.caret).addClass("mce-visual-caret-before")}),l(),c=r.ownerDocument.createRange(),c.setStart(i,0),c.setEnd(i,0),c},s=function(){Yh(e),i&&(df.remove(i),i=null),o.get().each(function(e){Mr(e.caret).remove(),o.set(Se.none())}),clearInterval(r)},l=function(){r=Rt.setInterval(function(){n()?Mr("div.mce-visual-caret",e).toggleClass("mce-visual-caret-hidden"):Mr("div.mce-visual-caret",e).addClass("mce-visual-caret-hidden")},500)},c=function(){o.get().each(function(t){var n=Vh(e,t.element,t.before);Mr(t.caret).css(n)})},u=function(){return Rt.clearInterval(r)};return{show:a,hide:s,getCss:function(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"},reposition:c,destroy:u}},Kh=function(e){return Wh(e)||bs.isTable(e)&&Nh()},Xh=bs.isContentEditableFalse,Jh=bs.matchStyleValues("display","block table table-cell table-caption list-item"),Qh=su,Zh=ou,ep=Zc.curry,tp=bs.isElement,np=Du,rp=function(e){return e>0},ip=function(e){return e<0},op=function(e,t){for(var n;n=e(t);)if(!Zh(n))return n;return null},ap=function(e,t,n,r,i){var o=new m(e,r);if(ip(t)){if((Xh(e)||Zh(e))&&(e=op(o.prev,!0),n(e)))return e;for(;e=op(o.prev,i);)if(n(e))return e}if(rp(t)){if((Xh(e)||Zh(e))&&(e=op(o.next,!0),n(e)))return e;for(;e=op(o.next,i);)if(n(e))return e}return null},sp=function(e,t){for(;e&&e!==t;){if(Jh(e))return e;e=e.parentNode}return null},lp=function(e,t,n){return sp(e.container(),n)===sp(t.container(),n)},cp=function(e,t){var n,r;return t?(n=t.container(),r=t.offset(),tp(n)?n.childNodes[r+e]:null):null},up=function(e,t){var n=t.ownerDocument.createRange();return e?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)),n},dp=function(e,t,n){return sp(t,e)===sp(n,e)},fp=function(e,t,n){var r,i;for(i=e?"previousSibling":"nextSibling";n&&n!==t;){if(r=n[i],Qh(r)&&(r=r[i]),Xh(r)){if(dp(t,r,n))return r;break}if(np(r))break;n=n.parentNode}return null},hp=ep(up,!0),pp=ep(up,!1),gp=function(e,t,n){var r,i,o,a,s=ep(fp,!0,t),l=ep(fp,!1,t);if(i=n.startContainer,o=n.startOffset,ou(i)){if(tp(i)||(i=i.parentNode),"before"===(a=i.getAttribute("data-mce-caret"))&&(r=i.nextSibling,Kh(r)))return hp(r);if("after"===a&&(r=i.previousSibling,Kh(r)))return pp(r)}if(!n.collapsed)return n;if(bs.isText(i)){if(Qh(i)){if(1===e){if(r=l(i))return hp(r);if(r=s(i))return pp(r)}if(-1===e){if(r=s(i))return pp(r);if(r=l(i))return hp(r)}return n}if(gu(i)&&o>=i.data.length-1)return 1===e&&(r=l(i))?hp(r):n;if(pu(i)&&o<=1)return-1===e&&(r=s(i))?pp(r):n;if(o===i.data.length)return r=l(i),r?hp(r):n;if(0===o)return r=s(i),r?pp(r):n}return n},mp=function(e,t){var n=cp(e,t);return Xh(n)&&!bs.isBogusAll(n)},vp=function(e,t){return bs.isTable(cp(e,t))},bp=function(e,t){return Se.from(cp(e?0:-1,t)).filter(Xh)},yp=function(e,t,n){var r=gp(e,t,n);return-1===e?C.fromRangeStart(r):C.fromRangeEnd(r)},wp=ep(mp,0),_p=ep(mp,-1),xp=ep(vp,0),Cp=ep(vp,-1),kp=function(e,t,n){var r=e?vd.before(n):vd.after(n);return Rp(e,t,r)},Tp=function(e){return bs.isBr(e)?vd.before(e):vd.after(e)},Sp=function(e){return vd.isTextPosition(e)?0===e.offset():Du(e.getNode())},Dp=function(e){if(vd.isTextPosition(e)){var t=e.container();return e.offset()===t.data.length}return Du(e.getNode(!0))},Ep=function(e,t){return!vd.isTextPosition(e)&&!vd.isTextPosition(t)&&e.getNode()===t.getNode(!0)},Np=function(e){return!vd.isTextPosition(e)&&bs.isBr(e.getNode())},Ap=function(e,t,n){return e?!Ep(t,n)&&!Np(t)&&Dp(t)&&Sp(n):!Ep(n,t)&&Sp(t)&&Dp(n)},Rp=function(e,t,n){var r=Pf(t);return Se.from(e?r.next(n):r.prev(n))},Pp=function(e,t,n){return Rp(e,t,n).bind(function(r){return lp(n,r,t)&&Ap(e,n,r)?Rp(e,t,r):Se.some(r)})},Op=function(e,t){var n=e?t.firstChild:t.lastChild;return bs.isText(n)?Se.some(vd(n,e?0:n.data.length)):n?Du(n)?Se.some(e?vd.before(n):Tp(n)):kp(e,t,n):Se.none()},Ip={fromPosition:Rp,nextPosition:me(Rp,!0),prevPosition:me(Rp,!1),navigate:Pp,positionIn:Op,firstPositionIn:me(Op,!0),lastPositionIn:me(Op,!1)},Mp=function(e){return"string"==typeof e.start},jp=function(e){return e.hasOwnProperty("rng")},Bp=function(e){return e.hasOwnProperty("id")},Lp=function(e){return e.hasOwnProperty("name")},Fp=function(e){return gr.isArray(e.start)},Hp=function(e,t){return!e.isBlock(t)||t.innerHTML||Ct.ie||(t.innerHTML='<br data-mce-bogus="1" />'),t},$p=function(e,t){var n,r;return n=e.createRng(),r=Rd(e.getRoot(),t.start),n.setStart(r.container(),r.offset()),r=Rd(e.getRoot(),t.end),n.setEnd(r.container(),r.offset()),n},Up=function(e,t){var n=e.ownerDocument.createTextNode(nu.ZWSP);e.appendChild(n),t.setStart(n,0),t.setEnd(n,0)},zp=function(e){return!1===e.hasChildNodes()},Wp=function(e,t){return Ip.lastPositionIn(e).fold(function(){return!1},function(e){return t.setStart(e.container(),e.offset()),t.setEnd(e.container(),e.offset()),!0})},qp=function(e,t,n){return!(!zp(t)||!Xd(e,t))&&(Up(t,n),!0)},Vp=function(e,t,n,r){var i,o,a,s,l=n[t?"start":"end"],c=e.getRoot();if(l){for(a=l[0],o=c,i=l.length-1;i>=1;i--){if(s=o.childNodes,qp(c,o,r))return!0;if(l[i]>s.length-1)return!!qp(c,o,r)||Wp(o,r);o=s[l[i]]}3===o.nodeType&&(a=Math.min(l[0],o.nodeValue.length)),1===o.nodeType&&(a=Math.min(l[0],o.childNodes.length)),t?r.setStart(o,a):r.setEnd(o,a)}return!0},Yp=function(e){return bs.isText(e)&&e.data.length>0},Gp=function(e,t,n){var r,i,o,a,s,l,c=e.get(n.id+"_"+t),u=n.keep;if(c){if(r=c.parentNode,"start"===t?(u?c.hasChildNodes()?(r=c.firstChild,i=1):Yp(c.nextSibling)?(r=c.nextSibling,i=0):Yp(c.previousSibling)?(r=c.previousSibling,i=c.previousSibling.data.length):(r=c.parentNode,i=e.nodeIndex(c)+1):i=e.nodeIndex(c),s=r,l=i):(u?c.hasChildNodes()?(r=c.firstChild,i=1):Yp(c.previousSibling)?(r=c.previousSibling,i=c.previousSibling.data.length):(r=c.parentNode,i=e.nodeIndex(c)):i=e.nodeIndex(c),s=r,l=i),!u){for(a=c.previousSibling,o=c.nextSibling,gr.each(gr.grep(c.childNodes),function(e){bs.isText(e)&&(e.nodeValue=e.nodeValue.replace(/\uFEFF/g,""))});c=e.get(n.id+"_"+t);)e.remove(c,!0);a&&o&&a.nodeType===o.nodeType&&bs.isText(a)&&!Ct.opera&&(i=a.nodeValue.length,a.appendData(o.nodeValue),e.remove(o),s=a,l=i)}return Se.some(vd(s,l))}return Se.none()},Kp=function(e,t){return e.isSome()?e:t},Xp=function(e,t){var n=e.createRng();return Vp(e,!0,t,n)&&Vp(e,!1,t,n)?Se.some(n):Se.none()},Jp=function(e,t){var n=Gp(e,"start",t),r=Gp(e,"end",t);return Ku([n,Kp(r,n)],function(t,n){var r=e.createRng();return r.setStart(Hp(e,t.container()),t.offset()),r.setEnd(Hp(e,n.container()),n.offset()),r})},Qp=function(e,t){return Se.from(e.select(t.name)[t.index]).map(function(t){var n=e.createRng();return n.selectNode(t),n})},Zp=function(e,t){var n=e.dom;if(t){if(Fp(t))return Xp(n,t);if(Mp(t))return Se.some($p(n,t));if(Bp(t))return Jp(n,t);if(Lp(t))return Qp(n,t);if(jp(t))return Se.some(t.rng)}return Se.none()},eg={resolve:Zp},tg=function(e,t,n){return Gd.getBookmark(e,t,n)},ng=function(e,t){eg.resolve(e,t).each(function(t){e.setRng(t)})},rg=function(e){return bs.isElement(e)&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")},ig={getBookmark:tg,moveToBookmark:ng,isBookmarkNode:rg},og=function(e){return e&&/^(IMG)$/.test(e.nodeName)},ag=function(e,t,n){var r,i,o,a=n.startOffset,s=n.startContainer;if((n.startContainer!==n.endContainer||!og(n.startContainer.childNodes[n.startOffset]))&&1===s.nodeType)for(o=s.childNodes,a<o.length?(s=o[a],r=new m(s,e.getParent(s,e.isBlock))):(s=o[o.length-1],r=new m(s,e.getParent(s,e.isBlock)),r.next(!0)),i=r.current();i;i=r.next())if(3===i.nodeType&&!ug(i))return n.setStart(i,0),void t.setRng(n)},sg=function(e,t,n){if(e)for(t=t?"nextSibling":"previousSibling",e=n?e:e[t];e;e=e[t])if(1===e.nodeType||!ug(e))return e},lg=function(e,t){return t.nodeType&&(t=t.nodeName),!!e.schema.getTextBlockElements()[t.toLowerCase()]},cg=function(e,t,n){return e.schema.isValidChild(t,n)},ug=function(e){return e&&3===e.nodeType&&/^([\t \r\n]+|)$/.test(e.nodeValue)},dg=function(e,t){return"string"!=typeof e?e=e(t):t&&(e=e.replace(/%(\w+)/g,function(e,n){return t[n]||e})),e},fg=function(e,t){return e=e||"",t=t||"",e=""+(e.nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()===t.toLowerCase()},hg=function(e,t,n){return"color"!==n&&"backgroundColor"!==n||(t=e.toHex(t)),"fontWeight"===n&&700===t&&(t="bold"),"fontFamily"===n&&(t=t.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+t},pg=function(e,t,n){return hg(e,e.getStyle(t,n),n)},gg=function(e,t){var n;return e.getParent(t,function(t){return(n=e.getStyle(t,"text-decoration"))&&"none"!==n}),n},mg=function(e,t,n){return e.getParents(t,n,e.getRoot())},vg={isInlineBlock:og,moveStart:ag,getNonWhiteSpaceSibling:sg,isTextBlock:lg,isValid:cg,isWhiteSpaceNode:ug,replaceVars:dg,isEq:fg,normalizeStyleValue:hg,getStyle:pg,getTextDecoration:gg,getParents:mg},bg=ig.isBookmarkNode,yg=vg.getParents,wg=vg.isWhiteSpaceNode,_g=vg.isTextBlock,xg=function(e,t){for(void 0===t&&(t=3===e.nodeType?e.length:e.childNodes.length);e&&e.hasChildNodes();)(e=e.childNodes[t])&&(t=3===e.nodeType?e.length:e.childNodes.length);return{node:e,offset:t}},Cg=function(e,t){var n=xg(e,t);if(n.node){for(;n.node&&0===n.offset&&n.node.previousSibling;)n=xg(n.node.previousSibling);n.node&&n.offset>0&&3===n.node.nodeType&&" "===n.node.nodeValue.charAt(n.offset-1)&&n.offset>1&&(e=n.node,e.splitText(n.offset-1))}return e},kg=function(e){return"BR"===e.nodeName&&e.getAttribute("data-mce-bogus")&&!e.nextSibling},Tg=function(e,t){for(var n=t;n;){if(1===n.nodeType&&e.getContentEditable(n))return"false"===e.getContentEditable(n)?n:t;n=n.parentNode}return t},Sg=function(e,t,n,r){var i,o,a=n.nodeValue;return void 0===r&&(r=e?a.length:0),e?(i=a.lastIndexOf(" ",r),o=a.lastIndexOf("",r),-1===(i=i>o?i:o)||t||i++):(i=a.indexOf(" ",r),o=a.indexOf("",r),i=-1!==i&&(-1===o||i<o)?i:o),i},Dg=function(e,t,n,r,i,o){var a,s,l,c;if(3===n.nodeType){if(-1!==(l=Sg(i,o,n,r)))return{container:n,offset:l};c=n}for(a=new m(n,e.getParent(n,e.isBlock)||t);s=a[i?"prev":"next"]();)if(3===s.nodeType){if(c=s,-1!==(l=Sg(i,o,s)))return{container:s,offset:l}}else if(e.isBlock(s))break;if(c)return r=i?0:c.length,{container:c,offset:r}},Eg=function(e,t,n,r,i){var o,a,s,l;for(3===r.nodeType&&0===r.nodeValue.length&&r[i]&&(r=r[i]),o=yg(e,r),a=0;a<o.length;a++)for(s=0;s<t.length;s++)if(!("collapsed"in(l=t[s])&&l.collapsed!==n.collapsed)&&e.is(o[a],l.selector))return o[a];return r},Ng=function(e,t,n,r){var i,o=e.dom,a=o.getRoot();if(t[0].wrapper||(i=o.getParent(n,t[0].block,a)),!i){var s=o.getParent(n,"LI,TD,TH");i=o.getParent(3===n.nodeType?n.parentNode:n,function(t){return t!==a&&_g(e,t)},s)}if(i&&t[0].wrapper&&(i=yg(o,i,"ul,ol").reverse()[0]||i),!i)for(i=n;i[r]&&!o.isBlock(i[r])&&(i=i[r],!vg.isEq(i,"br")););return i||n},Ag=function(e,t,n,r,i,o,a){var s,l,c,u,d;if(s=l=a?n:i,u=a?"previousSibling":"nextSibling",d=e.getRoot(),3===s.nodeType&&!wg(s)&&(a?r>0:o<s.nodeValue.length))return s;for(;;){if(!t[0].block_expand&&e.isBlock(l))return l;for(c=l[u];c;c=c[u])if(!bg(c)&&!wg(c)&&!kg(c))return l;if(l===d||l.parentNode===d){s=l;break}l=l.parentNode}return s},Rg=function(e,t,n,r){var i,o=t.startContainer,a=t.startOffset,s=t.endContainer,l=t.endOffset,c=e.dom;return 1===o.nodeType&&o.hasChildNodes()&&(o=Vu(o,a),3===o.nodeType&&(a=0)),1===s.nodeType&&s.hasChildNodes()&&(s=Vu(s,t.collapsed?l:l-1),3===s.nodeType&&(l=s.nodeValue.length)),o=Tg(c,o),s=Tg(c,s),(bg(o.parentNode)||bg(o))&&(o=bg(o)?o:o.parentNode,o=o.nextSibling||o,3===o.nodeType&&(a=0)),(bg(s.parentNode)||bg(s))&&(s=bg(s)?s:s.parentNode,s=s.previousSibling||s,3===s.nodeType&&(l=s.length)),n[0].inline&&(t.collapsed&&(i=Dg(c,e.getBody(),o,a,!0,r),i&&(o=i.container,a=i.offset),(i=Dg(c,e.getBody(),s,l,!1,r))&&(s=i.container,l=i.offset)),s=r?s:Cg(s,l)),(n[0].inline||n[0].block_expand)&&(n[0].inline&&3===o.nodeType&&0!==a||(o=Ag(c,n,o,a,s,l,!0)),n[0].inline&&3===s.nodeType&&l!==s.nodeValue.length||(s=Ag(c,n,o,a,s,l,!1))),n[0].selector&&!1!==n[0].expand&&!n[0].inline&&(o=Eg(c,n,t,o,"previousSibling"),s=Eg(c,n,t,s,"nextSibling")),(n[0].block||n[0].selector)&&(o=Ng(e,n,o,"previousSibling"),s=Ng(e,n,s,"nextSibling"),n[0].block&&(c.isBlock(o)||(o=Ag(c,n,o,a,s,l,!0)),c.isBlock(s)||(s=Ag(c,n,o,a,s,l,!1)))),1===o.nodeType&&(a=c.nodeIndex(o),o=o.parentNode),1===s.nodeType&&(l=c.nodeIndex(s)+1,s=s.parentNode),{startContainer:o,startOffset:a,endContainer:s,endOffset:l}},Pg={expandRng:Rg},Og=gr.each,Ig=function(e,t){var n=e.childNodes;return t--,t>n.length-1?t=n.length-1:t<0&&(t=0),n[t]||e},Mg=function(e,t,n){var r,i,o,a,s,l,c,u=t.startContainer,d=t.startOffset,f=t.endContainer,h=t.endOffset;if(c=e.select("td[data-mce-selected],th[data-mce-selected]"),c.length>0)return void Og(c,function(e){n([e])});var p=function(e){var t;return t=e[0],3===t.nodeType&&t===u&&d>=t.nodeValue.length&&e.splice(0,1),t=e[e.length-1],0===h&&e.length>0&&t===f&&3===t.nodeType&&e.splice(e.length-1,1),e},g=function(e,t,n){for(var r=[];e&&e!==n;e=e[t])r.push(e);return r},m=function(e,t){do{if(e.parentNode===t)return e;e=e.parentNode}while(e)},v=function(e,t,r){var i=r?"nextSibling":"previousSibling";for(a=e,s=a.parentNode;a&&a!==t;a=s)s=a.parentNode,l=g(a===e?a:a[i],i),l.length&&(r||l.reverse(),n(p(l)))};if(1===u.nodeType&&u.hasChildNodes()&&(u=u.childNodes[d]),1===f.nodeType&&f.hasChildNodes()&&(f=Ig(f,h)),u===f)return n(p([u]));for(r=e.findCommonAncestor(u,f),a=u;a;a=a.parentNode){if(a===f)return v(u,r,!0);if(a===r)break}for(a=f;a;a=a.parentNode){if(a===u)return v(f,r);if(a===r)break}i=m(u,r)||u,o=m(f,r)||f,v(u,i,!0),l=g(i===u?i:i.nextSibling,"nextSibling",o===f?o.nextSibling:o),l.length&&n(p(l)),v(f,o)},jg={walk:Mg},Bg=function(e,t){var n=function(n){if(!e(n))throw new Error("Can only get "+t+" value of a "+t+" node");return a(n).getOr("")},r=function(e){try{return i(e)}catch(e){return Se.none()}},i=function(t){return e(t)?Se.from(t.dom().nodeValue):Se.none()},o=ki.detect().browser,a=o.isIE()&&10===o.version.major?r:i;return{get:n,getOption:a,set:function(n,r){if(!e(n))throw new Error("Can only set raw "+t+" value of a "+t+" node");n.dom().nodeValue=r}}}(Hi.isText,"text"),Lg=function(e){return Bg.get(e)},Fg=function(e){return Bg.getOption(e)},Hg=function(e,t){Bg.set(e,t)},$g={get:Lg,getOption:Fg,set:Hg},Ug=function(e){return Hi.isText(e)&&"\ufeff"===$g.get(e)},zg=function(e,t,n,r){return ma.parent(t).fold(function(){return"skipping"},function(i){return"br"===r||Ug(t)?"skipping":xc(t)?"existing":Kd(t)?"caret":vg.isValid(e,n,r)&&vg.isValid(e,Hi.name(i),n)?"valid":"invalid-child"})},Wg=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]]);return n},qg=function(e,t){var n=Pg.expandRng(e,t,[{inline:!0}],!1);t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset),e.selection.setRng(t)},Vg=function(e,t,n,r,i){var o=i.uid,a=void 0===o?Nc("mce-annotation"):o,s=Wg(i,["uid"]),l=[],c=Ai.fromTag("span");ql.add(c,bc()),no.set(c,""+wc(),a),no.set(c,""+yc(),n);var u=r(a,s),d=u.attributes,f=void 0===d?{}:d,h=u.classes,p=void 0===h?[]:h;no.setAll(c,f),Bc.add(c,p);var g=El(Se.none()),m=function(){g.set(Se.none())},v=function(){return g.get().getOrThunk(function(){var e=Wc.shallow(c);return l.push(e),g.set(Se.some(e)),e})},b=function(e){$e(e,y)},y=function(t){switch(zg(e,t,"span",Hi.name(t))){case"invalid-child":m();var n=ma.children(t);b(n),m();break;case"valid":var r=v();ml.wrap(t,r)}},w=function(e){var t=He(e,Ai.fromDom);b(t)};return jg.walk(e.dom,t,function(e){m(),w(e)}),l},Yg=function(e,t,n,r){e.undoManager.transact(function(){var i=e.selection.getRng();i.collapsed&&qg(e,i);var o=Gd.getPersistentBookmark(e.selection,!0),a=e.selection.getRng();Vg(e,a,t,n.decorate,r),e.selection.moveToBookmark(o)})},Gg=function(e){return e.firstChild&&e.firstChild===e.lastChild},Kg=function(e){return"br"===e.name||""===e.value},Xg=function(e,t){return e.getBlockElements()[t.name]&&Gg(t)&&Kg(t.firstChild)},Jg=function(e,t){var n=e.getNonEmptyElements();return t&&(t.isEmpty(n)||Xg(e,t))},Qg=function(e,t){var n=t.firstChild,r=t.lastChild;return n&&"meta"===n.name&&(n=n.next),r&&"mce_marker"===r.attr("id")&&(r=r.prev),Jg(e,r)&&(r=r.prev),!(!n||n!==r)&&("ul"===n.name||"ol"===n.name)},Zg=function(e){var t=e.firstChild,n=e.lastChild;return t&&"META"===t.nodeName&&t.parentNode.removeChild(t),n&&"mce_marker"===n.id&&n.parentNode.removeChild(n),e},em=function(e,t,n){var r=t.serialize(n),i=e.createFragment(r);return Zg(i)},tm=function(e){return gr.grep(e.childNodes,function(e){return"LI"===e.nodeName})},nm=function(e){return""===e.data||bs.isBr(e)},rm=function(e){return e&&e.firstChild&&e.firstChild===e.lastChild&&nm(e.firstChild)},im=function(e){return!e.firstChild||rm(e)},om=function(e){return e.length>0&&im(e[e.length-1])?e.slice(0,-1):e},am=function(e,t){var n=e.getParent(t,e.isBlock);return n&&"LI"===n.nodeName?n:null},sm=function(e,t){return!!am(e,t)},lm=function(e,t){var n=t.cloneRange(),r=t.cloneRange();return n.setStartBefore(e),r.setEndAfter(e),[n.cloneContents(),r.cloneContents()]},cm=function(e,t){var n=vd.before(e),r=Pf(t),i=r.next(n);return i?i.toRange():null},um=function(e,t){var n=vd.after(e),r=Pf(t),i=r.prev(n);return i?i.toRange():null},dm=function(e,t,n,r){var i=lm(e,r),o=e.parentNode;return o.insertBefore(i[0],e),gr.each(t,function(t){o.insertBefore(t,e)}),o.insertBefore(i[1],e),o.removeChild(e),um(t[t.length-1],n)},fm=function(e,t,n){var r=e.parentNode;return gr.each(t,function(t){r.insertBefore(t,e)}),cm(e,n)},hm=function(e,t,n,r){return r.insertAfter(t.reverse(),e),um(t[0],n)},pm=function(e,t,n,r){var i=em(t,e,r),o=am(t,n.startContainer),a=om(tm(i.firstChild)),s=t.getRoot(),l=function(e){var r=vd.fromRangeStart(n),i=Pf(t.getRoot()),a=1===e?i.prev(r):i.next(r);return!a||am(t,a.getNode())!==o};return l(1)?fm(o,a,s):l(2)?hm(o,a,s,t):dm(o,a,s,n)},gm={isListFragment:Qg,insertAtCaret:pm,isParentBlockLi:sm,trimListItems:om,listItems:tm},mm=gr.each,vm=function(e){this.compare=function(t,n){if(t.nodeName!==n.nodeName)return!1;var r=function(t){var n={};return mm(e.getAttribs(t),function(r){var i=r.nodeName.toLowerCase();0!==i.indexOf("_")&&"style"!==i&&0!==i.indexOf("data-")&&(n[i]=e.getAttrib(t,i))}),n},i=function(e,t){var n,r;for(r in e)if(e.hasOwnProperty(r)){if(void 0===(n=t[r]))return!1;if(e[r]!==n)return!1;delete t[r]}for(r in t)if(t.hasOwnProperty(r))return!1;return!0};return!!i(r(t),r(n))&&(!!i(e.parseStyle(e.getAttrib(t,"style")),e.parseStyle(e.getAttrib(n,"style")))&&(!ig.isBookmarkNode(t)&&!ig.isBookmarkNode(n)))}},bm=function(e){for(var t=[],n=e.dom();n;)t.push(Ai.fromDom(n)),n=n.lastChild;return t},ym=function(e){
var t=rc.descendants(e,"br"),n=We(bm(e).slice(-1),Ya);t.length===n.length&&$e(n,Tl.remove)},wm=function(e){Tl.empty(e),ml.append(e,Ai.fromHtml('<br data-mce-bogus="1">'))},_m=function(e){return Hi.isText(e)?""===$g.get(e):Ya(e)},xm=function(e){return 1===We(ma.children(e),_m).length},Cm=function(e){ma.lastChild(e).each(function(t){ma.prevSibling(t).each(function(n){qa(e)&&Ya(t)&&qa(n)&&Tl.remove(t)})})},km={removeTrailingBr:ym,fillWithPaddingBr:wm,isPaddedElement:xm,trimBlockTrailingBr:Cm},Tm=gr.makeMap,Sm=function(e,t,n,r){var i=document.createRange();return i.setStart(e,t),i.setEnd(n,r),i},Dm=function(e){var t=vd.fromRangeStart(e),n=vd.fromRangeEnd(e),r=e.commonAncestorContainer;return Ip.fromPosition(!1,r,n).map(function(i){return!lp(t,n,r)&&lp(t,i,r)?Sm(t.container(),t.offset(),i.container(),i.offset()):e}).getOr(e)},Em=function(e){return e.collapsed?e:Dm(e)},Nm={normalize:Em},Am=bs.matchNodeNames("td th"),Rm=function(e,t,n){if("all"===n.getAttribute("data-mce-bogus"))n.parentNode.insertBefore(e.dom.createFragment(t),n);else{var r=n.firstChild,i=n.lastChild;!r||r===i&&"BR"===r.nodeName?e.dom.setHTML(n,t):e.selection.setContent(t)}},Pm=function(e,t){Se.from(e.getParent(t,"td,th")).map(Ai.fromDom).each(km.trimBlockTrailingBr)},Om=function(e,t,n){var r,i,o,a,s,l,c,u,d,f,h,p,g=e.schema.getTextInlineElements(),m=e.selection,v=e.dom,b=function(e){return!!e.getAttribute("data-mce-fragment")};if(/^ | $/.test(t)&&(t=function(e){var t,n,r;t=m.getRng(),n=t.startContainer,r=t.startOffset;var i=function(e){return n[e]&&3===n[e].nodeType};return 3===n.nodeType&&(r>0?e=e.replace(/^&nbsp;/," "):i("previousSibling")||(e=e.replace(/^ /,"&nbsp;")),r<n.length?e=e.replace(/&nbsp;(<br>|)$/," "):i("nextSibling")||(e=e.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;"))),e}(t)),r=e.parser,p=n.merge,i=S({validate:e.settings.validate},e.schema),h='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;</span>',l={content:t,format:"html",selection:!0,paste:n.paste},l=e.fire("BeforeSetContent",l),l.isDefaultPrevented())return void e.fire("SetContent",{content:l.content,format:"html",selection:!0,paste:n.paste});t=l.content,-1===t.indexOf("{$caret}")&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,h),u=m.getRng();var y=u.startContainer||(u.parentElement?u.parentElement():null),w=e.getBody();y===w&&m.isCollapsed()&&v.isBlock(w.firstChild)&&function(t){return t&&!e.schema.getShortEndedElements()[t.nodeName]}(w.firstChild)&&v.isEmpty(w.firstChild)&&(u=v.createRng(),u.setStart(w.firstChild,0),u.setEnd(w.firstChild,0),m.setRng(u)),m.isCollapsed()||(e.selection.setRng(Nm.normalize(e.selection.getRng())),e.getDoc().execCommand("Delete",!1,null),function(){var e,n,r;e=m.getRng(),n=e.startContainer,r=e.startOffset,3===n.nodeType&&e.collapsed&&(""===n.data[r]?(n.deleteData(r,1),/[\u00a0| ]$/.test(t)||(t+=" ")):""===n.data[r-1]&&(n.deleteData(r-1,1),/[\u00a0| ]$/.test(t)||(t=" "+t)))}()),o=m.getNode();var _={context:o.nodeName.toLowerCase(),data:n.data,insert:!0};if(s=r.parse(t,_),!0===n.paste&&gm.isListFragment(e.schema,s)&&gm.isParentBlockLi(v,o))return u=gm.insertAtCaret(i,v,e.selection.getRng(),s),e.selection.setRng(u),void e.fire("SetContent",l);if(function(e){for(var t=e;t=t.walk();)1===t.type&&t.attr("data-mce-fragment","1")}(s),d=s.lastChild,"mce_marker"===d.attr("id"))for(c=d,d=d.prev;d;d=d.walk(!0))if(3===d.type||!v.isBlock(d.name)){e.schema.isValidChild(d.parent.name,"span")&&d.parent.insert(c,d,"br"===d.name);break}if(e._selectionOverrides.showBlockCaretContainer(o),_.invalid){for(m.setContent(h),o=m.getNode(),a=e.getBody(),9===o.nodeType?o=d=a:d=o;d!==a;)o=d,d=d.parentNode;t=o===a?a.innerHTML:v.getOuterHTML(o),t=i.serialize(r.parse(t.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return i.serialize(s)}))),o===a?v.setHTML(a,t):v.setOuterHTML(o,t)}else t=i.serialize(s),Rm(e,t,o);!function(){if(p){var t=e.getBody(),n=new vm(v);gr.each(v.select("*[data-mce-fragment]"),function(e){for(var r=e.parentNode;r&&r!==t;r=r.parentNode)g[e.nodeName.toLowerCase()]&&n.compare(r,e)&&v.remove(e,!0)})}}(),function(t){var n,r,i;if(t){if(m.scrollIntoView(t),n=function(t){for(var n=e.getBody();t&&t!==n;t=t.parentNode)if("false"===e.dom.getContentEditable(t))return t;return null}(t))return v.remove(t),void m.select(n);u=v.createRng(),d=t.previousSibling,d&&3===d.nodeType?(u.setStart(d,d.nodeValue.length),Ct.ie||(f=t.nextSibling)&&3===f.nodeType&&(d.appendData(f.data),f.parentNode.removeChild(f))):(u.setStartBefore(t),u.setEndBefore(t));r=v.getParent(t,v.isBlock),v.remove(t),r&&v.isEmpty(r)&&(e.$(r).empty(),u.setStart(r,0),u.setEnd(r,0),Am(r)||b(r)||!(i=function(t){var n=vd.fromRangeStart(t);if(n=Pf(e.getBody()).next(n))return n.toRange()}(u))?v.add(r,v.create("br",{"data-mce-bogus":"1"})):(u=i,v.remove(r))),m.setRng(u)}}(v.get("mce_marker")),function(e){gr.each(e.getElementsByTagName("*"),function(e){e.removeAttribute("data-mce-fragment")})}(e.getBody()),Pm(e.dom,e.selection.getStart()),e.fire("SetContent",l),e.addVisual()},Im=function(e){var t;return"string"!=typeof e?(t=gr.extend({paste:e.paste,data:{paste:e.paste}},e),{content:e.content,details:t}):{content:e,details:{}}},Mm=function(e,t){var n=Im(t);Om(e,n.content,n.details)},jm={insertAtCaret:Mm},Bm=Do("sections","settings"),Lm=ki.detect(),Fm=Lm.deviceType.isTouch(),Hm=["lists","autolink","autosave"],$m={theme:"mobile"},Um=function(e){var t=Re(e)?e.join(" "):e,n=He(Ne(t)?t.split(" "):[],gi);return We(n,function(e){return e.length>0})},zm=function(e){return We(e,me(Le,Hm))},Wm=function(e,t){var n=qi(t,function(t,n){return Le(e,n)});return Bm(n.t,n.f)},qm=function(e,t,n){var r=e.sections(),i=r.hasOwnProperty(t)?r[t]:{};return gr.extend({},n,i)},Vm=function(e,t){return e.sections().hasOwnProperty(t)},Ym=function(e,t,n){return{id:e,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:t,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,render_ui:!0,indentation:"30px",inline_styles:!0,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",entity_encoding:"named",url_converter:n.convertURL,url_converter_scope:n,ie7_compat:!0}},Gm=function(e,t){var n=t.external_plugins?t.external_plugins:{};return e&&e.external_plugins?gr.extend({},e.external_plugins,n):n},Km=function(e,t){return[].concat(Um(e)).concat(Um(t))},Xm=function(e,t,n,r){var i=Um(n.forced_plugins),o=Um(r.plugins),a=e&&Vm(t,"mobile")?zm(o):o,s=Km(i,a);return gr.extend(r,{plugins:s.join(" ")})},Jm=function(e,t){var n=t.settings().inline;return e&&Vm(t,"mobile")&&!n},Qm=function(e,t,n,r){var i=Wm(["mobile"],r),o=gr.extend(t,n,i.settings(),Jm(e,i)?qm(i,"mobile",$m):{},{validate:!0,content_editable:i.settings().inline,external_plugins:Gm(n,i.settings())});return Xm(e,i,n,o)},Zm=function(e,t,n,r,i){var o=Ym(t,n,e);return Qm(Fm,o,r,i)},ev=function(e,t,n){return Se.from(t.settings[n]).filter(e)},tv=me(ev,Ne),nv=function(e){var t={};return"string"==typeof e?$e(e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(","),function(e){var n=e.split("=");n.length>1?t[gr.trim(n[0])]=gr.trim(n[1]):t[gr.trim(n[0])]=gr.trim(n)}):t=e,t},rv=function(e){return function(t){return Re(t)&&Ze(t,e)}},iv=function(e,t,n,r){var i=t in e.settings?e.settings[t]:n;return"hash"===r?nv(i):"string"===r?ev(Ne,e,t).getOr(n):"number"===r?ev(Me,e,t).getOr(n):"boolean"===r?ev(Oe,e,t).getOr(n):"object"===r?ev(Ae,e,t).getOr(n):"array"===r?ev(Re,e,t).getOr(n):"string[]"===r?ev(rv(Ne),e,t).getOr(n):"function"===r?ev(Ie,e,t).getOr(n):i},ov=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,av=function(e){return ov.test(e)},sv=function(e,t){var n=tv(e,"inline_boundaries_selector").getOr("a[href],code");return $o.is(Ai.fromDom(t),n)},lv=function(e){return"rtl"===rl.DOM.getStyle(e,"direction",!0)||av(e.textContent)},cv=function(e,t,n){return We(rl.DOM.getParents(n.container(),"*",t),e)},uv=function(e,t,n){var r=cv(e,t,n);return Se.from(r[r.length-1])},dv=function(e,t,n){var r=sp(t,e),i=sp(n,e);return r&&r===i},fv=function(e){return uu(e)||du(e)},hv=function(e,t){var n=t.container(),r=t.offset();return e?au(n)?bs.isText(n.nextSibling)?vd(n.nextSibling,0):vd.after(n):uu(t)?vd(n,r+1):t:au(n)?bs.isText(n.previousSibling)?vd(n.previousSibling,n.previousSibling.data.length):vd.before(n):du(t)?vd(n,r-1):t},pv=me(hv,!0),gv=me(hv,!1),mv={isInlineTarget:sv,findRootInline:uv,isRtl:lv,isAtZwsp:fv,normalizePosition:hv,normalizeForwards:pv,normalizeBackwards:gv,hasSameParentBlock:dv},vv=function(e){return function(t){return Ko.eq(e,Ai.fromDom(t.dom().parentNode))}},bv=function(e,t){return Ko.contains(e,t)?uc.closest(t,function(e){return Ga(e)||Xa(e)},vv(e)):Se.none()},yv=function(e){var t=e.getBody(),n=t.firstChild&&e.dom.isBlock(t.firstChild)?t.firstChild:t;e.selection.setCursorLocation(n,0)},wv=function(e){e.dom.isEmpty(e.getBody())&&(e.setContent(""),yv(e))},_v=function(e,t,n){return Ku([Ip.firstPositionIn(n),Ip.lastPositionIn(n)],function(r,i){var o=mv.normalizePosition(!0,r),a=mv.normalizePosition(!1,i),s=mv.normalizePosition(!1,t);return e?Ip.nextPosition(n,s).map(function(e){return e.isEqual(a)&&t.isEqual(o)}).getOr(!1):Ip.prevPosition(n,s).map(function(e){return e.isEqual(o)&&t.isEqual(a)}).getOr(!1)}).getOr(!0)},xv={getParentBlock:bv,paddEmptyBody:wv,willDeleteLastPositionInElement:_v},Cv=function(e){return vc.first(e).isSome()},kv=function(e,t,n){return vc.ancestor(e,t,n).isSome()},Tv=function(e,t){return vc.sibling(e,t).isSome()},Sv=function(e,t){return vc.child(e,t).isSome()},Dv=function(e,t){return vc.descendant(e,t).isSome()},Ev=function(e,t,n){return vc.closest(e,t,n).isSome()},Nv={any:Cv,ancestor:kv,sibling:Tv,child:Sv,descendant:Dv,closest:Ev},Av=function(e,t){var n=Ai.fromDom(e),r=Ai.fromDom(t);return Nv.ancestor(r,"pre,code",me(Ko.eq,n))},Rv=function(e,t){return bs.isText(t)&&/^[ \t\r\n]*$/.test(t.data)&&!1===Av(e,t)},Pv=function(e){return bs.isElement(e)&&"A"===e.nodeName&&e.hasAttribute("name")},Ov=function(e,t){return Du(t)&&!1===Rv(e,t)||Pv(t)||Iv(t)},Iv=bs.hasAttribute("data-mce-bookmark"),Mv=bs.hasAttribute("data-mce-bogus"),jv=bs.hasAttributeValue("data-mce-bogus","all"),Bv=function(e){var t,n,r=0;if(Ov(e,e))return!1;if(!(n=e.firstChild))return!0;t=new m(n,e);do{if(jv(n))n=t.next(!0);else if(Mv(n))n=t.next();else if(bs.isBr(n))r++,n=t.next();else{if(Ov(e,n))return!1;n=t.next()}}while(n);return r<=1},Lv=function(e){return Bv(e.dom())},Fv={isEmpty:Lv},Hv=Do("block","position"),$v=Do("from","to"),Uv=function(e,t){var n=Ai.fromDom(e),r=Ai.fromDom(t.container());return xv.getParentBlock(n,r).map(function(e){return Hv(e,t)})},zv=function(e){return!1===Ko.eq(e.from().block(),e.to().block())},Wv=function(e){return ma.parent(e.from().block()).bind(function(t){return ma.parent(e.to().block()).filter(function(e){return Ko.eq(t,e)})}).isSome()},qv=function(e){return!1===bs.isContentEditableFalse(e.from().block())&&!1===bs.isContentEditableFalse(e.to().block())},Vv=function(e,t,n){return bs.isBr(n.position().getNode())&&!1===Fv.isEmpty(n.block())?Ip.positionIn(!1,n.block().dom()).bind(function(r){return r.isEqual(n.position())?Ip.fromPosition(t,e,r).bind(function(t){return Uv(e,t)}):Se.some(n)}).getOr(n):n},Yv=function(e,t,n){var r=Uv(e,vd.fromRangeStart(n)),i=r.bind(function(n){return Ip.fromPosition(t,e,n.position()).bind(function(n){return Uv(e,n).map(function(n){return Vv(e,t,n)})})});return Ku([r,i],$v).filter(function(e){return zv(e)&&Wv(e)&&qv(e)})},Gv=function(e,t,n){return n.collapsed?Yv(e,t,n):Se.none()},Kv={read:Gv},Xv=function(e){return e.slice(0,-1)},Jv=function(e,t,n){return Ko.contains(t,e)?Xv(ma.parents(e,function(e){return n(e)||Ko.eq(e,t)})):[]},Qv=function(e,t){return Jv(e,t,pe(!1))},Zv=function(e,t){return[e].concat(Qv(e,t))},eb={parentsUntil:Jv,parents:Qv,parentsAndSelf:Zv},tb=function(e){var t=ma.children(e);return Ge(t,qa).fold(function(){return t},function(e){return t.slice(0,e)})},nb=function(e){var t=tb(e);return $e(t,function(e){Tl.remove(e)}),t},rb=function(e,t){Ip.positionIn(e,t.dom()).each(function(e){var t=e.getNode();bs.isBr(t)&&Tl.remove(Ai.fromDom(t))})},ib=function(e,t){var n=eb.parentsAndSelf(t,e);return Ye(n.reverse(),Fv.isEmpty).each(Tl.remove)},ob=function(e,t){var n=ma.parents(t,function(t){return Ko.eq(t,e)});return Se.from(n[n.length-2])},ab=function(e,t){return Ko.contains(t,e)?ma.parent(e).bind(function(n){return Ko.eq(n,t)?Se.some(e):ob(t,e)}):Se.none()},sb=function(e,t,n){if(Fv.isEmpty(n))return Tl.remove(n),Fv.isEmpty(t)&&km.fillWithPaddingBr(t),Ip.firstPositionIn(t.dom());rb(!0,t),rb(!1,n);var r=nb(t);return ab(t,n).fold(function(){ib(e,t);var i=Ip.lastPositionIn(n.dom());return $e(r,function(e){ml.append(n,e)}),i},function(i){var o=Ip.prevPosition(n.dom(),vd.before(i.dom()));return $e(r,function(e){ml.before(i,e)}),ib(e,t),o})},lb=function(e,t,n,r){return t?sb(e,r,n):sb(e,n,r)},cb={mergeBlocks:lb},ub=function(e,t){var n,r=Ai.fromDom(e.getBody());return n=Kv.read(r.dom(),t,e.selection.getRng()).bind(function(e){return cb.mergeBlocks(r,t,e.from().block(),e.to().block())}),n.each(function(t){e.selection.setRng(t.toRange())}),n.isSome()},db={backspaceDelete:ub},fb=function(e,t){var n=t.getRng();return Ku([xv.getParentBlock(e,Ai.fromDom(n.startContainer)),xv.getParentBlock(e,Ai.fromDom(n.endContainer))],function(r,i){return!1===Ko.eq(r,i)&&(n.deleteContents(),cb.mergeBlocks(e,!0,r,i).each(function(e){t.setRng(e.toRange())}),!0)}).getOr(!1)},hb=function(e,t){var n=Ai.fromDom(t),r=me(Ko.eq,e);return uc.ancestor(n,Za,r).isSome()},pb=function(e,t){return hb(e,t.startContainer)||hb(e,t.endContainer)},gb=function(e,t){var n=Ip.prevPosition(e.dom(),vd.fromRangeStart(t)).isNone(),r=Ip.nextPosition(e.dom(),vd.fromRangeEnd(t)).isNone();return!pb(e,t)&&n&&r},mb=function(e){return e.setContent(""),e.selection.setCursorLocation(),!0},vb=function(e){var t=Ai.fromDom(e.getBody()),n=e.selection.getRng();return gb(t,n)?mb(e):fb(t,e.selection)},bb=function(e,t){return!e.selection.isCollapsed()&&vb(e)},yb={backspaceDelete:bb},wb=function(e){if(!Re(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");var t=[],n={};return $e(e,function(r,i){var o=$i(r);if(1!==o.length)throw new Error("one and only one name per case");var a=o[0],s=r[a];if(void 0!==n[a])throw new Error("duplicate key detected:"+a);if("cata"===a)throw new Error("cannot have a case named cata (sorry)");if(!Re(s))throw new Error("case arguments must be an array");t.push(a),n[a]=function(){var n=arguments.length;if(n!==s.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+s.length+" ("+s+"), got "+n);for(var r=new Array(n),o=0;o<r.length;o++)r[o]=arguments[o];var l=function(e){var n=$i(e);if(t.length!==n.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+n.join(","));if(!Ze(t,function(e){return Le(n,e)}))throw new Error("Not all branches were specified when using match. Specified: "+n.join(", ")+"\nRequired: "+t.join(", "));return e[a].apply(null,r)};return{fold:function(){if(arguments.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+arguments.length);return arguments[i].apply(null,r)},match:l,log:function(e){}}}}),n},_b={generate:wb},xb=function(e){return Za(Ai.fromDom(e))||Xa(Ai.fromDom(e))},Cb=_b.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),kb=function(e,t){var n=t.getNode(!1===e),r=e?"after":"before";return bs.isElement(n)&&n.getAttribute("data-mce-caret")===r},Tb=function(e,t,n,r){var i=function(t){return Va(Ai.fromDom(t))&&!lp(n,r,e)};return bp(!t,n).fold(function(){return bp(t,r).fold(pe(!1),i)},i)},Sb=function(e,t,n,r){var i=r.getNode(!1===t);return xv.getParentBlock(Ai.fromDom(e),Ai.fromDom(n.getNode())).map(function(e){return Fv.isEmpty(e)?Cb.remove(e.dom()):Cb.moveToElement(i)}).orThunk(function(){return Se.some(Cb.moveToElement(i))})},Db=function(e,t,n){return Ip.fromPosition(t,e,n).bind(function(r){return xb(r.getNode())?Se.none():Tb(e,t,n,r)?Se.none():t&&bs.isContentEditableFalse(r.getNode())?Sb(e,t,n,r):!1===t&&bs.isContentEditableFalse(r.getNode(!0))?Sb(e,t,n,r):t&&_p(n)?Se.some(Cb.moveToPosition(r)):!1===t&&wp(n)?Se.some(Cb.moveToPosition(r)):Se.none()})},Eb=function(e,t){return e&&bs.isContentEditableFalse(t.nextSibling)?Se.some(Cb.moveToElement(t.nextSibling)):!1===e&&bs.isContentEditableFalse(t.previousSibling)?Se.some(Cb.moveToElement(t.previousSibling)):Se.none()},Nb=function(e,t,n){return n.fold(function(e){return Se.some(Cb.remove(e))},function(e){return Se.some(Cb.moveToElement(e))},function(n){return lp(t,n,e)?Se.none():Se.some(Cb.moveToPosition(n))})},Ab=function(e,t,n){return kb(t,n)?Eb(t,n.getNode(!1===t)).fold(function(){return Db(e,t,n)},Se.some):Db(e,t,n).bind(function(t){return Nb(e,n,t)})},Rb=function(e,t,n){var r=gp(t?1:-1,e,n),i=vd.fromRangeStart(r);return!1===t&&_p(i)?Se.some(Cb.remove(i.getNode(!0))):t&&wp(i)?Se.some(Cb.remove(i.getNode())):Ab(e,t,i)},Pb=function(e,t){var n=e.container(),r=e.offset();return!1===vd.isTextPosition(e)&&n===t.parentNode&&r>vd.before(t).offset()},Ob=function(e,t){return Pb(t,e)?vd(t.container(),t.offset()-1):t},Ib=function(e){return bs.isText(e)?vd(e,0):vd.before(e)},Mb=function(e){return bs.isText(e)?vd(e,e.data.length):vd.after(e)},jb=function(e){return Du(e.previousSibling)?Se.some(Mb(e.previousSibling)):e.previousSibling?Ip.lastPositionIn(e.previousSibling):Se.none()},Bb=function(e){return Du(e.nextSibling)?Se.some(Ib(e.nextSibling)):e.nextSibling?Ip.firstPositionIn(e.nextSibling):Se.none()},Lb=function(e,t){var n=vd.before(t.previousSibling?t.previousSibling:t.parentNode);return Ip.prevPosition(e,n).fold(function(){return Ip.nextPosition(e,vd.after(t))},Se.some)},Fb=function(e,t){return Ip.nextPosition(e,vd.after(t)).fold(function(){return Ip.prevPosition(e,vd.before(t))},Se.some)},Hb=function(e,t){return jb(t).orThunk(function(){return Bb(t)}).orThunk(function(){return Lb(e,t)})},$b=function(e,t){return Bb(t).orThunk(function(){return jb(t)}).orThunk(function(){return Fb(e,t)})},Ub=function(e,t,n){return e?$b(t,n):Hb(t,n)},zb=function(e,t,n){return Ub(e,t,n).map(me(Ob,n))},Wb=function(e,t,n){n.fold(function(){e.focus()},function(n){e.selection.setRng(n.toRange(),t)})},qb=function(e){return function(t){return t.dom()===e}},Vb=function(e,t){return t&&e.schema.getBlockElements().hasOwnProperty(Hi.name(t))},Yb=function(e){if(Fv.isEmpty(e)){var t=Ai.fromHtml('<br data-mce-bogus="1">');return Tl.empty(e),ml.append(e,t),Se.some(vd.before(t.dom()))}return Se.none()},Gb=function(e,t){return Ku([ma.prevSibling(e),ma.nextSibling(e),t],function(t,n,r){var i,o=t.dom(),a=n.dom();return bs.isText(o)&&bs.isText(a)?(i=o.data.length,o.appendData(a.data),Tl.remove(n),Tl.remove(e),r.container()===a?vd(o,i):r):(Tl.remove(e),r)}).orThunk(function(){return Tl.remove(e),t})},Kb=function(e,t,n){var r=zb(t,e.getBody(),n.dom()),i=uc.ancestor(n,me(Vb,e),qb(e.getBody())),o=Gb(n,r);e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):i.bind(Yb).fold(function(){Wb(e,t,o)},function(n){Wb(e,t,Se.some(n))})},Xb={deleteElement:Kb},Jb=function(e,t){return function(n){return e._selectionOverrides.hideFakeCaret(),Xb.deleteElement(e,t,Ai.fromDom(n)),!0}},Qb=function(e,t){return function(n){var r=t?vd.before(n):vd.after(n);return e.selection.setRng(r.toRange()),!0}},Zb=function(e){return function(t){return e.selection.setRng(t.toRange()),!0}},ey=function(e,t){return Rb(e.getBody(),t,e.selection.getRng()).map(function(n){return n.fold(Jb(e,t),Qb(e,t),Zb(e))}).getOr(!1)},ty=function(e){$e(rc.descendants(e,".mce-offscreen-selection"),Tl.remove)},ny=function(e,t){var n=e.selection.getNode();return!!bs.isContentEditableFalse(n)&&(ty(Ai.fromDom(e.getBody())),Xb.deleteElement(e,t,Ai.fromDom(e.selection.getNode())),xv.paddEmptyBody(e),!0)},ry=function(e,t){for(;t&&t!==e;){if(bs.isContentEditableTrue(t)||bs.isContentEditableFalse(t))return t;t=t.parentNode}return null},iy=function(e){var t,n=ry(e.getBody(),e.selection.getNode());return bs.isContentEditableTrue(n)&&e.dom.isBlock(n)&&e.dom.isEmpty(n)&&(t=e.dom.create("br",{"data-mce-bogus":"1"}),e.dom.setHTML(n,""),n.appendChild(t),e.selection.setRng(vd.before(t).toRange())),!0},oy=function(e,t){return e.selection.isCollapsed()?ey(e,t):ny(e,t)},ay={backspaceDelete:oy,paddEmptyElement:iy},sy=bs.isText,ly=function(e){return sy(e)&&e.data[0]===nu.ZWSP},cy=function(e){return sy(e)&&e.data[e.data.length-1]===nu.ZWSP},uy=function(e){return e.ownerDocument.createTextNode(nu.ZWSP)},dy=function(e){if(sy(e.previousSibling))return cy(e.previousSibling)?e.previousSibling:(e.previousSibling.appendData(nu.ZWSP),e.previousSibling);if(sy(e))return ly(e)?e:(e.insertData(0,nu.ZWSP),e);var t=uy(e);return e.parentNode.insertBefore(t,e),t},fy=function(e){if(sy(e.nextSibling))return ly(e.nextSibling)?e.nextSibling:(e.nextSibling.insertData(0,nu.ZWSP),e.nextSibling);if(sy(e))return cy(e)?e:(e.appendData(nu.ZWSP),e);var t=uy(e);return e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t),t},hy=function(e,t){return e?dy(t):fy(t)},py=me(hy,!0),gy=me(hy,!1),my=function(e,t){return bs.isText(e.container())?hy(t,e.container()):hy(t,e.getNode())},vy=function(e,t){var n=t.get();return n&&e.container()===n&&au(n)},by=function(e,t){return t.fold(function(t){df.remove(e.get());var n=py(t);return e.set(n),Se.some(vd(n,n.length-1))},function(t){return Ip.firstPositionIn(t).map(function(t){if(vy(t,e))return vd(e.get(),1);df.remove(e.get());var n=my(t,!0);return e.set(n),vd(n,1)})},function(t){return Ip.lastPositionIn(t).map(function(t){if(vy(t,e))return vd(e.get(),e.get().length-1);df.remove(e.get());var n=my(t,!1);return e.set(n),vd(n,n.length-1)})},function(t){df.remove(e.get());var n=gy(t);return e.set(n),Se.some(vd(n,1))})},yy={renderCaret:by},wy=function(e,t){for(var n=0;n<e.length;n++){var r=e[n].apply(null,t);if(r.isSome())return r}return Se.none()},_y={evaluateUntil:wy},xy=_b.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),Cy=function(e,t){var n=sp(t,e);return n||e},ky=function(e,t,n){var r=mv.normalizeForwards(n),i=Cy(t,r.container());return mv.findRootInline(e,i,r).fold(function(){return Ip.nextPosition(i,r).bind(me(mv.findRootInline,e,i)).map(function(e){return xy.before(e)})},Se.none)},Ty=function(e,t){return null===Xd(e,t)},Sy=function(e,t,n){return mv.findRootInline(e,t,n).filter(me(Ty,t))},Dy=function(e,t,n){var r=mv.normalizeBackwards(n);return Sy(e,t,r).bind(function(e){return Ip.prevPosition(e,r).isNone()?Se.some(xy.start(e)):Se.none()})},Ey=function(e,t,n){var r=mv.normalizeForwards(n);return Sy(e,t,r).bind(function(e){return Ip.nextPosition(e,r).isNone()?Se.some(xy.end(e)):Se.none()})},Ny=function(e,t,n){var r=mv.normalizeBackwards(n),i=Cy(t,r.container());return mv.findRootInline(e,i,r).fold(function(){return Ip.prevPosition(i,r).bind(me(mv.findRootInline,e,i)).map(function(e){return xy.after(e)})},Se.none)},Ay=function(e){return!1===mv.isRtl(Py(e))},Ry=function(e,t,n){return _y.evaluateUntil([ky,Dy,Ey,Ny],[e,t,n]).filter(Ay)},Py=function(e){return e.fold(ge,ge,ge,ge)},Oy=function(e){return e.fold(pe("before"),pe("start"),pe("end"),pe("after"))},Iy=function(e){return e.fold(xy.before,xy.before,xy.after,xy.after)},My=function(e){return e.fold(xy.start,xy.start,xy.end,xy.end)},jy=function(e,t){return Oy(e)===Oy(t)&&Py(e)===Py(t)},By=function(e,t,n,r,i,o){return Ku([mv.findRootInline(t,n,r),mv.findRootInline(t,n,i)],function(t,r){return t!==r&&mv.hasSameParentBlock(n,t,r)?xy.after(e?t:r):o}).getOr(o)},Ly=function(e,t){return e.fold(pe(!0),function(e){return!jy(e,t)})},Fy=function(e,t,n,r,i){var o=mv.normalizePosition(e,i);return Ip.fromPosition(e,n,o).map(me(mv.normalizePosition,e)).fold(function(){return r.map(Iy)},function(i){return Ry(t,n,i).map(me(By,e,t,n,o,i)).filter(me(Ly,r))}).filter(Ay)},Hy=function(e,t){return e?t.fold(he(Se.some,xy.start),Se.none,he(Se.some,xy.after),Se.none):t.fold(Se.none,he(Se.some,xy.before),Se.none,he(Se.some,xy.end))},$y=function(e,t,n,r){var i=mv.normalizePosition(e,r),o=Ry(t,n,i);return Ry(t,n,i).bind(me(Hy,e)).orThunk(function(){return Fy(e,t,n,o,r)})},Uy={readLocation:Ry,findLocation:$y,prevLocation:me($y,!1),nextLocation:me($y,!0),getElement:Py,outside:Iy,inside:My},zy=function(e){return Ie(e.selection.getSel().modify)},Wy=function(e,t,n){var r=e?1:-1;return t.setRng(vd(n.container(),n.offset()+r).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0},qy=function(e,t){var n=t.selection.getRng(),r=e?vd.fromRangeEnd(n):vd.fromRangeStart(n);return!!zy(t)&&(e&&uu(r)?Wy(!0,t.selection,r):!(e||!du(r))&&Wy(!1,t.selection,r))},Vy={hasSelectionModifyApi:zy,moveByWord:qy},Yy=function(e,t){var n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},Gy=function(e){return!1!==e.settings.inline_boundaries},Ky=function(e,t){e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},Xy=function(e,t,n){return yy.renderCaret(t,n).map(function(t){return Yy(e,t),n})},Jy=function(e,t,n){var r=e.getBody(),i=vd.fromRangeStart(e.selection.getRng()),o=me(mv.isInlineTarget,e);return Uy.findLocation(n,o,r,i).bind(function(n){return Xy(e,t,n)})},Qy=function(e,t,n){var r=We(t.select('*[data-mce-selected="inline-boundary"]'),e),i=We(n,e);$e(nt(r,i),me(Ky,!1)),$e(nt(i,r),me(Ky,!0))},Zy=function(e,t){if(e.selection.isCollapsed()&&!0!==e.composing&&t.get()){var n=vd.fromRangeStart(e.selection.getRng());vd.isTextPosition(n)&&!1===mv.isAtZwsp(n)&&(Yy(e,df.removeAndReposition(t.get(),n)),t.set(null))}},ew=function(e,t,n,r){if(t.selection.isCollapsed()){var i=We(r,e);$e(i,function(r){var i=vd.fromRangeStart(t.selection.getRng());Uy.readLocation(e,t.getBody(),i).bind(function(e){return Xy(t,n,e)})})}},tw=function(e,t,n){return function(){return!!Gy(e)&&Jy(e,t,n).isSome()}},nw=function(e,t,n){return function(){return!!Gy(t)&&Vy.moveByWord(e,t)}},rw=function(e){var t=El(null),n=me(mv.isInlineTarget,e);return e.on("NodeChange",function(r){Gy(e)&&(Qy(n,e.dom,r.parents),Zy(e,t),ew(n,e,t,r.parents))}),t},iw=me(nw,!0),ow=me(nw,!1),aw={move:tw,moveNextWord:iw,movePrevWord:ow,setupSelectedState:rw,setCaretPosition:Yy},sw=function(e){return!1!==e.settings.inline_boundaries},lw=function(e,t){var n=document.createRange();return n.setStart(e.container(),e.offset()),n.setEnd(t.container(),t.offset()),n},cw=function(e){return Ku([Ip.firstPositionIn(e),Ip.lastPositionIn(e)],function(t,n){var r=mv.normalizePosition(!0,t),i=mv.normalizePosition(!1,n);return Ip.nextPosition(e,r).map(function(e){return e.isEqual(i)}).getOr(!0)}).getOr(!0)},uw=function(e,t){return function(n){return yy.renderCaret(t,n).map(function(t){return aw.setCaretPosition(e,t),!0}).getOr(!1)}},dw=function(e,t,n,r){var i=e.getBody(),o=me(mv.isInlineTarget,e);e.undoManager.ignore(function(){e.selection.setRng(lw(n,r)),e.execCommand("Delete"),Uy.readLocation(o,i,vd.fromRangeStart(e.selection.getRng())).map(Uy.inside).map(uw(e,t))}),e.nodeChanged()},fw=function(e,t){var n=sp(t,e);return n||e},hw=function(e,t,n,r){var i=fw(e.getBody(),r.container()),o=me(mv.isInlineTarget,e),a=Uy.readLocation(o,i,r);return a.bind(function(e){return n?e.fold(pe(Se.some(Uy.inside(e))),Se.none,pe(Se.some(Uy.outside(e))),Se.none):e.fold(Se.none,pe(Se.some(Uy.outside(e))),Se.none,pe(Se.some(Uy.inside(e))))}).map(uw(e,t)).getOrThunk(function(){var s=Ip.navigate(n,i,r),l=s.bind(function(e){return Uy.readLocation(o,i,e)});return a.isSome()&&l.isSome()?mv.findRootInline(o,i,r).map(function(t){return!!cw(t)&&(Xb.deleteElement(e,n,Ai.fromDom(t)),!0)}).getOr(!1):l.bind(function(i){return s.map(function(i){return n?dw(e,t,r,i):dw(e,t,i,r),!0})}).getOr(!1)})},pw=function(e,t,n){if(e.selection.isCollapsed()&&sw(e)){var r=vd.fromRangeStart(e.selection.getRng());return hw(e,t,n,r)}return!1},gw={backspaceDelete:pw},mw=Do("start","end"),vw=Do("rng","table","cells"),bw=_b.generate([{removeTable:["element"]},{emptyCells:["cells"]}]),yw=function(e){return me(Ko.eq,e)},ww=function(e,t){return vc.closest(Ai.fromDom(e),"td,th",t)},_w=function(e,t){return vc.ancestor(e,"table",t)},xw=function(e){return!1===Ko.eq(e.start(),e.end())},Cw=function(e,t){return _w(e.start(),t).bind(function(n){return _w(e.end(),t).bind(function(e){return Ko.eq(n,e)?Se.some(n):Se.none()})})},kw=function(e){return rc.descendants(e,"td,th")},Tw=function(e,t){return _w(e.start(),t).bind(function(t){return at(kw(t)).map(function(t){return mw(e.start(),t)})})},Sw=function(e,t){var n=ww(t.startContainer,e),r=ww(t.endContainer,e);return t.collapsed?Se.none():Ku([n,r],mw).fold(function(){return n.fold(function(){return r.bind(function(t){return _w(t,e).bind(function(e){return ot(kw(e)).map(function(e){return mw(e,t)})})})},function(t){return _w(t,e).bind(function(e){return at(kw(e)).map(function(e){return mw(t,e)})})})},function(t){return Dw(e,t)?Se.none():Tw(t,e)})},Dw=function(e,t){return Cw(t,e).isSome()},Ew=function(e,t){var n=ww(e.startContainer,t),r=ww(e.endContainer,t);return Ku([n,r],mw).filter(xw).filter(function(e){return Dw(t,e)}).orThunk(function(){return Sw(t,e)})},Nw=function(e,t){return Cw(e,t).map(function(t){return vw(e,t,kw(t))})},Aw=function(e,t){var n=yw(e);return Ew(t,n).bind(function(e){return Nw(e,n)})},Rw=function(e,t){return Ge(e,function(e){return Ko.eq(e,t)})},Pw=function(e){return Ku([Rw(e.cells(),e.rng().start()),Rw(e.cells(),e.rng().end())],function(t,n){return e.cells().slice(t,n+1)})},Ow=function(e){return Pw(e).map(function(t){var n=e.cells();return t.length===n.length?bw.removeTable(e.table()):bw.emptyCells(t)})},Iw=function(e){return bw.emptyCells(e)},Mw=function(e,t){return Aw(e,t).bind(Ow)},jw={getActionFromRange:Mw,getActionFromCells:Iw},Bw=function(e){var t=[];if(e)for(var n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));return t},Lw=function(e){return Qe(e,function(e){var t=qu(e);return t?[Ai.fromDom(t)]:[]})},Fw=function(e){return Bw(e).length>1},Hw={getRanges:Bw,getSelectedNodes:Lw,hasMultipleRanges:Fw},$w=function(e){return We(Hw.getSelectedNodes(e),Za)},Uw=function(e){return rc.descendants(e,"td[data-mce-selected],th[data-mce-selected]")},zw=function(e,t){var n=Uw(t),r=$w(e);return n.length>0?n:r},Ww=function(e){return zw(Hw.getRanges(e.selection.getSel()),Ai.fromDom(e.getBody()))},qw={getCellsFromRanges:$w,getCellsFromElement:Uw,getCellsFromElementOrRanges:zw,getCellsFromEditor:Ww},Vw=function(e,t){return $e(t,km.fillWithPaddingBr),e.selection.setCursorLocation(t[0].dom(),0),!0},Yw=function(e,t){return Xb.deleteElement(e,!1,t),!0},Gw=function(e,t,n){return jw.getActionFromRange(t,n).map(function(t){return t.fold(me(Yw,e),me(Vw,e))})},Kw=function(e,t){return t_(e,t)},Xw=function(e,t,n,r){return Zw(t,r).fold(function(){return Gw(e,t,n)},function(t){return Kw(e,t)}).getOr(!1)},Jw=function(e,t){var n=Ai.fromDom(e.getBody()),r=e.selection.getRng(),i=qw.getCellsFromEditor(e);return 0!==i.length?Vw(e,i):Xw(e,n,r,t)},Qw=function(e,t){return Ye(eb.parentsAndSelf(t,e),Za)},Zw=function(e,t){return Ye(eb.parentsAndSelf(t,e),function(e){return"caption"===Hi.name(e)})},e_=function(e,t,n,r,i){return Ip.navigate(n,e.getBody(),i).bind(function(e){return Qw(t,Ai.fromDom(e.getNode())).map(function(e){return!1===Ko.eq(e,r)})})},t_=function(e,t){return km.fillWithPaddingBr(t),e.selection.setCursorLocation(t.dom(),0),Se.some(!0)
},n_=function(e,t,n,r){return Ip.firstPositionIn(e.dom()).bind(function(i){return Ip.lastPositionIn(e.dom()).map(function(e){return t?n.isEqual(i)&&r.isEqual(e):n.isEqual(e)&&r.isEqual(i)})}).getOr(!0)},r_=function(e,t){return t_(e,t)},i_=function(e,t,n){return Zw(e,Ai.fromDom(n.getNode())).map(function(e){return!1===Ko.eq(e,t)})},o_=function(e,t,n,r,i){return Ip.navigate(n,e.getBody(),i).bind(function(o){return n_(r,n,i,o)?r_(e,r):i_(t,r,o)}).or(Se.some(!0))},a_=function(e,t,n,r){var i=vd.fromRangeStart(e.selection.getRng());return Qw(n,r).bind(function(r){return Fv.isEmpty(r)?t_(e,r):e_(e,n,t,r,i)})},s_=function(e,t,n,r){var i=vd.fromRangeStart(e.selection.getRng());return Fv.isEmpty(r)?t_(e,r):o_(e,n,t,r,i)},l_=function(e,t,n){var r=Ai.fromDom(e.getBody());return Zw(r,n).fold(function(){return a_(e,t,r,n)},function(n){return s_(e,t,r,n)}).getOr(!1)},c_=function(e,t){var n=Ai.fromDom(e.selection.getStart(!0)),r=qw.getCellsFromEditor(e);return e.selection.isCollapsed()&&0===r.length?l_(e,t,n):Jw(e,n)},u_={backspaceDelete:c_},d_=function(e,t){e.getDoc().execCommand(t,!1,null)},f_=function(e){ay.backspaceDelete(e,!1)||gw.backspaceDelete(e,!1)||db.backspaceDelete(e,!1)||u_.backspaceDelete(e)||yb.backspaceDelete(e,!1)||(d_(e,"Delete"),xv.paddEmptyBody(e))},h_=function(e){ay.backspaceDelete(e,!0)||gw.backspaceDelete(e,!0)||db.backspaceDelete(e,!0)||u_.backspaceDelete(e)||yb.backspaceDelete(e,!0)||d_(e,"ForwardDelete")},p_={deleteCommand:f_,forwardDeleteCommand:h_},g_=function(e,t,n){var r=function(t){return So.getRaw(t,e)},i=function(e){return Ko.eq(Ai.fromDom(t),e)};return uc.closest(Ai.fromDom(n),function(e){return r(e).isSome()},i).bind(r)},m_=function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n},v_=function(e,t){return/[0-9.]+px$/.test(e)?m_(72*parseInt(e,10)/96,t||0)+"pt":e},b_=function(e){return e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,",")},y_=function(e,t){return Se.from(rl.DOM.getStyle(t,e,!0))},w_=function(e){return function(t,n){return Se.from(n).map(Ai.fromDom).filter(Hi.isElement).bind(function(n){return g_(e,t,n.dom()).or(y_(e,n.dom()))}).getOr("")}},__={getFontSize:w_("font-size"),getFontFamily:he(b_,w_("font-family")),toPt:v_},x_=function(e){return Ip.firstPositionIn(e.getBody()).map(function(e){var t=e.container();return bs.isText(t)?t.parentNode:t})},C_=function(e,t){return e.startContainer===t&&0===e.startOffset},k_=function(e){return Se.from(e.selection.getRng()).bind(function(t){var n=e.getBody();return C_(t,n)?Se.none():Se.from(e.selection.getStart(!0))})},T_=function(e,t){if(/^[0-9\.]+$/.test(t)){var n=parseInt(t,10);if(n>=1&&n<=7){var r=Dh.getFontStyleValues(e),i=Dh.getFontSizeClasses(e);return i?i[n-1]||t:r[n-1]||t}return t}return t},S_=function(e,t){e.formatter.toggle("fontname",{value:T_(e,t)}),e.nodeChanged()},D_=function(e){return k_(e).fold(function(){return x_(e).map(function(t){return __.getFontFamily(e.getBody(),t)}).getOr("")},function(t){return __.getFontFamily(e.getBody(),t)})},E_=function(e,t){e.formatter.toggle("fontsize",{value:T_(e,t)}),e.nodeChanged()},N_=function(e){return k_(e).fold(function(){return x_(e).map(function(t){return __.getFontSize(e.getBody(),t)}).getOr("")},function(t){return __.getFontSize(e.getBody(),t)})},A_=function(e,t){return e&&t&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset},R_={isEq:A_},P_=function(e,t,n){for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null},O_=function(e,t,n){return null!==P_(e,t,n)},I_=function(e,t,n){return O_(e,t,function(e){return e.nodeName===n})},M_=function(e){return e&&"TABLE"===e.nodeName},j_=function(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)},B_=function(e,t){return su(e)&&!1===O_(e,t,Kd)},L_=function(e,t,n){for(var r=new m(t,e.getParent(t.parentNode,e.isBlock)||e.getRoot());t=r[n?"prev":"next"]();)if(bs.isBr(t))return!0},F_=function(e,t){return e.previousSibling&&e.previousSibling.nodeName===t},H_=function(e,t){for(;t&&t!==e;){if(bs.isContentEditableFalse(t))return!0;t=t.parentNode}return!1},$_=function(e,t,n,r,i){var o,a,s,l,c=e.getRoot(),u=e.schema.getNonEmptyElements();if(s=e.getParent(i.parentNode,e.isBlock)||c,r&&bs.isBr(i)&&t&&e.isEmpty(s))return Se.some(C(i.parentNode,e.nodeIndex(i)));for(o=new m(i,s);l=o[r?"prev":"next"]();){if("false"===e.getContentEditableParent(l)||B_(l,c))return Se.none();if(bs.isText(l)&&l.nodeValue.length>0)return!1===I_(l,c,"A")?Se.some(C(l,r?l.nodeValue.length:0)):Se.none();if(e.isBlock(l)||u[l.nodeName.toLowerCase()])return Se.none();a=l}return n&&a?Se.some(C(a,0)):Se.none()},U_=function(e,t,n,r){var i,o,a,s,l,c,u,d=e.getRoot(),f=!1;if(i=r[(n?"start":"end")+"Container"],o=r[(n?"start":"end")+"Offset"],u=bs.isElement(i)&&o===i.childNodes.length,l=e.schema.getNonEmptyElements(),c=n,su(i))return Se.none();if(bs.isElement(i)&&o>i.childNodes.length-1&&(c=!1),bs.isDocument(i)&&(i=d,o=0),i===d){if(c&&(s=i.childNodes[o>0?o-1:0])){if(su(s))return Se.none();if(l[s.nodeName]||M_(s))return Se.none()}if(i.hasChildNodes()){if(o=Math.min(!c&&o>0?o-1:o,i.childNodes.length-1),i=i.childNodes[o],o=bs.isText(i)&&u?i.data.length:0,!t&&i===d.lastChild&&M_(i))return Se.none();if(H_(d,i)||su(i))return Se.none();if(i.hasChildNodes()&&!1===M_(i)){s=i,a=new m(i,d);do{if(bs.isContentEditableFalse(s)||su(s)){f=!1;break}if(bs.isText(s)&&s.nodeValue.length>0){o=c?0:s.nodeValue.length,i=s,f=!0;break}if(l[s.nodeName.toLowerCase()]&&!j_(s)){o=e.nodeIndex(s),i=s.parentNode,c||o++,f=!0;break}}while(s=c?a.next():a.prev())}}}return t&&(bs.isText(i)&&0===o&&$_(e,u,t,!0,i).each(function(e){i=e.container(),o=e.offset(),f=!0}),bs.isElement(i)&&(s=i.childNodes[o],s||(s=i.childNodes[o-1]),!s||!bs.isBr(s)||F_(s,"A")||L_(e,s,!1)||L_(e,s,!0)||$_(e,u,t,!0,s).each(function(e){i=e.container(),o=e.offset(),f=!0}))),c&&!t&&bs.isText(i)&&o===i.nodeValue.length&&$_(e,u,t,!1,i).each(function(e){i=e.container(),o=e.offset(),f=!0}),f?Se.some(C(i,o)):Se.none()},z_=function(e,t){var n=t.collapsed,r=t.cloneRange(),i=C.fromRangeStart(t);return U_(e,n,!0,r).each(function(e){n&&C.isAbove(i,e)||r.setStart(e.container(),e.offset())}),n||U_(e,n,!1,r).each(function(e){r.setEnd(e.container(),e.offset())}),n&&r.collapse(!0),R_.isEq(t,r)?Se.none():Se.some(r)},W_={normalize:z_},q_=function(e,t,n){for(var r,i=new m(t,n),o=e.getNonEmptyElements();r=i.next();)if(o[r.nodeName.toLowerCase()]||r.length>0)return!0},V_=function(e,t,n){var r=e.create("span",{},"&nbsp;");n.parentNode.insertBefore(r,n),t.scrollIntoView(r),e.remove(r)},Y_=function(e,t,n,r){var i=e.createRng();r?(i.setStartBefore(n),i.setEndBefore(n)):(i.setStartAfter(n),i.setEndAfter(n)),t.setRng(i)},G_=function(e,t){var n,r,i=e.selection,o=e.dom,a=i.getRng();W_.normalize(o,a).each(function(e){a.setStart(e.startContainer,e.startOffset),a.setEnd(e.endContainer,e.endOffset)});var s=a.startOffset,l=a.startContainer;if(1===l.nodeType&&l.hasChildNodes()){var c=s>l.childNodes.length-1;l=l.childNodes[Math.min(s,l.childNodes.length-1)]||l,s=c&&3===l.nodeType?l.nodeValue.length:0}var u=o.getParent(l,o.isBlock),d=u?o.getParent(u.parentNode,o.isBlock):null,f=d?d.nodeName.toUpperCase():"",h=t&&t.ctrlKey;"LI"!==f||h||(u=d),l&&3===l.nodeType&&s>=l.nodeValue.length&&(q_(e.schema,l,u)||(n=o.create("br"),a.insertNode(n),a.setStartAfter(n),a.setEndAfter(n),r=!0)),n=o.create("br"),a.insertNode(n),V_(o,i,n),Y_(o,i,n,r),e.undoManager.add()},K_=function(e,t){var n=Ai.fromTag("br");ml.before(Ai.fromDom(t),n),e.undoManager.add()},X_=function(e,t){Q_(e.getBody(),t)||ml.after(Ai.fromDom(t),Ai.fromTag("br"));var n=Ai.fromTag("br");ml.after(Ai.fromDom(t),n),V_(e.dom,e.selection,n.dom()),Y_(e.dom,e.selection,n.dom(),!1),e.undoManager.add()},J_=function(e){return bs.isBr(e.getNode())},Q_=function(e,t){return!!J_(vd.after(t))||Ip.nextPosition(e,vd.after(t)).map(function(e){return bs.isBr(e.getNode())}).getOr(!1)},Z_=function(e){return e&&"A"===e.nodeName&&"href"in e},ex=function(e){return e.fold(pe(!1),Z_,Z_,pe(!1))},tx=function(e){var t=me(mv.isInlineTarget,e),n=vd.fromRangeStart(e.selection.getRng());return Uy.readLocation(t,e.getBody(),n).filter(ex)},nx=function(e,t){t.fold(fe,me(K_,e),me(X_,e),fe)},rx=function(e,t){var n=tx(e);n.isSome()?n.each(me(nx,e)):G_(e,t)},ix={insert:rx},ox=_b.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),ax=function(e,t,n,r){return e.fold(t,n,r)},sx=function(e){return e.fold(ge,ge,ge)},lx={before:ox.before,on:ox.on,after:ox.after,cata:ax,getStart:sx},cx=_b.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),ux=Do("start","soffset","finish","foffset"),dx=function(e){return cx.exact(e.start(),e.soffset(),e.finish(),e.foffset())},fx=function(e){return e.match({domRange:function(e){return Ai.fromDom(e.startContainer)},relative:function(e,t){return lx.getStart(e)},exact:function(e,t,n,r){return e}})},hx=function(e){var t=fx(e);return ma.defaultView(t)},px={domRange:cx.domRange,relative:cx.relative,exact:cx.exact,exactFromRange:dx,range:ux,getWin:hx},gx=ki.detect().browser,mx=function(e,t){var n=Hi.isText(t)?$g.get(t).length:ma.children(t).length+1;return e>n?n:e<0?0:e},vx=function(e){return px.range(e.start(),mx(e.soffset(),e.start()),e.finish(),mx(e.foffset(),e.finish()))},bx=function(e,t){return Ko.contains(e,t)||Ko.eq(e,t)},yx=function(e){return function(t){return bx(e,t.start())&&bx(e,t.finish())}},wx=function(e){return!0===e.inline||gx.isIE()},_x=function(e){return px.range(Ai.fromDom(e.startContainer),e.startOffset,Ai.fromDom(e.endContainer),e.endOffset)},xx=function(e){var t=e.getSelection();return(t&&0!==t.rangeCount?Se.from(t.getRangeAt(0)):Se.none()).map(_x)},Cx=function(e){var t=ma.defaultView(e);return xx(t.dom()).filter(yx(e))},kx=function(e,t){return Se.from(t).filter(yx(e)).map(vx)},Tx=function(e){var t=document.createRange();try{return t.setStart(e.start().dom(),e.soffset()),t.setEnd(e.finish().dom(),e.foffset()),Se.some(t)}catch(e){return Se.none()}},Sx=function(e){var t=wx(e)?Cx(Ai.fromDom(e.getBody())):Se.none();e.bookmark=t.isSome()?t:e.bookmark},Dx=function(e,t){var n=Ai.fromDom(e.getBody()),r=wx(e)?Se.from(t):Se.none(),i=r.map(_x).filter(yx(n));e.bookmark=i.isSome()?i:e.bookmark},Ex=function(e){return(e.bookmark?e.bookmark:Se.none()).bind(me(kx,Ai.fromDom(e.getBody()))).bind(Tx)},Nx=function(e){Ex(e).each(function(t){e.selection.setRng(t)})},Ax={store:Sx,storeNative:Dx,readRange:xx,restore:Nx,getRng:Ex,getBookmark:Cx,validate:kx},Rx=function(e,t,n,r,i,o){if("false"!==e.getContentEditable(o)&&"LI"!==o.nodeName){var a=n?"margin":"padding";if(a="TABLE"===o.nodeName?"margin":a,a+="rtl"===e.getStyle(o,"direction",!0)?"Right":"Left","outdent"===t){var s=Math.max(0,parseInt(o.style[a]||0,10)-r);e.setStyle(o,a,s?s+i:"")}else{var s=parseInt(o.style[a]||0,10)+r+i;e.setStyle(o,a,s)}}},Px=function(e,t){var n=e.settings,r=e.dom,i=e.selection,o=e.formatter,a=/[a-z%]+$/i.exec(n.indentation)[0],s=parseInt(n.indentation,10),l=e.getParam("indent_use_margin",!1);e.queryCommandState("InsertUnorderedList")||e.queryCommandState("InsertOrderedList")||(n.forced_root_block||r.getParent(i.getNode(),r.isBlock)||o.apply("div"),$e(i.getSelectedBlocks(),function(e){return Rx(r,t,l,s,a,e)}))},Ox=gr.each,Ix=gr.extend,Mx=gr.map,jx=gr.inArray,Bx=gr.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend"," "),Lx=function(e){var t,n,r=this,i={},o=function(){return!1},a=function(){return!0};e=e||{},t=e.scope||r,n=e.toggleEvent||o;var s=function(n,r){var s,l,u,d;if(n=n.toLowerCase(),r=r||{},r.type=n,r.target||(r.target=t),r.preventDefault||(r.preventDefault=function(){r.isDefaultPrevented=a},r.stopPropagation=function(){r.isPropagationStopped=a},r.stopImmediatePropagation=function(){r.isImmediatePropagationStopped=a},r.isDefaultPrevented=o,r.isPropagationStopped=o,r.isImmediatePropagationStopped=o),e.beforeFire&&e.beforeFire(r),s=i[n])for(l=0,u=s.length;l<u;l++){if(d=s[l],d.once&&c(n,d.func),r.isImmediatePropagationStopped())return r.stopPropagation(),r;if(!1===d.func.call(t,r))return r.preventDefault(),r}return r},l=function(e,t,a,s){var l,c,u;if(!1===t&&(t=o),t)for(t={func:t},s&&gr.extend(t,s),c=e.toLowerCase().split(" "),u=c.length;u--;)e=c[u],l=i[e],l||(l=i[e]=[],n(e,!0)),a?l.unshift(t):l.push(t);return r},c=function(e,t){var o,a,s,l,c;if(e)for(l=e.toLowerCase().split(" "),o=l.length;o--;){if(e=l[o],a=i[e],!e){for(s in i)n(s,!1),delete i[s];return r}if(a){if(t)for(c=a.length;c--;)a[c].func===t&&(a=a.slice(0,c).concat(a.slice(c+1)),i[e]=a);else a.length=0;a.length||(n(e,!1),delete i[e])}}else{for(e in i)n(e,!1);i={}}return r},u=function(e,t,n){return l(e,t,n,{once:!0})},d=function(e){return e=e.toLowerCase(),!(!i[e]||0===i[e].length)};r.fire=s,r.on=l,r.off=c,r.once=u,r.has=d};Lx.isNative=function(e){return!!Bx[e.toLowerCase()]};var Fx,Hx=function(e){return e._eventDispatcher||(e._eventDispatcher=new Lx({scope:e,toggleEvent:function(t,n){Lx.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,n)}})),e._eventDispatcher},$x={fire:function(e,t,n){var r=this;if(r.removed&&"remove"!==e)return t;if(t=Hx(r).fire(e,t,n),!1!==n&&r.parent)for(var i=r.parent();i&&!t.isPropagationStopped();)i.fire(e,t,!1),i=i.parent();return t},on:function(e,t,n){return Hx(this).on(e,t,n)},off:function(e,t){return Hx(this).off(e,t)},once:function(e,t){return Hx(this).once(e,t)},hasEventListeners:function(e){return Hx(this).has(e)}},Ux=function(e,t){return e.fire("PreProcess",t)},zx=function(e,t){return e.fire("PostProcess",t)},Wx=function(e){return e.fire("remove")},qx=function(e,t){return e.fire("SwitchMode",{mode:t})},Vx=function(e,t,n,r){e.fire("ObjectResizeStart",{target:t,width:n,height:r})},Yx=function(e,t,n,r){e.fire("ObjectResized",{target:t,width:n,height:r})},Gx={firePreProcess:Ux,firePostProcess:zx,fireRemove:Wx,fireSwitchMode:qx,fireObjectResizeStart:Vx,fireObjectResized:Yx},Kx=function(e,t,n){try{e.getDoc().execCommand(t,!1,n)}catch(e){}},Xx=function(e,t,n){ql.has(e,t)&&!1===n?ql.remove(e,t):n&&ql.add(e,t)},Jx=function(e,t){Xx(Ai.fromDom(e.getBody()),"mce-content-readonly",t),t?(e.selection.controlSelection.hideResizeRect(),e.readonly=!0,e.getBody().contentEditable="false"):(e.readonly=!1,e.getBody().contentEditable="true",Kx(e,"StyleWithCSS",!1),Kx(e,"enableInlineTableEditing",!1),Kx(e,"enableObjectResizing",!1),e.focus(),e.nodeChanged())},Qx=function(e,t){t!==Zx(e)&&(e.initialized?Jx(e,"readonly"===t):e.on("init",function(){Jx(e,"readonly"===t)}),Gx.fireSwitchMode(e,t))},Zx=function(e){return e.readonly?"readonly":"design"},eC=function(e){return!0===e.readonly},tC=rl.DOM,nC=function(e,t){return"selectionchange"===t?e.getDoc():!e.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(t)?e.getDoc().documentElement:e.settings.event_root?(e.eventRoot||(e.eventRoot=tC.select(e.settings.event_root)[0]),e.eventRoot):e.getBody()},rC=function(e){return!e.hidden&&!e.readonly},iC=function(e,t,n){rC(e)?e.fire(t,n):eC(e)&&n.preventDefault()},oC=function(e,t){var n,r;if(e.delegates||(e.delegates={}),!e.delegates[t]&&!e.removed)if(n=nC(e,t),e.settings.event_root){if(Fx||(Fx={},e.editorManager.on("removeEditor",function(){var t;if(!e.editorManager.activeEditor&&Fx){for(t in Fx)e.dom.unbind(nC(e,t));Fx=null}})),Fx[t])return;r=function(n){for(var r=n.target,i=e.editorManager.get(),o=i.length;o--;){var a=i[o].getBody();(a===r||tC.isChildOf(r,a))&&iC(i[o],t,n)}},Fx[t]=r,tC.bind(n,t,r)}else r=function(n){iC(e,t,n)},tC.bind(n,t,r),e.delegates[t]=r},aC={bindPendingEventDelegates:function(){var e=this;gr.each(e._pendingNativeEvents,function(t){oC(e,t)})},toggleNativeEvent:function(e,t){var n=this;"focus"!==e&&"blur"!==e&&(t?n.initialized?oC(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&(n.dom.unbind(nC(n,e),e,n.delegates[e]),delete n.delegates[e]))},unbindAllNativeEvents:function(){var e,t=this,n=t.getBody(),r=t.dom;if(t.delegates){for(e in t.delegates)t.dom.unbind(nC(t,e),e,t.delegates[e]);delete t.delegates}!t.inline&&n&&r&&(n.onload=null,r.unbind(t.getWin()),r.unbind(t.getDoc())),r&&(r.unbind(n),r.unbind(t.getContainer()))}};aC=gr.extend({},$x,aC);var sC,lC=aC,cC=gr.each,uC=gr.explode,dC={f9:120,f10:121,f11:122},fC=gr.makeMap("alt,ctrl,shift,meta,access"),hC=function(e){return uc.first(e).isSome()},pC=function(e,t,n){return uc.ancestor(e,t,n).isSome()},gC=function(e,t,n){return uc.closest(e,t,n).isSome()},mC=function(e,t){return uc.sibling(e,t).isSome()},vC=function(e,t){return uc.child(e,t).isSome()},bC=function(e,t){return uc.descendant(e,t).isSome()},yC={any:hC,ancestor:pC,closest:gC,sibling:mC,child:vC,descendant:bC},wC=function(e){e.dom().focus()},_C=function(e){e.dom().blur()},xC=function(e){var t=ma.owner(e).dom();return e.dom()===t.activeElement},CC=function(e){var t=void 0!==e?e.dom():document;return Se.from(t.activeElement).map(Ai.fromDom)},kC=function(e){var t=ma.owner(e);CC(t).filter(function(t){return yC.closest(t,me(Ko.eq,e))}).fold(function(){wC(e)},fe)},TC=function(e){return CC(ma.owner(e)).filter(function(t){return e.dom().contains(t.dom())})},SC={hasFocus:xC,focus:wC,blur:_C,active:CC,search:TC,focusInside:kC},DC=function(e,t){return e.dom.getParent(t,function(t){return"true"===e.dom.getContentEditable(t)})},EC=function(e){return e.collapsed?Se.from(Vu(e.startContainer,e.startOffset)).map(Ai.fromDom):Se.none()},NC=function(e,t){return EC(t).bind(function(t){return Qa(t)?Se.some(t):!1===Ko.contains(e,t)?Se.some(e):Se.none()})},AC=function(e,t){NC(Ai.fromDom(e.getBody()),t).bind(function(e){return Ip.firstPositionIn(e.dom())}).fold(function(){e.selection.normalize()},function(t){return e.selection.setRng(t.toRange())})},RC=function(e){if(e.setActive)try{e.setActive()}catch(t){e.focus()}else e.focus()},PC=function(e){return SC.hasFocus(e)||SC.search(e).isSome()},OC=function(e){return e.iframeElement&&SC.hasFocus(Ai.fromDom(e.iframeElement))},IC=function(e){var t=e.getBody();return t&&PC(Ai.fromDom(t))},MC=function(e){return e.inline?IC(e):OC(e)},jC=function(e){var t=e.selection,n=e.settings.content_editable,r=e.getBody(),i=t.getRng();e.quirks.refreshContentEditable();var o=DC(e,t.getNode());if(e.$.contains(r,o))return RC(o),AC(e,i),void BC(e);void 0!==e.bookmark&&!1===MC(e)&&Ax.getRng(e).each(function(t){e.selection.setRng(t),i=t}),n||(Ct.opera||RC(r),e.getWin().focus()),(Ct.gecko||n)&&(RC(r),AC(e,i)),BC(e)},BC=function(e){return e.editorManager.setActive(e)},LC=function(e,t){e.removed||(t?BC(e):jC(e))},FC={focus:LC,hasFocus:MC},HC=function(e,t){return t.dom()[e]},$C=function(e,t){return parseInt(So.get(t,e),10)},UC=me(HC,"clientWidth"),zC=me(HC,"clientHeight"),WC=me($C,"margin-top"),qC=me($C,"margin-left"),VC=function(e){return e.dom().getBoundingClientRect()},YC=function(e,t,n){var r=UC(e),i=zC(e);return t>=0&&n>=0&&t<=r&&n<=i},GC=function(e,t,n,r){var i=VC(t);return{x:n-(e?i.left+t.dom().clientLeft+qC(t):0),y:r-(e?i.top+t.dom().clientTop+WC(t):0)}},KC=function(e,t,n){var r=Ai.fromDom(e.getBody()),i=e.inline?r:ma.documentElement(r),o=GC(e.inline,i,t,n);return YC(i,o.x,o.y)},XC=function(e){return Se.from(e).map(Ai.fromDom)},JC=function(e){var t=e.inline?e.getBody():e.getContentAreaContainer();return XC(t).map(function(e){return Ko.contains(ma.owner(e),e)}).getOr(!1)},QC={isXYInContentArea:KC,isEditorAttachedToDom:JC},ZC=w.PluginManager,ek=function(e,t){for(var n in ZC.urls){if(ZC.urls[n]+"/plugin"+t+".js"===e)return n}return null},tk=function(e,t){var n=ek(t,e.suffix);return n?"Failed to load plugin: "+n+" from url "+t:"Failed to load plugin url: "+t},nk=function(e,t){e.notificationManager.open({type:"error",text:t})},rk=function(e,t){e._skinLoaded?nk(e,t):e.on("SkinLoaded",function(){nk(e,t)})},ik=function(e,t){rk(e,"Failed to upload image: "+t)},ok=function(e,t){rk(e,tk(e,t))},ak=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=window.console;r&&(r.error?r.error.apply(r,arguments):r.log.apply(r,arguments))},sk={pluginLoadError:ok,uploadError:ik,displayError:rk,initError:ak},lk=w.PluginManager,ck=w.ThemeManager,uk=function(e){ht.getOrDie("requestAnimationFrame")(e)},dk=function(e){return ht.getOrDie("atob")(e)},fk={atob:dk,requestAnimationFrame:uk},hk=function(e){return new kt(function(t,n){var r=function(){n("Cannot convert "+e+" to Blob. Resource might not exist or is inaccessible.")};try{var i=new O;i.open("GET",e,!0),i.responseType="blob",i.onload=function(){200===this.status?t(this.response):r()},i.onerror=r,i.send()}catch(e){r()}})},pk=function(e){var t,n;return e=decodeURIComponent(e).split(","),n=/data:([^;]+)/.exec(e[0]),n&&(t=n[1]),{type:t,data:e[1]}},gk=function(e){return new kt(function(t){var n,r,i;e=pk(e);try{n=fk.atob(e.data)}catch(e){return void t(new M([]))}for(r=new B(n.length),i=0;i<r.length;i++)r[i]=n.charCodeAt(i);t(new M([r],{type:e.type}))})},mk=function(e){return 0===e.indexOf("blob:")?hk(e):0===e.indexOf("data:")?gk(e):null},vk=function(e){return new kt(function(t){var n=new j;n.onloadend=function(){t(n.result)},n.readAsDataURL(e)})},bk={uriToBlob:mk,blobToDataUri:vk,parseDataUri:pk},yk=0,wk=function(e){return(e||"blobid")+yk++},_k=function(e,t,n,r){var i,o;if(0===t.src.indexOf("blob:"))return o=e.getByUri(t.src),void(o?n({image:t,blobInfo:o}):bk.uriToBlob(t.src).then(function(r){bk.blobToDataUri(r).then(function(a){i=bk.parseDataUri(a).data,o=e.create(wk(),r,i),e.add(o),n({image:t,blobInfo:o})})},function(e){r(e)}));i=bk.parseDataUri(t.src).data,o=e.findFirst(function(e){return e.base64()===i}),o?n({image:t,blobInfo:o}):bk.uriToBlob(t.src).then(function(r){o=e.create(wk(),r,i),e.add(o),n({image:t,blobInfo:o})},function(e){r(e)})},xk=function(e){return e?e.getElementsByTagName("img"):[]},Ck=0,kk=function(){var e=function(){return Math.round(4294967295*Math.random()).toString(36)};return"s"+(new Date).getTime().toString(36)+e()+e()+e()},Tk=function(e){return e+Ck+++kk()},Sk={uuid:Tk},Dk=function(e,t){return e.hasOwnProperty(t.nodeName)},Ek=function(e,t){return!!bs.isText(t)||!!bs.isElement(t)&&(!Dk(e,t)&&!ig.isBookmarkNode(t))},Nk=function(e,t,n){return Fe(eb.parents(Ai.fromDom(n),Ai.fromDom(t)),function(t){return Dk(e,t.dom())})},Ak=function(e,t){if(bs.isText(t)){if(0===t.nodeValue.length)return!0;if(/^\s+$/.test(t.nodeValue)&&(!t.nextSibling||Dk(e,t.nextSibling)))return!0}return!1},Rk=function(e){var t,n,r,i,o,a,s,l,c,u,d,f=e.settings,h=e.dom,p=e.selection,g=e.schema,m=g.getBlockElements(),v=p.getStart(),b=e.getBody();if(d=f.forced_root_block,v&&bs.isElement(v)&&d&&(u=b.nodeName.toLowerCase(),g.isValidChild(u,d.toLowerCase())&&!Nk(m,b,v))){for(t=p.getRng(),n=t.startContainer,r=t.startOffset,i=t.endContainer,o=t.endOffset,c=FC.hasFocus(e),v=b.firstChild;v;)if(Ek(m,v)){if(Ak(m,v)){s=v,v=v.nextSibling,h.remove(s);continue}a||(a=h.create(d,e.settings.forced_root_block_attrs),v.parentNode.insertBefore(a,v),l=!0),s=v,v=v.nextSibling,a.appendChild(s)}else a=null,v=v.nextSibling;l&&c&&(t.setStart(n,r),t.setEnd(i,o),p.setRng(t),e.nodeChanged())}},Pk=function(e){e.settings.forced_root_block&&e.on("NodeChange",me(Rk,e))},Ok={setup:Pk},Ik=function(e){var t=e.startContainer,n=e.startOffset;return bs.isText(t)?0===n?Se.some(Ai.fromDom(t)):Se.none():Se.from(t.childNodes[n]).map(Ai.fromDom)},Mk=function(e){var t=e.endContainer,n=e.endOffset;return bs.isText(t)?n===t.data.length?Se.some(Ai.fromDom(t)):Se.none():Se.from(t.childNodes[n-1]).map(Ai.fromDom)},jk=function(e){return ma.firstChild(e).fold(pe([e]),function(t){return[e].concat(jk(t))})},Bk=function(e){return ma.lastChild(e).fold(pe([e]),function(t){return"br"===Hi.name(t)?ma.prevSibling(t).map(function(t){return[e].concat(Bk(t))}).getOr([]):[e].concat(Bk(t))})},Lk=function(e,t){return Ku([Ik(t),Mk(t)],function(t,n){var r=Ye(jk(e),me(Ko.eq,t)),i=Ye(Bk(e),me(Ko.eq,n));return r.isSome()&&i.isSome()}).getOr(!1)},Fk=function(e,t,n,r){var i=n,o=new m(n,i),a=e.schema.getNonEmptyElements();do{if(3===n.nodeType&&0!==gr.trim(n.nodeValue).length)return void(r?t.setStart(n,0):t.setEnd(n,n.nodeValue.length));if(a[n.nodeName]&&!/^(TD|TH)$/.test(n.nodeName))return void(r?t.setStartBefore(n):"BR"===n.nodeName?t.setEndBefore(n):t.setEndAfter(n));if(Ct.ie&&Ct.ie<11&&e.isBlock(n)&&e.isEmpty(n))return void(r?t.setStart(n,0):t.setEnd(n,0))}while(n=r?o.next():o.prev());"BODY"===i.nodeName&&(r?t.setStart(i,0):t.setEnd(i,i.childNodes.length))},Hk=function(e){var t=e.selection.getSel();return t&&t.rangeCount>0},$k=function(e){var t,n,r,i;return i=e.getBoundingClientRect(),t=e.ownerDocument,n=t.documentElement,r=t.defaultView,{top:i.top+r.pageYOffset-n.clientTop,left:i.left+r.pageXOffset-n.clientLeft}},Uk=function(e){return e.inline?$k(e.getBody()):{left:0,top:0}},zk=function(e){var t=e.getBody();return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}},Wk=function(e){var t=e.getBody(),n=e.getDoc().documentElement,r={left:t.scrollLeft,top:t.scrollTop},i={left:t.scrollLeft||n.scrollLeft,top:t.scrollTop||n.scrollTop};return e.inline?r:i},qk=function(e,t){if(t.target.ownerDocument!==e.getDoc()){var n=$k(e.getContentAreaContainer()),r=Wk(e);return{left:t.pageX-n.left+r.left,top:t.pageY-n.top+r.top}}return{left:t.pageX,top:t.pageY}},Vk=function(e,t,n){return{pageX:n.left-e.left+t.left,pageY:n.top-e.top+t.top}},Yk=function(e,t){return Vk(Uk(e),zk(e),qk(e,t))},Gk={calc:Yk},Kk=bs.isContentEditableFalse,Xk=bs.isContentEditableTrue,Jk=function(e,t){return Kk(t)&&t!==e},Qk=function(e,t,n){return t!==n&&!e.dom.isChildOf(t,n)&&!Kk(t)},Zk=function(e){var t=e.cloneNode(!0);return t.removeAttribute("data-mce-selected"),t},eT=function(e,t,n,r){var i=t.cloneNode(!0);e.dom.setStyles(i,{width:n,height:r}),e.dom.setAttrib(i,"data-mce-selected",null);var o=e.dom.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return e.dom.setStyles(o,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:r}),e.dom.setStyles(i,{margin:0,boxSizing:"border-box"}),o.appendChild(i),o},tT=function(e,t){e.parentNode!==t&&t.appendChild(e)},nT=function(e,t,n,r,i,o){var a=0,s=0;e.style.left=t.pageX+"px",e.style.top=t.pageY+"px",t.pageX+n>i&&(a=t.pageX+n-i),t.pageY+r>o&&(s=t.pageY+r-o),e.style.width=n-a+"px",e.style.height=r-s+"px"},rT=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},iT=function(e){return 0===e.button},oT=function(e){return e.element},aT=function(e,t){return{pageX:t.pageX-e.relX,pageY:t.pageY+5}},sT=function(e,t){return function(n){if(iT(n)){var r=nr.find(t.dom.getParents(n.target),Zc.or(Kk,Xk));if(Jk(t.getBody(),r)){var i=t.dom.getPos(r),o=t.getBody(),a=t.getDoc().documentElement;e.element=r,e.screenX=n.screenX,e.screenY=n.screenY,e.maxX=(t.inline?o.scrollWidth:a.offsetWidth)-2,e.maxY=(t.inline?o.scrollHeight:a.offsetHeight)-2,e.relX=n.pageX-i.x,e.relY=n.pageY-i.y,e.width=r.offsetWidth,e.height=r.offsetHeight,e.ghost=eT(t,r,e.width,e.height)}}}},lT=function(e,t){var n=Rt.throttle(function(e,n){t._selectionOverrides.hideFakeCaret(),t.selection.placeCaretAt(e,n)},0);return function(r){var i=Math.max(Math.abs(r.screenX-e.screenX),Math.abs(r.screenY-e.screenY));if(oT(e)&&!e.dragging&&i>10){if(t.fire("dragstart",{target:e.element}).isDefaultPrevented())return;e.dragging=!0,t.focus()}if(e.dragging){var o=aT(e,Gk.calc(t,r));tT(e.ghost,t.getBody()),nT(e.ghost,o,e.width,e.height,e.maxX,e.maxY),n(r.clientX,r.clientY)}}},cT=function(e){var t=e.getSel().getRangeAt(0),n=t.startContainer;return 3===n.nodeType?n.parentNode:n},uT=function(e,t){return function(n){if(e.dragging&&Qk(t,cT(t.selection),e.element)){var r=Zk(e.element),i=t.fire("drop",{targetClone:r,clientX:n.clientX,clientY:n.clientY});i.isDefaultPrevented()||(r=i.targetClone,t.undoManager.transact(function(){rT(e.element),t.insertContent(t.dom.getOuterHTML(r)),t._selectionOverrides.hideFakeCaret()}))}fT(e)}},dT=function(e,t){return function(){e.dragging&&t.fire("dragend"),fT(e)}},fT=function(e){e.dragging=!1,e.element=null,rT(e.ghost)},hT=function(e){var t,n,r,i,o,a,s={};t=rl.DOM,a=document,n=sT(s,e),r=lT(s,e),i=uT(s,e),o=dT(s,e),e.on("mousedown",n),e.on("mousemove",r),e.on("mouseup",i),t.bind(a,"mousemove",r),t.bind(a,"mouseup",o),e.on("remove",function(){t.unbind(a,"mousemove",r),t.unbind(a,"mouseup",o)})},pT=function(e){e.on("drop",function(t){var n=void 0!==t.clientX?e.getDoc().elementFromPoint(t.clientX,t.clientY):null;(Kk(n)||Kk(e.dom.getContentEditableParent(n)))&&t.preventDefault()})},gT=function(e){hT(e),pT(e)},mT={init:gT},vT=function(e){var t=function(t){return nr.map(t,function(t){return t=Mu(t),t.node=e,t})};if(bs.isElement(e))return t(e.getClientRects());if(bs.isText(e)){var n=e.ownerDocument.createRange();return n.setStart(e,0),n.setEnd(e,e.data.length),t(n.getClientRects())}},bT=function(e){return nr.reduce(e,function(e,t){return e.concat(vT(t))},[])};!function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"}(sC||(sC={}));var yT=function(e,t,n,r){for(;r=ap(r,e,Ou,t);)if(n(r))return},wT=function(e,t,n,r,i,o){var a,s,l=0,c=[],u=function(r){var o,a,u;for(u=bT([r]),-1===e&&(u=u.reverse()),o=0;o<u.length;o++)if(a=u[o],!n(a,s)){if(c.length>0&&t(a,nr.last(c))&&l++,a.line=l,i(a))return!0;c.push(a)}};return(s=nr.last(o.getClientRects()))?(a=o.getNode(),u(a),yT(e,r,u,a),c):c},_T=function(e,t){return t.line>e},xT=function(e,t){return t.line===e},CT=me(wT,sC.Up,Fu,Hu),kT=me(wT,sC.Down,Hu,Fu),TT=function(e,t,n,r){var i,o,a,s,l,c,u=Pf(t),d=[],f=0,h=function(e){return nr.last(e.getClientRects())};1===e?(i=u.next,o=Hu,a=Fu,s=vd.after(r)):(i=u.prev,o=Fu,a=Hu,s=vd.before(r)),c=h(s);do{if(s.isVisible()&&(l=h(s),!a(l,c))){if(d.length>0&&o(l,nr.last(d))&&f++,l=Mu(l),l.position=s,l.line=f,n(l))return d;d.push(l)}}while(s=i(s));return d},ST=function(e){return function(t){return _T(e,t)}},DT=function(e){return function(t){return xT(e,t)}},ET=bs.isContentEditableFalse,NT=ap,AT=function(e,t){return Math.abs(e.left-t)},RT=function(e,t){return Math.abs(e.right-t)},PT=function(e,t){return e>=t.left&&e<=t.right},OT=function(e,t){return nr.reduce(e,function(e,n){var r,i;return r=Math.min(AT(e,t),RT(e,t)),i=Math.min(AT(n,t),RT(n,t)),PT(t,n)?n:PT(t,e)?e:i===r&&ET(n.node)?n:i<r?n:e})},IT=function(e,t,n,r){for(;r=NT(r,e,Ou,t);)if(n(r))return},MT=function(e,t){var n=[],r=function(e,r){var i;return i=nr.filter(bT([r]),function(n){return!e(n,t)}),n=n.concat(i),0===i.length};return n.push(t),IT(sC.Up,e,me(r,Fu),t.node),IT(sC.Down,e,me(r,Hu),t.node),n},jT=function(e){return nr.filter(nr.toArray(e.getElementsByTagName("*")),Kh)},BT=function(e,t){return{node:e.node,before:AT(e,t)<RT(e,t)}},LT=function(e,t,n){var r,i=bT(jT(e)),o=nr.filter(i,function(e){return n>=e.top&&n<=e.bottom});return r=OT(o,t),r&&(r=OT(MT(e,r),t))&&Kh(r.node)?BT(r,t):null},FT=function(e,t,n){return!n.collapsed&&Ve(n.getClientRects(),function(n,r){return n||$u(r,e,t)},!1)},HT={isXYWithinRange:FT},$T=function(e){var t=Sl(function(){if(!e.removed){if(e.selection.getRng().collapsed){var t=bf(e,e.selection.getRng(),!1);e.selection.setRng(t)}}},0);e.on("focus",function(){t.throttle()}),e.on("blur",function(){t.cancel()})},UT={setup:$T},zT={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey||this.metaKeyPressed(e)},metaKeyPressed:function(e){return Ct.mac?e.metaKey:e.ctrlKey&&!e.altKey}},WT=bs.isContentEditableTrue,qT=bs.isContentEditableFalse,VT=_p,YT=wp,GT=function(e,t){for(var n=e.getBody();t&&t!==n;){if(WT(t)||qT(t))return t;t=t.parentNode}return null},KT=function(e){var t,n=function(t){return e.dom.isBlock(t)},r=e.getBody(),i=Gh(e.getBody(),n,function(){return FC.hasFocus(e)}),o="sel-"+e.dom.uniqueId(),a=function(t){return e.dom.hasClass(t,"mce-offscreen-selection")},s=function(){var t=e.dom.get(o);return t?t.getElementsByTagName("*")[0]:t},l=function(t){t&&e.selection.setRng(t)},c=function(){
return e.selection.getRng()},u=function(t,n,r,o){void 0===o&&(o=!0);var a;return a=e.fire("ShowCaret",{target:n,direction:t,before:r}),a.isDefaultPrevented()?null:(o&&e.selection.scrollIntoView(n,-1===t),i.show(r,n))},d=function(e,t){return t=gp(e,r,t),-1===e?vd.fromRangeStart(t):vd.fromRangeEnd(t)},f=function(t){t.hasAttribute("data-mce-caret")&&(vu(t),l(c()),e.selection.scrollIntoView(t[0]))},h=function(e){return su(e)||pu(e)||gu(e)},p=function(e){return h(e.startContainer)||h(e.endContainer)},g=function(n,r){var i,a,s,l,c,f,h,g,m,v,y=e.$,w=e.dom;if(!n)return null;if(n.collapsed){if(!p(n))if(!1===r){if(g=d(-1,n),Kh(g.getNode(!0)))return u(-1,g.getNode(!0),!1,!1);if(Kh(g.getNode()))return u(-1,g.getNode(),!g.isAtEnd(),!1)}else{if(g=d(1,n),Kh(g.getNode()))return u(1,g.getNode(),!g.isAtEnd(),!1);if(Kh(g.getNode(!0)))return u(1,g.getNode(!0),!1,!1)}return null}return l=n.startContainer,c=n.startOffset,f=n.endOffset,3===l.nodeType&&0===c&&qT(l.parentNode)&&(l=l.parentNode,c=w.nodeIndex(l),l=l.parentNode),1!==l.nodeType?null:(f===c+1&&(i=l.childNodes[c]),qT(i)?(m=v=i.cloneNode(!0),h=e.fire("ObjectSelected",{target:i,targetClone:m}),h.isDefaultPrevented()?null:(a=vc.descendant(Ai.fromDom(e.getBody()),"#"+o).fold(function(){return y([])},function(e){return y([e.dom()])}),m=h.targetClone,0===a.length&&(a=y('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",o),a.appendTo(e.getBody())),n=e.dom.createRng(),m===v&&Ct.ie?(a.empty().append('<p style="font-size: 0" data-mce-bogus="all"></p>').append(m),n.setStartAfter(a[0].firstChild.firstChild),n.setEndAfter(m)):(a.empty().append("").append(m).append(""),n.setStart(a[0].firstChild,1),n.setEnd(a[0].lastChild,0)),a.css({top:w.getPos(i,e.getBody()).y}),a[0].focus(),s=e.selection.getSel(),s.removeAllRanges(),s.addRange(n),$e(rc.descendants(Ai.fromDom(e.getBody()),"*[data-mce-selected]"),function(e){no.remove(e,"data-mce-selected")}),i.setAttribute("data-mce-selected","1"),t=i,b(),n)):null)},m=function(){t&&(t.removeAttribute("data-mce-selected"),vc.descendant(Ai.fromDom(e.getBody()),"#"+o).each(Tl.remove),t=null),vc.descendant(Ai.fromDom(e.getBody()),"#"+o).each(Tl.remove),t=null},v=function(){i.destroy(),t=null},b=function(){i.hide()};return Ct.ceFalse&&(function(){e.on("mouseup",function(t){var n=c();n.collapsed&&QC.isXYInContentArea(e,t.clientX,t.clientY)&&l(vf(e,n,!1))}),e.on("click",function(t){var n;(n=GT(e,t.target))&&(qT(n)&&(t.preventDefault(),e.focus()),WT(n)&&e.dom.isChildOf(n,e.selection.getNode())&&m())}),e.on("blur NewBlock",function(){m()}),e.on("ResizeWindow FullscreenStateChanged",function(){return i.reposition()});var n=function(e){var t=Pf(e);if(!e.firstChild)return!1;var n=vd.before(e.firstChild),r=t.next(n);return r&&!YT(r)&&!VT(r)},o=function(t,n){return e.dom.getParent(t,e.dom.isBlock)===e.dom.getParent(n,e.dom.isBlock)},d=function(t,r){var i=e.dom.getParent(t,e.dom.isBlock),a=e.dom.getParent(r,e.dom.isBlock);return!(!i||!e.dom.isChildOf(i,a)||!1!==qT(GT(e,i)))||i&&!o(i,a)&&n(i)};!function(e){var t=!1;e.on("touchstart",function(){t=!1}),e.on("touchmove",function(){t=!0}),e.on("touchend",function(n){var r=GT(e,n.target);qT(r)&&(t||(n.preventDefault(),g(mf(e,r))))})}(e),e.on("mousedown",function(t){var n,i=t.target;if((i===r||"HTML"===i.nodeName||e.dom.isChildOf(i,r))&&!1!==QC.isXYInContentArea(e,t.clientX,t.clientY))if(n=GT(e,i))qT(n)?(t.preventDefault(),g(mf(e,n))):(m(),WT(n)&&t.shiftKey||HT.isXYWithinRange(t.clientX,t.clientY,e.selection.getRng())||(b(),e.selection.placeCaretAt(t.clientX,t.clientY)));else if(!1===Kh(i)){m(),b();var o=LT(r,t.clientX,t.clientY);if(o&&!d(t.target,o.node)){t.preventDefault();var a=u(1,o.node,o.before,!1);e.getBody().focus(),l(a)}}}),e.on("keypress",function(t){zT.modifierPressed(t)||(t.keyCode,qT(e.selection.getNode())&&t.preventDefault())}),e.on("getSelectionRange",function(e){var n=e.range;if(t){if(!t.parentNode)return void(t=null);n=n.cloneRange(),n.selectNode(t),e.range=n}}),e.on("setSelectionRange",function(e){var t;(t=g(e.range,e.forward))&&(e.range=t)});var f=function(e){return"mcepastebin"===e.id};e.on("AfterSetSelectionRange",function(e){var t=e.range;p(t)||f(t.startContainer.parentNode)||b(),a(t.startContainer.parentNode)||m()}),e.on("copy",function(e){var t=e.clipboardData;if(!e.isDefaultPrevented()&&e.clipboardData&&!Ct.ie){var n=s();n&&(e.preventDefault(),t.clearData(),t.setData("text/html",n.outerHTML),t.setData("text/plain",n.outerText))}}),mT.init(e),UT.setup(e)}(),function(){var t=e.contentStyles;t.push(i.getCss()),t.push(".mce-content-body .mce-offscreen-selection {position: absolute;left: -9999999999px;max-width: 1000000px;}.mce-content-body *[contentEditable=false] {cursor: default;}.mce-content-body *[contentEditable=true] {cursor: text;}")}()),{showCaret:u,showBlockCaretContainer:f,hideFakeCaret:b,destroy:v}},XT=function(e){return 0===e.indexOf("data-")||0===e.indexOf("aria-")},JT=function(e){return e.replace(/<!--|-->/g,"")},QT=function(e,t){return!e.allow_html_data_urls&&(/^data:image\//i.test(t)?!1===e.allow_svg_data_urls&&/^data:image\/svg\+xml/i.test(t):/^data:/i.test(t))},ZT=function(e,t,n){var r,i,o,a,s=1;for(a=e.getShortEndedElements(),o=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g,o.lastIndex=r=n;i=o.exec(t);){if(r=o.lastIndex,"/"===i[1])s--;else if(!i[1]){if(i[2]in a)continue;s++}if(0===s)break}return r};!function(e){e.findEndTag=ZT}(z||(z={}));var eS=z,tS=function(e,t){var n=new RegExp(["\\s?("+e.join("|")+')="[^"]+"'].join("|"),"gi");return t.replace(n,"")},nS=function(e,t){var n,r,i,o,a,s=t,l=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,c=e.schema;for(s=tS(e.getTempAttrs(),s),a=c.getShortEndedElements();o=l.exec(s);)r=l.lastIndex,i=o[0].length,n=a[o[1]]?r:eS.findEndTag(c,s,r),s=s.substring(0,r-i)+s.substring(n),l.lastIndex=r-i;return nu.trim(s)},rS=nS,iS={trimExternal:rS,trimInternal:nS},oS=function(e,t){var n=e.length+t.length+2,r=new Array(n),i=new Array(n),o=function(e,t,n){return{start:e,end:t,diag:n}},a=function(n,r,i,o,s){var c=l(n,r,i,o);if(null===c||c.start===r&&c.diag===r-o||c.end===n&&c.diag===n-i)for(var u=n,d=i;u<r||d<o;)u<r&&d<o&&e[u]===t[d]?(s.push([0,e[u]]),++u,++d):r-n>o-i?(s.push([2,e[u]]),++u):(s.push([1,t[d]]),++d);else{a(n,c.start,i,c.start-c.diag,s);for(var f=c.start;f<c.end;++f)s.push([0,e[f]]);a(c.end,r,c.end-c.diag,o,s)}},s=function(n,r,i,a){for(var s=n;s-r<a&&s<i&&e[s]===t[s-r];)++s;return o(n,s,r)},l=function(n,o,a,l){var c=o-n,u=l-a;if(0===c||0===u)return null;var d=c-u,f=u+c,h=(f%2==0?f:f+1)/2;r[1+h]=n,i[1+h]=o+1;var p,g,m,v,b;for(p=0;p<=h;++p){for(g=-p;g<=p;g+=2){for(m=g+h,g===-p||g!==p&&r[m-1]<r[m+1]?r[m]=r[m+1]:r[m]=r[m-1]+1,v=r[m],b=v-n+a-g;v<o&&b<l&&e[v]===t[b];)r[m]=++v,++b;if(d%2!=0&&d-p<=g&&g<=d+p&&i[m-d]<=r[m])return s(i[m-d],g+n-a,o,l)}for(g=d-p;g<=d+p;g+=2){for(m=g+h-d,g===d-p||g!==d+p&&i[m+1]<=i[m-1]?i[m]=i[m+1]-1:i[m]=i[m-1],v=i[m]-1,b=v-n+a-g;v>=n&&b>=a&&e[v]===t[b];)i[m]=v--,b--;if(d%2==0&&-p<=g&&g<=p&&i[m]<=r[m+d])return s(i[m],g+n-a,o,l)}}},c=[];return a(0,e.length,0,t.length,c),c},aS={KEEP:0,DELETE:2,INSERT:1,diff:oS},sS=function(e){return bs.isElement(e)?e.outerHTML:bs.isText(e)?Bs.encodeRaw(e.data,!1):bs.isComment(e)?"\x3c!--"+e.data+"--\x3e":""},lS=function(e){var t,n,r;for(r=document.createElement("div"),t=document.createDocumentFragment(),e&&(r.innerHTML=e);n=r.firstChild;)t.appendChild(n);return t},cS=function(e,t,n){var r=lS(t);if(e.hasChildNodes()&&n<e.childNodes.length){var i=e.childNodes[n];i.parentNode.insertBefore(r,i)}else e.appendChild(r)},uS=function(e,t){if(e.hasChildNodes()&&t<e.childNodes.length){var n=e.childNodes[t];n.parentNode.removeChild(n)}},dS=function(e,t){var n=0;nr.each(e,function(e){e[0]===aS.KEEP?n++:e[0]===aS.INSERT?(cS(t,e[1],n),n++):e[0]===aS.DELETE&&uS(t,n)})},fS=function(e){return nr.filter(nr.map(e.childNodes,sS),function(e){return e.length>0})},hS=function(e,t){var n=nr.map(t.childNodes,sS);return dS(aS.diff(n,e),t),t},pS={read:fS,write:hS},gS=function(e,t){var n=t||document,r=n.createElement("div");return r.innerHTML=e,ma.children(Ai.fromDom(r))},mS=function(e,t){return He(e,function(e){return Ai.fromTag(e,t)})},vS=function(e,t){return He(e,function(e){return Ai.fromText(e,t)})},bS=function(e){return He(e,Ai.fromDom)},yS={fromHtml:gS,fromTags:mS,fromText:vS,fromDom:bS},wS=function(e){return e.dom().innerHTML},_S=function(e,t){var n=ma.owner(e),r=n.dom(),i=Ai.fromDom(r.createDocumentFragment()),o=yS.fromHtml(t,r);_l.append(i,o),Tl.empty(e),ml.append(e,i)},xS=function(e){var t=Ai.fromTag("div"),n=Ai.fromDom(e.dom().cloneNode(!0));return ml.append(t,n),wS(t)},CS={get:wS,set:_S,getOuter:xS},kS=El(Se.none()),TS=function(){return kS.get().getOrThunk(function(){var e=document.implementation.createHTMLDocument("undo");return kS.set(Se.some(e)),e})},SS=function(e){return-1!==e.indexOf("</iframe>")},DS=function(e){return{type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}},ES=function(e){return{type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}},NS=function(e){var t,n,r;return t=pS.read(e.getBody()),r=Qe(t,function(t){var n=iS.trimInternal(e.serializer,t);return n.length>0?[n]:[]}),n=r.join(""),SS(n)?DS(r):ES(n)},AS=function(e,t,n){"fragmented"===t.type?pS.write(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw"}),e.selection.moveToBookmark(n?t.beforeBookmark:t.bookmark)},RS=function(e){return"fragmented"===e.type?e.fragments.join(""):e.content},PS=function(e){var t=Ai.fromTag("body",TS());return CS.set(t,RS(e)),$e(rc.descendants(t,"*[data-mce-bogus]"),Tl.unwrap),CS.get(t)},OS=function(e,t){return RS(e)===RS(t)},IS=function(e,t){return PS(e)===PS(t)},MS=function(e,t){return!(!e||!t)&&(!!OS(e,t)||IS(e,t))},jS={createFragmentedLevel:DS,createCompleteLevel:ES,createFromEditor:NS,applyToEditor:AS,isEq:MS},BS=vg.isEq,LS=function(e,t,n){var r=e.formatter.get(n);if(r)for(var i=0;i<r.length;i++)if(!1===r[i].inherit&&e.dom.is(t,r[i].selector))return!0;return!1},FS=function(e,t,n,r){var i=e.dom.getRoot();return t!==i&&(t=e.dom.getParent(t,function(t){return!!LS(e,t,n)||(t.parentNode===i||!!US(e,t,n,r,!0))}),US(e,t,n,r))},HS=function(e,t,n){return!!BS(t,n.inline)||(!!BS(t,n.block)||(n.selector?1===t.nodeType&&e.is(t,n.selector):void 0))},$S=function(e,t,n,r,i,o){var a,s,l,c=n[r];if(n.onmatch)return n.onmatch(t,n,r);if(c)if(void 0===c.length){for(a in c)if(c.hasOwnProperty(a)){if(s="attributes"===r?e.getAttrib(t,a):vg.getStyle(e,t,a),i&&!s&&!n.exact)return;if((!i||n.exact)&&!BS(s,vg.normalizeStyleValue(e,vg.replaceVars(c[a],o),a)))return}}else for(l=0;l<c.length;l++)if("attributes"===r?e.getAttrib(t,c[l]):vg.getStyle(e,t,c[l]))return n;return n},US=function(e,t,n,r,i){var o,a,s,l,c=e.formatter.get(n),u=e.dom;if(c&&t)for(a=0;a<c.length;a++)if(o=c[a],HS(e.dom,t,o)&&$S(u,t,o,"attributes",i,r)&&$S(u,t,o,"styles",i,r)){if(l=o.classes)for(s=0;s<l.length;s++)if(!e.dom.hasClass(t,l[s]))return;return o}},zS=function(e,t,n,r){var i;return r?FS(e,r,t,n):(r=e.selection.getNode(),!!FS(e,r,t,n)||!((i=e.selection.getStart())===r||!FS(e,i,t,n)))},WS=function(e,t,n){var r,i=[],o={};return r=e.selection.getStart(),e.dom.getParent(r,function(r){var a,s;for(a=0;a<t.length;a++)s=t[a],!o[s]&&US(e,r,s,n)&&(o[s]=!0,i.push(s))},e.dom.getRoot()),i},qS=function(e,t){var n,r,i,o,a,s=e.formatter.get(t),l=e.dom;if(s)for(n=e.selection.getStart(),r=vg.getParents(l,n),o=s.length-1;o>=0;o--){if(!(a=s[o].selector)||s[o].defaultBlock)return!0;for(i=r.length-1;i>=0;i--)if(l.is(r[i],a))return!0}return!1},VS={matchNode:US,matchName:HS,match:zS,matchAll:WS,canApply:qS,matchesUnInheritedFormatSelector:LS},YS=function(e,t){return e.splitText(t)},GS=function(e){var t=e.startContainer,n=e.startOffset,r=e.endContainer,i=e.endOffset;return t===r&&bs.isText(t)?n>0&&n<t.nodeValue.length&&(r=YS(t,n),t=r.previousSibling,i>n?(i-=n,t=r=YS(r,i).previousSibling,i=r.nodeValue.length,n=0):i=0):(bs.isText(t)&&n>0&&n<t.nodeValue.length&&(t=YS(t,n),n=0),bs.isText(r)&&i>0&&i<r.nodeValue.length&&(r=YS(r,i).previousSibling,i=r.nodeValue.length)),{startContainer:t,startOffset:n,endContainer:r,endOffset:i}},KS={split:GS},XS=nu.ZWSP,JS=function(e,t){return e.importNode(t,!0)},QS=function(e){for(var t=[];e;){if(3===e.nodeType&&e.nodeValue!==XS||e.childNodes.length>1)return[];1===e.nodeType&&t.push(e),e=e.firstChild}return t},ZS=function(e){return QS(e).length>0},eD=function(e){var t;if(e)for(t=new m(e,e),e=t.current();e;e=t.next())if(3===e.nodeType)return e;return null},tD=function(e){var t=Ai.fromTag("span");return no.setAll(t,{id:"_mce_caret","data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&ml.append(t,Ai.fromText(XS)),t},nD=function(e){var t=eD(e);return t&&t.nodeValue.charAt(0)===XS&&t.deleteData(0,1),t},rD=function(e,t,n,r){var i,o,a;i=t.getRng(!0),o=e.getParent(n,e.isBlock),ZS(n)?(!1!==r&&(i.setStartBefore(n),i.setEndBefore(n)),e.remove(n)):(a=nD(n),i.startContainer===a&&i.startOffset>0&&i.setStart(a,i.startOffset-1),i.endContainer===a&&i.endOffset>0&&i.setEnd(a,i.endOffset-1),e.remove(n,!0)),o&&e.isEmpty(o)&&km.fillWithPaddingBr(Ai.fromDom(o)),t.setRng(i)},iD=function(e,t,n,r,i){if(r)rD(t,n,r,i);else if(!(r=Xd(e,n.getStart())))for(;r=t.get("_mce_caret");)rD(t,n,r,!1)},oD=function(e,t,n){var r=e.dom,i=r.getParent(n,Zc.curry(vg.isTextBlock,e));i&&r.isEmpty(i)?n.parentNode.replaceChild(t,n):(km.removeTrailingBr(Ai.fromDom(n)),r.isEmpty(n)?n.parentNode.replaceChild(t,n):r.insertAfter(t,n))},aD=function(e,t){return e.appendChild(t),t},sD=function(e,t){var n=qe(e,function(e,t){return aD(e,t.cloneNode(!1))},t);return aD(n,n.ownerDocument.createTextNode(XS))},lD=function(e,t,n){var r,i,o,a,s,l,c,u=e.selection;r=u.getRng(!0),a=r.startOffset,l=r.startContainer,c=l.nodeValue,(i=Xd(e.getBody(),u.getStart()))&&(o=eD(i));var d=/[^\s\u00a0\u00ad\u200b\ufeff]/;c&&a>0&&a<c.length&&d.test(c.charAt(a))&&d.test(c.charAt(a-1))?(s=u.getBookmark(),r.collapse(!0),r=Pg.expandRng(e,r,e.formatter.get(t)),r=KS.split(r),e.formatter.apply(t,n,r),u.moveToBookmark(s)):(i&&o.nodeValue===XS?e.formatter.apply(t,n,i):(i=JS(e.getDoc(),tD(!0).dom()),o=i.firstChild,r.insertNode(i),a=1,e.formatter.apply(t,n,i)),u.setCursorLocation(o,a))},cD=function(e,t,n,r){var i,o,a,s,l,c,u,d=e.dom,f=e.selection,h=[],p=f.getRng();for(i=p.startContainer,o=p.startOffset,l=i,3===i.nodeType&&(o!==i.nodeValue.length&&(s=!0),l=l.parentNode);l;){if(VS.matchNode(e,l,t,n,r)){c=l;break}l.nextSibling&&(s=!0),h.push(l),l=l.parentNode}if(c)if(s){a=f.getBookmark(),p.collapse(!0);var g=Pg.expandRng(e,p,e.formatter.get(t),!0);g=KS.split(g),e.formatter.remove(t,n,g),f.moveToBookmark(a)}else{u=Xd(e.getBody(),c);var m=tD(!1).dom(),v=sD(h,m);u?oD(e,m,u):oD(e,m,c),rD(d,f,u,!1),f.setCursorLocation(v,1),d.isEmpty(c)&&d.remove(c)}},uD=function(e,t,n,r){iD(e,t,n,null,!1),8===r&&n.isCollapsed()&&n.getStart().innerHTML===XS&&iD(e,t,n,Xd(e,n.getStart())),37!==r&&39!==r||iD(e,t,n,Xd(e,n.getStart()))},dD=function(e){var t=e.dom,n=e.selection,r=e.getBody();e.on("mouseup keydown",function(e){uD(r,t,n,e.keyCode)})},fD=function(e,t){var n=tD(!1),r=sD(t,n.dom());return ml.before(Ai.fromDom(e),n),Tl.remove(Ai.fromDom(e)),vd(r,0)},hD=function(e,t){return e.schema.getTextInlineElements().hasOwnProperty(Hi.name(t))&&!Kd(t.dom())&&!bs.isBogus(t.dom())},pD={},gD=nr.filter,mD=nr.each,vD=function(e,t){mD(pD[e],function(e){e(t)})};!function(e,t){var n=pD[e];n||(pD[e]=n=[]),pD[e].push(t)}("pre",function(e){var t,n,r=e.selection.getRng(),i=function(e){return t(e.previousSibling)&&-1!==nr.indexOf(n,e.previousSibling)},o=function(e,t){Mr(t).remove(),Mr(e).append("<br><br>").append(t.childNodes)};t=bs.matchNodeNames("pre"),r.collapsed||(n=e.selection.getSelectedBlocks(),mD(gD(gD(n,t),i),function(e){o(e.previousSibling,e)}))});var bD={postProcess:vD},yD=/^(src|href|style)$/,wD=gr.each,_D=vg.isEq,xD=function(e){return/^(TH|TD)$/.test(e.nodeName)},CD=function(e,t,n){var r,i,o;return r=t[n?"startContainer":"endContainer"],i=t[n?"startOffset":"endOffset"],bs.isElement(r)&&(o=r.childNodes.length-1,!n&&i&&i--,r=r.childNodes[i>o?o:i]),bs.isText(r)&&n&&i>=r.nodeValue.length&&(r=new m(r,e.getBody()).next()||r),bs.isText(r)&&!n&&0===i&&(r=new m(r,e.getBody()).prev()||r),r},kD=function(e,t,n,r){var i=e.create(n,r);return t.parentNode.insertBefore(i,t),i.appendChild(t),i},TD=function(e,t,n){return!!_D(t,n.inline)||(!!_D(t,n.block)||(n.selector?bs.isElement(t)&&e.is(t,n.selector):void 0))},SD=function(e,t){return t.links&&"A"===e.tagName},DD=function(e,t,n,r){return!(t=vg.getNonWhiteSpaceSibling(t,n,r))||"BR"===t.nodeName||e.isBlock(t)},ED=function(e,t,n){var r,i=t.parentNode,o=e.dom,a=e.settings.forced_root_block;n.block&&(a?i===o.getRoot()&&(n.list_block&&_D(t,n.list_block)||wD(gr.grep(t.childNodes),function(t){vg.isValid(e,a,t.nodeName.toLowerCase())?r?r.appendChild(t):(r=kD(o,t,a),o.setAttribs(r,e.settings.forced_root_block_attrs)):r=0})):o.isBlock(t)&&!o.isBlock(i)&&(DD(o,t,!1)||DD(o,t.firstChild,!0,1)||t.insertBefore(o.create("br"),t.firstChild),DD(o,t,!0)||DD(o,t.lastChild,!1,1)||t.appendChild(o.create("br")))),n.selector&&n.inline&&!_D(n.inline,t)||o.remove(t,1)},ND=function(e,t,n,r,i){var o,a,s,l=e.dom;if(!TD(l,r,t)&&!SD(r,t))return!1;if("all"!==t.remove)for(wD(t.styles,function(e,o){e=vg.normalizeStyleValue(l,vg.replaceVars(e,n),o),"number"==typeof o&&(o=e,i=0),(t.remove_similar||!i||_D(vg.getStyle(l,i,o),e))&&l.setStyle(r,o,""),s=1}),s&&""===l.getAttrib(r,"style")&&(r.removeAttribute("style"),r.removeAttribute("data-mce-style")),wD(t.attributes,function(e,t){var o;if(e=vg.replaceVars(e,n),"number"==typeof t&&(t=e,i=0),!i||_D(l.getAttrib(i,t),e)){if("class"===t&&(e=l.getAttrib(r,t))&&(o="",wD(e.split(/\s+/),function(e){/mce\-\w+/.test(e)&&(o+=(o?" ":"")+e)}),o))return void l.setAttrib(r,t,o);"class"===t&&r.removeAttribute("className"),yD.test(t)&&r.removeAttribute("data-mce-"+t),r.removeAttribute(t)}}),wD(t.classes,function(e){e=vg.replaceVars(e,n),i&&!l.hasClass(i,e)||l.removeClass(r,e)}),a=l.getAttribs(r),o=0;o<a.length;o++){var c=a[o].nodeName;if(0!==c.indexOf("_")&&0!==c.indexOf("data-"))return!1}return"none"!==t.remove?(ED(e,r,t),!0):void 0},AD=function(e,t,n,r,i){var o;return wD(vg.getParents(e.dom,t.parentNode).reverse(),function(t){var a;o||"_start"===t.id||"_end"===t.id||(a=VS.matchNode(e,t,n,r,i))&&!1!==a.split&&(o=t)}),o},RD=function(e,t,n,r,i,o,a,s){var l,c,u,d,f,h,p=e.dom;if(n){for(h=n.parentNode,l=r.parentNode;l&&l!==h;l=l.parentNode){for(c=p.clone(l,!1),f=0;f<t.length;f++)if(ND(e,t[f],s,c,c)){c=0;break}c&&(u&&c.appendChild(u),d||(d=c),u=c)}!o||a.mixed&&p.isBlock(n)||(r=p.split(n,r)),u&&(i.parentNode.insertBefore(u,i),d.appendChild(i))}return r},PD=function(e,t,n,r,i){var o,a,s=e.formatter.get(t),l=s[0],c=!0,u=e.dom,d=e.selection,f=function(r){var o=AD(e,r,t,n,i);return RD(e,s,o,r,r,!0,l,n)},h=function(t){var r,i,o,a,d;if(bs.isElement(t)&&u.getContentEditable(t)&&(a=c,c="true"===u.getContentEditable(t),d=!0),r=gr.grep(t.childNodes),c&&!d)for(i=0,o=s.length;i<o&&!ND(e,s[i],n,t,t);i++);if(l.deep&&r.length){for(i=0,o=r.length;i<o;i++)h(r[i]);d&&(c=a)}},p=function(e){var t=u.get(e?"_start":"_end"),n=t[e?"firstChild":"lastChild"];return ig.isBookmarkNode(n)&&(n=n[e?"firstChild":"lastChild"]),bs.isText(n)&&0===n.data.length&&(n=e?t.previousSibling||t.nextSibling:t.nextSibling||t.previousSibling),u.remove(t,!0),n},g=function(t){var n,r,i=t.commonAncestorContainer;if(t=Pg.expandRng(e,t,s,!0),l.split){if(n=CD(e,t,!0),r=CD(e,t),n!==r){if(/^(TR|TH|TD)$/.test(n.nodeName)&&n.firstChild&&(n="TR"===n.nodeName?n.firstChild.firstChild||n:n.firstChild||n),i&&/^T(HEAD|BODY|FOOT|R)$/.test(i.nodeName)&&xD(r)&&r.firstChild&&(r=r.firstChild||r),u.isChildOf(n,r)&&n!==r&&!u.isBlock(r)&&!xD(n)&&!xD(r))return n=kD(u,n,"span",{id:"_start","data-mce-type":"bookmark"}),f(n),void(n=p(!0));n=kD(u,n,"span",{id:"_start","data-mce-type":"bookmark"}),r=kD(u,r,"span",{id:"_end","data-mce-type":"bookmark"}),f(n),f(r),n=p(!0),r=p()}else n=r=f(n);t.startContainer=n.parentNode?n.parentNode:n,t.startOffset=u.nodeIndex(n),t.endContainer=r.parentNode?r.parentNode:r,t.endOffset=u.nodeIndex(r)+1}jg.walk(u,t,function(t){wD(t,function(t){h(t),bs.isElement(t)&&"underline"===e.dom.getStyle(t,"text-decoration")&&t.parentNode&&"underline"===vg.getTextDecoration(u,t.parentNode)&&ND(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,t)})})};if(r)return void(r.nodeType?(a=u.createRng(),a.setStartBefore(r),a.setEndAfter(r),g(a)):g(r));if("false"!==u.getContentEditable(d.getNode()))d.isCollapsed()&&l.inline&&!u.select("td[data-mce-selected],th[data-mce-selected]").length?cD(e,t,n,i):(o=Gd.getPersistentBookmark(e.selection,!0),g(d.getRng()),d.moveToBookmark(o),l.inline&&VS.match(e,t,n,d.getStart())&&vg.moveStart(u,d,d.getRng()),e.nodeChanged());else{r=d.getNode();for(var m=0,v=s.length;m<v&&(!s[m].ceFalseOverride||!ND(e,s[m],n,r,r));m++);}},OD={removeFormat:ND,remove:PD},ID=gr.each,MD=function(e){return e&&1===e.nodeType&&!ig.isBookmarkNode(e)&&!Kd(e)&&!bs.isBogus(e)},jD=function(e,t){var n;for(n=e;n;n=n[t]){if(3===n.nodeType&&0!==n.nodeValue.length)return e;if(1===n.nodeType&&!ig.isBookmarkNode(n))return n}return e},BD=function(e,t,n){var r,i,o=new vm(e);if(t&&n&&(t=jD(t,"previousSibling"),n=jD(n,"nextSibling"),o.compare(t,n))){for(r=t.nextSibling;r&&r!==n;)i=r,r=r.nextSibling,t.appendChild(i);return e.remove(n),gr.each(gr.grep(n.childNodes),function(e){t.appendChild(e)}),t}return n},LD=function(e,t,n){ID(e.childNodes,function(e){MD(e)&&(t(e)&&n(e),e.hasChildNodes()&&LD(e,t,n))})},FD=function(e,t){return me(function(t,n){return!(!n||!vg.getStyle(e,n,t))},t)},HD=function(e,t,n){return me(function(t,n,r){e.setStyle(r,t,n),""===r.getAttribute("style")&&r.removeAttribute("style"),$D(e,r)},t,n)},$D=function(e,t){"SPAN"===t.nodeName&&0===e.getAttribs(t).length&&e.remove(t,!0)},UD=function(e,t){var n;1===t.nodeType&&t.parentNode&&1===t.parentNode.nodeType&&(n=vg.getTextDecoration(e,t.parentNode),e.getStyle(t,"color")&&n?e.setStyle(t,"text-decoration",n):e.getStyle(t,"text-decoration")===n&&e.setStyle(t,"text-decoration",null))},zD=function(e,t,n,r){(t.styles.color||t.styles.textDecoration)&&(gr.walk(r,me(UD,e),"childNodes"),UD(e,r))},WD=function(e,t,n,r){t.styles&&t.styles.backgroundColor&&LD(r,FD(e,"fontSize"),HD(e,"backgroundColor",vg.replaceVars(t.styles.backgroundColor,n)))},qD=function(e,t,n,r){"sub"!==t.inline&&"sup"!==t.inline||(LD(r,FD(e,"fontSize"),HD(e,"fontSize","")),e.remove(e.select("sup"===t.inline?"sub":"sup",r),!0))},VD=function(e,t,n,r){r&&!1!==t.merge_siblings&&(r=BD(e,vg.getNonWhiteSpaceSibling(r),r),r=BD(e,r,vg.getNonWhiteSpaceSibling(r,!0)))},YD=function(e,t,n){if(t.clear_child_styles){var r=t.links?"*:not(a)":"*";ID(e.select(r,n),function(n){MD(n)&&ID(t.styles,function(t,r){e.setStyle(n,r,"")})})}},GD=function(e,t,n,r){ID(t,function(t){ID(e.dom.select(t.inline,r),function(r){MD(r)&&OD.removeFormat(e,t,n,r,t.exact?r:null)}),YD(e.dom,t,r)})},KD=function(e,t,n,r,i){VS.matchNode(e,i.parentNode,n,r)&&OD.removeFormat(e,t,r,i)||t.merge_with_parents&&e.dom.getParent(i.parentNode,function(o){if(VS.matchNode(e,o,n,r))return OD.removeFormat(e,t,r,i),!0})},XD={mergeWithChildren:GD,mergeUnderlineAndColor:zD,mergeBackgroundColorAndFontSize:WD,mergeSubSup:qD,mergeSiblings:VD,mergeWithParents:KD},JD=gr.each,QD=function(e){return e&&1===e.nodeType&&!ig.isBookmarkNode(e)&&!Kd(e)&&!bs.isBogus(e)},ZD=function(e,t,n,r){var i,o,a=e.formatter.get(t),s=a[0],l=!r&&e.selection.isCollapsed(),c=e.dom,u=e.selection,d=function(e,t){if(t=t||s,e){if(t.onformat&&t.onformat(e,t,n,r),JD(t.styles,function(t,r){c.setStyle(e,r,vg.replaceVars(t,n))}),t.styles){var i=c.getAttrib(e,"style");i&&e.setAttribute("data-mce-style",i)}JD(t.attributes,function(t,r){c.setAttrib(e,r,vg.replaceVars(t,n))}),JD(t.classes,function(t){t=vg.replaceVars(t,n),c.hasClass(e,t)||c.addClass(e,t)})}},f=function(e,t){var n=!1;return!!s.selector&&(JD(e,function(e){if(!("collapsed"in e&&e.collapsed!==l))return c.is(t,e.selector)&&!Kd(t)?(d(t,e),n=!0,!1):void 0}),n)},h=function(r,i,o,l){var c,u,h=[],p=!0;c=s.inline||s.block,u=r.create(c),d(u),jg.walk(r,i,function(i){var o,g=function(i){var m,v,b,y;if(y=p,m=i.nodeName.toLowerCase(),v=i.parentNode.nodeName.toLowerCase(),1===i.nodeType&&r.getContentEditable(i)&&(y=p,p="true"===r.getContentEditable(i),b=!0),vg.isEq(m,"br"))return o=0,void(s.block&&r.remove(i));if(s.wrapper&&VS.matchNode(e,i,t,n))return void(o=0);if(p&&!b&&s.block&&!s.wrapper&&vg.isTextBlock(e,m)&&vg.isValid(e,v,c))return i=r.rename(i,c),d(i),h.push(i),void(o=0);if(s.selector){var w=f(a,i);if(!s.inline||w)return void(o=0)}!p||b||!vg.isValid(e,c,m)||!vg.isValid(e,v,c)||!l&&3===i.nodeType&&1===i.nodeValue.length&&65279===i.nodeValue.charCodeAt(0)||Kd(i)||s.inline&&r.isBlock(i)?(o=0,JD(gr.grep(i.childNodes),g),b&&(p=y),o=0):(o||(o=r.clone(u,!1),i.parentNode.insertBefore(o,i),h.push(o)),o.appendChild(i))};JD(i,g)}),!0===s.links&&JD(h,function(e){var t=function(e){"A"===e.nodeName&&d(e,s),JD(gr.grep(e.childNodes),t)};t(e)}),JD(h,function(i){var o,l=function(e){var t=!1;return JD(e.childNodes,function(e){if(QD(e))return t=e,!1}),t};if(o=function(e){var t=0;return JD(e.childNodes,function(e){vg.isWhiteSpaceNode(e)||ig.isBookmarkNode(e)||t++}),t}(i),(h.length>1||!r.isBlock(i))&&0===o)return void r.remove(i,1);(s.inline||s.wrapper)&&(s.exact||1!==o||(i=function(e){var t,n;return t=l(e),t&&!ig.isBookmarkNode(t)&&VS.matchName(r,t,s)&&(n=r.clone(t,!1),d(n),r.replace(n,e,!0),r.remove(t,1)),n||e}(i)),XD.mergeWithChildren(e,a,n,i),XD.mergeWithParents(e,s,t,n,i),XD.mergeBackgroundColorAndFontSize(r,s,n,i),XD.mergeSubSup(r,s,n,i),XD.mergeSiblings(r,s,n,i))})};if("false"!==c.getContentEditable(u.getNode())){if(s){if(r)r.nodeType?f(a,r)||(o=c.createRng(),o.setStartBefore(r),o.setEndAfter(r),h(c,Pg.expandRng(e,o,a),0,!0)):h(c,r,0,!0);else if(l&&s.inline&&!c.select("td[data-mce-selected],th[data-mce-selected]").length)lD(e,t,n);else{var p=e.selection.getNode();e.settings.forced_root_block||!a[0].defaultBlock||c.getParent(p,c.isBlock)||ZD(e,a[0].defaultBlock),e.selection.setRng(Nm.normalize(e.selection.getRng())),i=Gd.getPersistentBookmark(e.selection,!0),h(c,Pg.expandRng(e,u.getRng(),a)),s.styles&&XD.mergeUnderlineAndColor(c,s,n,p),u.moveToBookmark(i),vg.moveStart(c,u,u.getRng()),e.nodeChanged()}bD.postProcess(t,e)}}else{r=u.getNode();for(var g=0,m=a.length;g<m;g++)if(a[g].ceFalseOverride&&c.is(r,a[g].selector))return void d(r,a[g])}},eE={applyFormat:ZD},tE=gr.each,nE=function(e,t){var n={};e.set({}),t.on("NodeChange",function(r){var i=vg.getParents(t.dom,r.element),o={};i=gr.grep(i,function(e){return 1===e.nodeType&&!e.getAttribute("data-mce-bogus")}),tE(e.get(),function(e,r){tE(i,function(a){return t.formatter.matchNode(a,r,{},e.similar)?(n[r]||(tE(e,function(e){e(!0,{node:a,format:r,parents:i})}),n[r]=e),o[r]=e,!1):!VS.matchesUnInheritedFormatSelector(t,a,r)&&void 0})}),tE(n,function(e,t){o[t]||(delete n[t],tE(e,function(e){e(!1,{node:r.element,format:t,parents:i})}))})})},rE=function(e,t,n,r){var i=e.get();tE(t.split(","),function(e){i[e]||(i[e]=[],i[e].similar=r),i[e].push(n)}),e.set(i)},iE=function(e,t,n,r,i){null===t.get()&&nE(t,e),rE(t,n,r,i)},oE={formatChanged:iE},aE=function(e){var t={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(t,n,r){gr.each(r,function(n,r){e.setAttrib(t,r,n)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return gr.each("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),function(e){t[e]={block:e,remove:"all"}}),t},sE={get:aE},lE=gr.each,cE=rl.DOM,uE=function(e,t){var n,r,i,o=t&&t.schema||v({}),a=function(e,t){t.classes.length&&cE.addClass(e,t.classes.join(" ")),cE.setAttribs(e,t.attrs)},s=function(e){var t;return r="string"==typeof e?{name:e,classes:[],attrs:{}}:e,t=cE.create(r.name),a(t,r),t},l=function(e,t){var n="string"!=typeof e?e.nodeName.toLowerCase():e,r=o.getElementRule(n),i=r&&r.parentsRequired;return!(!i||!i.length)&&(t&&-1!==gr.inArray(i,t)?t:i[0])},c=function(e,t,n){var r,i,o,a=t.length>0&&t[0],u=a&&a.name;if(o=l(e,u))u===o?(i=t[0],t=t.slice(1)):i=o;else if(a)i=t[0],t=t.slice(1);else if(!n)return e;return i&&(r=s(i),r.appendChild(e)),n&&(r||(r=cE.create("div"),r.appendChild(e)),gr.each(n,function(t){var n=s(t);r.insertBefore(n,e)})),c(r,t,i&&i.siblings)};return e&&e.length?(r=e[0],n=s(r),i=cE.create("div"),i.appendChild(c(n,e.slice(1),r.siblings)),i):""},dE=function(e,t){return uE(hE(e),t)},fE=function(e){var t,n={classes:[],attrs:{}};return e=n.selector=gr.trim(e),"*"!==e&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,function(e,t,r,i,o){switch(t){case"#":n.attrs.id=r;break;case".":n.classes.push(r);break;case":":-1!==gr.inArray("checked disabled enabled read-only required".split(" "),r)&&(n.attrs[r]=r)}if("["===i){var a=o.match(/([\w\-]+)(?:\=\"([^\"]+))?/);a&&(n.attrs[a[1]]=a[2])}return""})),n.name=t||"div",n},hE=function(e){return e&&"string"==typeof e?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),gr.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),function(e){var t=gr.map(e.split(/(?:~\+|~|\+)/),fE),n=t.pop();return t.length&&(n.siblings=t),n}).reverse()):[]},pE=function(e,t){var n,r,i,o,a,s,l="";if(!1===(s=e.settings.preview_styles))return""
;"string"!=typeof s&&(s="font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow");var c=function(e){return e.replace(/%(\w+)/g,"")};if("string"==typeof t){if(!(t=e.formatter.get(t)))return;t=t[0]}return"preview"in t&&!1===(s=t.preview)?"":(n=t.block||t.inline||"span",o=hE(t.selector),o.length?(o[0].name||(o[0].name=n),n=t.selector,r=uE(o,e)):r=uE([n],e),i=cE.select(n,r)[0]||r.firstChild,lE(t.styles,function(e,t){(e=c(e))&&cE.setStyle(i,t,e)}),lE(t.attributes,function(e,t){(e=c(e))&&cE.setAttrib(i,t,e)}),lE(t.classes,function(e){e=c(e),cE.hasClass(i,e)||cE.addClass(i,e)}),e.fire("PreviewFormats"),cE.setStyles(r,{position:"absolute",left:-65535}),e.getBody().appendChild(r),a=cE.getStyle(e.getBody(),"fontSize",!0),a=/px$/.test(a)?parseInt(a,10):0,lE(s.split(" "),function(t){var n=cE.getStyle(i,t,!0);if(!("background-color"===t&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(n)&&(n=cE.getStyle(e.getBody(),t,!0),"#ffffff"===cE.toHex(n).toLowerCase())||"color"===t&&"#000000"===cE.toHex(n).toLowerCase())){if("font-size"===t&&/em|%$/.test(n)){if(0===a)return;n=parseFloat(n)/(/%$/.test(n)?100:1)*a+"px"}"border"===t&&n&&(l+="padding:0 2px;"),l+=t+":"+n+";"}}),e.fire("AfterPreviewFormats"),cE.remove(r),l)},gE={getCssText:pE,parseSelector:hE,selectorToHtml:dE},mE=function(e,t,n,r,i){var o=t.get(n);!VS.match(e,n,r,i)||"toggle"in o[0]&&!o[0].toggle?eE.applyFormat(e,n,r,i):OD.remove(e,n,r,i)},vE={toggle:mE},bE=function(e){e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(var t=1;t<=6;t++)e.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},yE={setup:bE},wE=Object.prototype.hasOwnProperty,_E=function(e,t){return t},xE=function(e){return function(){for(var t=new Array(arguments.length),n=0;n<t.length;n++)t[n]=arguments[n];if(0===t.length)throw new Error("Can't merge zero objects");for(var r={},i=0;i<t.length;i++){var o=t[i];for(var a in o)wE.call(o,a)&&(r[a]=e(r[a],o[a]))}return r}}(_E),CE=function(e,t,n){e.addAttributeFilter("data-mce-tabindex",function(e,t){for(var n,r=e.length;r--;)n=e[r],n.attr("tabindex",n.attributes.map["data-mce-tabindex"]),n.attr(t,null)}),e.addAttributeFilter("src,href,style",function(e,r){for(var i,o,a=e.length,s="data-mce-"+r,l=t.url_converter,c=t.url_converter_scope;a--;)i=e[a],o=i.attributes.map[s],void 0!==o?(i.attr(r,o.length>0?o:null),i.attr(s,null)):(o=i.attributes.map[r],"style"===r?o=n.serializeStyle(n.parseStyle(o),i.name):l&&(o=l.call(c,o,r,i.name)),i.attr(r,o.length>0?o:null))}),e.addAttributeFilter("class",function(e){for(var t,n,r=e.length;r--;)t=e[r],(n=t.attr("class"))&&(n=t.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),t.attr("class",n.length>0?n:null))}),e.addAttributeFilter("data-mce-type",function(e,t,n){for(var r,i=e.length;i--;)r=e[i],"bookmark"!==r.attributes.map["data-mce-type"]||n.cleanup||r.remove()}),e.addNodeFilter("noscript",function(e){for(var t,n=e.length;n--;)(t=e[n].firstChild)&&(t.value=Bs.decode(t.value))}),e.addNodeFilter("script,style",function(e,n){for(var r,i,o,a=e.length,s=function(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")};a--;)r=e[a],i=r.firstChild?r.firstChild.value:"","script"===n?(o=r.attr("type"),o&&r.attr("type","mce-no/type"===o?null:o.replace(/^mce\-/,"")),"xhtml"===t.element_format&&i.length>0&&(r.firstChild.value="// <![CDATA[\n"+s(i)+"\n// ]]>")):"xhtml"===t.element_format&&i.length>0&&(r.firstChild.value="\x3c!--\n"+s(i)+"\n--\x3e")}),e.addNodeFilter("#comment",function(e){for(var t,n=e.length;n--;)t=e[n],0===t.value.indexOf("[CDATA[")?(t.name="#cdata",t.type=4,t.value=t.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===t.value.indexOf("mce:protected ")&&(t.name="#text",t.type=3,t.raw=!0,t.value=unescape(t.value).substr(14))}),e.addNodeFilter("xml:namespace,input",function(e,t){for(var n,r=e.length;r--;)n=e[r],7===n.type?n.remove():1===n.type&&("input"!==t||"type"in n.attributes.map||n.attr("type","text"))}),e.addAttributeFilter("data-mce-type",function(t){$e(t,function(t){"format-caret"===t.attr("data-mce-type")&&(t.isEmpty(e.schema.getNonEmptyElements())?t.remove():t.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)})},kE=function(e){var t,n,r=function(e){return e&&"br"===e.name};t=e.lastChild,r(t)&&(n=t.prev,r(n)&&(t.remove(),n.remove()))},TE={register:CE,trimTrailingBr:kE},SE=function(e,t,n){var r,i,o,a=e.dom;return t=t.cloneNode(!0),r=document.implementation,r.createHTMLDocument&&(i=r.createHTMLDocument(""),gr.each("BODY"===t.nodeName?t.childNodes:[t],function(e){i.body.appendChild(i.importNode(e,!0))}),t="BODY"!==t.nodeName?i.body.firstChild:i.body,o=a.doc,a.doc=i),Gx.firePreProcess(e,xE(n,{node:t})),o&&(a.doc=o),t},DE=function(e,t){return e&&e.hasEventListeners("PreProcess")&&!t.no_events},EE=function(e,t,n){return DE(e,n)?SE(e,t,n):t},NE={process:EE},AE=function(e,t){$e(t,function(t){e.attr(t,null)})},RE=function(e,t,n){e.addNodeFilter("font",function(e){$e(e,function(e){var r=t.parse(e.attr("style")),i=e.attr("color"),o=e.attr("face"),a=e.attr("size");i&&(r.color=i),o&&(r["font-family"]=o),a&&(r["font-size"]=n[parseInt(e.attr("size"),10)-1]),e.name="span",e.attr("style",t.serialize(r)),AE(e,["color","face","size"])})})},PE=function(e,t){e.addNodeFilter("strike",function(e){$e(e,function(e){var n=t.parse(e.attr("style"));n["text-decoration"]="line-through",e.name="span",e.attr("style",t.serialize(n))})})},OE=function(e,t){var n=b();t.convert_fonts_to_spans&&RE(e,n,gr.explode(t.font_size_legacy_values)),PE(e,n)},IE=function(e,t){t.inline_styles&&OE(e,t)},ME={register:IE},jE=/^[ \t\r\n]*$/,BE={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},LE=function(e,t,n){var r,i,o=n?"lastChild":"firstChild",a=n?"prev":"next";if(e[o])return e[o];if(e!==t){if(r=e[a])return r;for(i=e.parent;i&&i!==t;i=i.parent)if(r=i[a])return r}},FE=function(){function e(e,t){this.name=e,this.type=t,1===t&&(this.attributes=[],this.attributes.map={})}return e.create=function(t,n){var r,i;if(r=new e(t,BE[t]||1),n)for(i in n)r.attr(i,n[i]);return r},e.prototype.replace=function(e){var t=this;return e.parent&&e.remove(),t.insert(e,t),t.remove(),t},e.prototype.attr=function(e,t){var n,r,i=this;if("string"!=typeof e){for(r in e)i.attr(r,e[r]);return i}if(n=i.attributes){if(void 0!==t){if(null===t){if(e in n.map)for(delete n.map[e],r=n.length;r--;)if(n[r].name===e)return n=n.splice(r,1),i;return i}if(e in n.map){for(r=n.length;r--;)if(n[r].name===e){n[r].value=t;break}}else n.push({name:e,value:t});return n.map[e]=t,i}return n.map[e]}},e.prototype.clone=function(){var t,n,r,i,o,a=this,s=new e(a.name,a.type);if(r=a.attributes){for(o=[],o.map={},t=0,n=r.length;t<n;t++)i=r[t],"id"!==i.name&&(o[o.length]={name:i.name,value:i.value},o.map[i.name]=i.value);s.attributes=o}return s.value=a.value,s.shortEnded=a.shortEnded,s},e.prototype.wrap=function(e){var t=this;return t.parent.insert(e,t),e.append(t),t},e.prototype.unwrap=function(){var e,t,n=this;for(e=n.firstChild;e;)t=e.next,n.insert(e,n,!0),e=t;n.remove()},e.prototype.remove=function(){var e=this,t=e.parent,n=e.next,r=e.prev;return t&&(t.firstChild===e?(t.firstChild=n,n&&(n.prev=null)):r.next=n,t.lastChild===e?(t.lastChild=r,r&&(r.next=null)):n.prev=r,e.parent=e.next=e.prev=null),e},e.prototype.append=function(e){var t,n=this;return e.parent&&e.remove(),t=n.lastChild,t?(t.next=e,e.prev=t,n.lastChild=e):n.lastChild=n.firstChild=e,e.parent=n,e},e.prototype.insert=function(e,t,n){var r;return e.parent&&e.remove(),r=t.parent||this,n?(t===r.firstChild?r.firstChild=e:t.prev.next=e,e.prev=t.prev,e.next=t,t.prev=e):(t===r.lastChild?r.lastChild=e:t.next.prev=e,e.next=t.next,e.prev=t,t.next=e),e.parent=r,e},e.prototype.getAll=function(e){var t,n=this,r=[];for(t=n.firstChild;t;t=LE(t,n))t.name===e&&r.push(t);return r},e.prototype.empty=function(){var e,t,n,r=this;if(r.firstChild){for(e=[],n=r.firstChild;n;n=LE(n,r))e.push(n);for(t=e.length;t--;)n=e[t],n.parent=n.firstChild=n.lastChild=n.next=n.prev=null}return r.firstChild=r.lastChild=null,r},e.prototype.isEmpty=function(e,t,n){var r,i,o=this,a=o.firstChild;if(t=t||{},a)do{if(1===a.type){if(a.attributes.map["data-mce-bogus"])continue;if(e[a.name])return!1;for(r=a.attributes.length;r--;)if("name"===(i=a.attributes[r].name)||0===i.indexOf("data-mce-bookmark"))return!1}if(8===a.type)return!1;if(3===a.type&&!jE.test(a.value))return!1;if(3===a.type&&a.parent&&t[a.parent.name]&&jE.test(a.value))return!1;if(n&&n(a))return!1}while(a=LE(a,o));return!0},e.prototype.walk=function(e){return LE(this,null,e)},e}(),HE=function(e,t,n,r){(e.padd_empty_with_br||t.insert)&&n[r.name]?r.empty().append(new FE("br",1)).shortEnded=!0:r.empty().append(new FE("#text",3)).value=""},$E=function(e){return UE(e,"#text")&&""===e.firstChild.value},UE=function(e,t){return e&&e.firstChild&&e.firstChild===e.lastChild&&e.firstChild.name===t},zE=function(e,t){var n=e.getElementRule(t.name);return n&&n.paddEmpty},WE=function(e,t,n,r){return r.isEmpty(t,n,function(t){return zE(e,t)})},qE=function(e,t){return e&&(t[e.name]||"br"===e.name)},VE=function(e,t){var n=e.schema;t.remove_trailing_brs&&e.addNodeFilter("br",function(e,r,i){var o,a,s,l,c,u,d,f,h=e.length,p=gr.extend({},n.getBlockElements()),g=n.getNonEmptyElements(),m=n.getNonEmptyElements();for(p.body=1,o=0;o<h;o++)if(a=e[o],s=a.parent,p[a.parent.name]&&a===s.lastChild){for(c=a.prev;c;){if("span"!==(u=c.name)||"bookmark"!==c.attr("data-mce-type")){if("br"!==u)break;if("br"===u){a=null;break}}c=c.prev}a&&(a.remove(),WE(n,g,m,s)&&(d=n.getElementRule(s.name))&&(d.removeEmpty?s.remove():d.paddEmpty&&HE(t,i,p,s)))}else{for(l=a;s&&s.firstChild===l&&s.lastChild===l&&(l=s,!p[s.name]);)s=s.parent;l===s&&!0!==t.padd_empty_with_br&&(f=new FE("#text",3),f.value="",a.replace(f))}}),e.addAttributeFilter("href",function(e){var n,r=e.length,i=function(e){return e.split(" ").filter(function(e){return e.length>0}).concat(["noopener"]).sort().join(" ")};if(!t.allow_unsafe_link_target)for(;r--;)n=e[r],"a"===n.name&&"_blank"===n.attr("target")&&n.attr("rel",function(e){var t=e?gr.trim(e):"";return/\b(noopener)\b/g.test(t)?t:i(t)}(n.attr("rel")))}),t.allow_html_in_named_anchor||e.addAttributeFilter("id,name",function(e){for(var t,n,r,i,o=e.length;o--;)if(i=e[o],"a"===i.name&&i.firstChild&&!i.attr("href")){r=i.parent,t=i.lastChild;do{n=t.prev,r.insert(t,i),t=n}while(t)}}),t.fix_list_elements&&e.addNodeFilter("ul,ol",function(e){for(var t,n,r=e.length;r--;)if(t=e[r],n=t.parent,"ul"===n.name||"ol"===n.name)if(t.prev&&"li"===t.prev.name)t.prev.append(t);else{var i=new FE("li",1);i.attr("style","list-style-type: none"),t.wrap(i)}}),t.validate&&n.getValidClasses()&&e.addAttributeFilter("class",function(e){for(var t,r,i,o,a,s,l,c=e.length,u=n.getValidClasses();c--;){for(t=e[c],r=t.attr("class").split(" "),a="",i=0;i<r.length;i++)o=r[i],l=!1,s=u["*"],s&&s[o]&&(l=!0),s=u[t.name],!l&&s&&s[o]&&(l=!0),l&&(a&&(a+=" "),a+=o);a.length||(a=null),t.attr("class",a)}})},YE=gr.makeMap,GE=gr.each,KE=gr.explode,XE=gr.extend,JE=function(e,t,n){-1===gr.inArray(t,n)&&(e.addAttributeFilter(n,function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}),t.push(n))},QE=function(e,t,n){if(!t.no_events&&e){return Gx.firePostProcess(e,xE(t,{content:n})).content}return n},ZE=function(e,t,n){var r=nu.trim(n.getInner?t.innerHTML:e.getOuterHTML(t));return n.selection||es(Ai.fromDom(t))?r:gr.trim(r)},eN=function(e,t,n){var r=n.selection?xE({forced_root_block:!1},n):n,i=e.parse(t,r);return TE.trimTrailingBr(i),i},tN=function(e,t,n){return S(e,t).serialize(n)},nN=function(e,t,n,r,i){var o=tN(t,n,r);return QE(e,i,o)};!function(e){e.isBookmarkNode=ig.isBookmarkNode}(X||(X={}));var rN=X,iN=bs.isContentEditableFalse,oN=bs.isContentEditableTrue,aN=function(e,t){for(;t&&t!==e;){if(oN(t)||iN(t))return t;t=t.parentNode}return null},sN=function(e,t){var n,r,i,o,a,s,l,c,u,d,f,h,p,g,m,v,b,y=t.dom,w=gr.each,_=t.getDoc(),x=document,C=Math.abs,k=Math.round,T=t.getBody();o={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};var S=".mce-content-body";t.contentStyles.push(S+" div.mce-resizehandle {position: absolute;border: 1px solid black;box-sizing: content-box;background: #FFF;width: 7px;height: 7px;z-index: 10000}"+S+" .mce-resizehandle:hover {background: #000}"+S+" img[data-mce-selected],"+S+" hr[data-mce-selected] {outline: 1px solid black;resize: none}"+S+" .mce-clonedresizable {position: absolute;"+(Ct.gecko?"":"outline: 1px dashed black;")+"opacity: .5;filter: alpha(opacity=50);z-index: 10000}"+S+" .mce-resize-helper {background: #555;background: rgba(0,0,0,0.75);border-radius: 3px;border: 1px;color: white;display: none;font-family: sans-serif;font-size: 12px;white-space: nowrap;line-height: 14px;margin: 5px 10px;padding: 5px;position: absolute;z-index: 10001}");var D=function(e){return e&&("IMG"===e.nodeName||t.dom.is(e,"figure.image"))},E=function(e,t){return D(e.target)&&!HT.isXYWithinRange(e.clientX,e.clientY,t)},N=function(e){var n=e.target;E(e,t.selection.getRng())&&!e.isDefaultPrevented()&&(e.preventDefault(),t.selection.select(n))},A=function(e){return t.dom.is(e,"figure.image")?e.querySelector("img"):e},R=function(e){var n=t.settings.object_resizing;return!1!==n&&!Ct.iOS&&("string"!=typeof n&&(n="table,img,figure.image,div"),"false"!==e.getAttribute("data-mce-resize")&&(e!==t.getBody()&&$o.is(Ai.fromDom(e),n)))},P=function(e){var o,w,_,x,S;o=e.screenX-s,w=e.screenY-l,g=o*a[2]+d,m=w*a[3]+f,g=g<5?5:g,m=m<5?5:m,_=D(n)&&!1!==t.settings.resize_img_proportional?!zT.modifierPressed(e):zT.modifierPressed(e)||D(n)&&a[2]*a[3]!=0,_&&(C(o)>C(w)?(m=k(g*h),g=k(m/h)):(g=k(m/h),m=k(g*h))),y.setStyles(A(r),{width:g,height:m}),x=a.startPos.x+o,S=a.startPos.y+w,x=x>0?x:0,S=S>0?S:0,y.setStyles(i,{left:x,top:S,display:"block"}),i.innerHTML=g+" &times; "+m,a[2]<0&&r.clientWidth<=g&&y.setStyle(r,"left",c+(d-g)),a[3]<0&&r.clientHeight<=m&&y.setStyle(r,"top",u+(f-m)),o=T.scrollWidth-v,w=T.scrollHeight-b,o+w!==0&&y.setStyles(i,{left:x-o,top:S-w}),p||(Gx.fireObjectResizeStart(t,n,d,f),p=!0)},O=function(){p=!1;var e=function(e,r){r&&(n.style[e]||!t.schema.isValid(n.nodeName.toLowerCase(),e)?y.setStyle(A(n),e,r):y.setAttrib(A(n),e,r))};e("width",g),e("height",m),y.unbind(_,"mousemove",P),y.unbind(_,"mouseup",O),x!==_&&(y.unbind(x,"mousemove",P),y.unbind(x,"mouseup",O)),y.remove(r),y.remove(i),I(n),Gx.fireObjectResized(t,n,g,m),y.setAttrib(n,"style",y.getAttrib(n,"style")),t.nodeChanged()},I=function(e){var p,C,k,S,D;M(),L(),p=y.getPos(e,T),c=p.x,u=p.y,D=e.getBoundingClientRect(),C=D.width||D.right-D.left,k=D.height||D.bottom-D.top,n!==e&&(n=e,g=m=0),S=t.fire("ObjectSelected",{target:e}),R(e)&&!S.isDefaultPrevented()?w(o,function(e,t){var o,p=function(t){s=t.screenX,l=t.screenY,d=A(n).clientWidth,f=A(n).clientHeight,h=f/d,a=e,e.startPos={x:C*e[0]+c,y:k*e[1]+u},v=T.scrollWidth,b=T.scrollHeight,r=n.cloneNode(!0),y.addClass(r,"mce-clonedresizable"),y.setAttrib(r,"data-mce-bogus","all"),r.contentEditable=!1,r.unSelectabe=!0,y.setStyles(r,{left:c,top:u,margin:0}),r.removeAttribute("data-mce-selected"),T.appendChild(r),y.bind(_,"mousemove",P),y.bind(_,"mouseup",O),x!==_&&(y.bind(x,"mousemove",P),y.bind(x,"mouseup",O)),i=y.add(T,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},d+" &times; "+f)};o=y.get("mceResizeHandle"+t),o&&y.remove(o),o=y.add(T,"div",{id:"mceResizeHandle"+t,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+t+"-resize; margin:0; padding:0"}),11===Ct.ie&&(o.contentEditable=!1),y.bind(o,"mousedown",function(e){e.stopImmediatePropagation(),e.preventDefault(),p(e)}),e.elm=o,y.setStyles(o,{left:C*e[0]+c-o.offsetWidth/2,top:k*e[1]+u-o.offsetHeight/2})}):M(),n.setAttribute("data-mce-selected","1")},M=function(){var e,t;L(),n&&n.removeAttribute("data-mce-selected");for(e in o)(t=y.get("mceResizeHandle"+e))&&(y.unbind(t),y.remove(t))},j=function(n){var r,i,o=function(e,t){if(e)do{if(e===t)return!0}while(e=e.parentNode)};if(!p&&!t.removed){if(w(y.select("img[data-mce-selected],hr[data-mce-selected]"),function(e){e.removeAttribute("data-mce-selected")}),i="mousedown"===n.type?n.target:e.getNode(),i=y.$(i).closest("table,img,figure.image,hr")[0],o(i,T)&&(F(),r=e.getStart(!0),o(r,i)&&o(e.getEnd(!0),i)))return void I(i);M()}},B=function(e){return iN(aN(t.getBody(),e))},L=function(){for(var e in o){var t=o[e];t.elm&&(y.unbind(t.elm),delete t.elm)}},F=function(){try{t.getDoc().execCommand("enableObjectResizing",!1,!1)}catch(e){}};return t.on("init",function(){F(),Ct.ie&&Ct.ie>=11&&(t.on("mousedown click",function(e){var n=e.target,r=n.nodeName;p||!/^(TABLE|IMG|HR)$/.test(r)||B(n)||(2!==e.button&&t.selection.select(n,"TABLE"===r),"mousedown"===e.type&&t.nodeChanged())}),t.dom.bind(T,"mscontrolselect",function(e){var n=function(e){Rt.setEditorTimeout(t,function(){t.selection.select(e)})};if(B(e.target))return e.preventDefault(),void n(e.target);/^(TABLE|IMG|HR)$/.test(e.target.nodeName)&&(e.preventDefault(),"IMG"===e.target.tagName&&n(e.target))}));var e=Rt.throttle(function(e){t.composing||j(e)});t.on("nodechange ResizeEditor ResizeWindow drop FullscreenStateChanged",e),t.on("keyup compositionend",function(t){n&&"TABLE"===n.nodeName&&e(t)}),t.on("hide blur",M),t.on("contextmenu",N)}),t.on("remove",L),{isResizable:R,showResizeRect:I,hideResizeRect:M,updateResizeRect:j,destroy:function(){n=r=null}}},lN=function(e){return bs.isContentEditableTrue(e)||bs.isContentEditableFalse(e)},cN=function(e,t,n){for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null},uN=function(e,t,n){var r,i,o;if(r=n.elementFromPoint(e,t),i=n.body.createTextRange(),r&&"HTML"!==r.tagName||(r=n.body),i.moveToElementText(r),o=gr.toArray(i.getClientRects()),o=o.sort(function(e,n){return e=Math.abs(Math.max(e.top-t,e.bottom-t)),n=Math.abs(Math.max(n.top-t,n.bottom-t)),e-n}),o.length>0){t=(o[0].bottom+o[0].top)/2;try{return i.moveToPoint(e,t),i.collapse(!0),i}catch(e){}}return null},dN=function(e,t){var n=e&&e.parentElement?e.parentElement():null;return bs.isContentEditableFalse(cN(n,t,lN))?null:e},fN=function(e,t,n){var r,i,o=n;if(o.caretPositionFromPoint)(i=o.caretPositionFromPoint(e,t))&&(r=n.createRange(),r.setStart(i.offsetNode,i.offset),r.collapse(!0));else if(n.caretRangeFromPoint)r=n.caretRangeFromPoint(e,t);else if(o.body.createTextRange){r=o.body.createTextRange();try{r.moveToPoint(e,t),r.collapse(!0)}catch(i){r=uN(e,t,n)}return dN(r,n.body)}return r},hN={fromPoint:fN},pN=function(e,t){return He(t,function(t){var n=e.fire("GetSelectionRange",{range:t});return n.range!==t?n.range:t})},gN={processRanges:pN},mN=function(e,t){var n=t||document,r=n.createDocumentFragment();return $e(e,function(e){r.appendChild(e.dom())}),Ai.fromDom(r)},vN={fromElements:mN},bN=Do("element","width","rows"),yN=Do("element","cells"),wN=Do("x","y"),_N=function(e,t){var n=parseInt(no.get(e,t),10);return isNaN(n)?1:n},xN=function(e,t,n,r,i){for(var o=_N(i,"rowspan"),a=_N(i,"colspan"),s=e.rows(),l=n;l<n+o;l++){s[l]||(s[l]=yN(Wc.deep(r),[]));for(var c=t;c<t+a;c++){s[l].cells()[c]=l===n&&c===t?i:Wc.shallow(i)}}},CN=function(e,t,n){var r=e.rows();return!!(r[n]?r[n].cells():[])[t]},kN=function(e,t,n){for(;CN(e,t,n);)t++;return t},TN=function(e){return Ve(e,function(e,t){return t.cells().length>e?t.cells().length:e},0)},SN=function(e,t){for(var n=e.rows(),r=0;r<n.length;r++)for(var i=n[r].cells(),o=0;o<i.length;o++)if(Ko.eq(i[o],t))return Se.some(wN(o,r));return Se.none()},DN=function(e,t,n,r,i){for(var o=[],a=e.rows(),s=n;s<=i;s++){var l=a[s].cells(),c=t<r?l.slice(t,r+1):l.slice(r,t+1);o.push(yN(a[s].element(),c))}return o},EN=function(e,t,n){var r=t.x(),i=t.y(),o=n.x(),a=n.y(),s=i<a?DN(e,r,i,o,a):DN(e,r,a,o,i);return bN(e.element(),TN(s),s)},NN=function(e,t){var n=Wc.shallow(e.element()),r=Ai.fromTag("tbody");return _l.append(r,t),ml.append(n,r),n},AN=function(e){return He(e.rows(),function(e){var t=He(e.cells(),function(e){var t=Wc.deep(e);return no.remove(t,"colspan"),no.remove(t,"rowspan"),t}),n=Wc.shallow(e.element());return _l.append(n,t),n})},RN=function(e){var t=bN(Wc.shallow(e),0,[]);return $e(rc.descendants(e,"tr"),function(e,n){$e(rc.descendants(e,"td,th"),function(r,i){xN(t,kN(t,i,n),n,e,r)})}),bN(t.element(),TN(t.rows()),t.rows())},PN=function(e){return NN(e,AN(e))},ON=function(e,t,n){return SN(e,t).bind(function(t){return SN(e,n).map(function(n){return EN(e,t,n)})})},IN={fromDom:RN,toDom:PN,subsection:ON},MN=function(e){return Ye(e,function(e){return"ul"===Hi.name(e)||"ol"===Hi.name(e)})},jN=function(e,t){return Ye(e,function(e){return"li"===Hi.name(e)&&Lk(e,t)}).fold(pe([]),function(t){return MN(e).map(function(e){return[Ai.fromTag("li"),Ai.fromTag(Hi.name(e))]}).getOr([])})},BN=function(e,t){var n=Ve(t,function(e,t){return ml.append(t,e),t},e);return t.length>0?vN.fromElements([n]):n},LN=function(e){return Xa(e)?ma.parent(e).filter(Ka).fold(pe([]),function(t){return[e,t]}):Ka(e)?[e]:[]},FN=function(e,t){var n=Ai.fromDom(t.commonAncestorContainer),r=eb.parentsAndSelf(n,e),i=We(r,function(e){return Va(e)||Wa(e)}),o=jN(r,t),a=i.concat(o.length?o:LN(n));return He(a,Wc.shallow)},HN=function(){return vN.fromElements([])},$N=function(e,t){return BN(Ai.fromDom(t.cloneContents()),FN(e,t))},UN=function(e,t){return vc.ancestor(t,"table",me(Ko.eq,e))},zN=function(e,t){return UN(e,t[0]).bind(function(e){var n=t[0],r=t[t.length-1],i=IN.fromDom(e);return IN.subsection(i,n,r).map(function(e){return vN.fromElements([IN.toDom(e)])})}).getOrThunk(HN)},WN=function(e,t){return t.length>0&&t[0].collapsed?HN():$N(e,t[0])},qN=function(e,t){var n=qw.getCellsFromElementOrRanges(t,e);return n.length>0?zN(e,n):WN(e,t)},VN={read:qN},YN=function(e,t){var n,r=e.selection.getRng(),i=e.dom.create("body"),o=e.selection.getSel(),a=gN.processRanges(e,Hw.getRanges(o));if(t=t||{},t.get=!0,t.format=t.format||"html",t.selection=!0,t=e.fire("BeforeGetContent",t),t.isDefaultPrevented())return e.fire("GetContent",t),t.content;if("text"===t.format)return e.selection.isCollapsed()?"":nu.trim(r.text||(o.toString?o.toString():""));r.cloneContents?(n=t.contextual?VN.read(Ai.fromDom(e.getBody()),a).dom():r.cloneContents())&&i.appendChild(n):void 0!==r.item||void 0!==r.htmlText?(i.innerHTML="<br>"+(r.item?r.item(0).outerHTML:r.htmlText),i.removeChild(i.firstChild)):i.innerHTML=r.toString(),t.getInner=!0;var s=e.selection.serializer.serialize(i,t);return"tree"===t.format?s:(t.content=e.selection.isCollapsed()?"":s,e.fire("GetContent",t),t.content)},GN={getContent:YN},KN=function(e,t,n){var r,i,o,a=e.selection.getRng(),s=e.getDoc();if(n=n||{format:"html"},n.set=!0,n.selection=!0,n.content=t,!n.no_events&&(n=e.fire("BeforeSetContent",n),n.isDefaultPrevented()))return void e.fire("SetContent",n);if(t=n.content,a.insertNode){t+='<span id="__caret">_</span>',a.startContainer===s&&a.endContainer===s?s.body.innerHTML=t:(a.deleteContents(),0===s.body.childNodes.length?s.body.innerHTML=t:a.createContextualFragment?a.insertNode(a.createContextualFragment(t)):(i=s.createDocumentFragment(),o=s.createElement("div"),i.appendChild(o),o.outerHTML=t,a.insertNode(i))),r=e.dom.get("__caret"),a=s.createRange(),a.setStartBefore(r),a.setEndBefore(r),e.selection.setRng(a),e.dom.remove("__caret");try{e.selection.setRng(a)}catch(e){}}else a.item&&(s.execCommand("Delete",!1,null),a=e.getRng()),/^\s+/.test(t)?(a.pasteHTML('<span id="__mce_tmp">_</span>'+t),e.dom.remove("__mce_tmp")):a.pasteHTML(t);n.no_events||e.fire("SetContent",n)},XN={setContent:KN},JN=function(e,t,n,r,i){var o=n?t.startContainer:t.endContainer,a=n?t.startOffset:t.endOffset;return Se.from(o).map(Ai.fromDom).map(function(e){return r&&t.collapsed?e:ma.child(e,i(e,a)).getOr(e)}).bind(function(e){return Hi.isElement(e)?Se.some(e):ma.parent(e)}).map(function(e){return e.dom()}).getOr(e)},QN=function(e,t,n){return JN(e,t,!0,n,function(e,t){return Math.min(ma.childNodesCount(e),t)})},ZN=function(e,t,n){return JN(e,t,!1,n,function(e,t){return t>0?t-1:t})},eA=function(e,t){for(var n=e;e&&bs.isText(e)&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n},tA=function(e,t){var n,r,i,o,a;return t?(r=t.startContainer,i=t.endContainer,o=t.startOffset,a=t.endOffset,n=t.commonAncestorContainer,!t.collapsed&&(r===i&&a-o<2&&r.hasChildNodes()&&(n=r.childNodes[o]),3===r.nodeType&&3===i.nodeType&&(r=r.length===o?eA(r.nextSibling,!0):r.parentNode,i=0===a?eA(i.previousSibling,!1):i.parentNode,r&&r===i))?r:n&&3===n.nodeType?n.parentNode:n):e},nA=function(e,t,n,r){var i,o,a=[];if(o=e.getRoot(),n=e.getParent(n||QN(o,t,t.collapsed),e.isBlock),r=e.getParent(r||ZN(o,t,t.collapsed),e.isBlock),n&&n!==o&&a.push(n),n&&r&&n!==r){i=n;for(var s=new m(n,o);(i=s.next())&&i!==r;)e.isBlock(i)&&a.push(i)}return r&&n!==r&&r!==o&&a.push(r),a},rA=function(e,t,n){return Se.from(t).map(function(t){var r=e.nodeIndex(t),i=e.createRng();return i.setStart(t.parentNode,r),i.setEnd(t.parentNode,r+1),n&&(Fk(e,i,t,!0),Fk(e,i,t,!1)),i})},iA=gr.each,oA=function(e){return!!e.select},aA=function(e){return!(!e||!e.ownerDocument)&&Ko.contains(Ai.fromDom(e.ownerDocument),Ai.fromDom(e))},sA=function(e){return!!e&&(!!oA(e)||aA(e.startContainer)&&aA(e.endContainer))},lA=function(e,t,n,r){var i,o,a,s,l,c=function(t,n){var i=e.createRng();t?(i.setStart(t,n),i.setEnd(t,n),_(i),b(!1)):(Fk(e,i,r.getBody(),!0),_(i))},u=function(e){return GN.getContent(r,e)},d=function(e,t){return XN.setContent(r,e,t)},f=function(e){return QN(r.getBody(),w(),e)},h=function(e){return ZN(r.getBody(),w(),e)},p=function(e,t){return i.getBookmark(e,t)},g=function(e){return i.moveToBookmark(e)},m=function(t,n){return rA(e,t,n).each(_),t},v=function(){var e=w(),t=y();return!(!e||e.item)&&(e.compareEndPoints?0===e.compareEndPoints("StartToEnd",e):!t||e.collapsed)},b=function(e){var t=w();t.collapse(!!e),_(t)},y=function(){return t.getSelection?t.getSelection():t.document.selection},w=function(){var n,i,o,l,c=function(e,t,n){try{return t.compareBoundaryPoints(e,n)}catch(e){return-1}};if(!t)return null;if(void 0===(l=t.document)||null===l)return null;if(void 0!==r.bookmark&&!1===FC.hasFocus(r)){var u=Ax.getRng(r);if(u.isSome())return u.map(function(e){return gN.processRanges(r,[e])[0]}).getOr(l.createRange())}try{(n=y())&&(i=n.rangeCount>0?n.getRangeAt(0):n.createRange?n.createRange():l.createRange())}catch(e){}return i=gN.processRanges(r,[i])[0],i||(i=l.createRange?l.createRange():l.body.createTextRange()),i.setStart&&9===i.startContainer.nodeType&&i.collapsed&&(o=e.getRoot(),i.setStart(o,0),i.setEnd(o,0)),a&&s&&(0===c(i.START_TO_START,i,a)&&0===c(i.END_TO_END,i,a)?i=s:(a=null,s=null)),i},_=function(e,t){var n,i,o;if(sA(e)){var l=oA(e)?e:null;if(l){s=null;try{l.select()}catch(e){}}else{if(n=y(),o=r.fire("SetSelectionRange",{range:e,forward:t}),e=o.range,n){s=e;try{n.removeAllRanges(),n.addRange(e)}catch(e){}!1===t&&n.extend&&(n.collapse(e.endContainer,e.endOffset),n.extend(e.startContainer,e.startOffset)),a=n.rangeCount>0?n.getRangeAt(0):null}e.collapsed||e.startContainer!==e.endContainer||!n.setBaseAndExtent||Ct.ie||e.endOffset-e.startOffset<2&&e.startContainer.hasChildNodes()&&(i=e.startContainer.childNodes[e.startOffset])&&"IMG"===i.tagName&&(n.setBaseAndExtent(e.startContainer,e.startOffset,e.endContainer,e.endOffset),n.anchorNode===e.startContainer&&n.focusNode===e.endContainer||n.setBaseAndExtent(i,0,i,1)),r.fire("AfterSetSelectionRange",{range:e,forward:t})}}},x=function(t){return d(e.getOuterHTML(t)),t},C=function(){return tA(r.getBody(),w())},k=function(t,n){return nA(e,w(),t,n)},T=function(){var t,n,r=y();return!(r&&r.anchorNode&&r.focusNode)||(t=e.createRng(),t.setStart(r.anchorNode,r.anchorOffset),t.collapse(!0),n=e.createRng(),n.setStart(r.focusNode,r.focusOffset),n.collapse(!0),t.compareBoundaryPoints(t.START_TO_START,n)<=0)},S=function(){var t=w(),n=y();if(!Hw.hasMultipleRanges(n)&&Hk(r)){var i=W_.normalize(e,t);return i.each(function(e){_(e,T())}),i.getOr(t)}return t},D=function(t,n){var i;return l||(l={},i={},r.on("NodeChange",function(t){var n=t.element,r=e.getParents(n,null,e.getRoot()),o={};iA(l,function(t,n){iA(r,function(a){if(e.is(a,n))return i[n]||(iA(t,function(e){e(!0,{node:a,selector:n,parents:r})}),i[n]=t),o[n]=t,!1})}),iA(i,function(e,t){o[t]||(delete i[t],iA(e,function(e){e(!1,{node:n,selector:t,parents:r})}))})})),l[t]||(l[t]=[]),l[t].push(n),O},E=function(){for(var t,n=e.getRoot();n&&"BODY"!==n.nodeName;){if(n.scrollHeight>n.clientHeight){t=n;break}n=n.parentNode}return t},N=function(e,t){return uh.scrollElementIntoView(r,e,t)},A=function(e,t){return _(hN.fromPoint(e,t,r.getDoc()))},R=function(){var e=w();return e.collapsed?vd.fromRangeStart(e).getClientRects()[0]:e.getBoundingClientRect()},P=function(){t=a=s=null,o.destroy()},O={bookmarkManager:null,controlSelection:null,dom:e,win:t,serializer:n,editor:r,collapse:b,setCursorLocation:c,getContent:u,setContent:d,getBookmark:p,moveToBookmark:g,select:m,isCollapsed:v,isForward:T,setNode:x,getNode:C,getSel:y,setRng:_,getRng:w,getStart:f,getEnd:h,getSelectedBlocks:k,normalize:S,selectorChanged:D,getScrollContainer:E,scrollIntoView:N,placeCaretAt:A,getBoundingClientRect:R,destroy:P};return i=rN(O),o=sN(O,r),O.bookmarkManager=i,O.controlSelection=o,O},cA=bs.isContentEditableFalse,uA=qu,dA=_p,fA=wp,hA=function(e,t){for(;t=e(t);)if(t.isVisible())return t;return t},pA=function(e,t){var n=lp(e,t);return!(n||!bs.isBr(e.getNode()))||n},gA=function(e,t,n,r){var i,o,a,s,l=e===md.Forwards,c=l?fA:dA;return!r.collapsed&&(i=uA(r),cA(i))?pf(e,t,i,e===md.Backwards,!0):(s=bu(r),o=yp(e,t.getBody(),r),c(o)?mf(t,o.getNode(!l)):(o=n(o))?c(o)?pf(e,t,o.getNode(!l),l,!0):(a=n(o),c(a)&&pA(o,a)?pf(e,t,a.getNode(!l),l,!0):s?bf(t,o.toRange(),!0):null):s?r:null)},mA=function(e,t,n,r){var i,o,a,s,l,c,u,d,f;if(f=uA(r),i=yp(e,t.getBody(),r),o=n(t.getBody(),ST(1),i),a=nr.filter(o,DT(1)),l=nr.last(i.getClientRects()),(fA(i)||xp(i))&&(f=i.getNode()),(dA(i)||Cp(i))&&(f=i.getNode(!0)),!l)return null;if(c=l.left,(s=OT(a,c))&&cA(s.node))return u=Math.abs(c-s.left),d=Math.abs(c-s.right),pf(e,t,s.node,u<d,!0);if(f){var h=TT(e,t.getBody(),ST(1),f);if(s=OT(nr.filter(h,DT(1)),c))return bf(t,s.position.toRange(),!0);if(s=nr.last(nr.filter(h,DT(0))))return bf(t,s.position.toRange(),!0)}},vA=function(e){var t=e.dom.create(e.settings.forced_root_block);return(!Ct.ie||Ct.ie>=11)&&(t.innerHTML='<br data-mce-bogus="1">'),t},bA=function(e,t,n){var r,i,o,a=Pf(e.getBody()),s=Zc.curry(hA,a.next),l=Zc.curry(hA,a.prev);if(n.collapsed&&e.settings.forced_root_block){if(!(r=e.dom.getParent(n.startContainer,"PRE")))return;i=1===t?s(vd.fromRangeStart(n)):l(vd.fromRangeStart(n)),i||(o=vA(e),1===t?e.$(r).after(o):e.$(r).before(o),e.selection.select(o,!0),e.selection.collapse())}},yA=function(e,t){var n,r=Pf(e.getBody()),i=Zc.curry(hA,r.next),o=Zc.curry(hA,r.prev),a=t?md.Forwards:md.Backwards,s=t?i:o,l=e.selection.getRng();return(n=gA(a,e,s,l))?n:(n=bA(e,a,l))||null},wA=function(e,t){var n,r=t?1:-1,i=t?kT:CT,o=e.selection.getRng();return(n=mA(r,e,i,o))?n:(n=bA(e,r,o))||null},_A=function(e,t){return function(){var n=yA(e,t);return!!n&&(e.selection.setRng(n),!0)}},xA=function(e,t){return function(){var n=wA(e,t);return!!n&&(e.selection.setRng(n),!0)}},CA=function(e){return He(e,function(e){return xE({shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0,action:fe},e)})},kA=function(e,t){return t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey},TA=function(e,t){return Qe(CA(e),function(e){return kA(e,t)?[e]:[]})},SA=function(e){
for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,r)}},DA=function(e,t){return Ye(TA(e,t),function(e){return e.action()})},EA={match:TA,action:SA,execute:DA},NA=function(e,t,n){var r=ki.detect().os;EA.execute([{keyCode:zT.RIGHT,action:_A(e,!0)},{keyCode:zT.LEFT,action:_A(e,!1)},{keyCode:zT.UP,action:xA(e,!1)},{keyCode:zT.DOWN,action:xA(e,!0)},{keyCode:zT.RIGHT,action:Uh(e,!0)},{keyCode:zT.LEFT,action:Uh(e,!1)},{keyCode:zT.UP,action:zh(e,!1)},{keyCode:zT.DOWN,action:zh(e,!0)},{keyCode:zT.RIGHT,action:aw.move(e,t,!0)},{keyCode:zT.LEFT,action:aw.move(e,t,!1)},{keyCode:zT.RIGHT,ctrlKey:!r.isOSX(),altKey:r.isOSX(),action:aw.moveNextWord(e,t)},{keyCode:zT.LEFT,ctrlKey:!r.isOSX(),altKey:r.isOSX(),action:aw.movePrevWord(e,t)}],n).each(function(e){n.preventDefault()})},AA=function(e,t){e.on("keydown",function(n){!1===n.isDefaultPrevented()&&NA(e,t,n)})},RA={setup:AA},PA=function(e,t){var n=eb.parentsAndSelf(t,e);return Ge(n,qa).fold(pe(n),function(e){return n.slice(0,e)})},OA=function(e){return 1===ma.children(e).length},IA=function(e,t,n,r){var i=me(hD,t),o=He(We(r,i),function(e){return e.dom()});if(0===o.length)Xb.deleteElement(t,e,n);else{var a=fD(n.dom(),o);t.selection.setRng(a.toRange())}},MA=function(e,t){var n=Ai.fromDom(e.getBody()),r=Ai.fromDom(e.selection.getStart()),i=We(PA(n,r),OA);return at(i).map(function(n){var r=vd.fromRangeStart(e.selection.getRng());return!!xv.willDeleteLastPositionInElement(t,r,n.dom())&&(IA(t,e,n,i),!0)}).getOr(!1)},jA=function(e,t){return!!e.selection.isCollapsed()&&MA(e,t)},BA={backspaceDelete:jA},LA=function(e,t,n){EA.execute([{keyCode:zT.BACKSPACE,action:EA.action(ay.backspaceDelete,e,!1)},{keyCode:zT.DELETE,action:EA.action(ay.backspaceDelete,e,!0)},{keyCode:zT.BACKSPACE,action:EA.action(gw.backspaceDelete,e,t,!1)},{keyCode:zT.DELETE,action:EA.action(gw.backspaceDelete,e,t,!0)},{keyCode:zT.BACKSPACE,action:EA.action(u_.backspaceDelete,e,!1)},{keyCode:zT.DELETE,action:EA.action(u_.backspaceDelete,e,!0)},{keyCode:zT.BACKSPACE,action:EA.action(yb.backspaceDelete,e,!1)},{keyCode:zT.DELETE,action:EA.action(yb.backspaceDelete,e,!0)},{keyCode:zT.BACKSPACE,action:EA.action(db.backspaceDelete,e,!1)},{keyCode:zT.DELETE,action:EA.action(db.backspaceDelete,e,!0)},{keyCode:zT.BACKSPACE,action:EA.action(BA.backspaceDelete,e,!1)},{keyCode:zT.DELETE,action:EA.action(BA.backspaceDelete,e,!0)}],n).each(function(e){n.preventDefault()})},FA=function(e,t){EA.execute([{keyCode:zT.BACKSPACE,action:EA.action(ay.paddEmptyElement,e)},{keyCode:zT.DELETE,action:EA.action(ay.paddEmptyElement,e)}],t)},HA=function(e,t){e.on("keydown",function(n){!1===n.isDefaultPrevented()&&LA(e,t,n)}),e.on("keyup",function(t){!1===t.isDefaultPrevented()&&FA(e,t)})},$A={setup:HA},UA=function(e){for(;e;){if(1===e.nodeType||3===e.nodeType&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}},zA=function(e,t){var n,r,i,o=t,a=e.dom,s=e.schema.getMoveCaretBeforeOnEnterElements();if(t){if(/^(LI|DT|DD)$/.test(t.nodeName)){var l=UA(t.firstChild);l&&/^(UL|OL|DL)$/.test(l.nodeName)&&t.insertBefore(a.doc.createTextNode(""),t.firstChild)}if(i=a.createRng(),t.normalize(),t.hasChildNodes()){for(n=new m(t,t);r=n.current();){if(bs.isText(r)){i.setStart(r,0),i.setEnd(r,0);break}if(s[r.nodeName.toLowerCase()]){i.setStartBefore(r),i.setEndBefore(r);break}o=r,r=n.next()}r||(i.setStart(o,0),i.setEnd(o,0))}else bs.isBr(t)?t.nextSibling&&a.isBlock(t.nextSibling)?(i.setStartBefore(t),i.setEndBefore(t)):(i.setStartAfter(t),i.setEndAfter(t)):(i.setStart(t,0),i.setEnd(t,0));e.selection.setRng(i),a.remove(void 0),e.selection.scrollIntoView(t)}},WA=function(e,t){var n,r,i=e.getRoot();for(n=t;n!==i&&"false"!==e.getContentEditable(n);)"true"===e.getContentEditable(n)&&(r=n),n=n.parentNode;return n!==i?r:i},qA=function(e){return Se.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock))},VA=function(e){return qA(e).fold(pe(""),function(e){return e.nodeName.toUpperCase()})},YA=function(e){return qA(e).filter(function(e){return Xa(Ai.fromDom(e))}).isSome()},GA={moveToCaretPosition:zA,getEditableRoot:WA,getParentBlock:qA,getParentBlockName:VA,isListItemParentBlock:YA},KA=function(e,t){return e.firstChild&&e.firstChild.nodeName===t},XA=function(e,t){return e&&e.parentNode&&e.parentNode.nodeName===t},JA=function(e){return e&&/^(OL|UL|LI)$/.test(e.nodeName)},QA=function(e){return JA(e)&&JA(e.parentNode)},ZA=function(e){var t=e.parentNode;return/^(LI|DT|DD)$/.test(t.nodeName)?t:e},eR=function(e,t,n){for(var r=e[n?"firstChild":"lastChild"];r&&!bs.isElement(r);)r=r[n?"nextSibling":"previousSibling"];return r===t},tR=function(e,t,n,r,i){var o=e.dom,a=e.selection.getRng();if(n!==e.getBody()){QA(n)&&(i="LI");var s=i?t(i):o.create("BR");if(eR(n,r,!0)&&eR(n,r,!1))XA(n,"LI")?o.insertAfter(s,ZA(n)):o.replace(s,n);else if(eR(n,r,!0))XA(n,"LI")?(o.insertAfter(s,ZA(n)),s.appendChild(o.doc.createTextNode(" ")),s.appendChild(n)):n.parentNode.insertBefore(s,n);else if(eR(n,r,!1))o.insertAfter(s,ZA(n));else{n=ZA(n);var l=a.cloneRange();l.setStartAfter(r),l.setEndAfter(n);var c=l.extractContents();"LI"===i&&KA(c,"LI")?(s=c.firstChild,o.insertAfter(c,n)):(o.insertAfter(c,n),o.insertAfter(s,n))}o.remove(r),GA.moveToCaretPosition(e,s)}},nR={insert:tR},rR=function(e){return e&&"A"===e.nodeName&&0===gr.trim(nu.trim(e.innerText||e.textContent)).length},iR=function(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)},oR=function(e){e.innerHTML='<br data-mce-bogus="1">'},aR=function(e,t){return e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t},sR=function(e,t){return t&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&"true"!==e.getContentEditable(t)},lR=function(e,t,n){var r,i=n,o=[];if(i){for(;i=i.firstChild;){if(e.isBlock(i))return;bs.isElement(i)&&!t[i.nodeName.toLowerCase()]&&o.push(i)}for(r=o.length;r--;)i=o[r],!i.hasChildNodes()||i.firstChild===i.lastChild&&""===i.firstChild.nodeValue?e.remove(i):rR(i)&&e.remove(i)}},cR=function(e,t,n){return!1===bs.isText(t)?n:e?1===n&&t.data.charAt(n-1)===nu.ZWSP?0:n:n===t.data.length-1&&t.data.charAt(n)===nu.ZWSP?t.data.length:n},uR=function(e){var t=e.cloneRange();return t.setStart(e.startContainer,cR(!0,e.startContainer,e.startOffset)),t.setEnd(e.endContainer,cR(!1,e.endContainer,e.endOffset)),t},dR=function(e){do{bs.isText(e)&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.firstChild}while(e)},fR=function(e,t){var n,r,i=e.getRoot();for(n=t;n!==i&&"false"!==e.getContentEditable(n);)"true"===e.getContentEditable(n)&&(r=n),n=n.parentNode;return n!==i?r:i},hR=function(e,t){var n=Dh.getForcedRootBlock(e);n&&n.toLowerCase()===t.tagName.toLowerCase()&&e.dom.setAttribs(t,Dh.getForcedRootBlockAttrs(e))},pR=function(e,t,n,r,i){var o,a,s,l,c,u,d=t||"P",f=e.dom,h=fR(f,r);if(!(a=f.getParent(r,f.isBlock))||!sR(f,a)){if(a=a||h,u=a===e.getBody()||iR(a)?a.nodeName.toLowerCase():a.parentNode.nodeName.toLowerCase(),!a.hasChildNodes())return o=f.create(d),hR(e,o),a.appendChild(o),n.setStart(o,0),n.setEnd(o,0),o;for(l=r;l.parentNode!==a;)l=l.parentNode;for(;l&&!f.isBlock(l);)s=l,l=l.previousSibling;if(s&&e.schema.isValidChild(u,d.toLowerCase())){for(o=f.create(d),hR(e,o),s.parentNode.insertBefore(o,s),l=s;l&&!f.isBlock(l);)c=l.nextSibling,o.appendChild(l),l=c;n.setStart(r,i),n.setEnd(r,i)}}return r},gR=function(e,t){var n;t.normalize(),(n=t.lastChild)&&!/^(left|right)$/gi.test(e.getStyle(n,"float",!0))||e.add(t,"br")},mR=function(e,t){var n,r,i,o,a,s,l,c,u,d,f,h,p,g=e.dom,v=e.schema,b=v.getNonEmptyElements(),y=e.selection.getRng(),w=function(t){var n,o,s,l=i,c=v.getTextInlineElements();if(t||"TABLE"===d||"HR"===d?(n=g.create(t||h),hR(e,n)):n=a.cloneNode(!1),s=n,!1===Dh.shouldKeepStyles(e))g.setAttrib(n,"style",null),g.setAttrib(n,"class",null);else do{if(c[l.nodeName]){if(Kd(l))continue;o=l.cloneNode(!1),g.setAttrib(o,"id",""),n.hasChildNodes()?(o.appendChild(n.firstChild),n.appendChild(o)):(s=o,n.appendChild(o))}}while((l=l.parentNode)&&l!==r);return oR(s),n},_=function(e){var t,n,r,s;if(s=cR(e,i,o),bs.isText(i)&&(e?s>0:s<i.nodeValue.length))return!1;if(i.parentNode===a&&p&&!e)return!0;if(e&&bs.isElement(i)&&i===a.firstChild)return!0;if(aR(i,"TABLE")||aR(i,"HR"))return p&&!e||!p&&e;for(t=new m(i,a),bs.isText(i)&&(e&&0===s?t.prev():e||s!==i.nodeValue.length||t.next());n=t.current();){if(bs.isElement(n)){if(!n.getAttribute("data-mce-bogus")&&(r=n.nodeName.toLowerCase(),b[r]&&"br"!==r))return!1}else if(bs.isText(n)&&!/^[ \t\r\n]*$/.test(n.nodeValue))return!1;e?t.prev():t.next()}return!0},x=function(){l=/^(H[1-6]|PRE|FIGURE)$/.test(d)&&"HGROUP"!==f?w(h):w(),Dh.shouldEndContainerOnEmptyBlock(e)&&sR(g,u)&&g.isEmpty(a)?l=g.split(u,a):g.insertAfter(l,a),GA.moveToCaretPosition(e,l)};if(W_.normalize(g,y).each(function(e){y.setStart(e.startContainer,e.startOffset),y.setEnd(e.endContainer,e.endOffset)}),i=y.startContainer,o=y.startOffset,h=Dh.getForcedRootBlock(e),s=t.shiftKey,bs.isElement(i)&&i.hasChildNodes()&&(p=o>i.childNodes.length-1,i=i.childNodes[Math.min(o,i.childNodes.length-1)]||i,o=p&&bs.isText(i)?i.nodeValue.length:0),r=fR(g,i)){if((h&&!s||!h&&s)&&(i=pR(e,h,y,i,o)),a=g.getParent(i,g.isBlock),u=a?g.getParent(a.parentNode,g.isBlock):null,d=a?a.nodeName.toUpperCase():"",f=u?u.nodeName.toUpperCase():"","LI"!==f||t.ctrlKey||(a=u,u=u.parentNode,d=f),/^(LI|DT|DD)$/.test(d)&&g.isEmpty(a))return void nR.insert(e,w,u,a,h);h&&a===e.getBody()||(h=h||"P",ou(a)?(l=vu(a),g.isEmpty(a)&&oR(a),GA.moveToCaretPosition(e,l)):_()?x():_(!0)?(l=a.parentNode.insertBefore(w(),a),GA.moveToCaretPosition(e,aR(a,"HR")?l:a)):(n=uR(y).cloneRange(),n.setEndAfter(a),c=n.extractContents(),dR(c),l=c.firstChild,g.insertAfter(c,a),lR(g,b,l),gR(g,a),g.isEmpty(a)&&oR(a),l.normalize(),g.isEmpty(l)?(g.remove(l),x()):GA.moveToCaretPosition(e,l)),g.setAttrib(l,"id",""),e.fire("NewBlock",{newBlock:l}))}},vR={insert:mR},bR=function(e,t){return GA.getParentBlock(e).filter(function(e){return t.length>0&&$o.is(Ai.fromDom(e),t)}).isSome()},yR=function(e){return bR(e,Dh.getBrNewLineSelector(e))},wR=function(e){return bR(e,Dh.getNoNewLineSelector(e))},_R={shouldInsertBr:yR,shouldBlockNewLine:wR},xR=_b.generate([{br:[]},{block:[]},{none:[]}]),CR=function(e,t){return _R.shouldBlockNewLine(e)},kR=function(e){return function(t,n){return""===Dh.getForcedRootBlock(t)===e}},TR=function(e){return function(t,n){return GA.isListItemParentBlock(t)===e}},SR=function(e,t){return function(n,r){return GA.getParentBlockName(n)===e.toUpperCase()===t}},DR=function(e){return SR("pre",e)},ER=function(){return SR("summary",!0)},NR=function(e){return function(t,n){return Dh.shouldPutBrInPre(t)===e}},AR=function(e,t){return _R.shouldInsertBr(e)},RR=function(e,t){return t},PR=function(e){var t=Dh.getForcedRootBlock(e),n=GA.getEditableRoot(e.dom,e.selection.getStart());return n&&e.schema.isValidChild(n.nodeName,t||"P")},OR=function(e,t){return function(n,r){return Ve(e,function(e,t){return e&&t(n,r)},!0)?Se.some(t):Se.none()}},IR=function(e,t){return _y.evaluateUntil([OR([CR],xR.none()),OR([ER()],xR.br()),OR([DR(!0),NR(!1),RR],xR.br()),OR([DR(!0),NR(!1)],xR.block()),OR([DR(!0),NR(!0),RR],xR.block()),OR([DR(!0),NR(!0)],xR.br()),OR([TR(!0),RR],xR.br()),OR([TR(!0)],xR.block()),OR([kR(!0),RR,PR],xR.block()),OR([kR(!0)],xR.br()),OR([AR],xR.br()),OR([kR(!1),RR],xR.br()),OR([PR],xR.block())],[e,t.shiftKey]).getOr(xR.none())},MR={getAction:IR},jR=function(e,t){MR.getAction(e,t).fold(function(){ix.insert(e,t)},function(){vR.insert(e,t)},fe)},BR={insert:jR},LR=function(e){e.typing&&(e.typing=!1,e.add())},FR=function(e,t){t.isDefaultPrevented()||(t.preventDefault(),LR(e.undoManager),e.undoManager.transact(function(){!1===e.selection.isCollapsed()&&e.execCommand("Delete"),BR.insert(e,t)}))},HR=function(e){e.on("keydown",function(t){t.keyCode===zT.ENTER&&FR(e,t)})},$R={setup:HR},UR=function(e,t){return VR(e)&&bs.isText(t.container())},zR=function(e,t){var n=t.container(),r=t.offset();n.insertData(r,""),e.selection.setCursorLocation(n,r+1)},WR=function(e,t,n){return!!UR(n,t)&&(zR(e,t),!0)},qR=function(e){var t=me(mv.isInlineTarget,e),n=vd.fromRangeStart(e.selection.getRng());return Uy.readLocation(t,e.getBody(),n).map(me(WR,e,n)).getOr(!1)},VR=function(e){return e.fold(pe(!1),pe(!0),pe(!0),pe(!1))},YR=function(e){return!!e.selection.isCollapsed()&&qR(e)},GR={insertAtSelection:YR},KR=function(e,t){EA.execute([{keyCode:zT.SPACEBAR,action:EA.action(GR.insertAtSelection,e)}],t).each(function(e){t.preventDefault()})},XR=function(e){e.on("keydown",function(t){!1===t.isDefaultPrevented()&&KR(e,t)})},JR={setup:XR},QR=function(e){return vc.descendant(Ai.fromDom(e.getBody()),"*[data-mce-caret]").fold(pe(null),function(e){return e.dom()})},ZR=function(e){e.selection.setRng(e.selection.getRng())},eP=function(e,t){t.hasAttribute("data-mce-caret")&&(vu(t),ZR(e),e.selection.scrollIntoView(t))},tP=function(e,t){var n=QR(e);if(n)return"compositionstart"===t.type?(t.preventDefault(),t.stopPropagation(),void eP(e,n)):void(lu(n)&&(eP(e,n),e.undoManager.add()))},nP=function(e){e.on("keyup compositionstart",me(tP,e))},rP={setup:nP},iP=function(e){var t=aw.setupSelectedState(e);rP.setup(e),RA.setup(e,t),$A.setup(e,t),$R.setup(e),JR.setup(e)},oP={setup:iP},aP=function(e){return bs.isElement(e)&&Ga(Ai.fromDom(e))},sP=function(e){var t=e.selection.getRng(),n=C.fromRangeStart(t),r=C.fromRangeEnd(t);if(C.isElementPosition(n)){var i=n.container();aP(i)&&Ip.firstPositionIn(i).each(function(e){return t.setStart(e.container(),e.offset())})}if(C.isElementPosition(r)){var i=n.container();aP(i)&&Ip.lastPositionIn(i).each(function(e){return t.setEnd(e.container(),e.offset())})}e.selection.setRng(Nm.normalize(t))},lP=function(e){e.on("click",function(t){t.detail>=3&&sP(e)})},cP=function(e){e.on("click",function(t){e.dom.getParent(t.target,"details")&&t.preventDefault()})},uP=function(e){e.parser.addNodeFilter("details",function(e){$e(e,function(e){e.attr("data-mce-open",e.attr("open")),e.attr("open","open")})}),e.serializer.addNodeFilter("details",function(e){$e(e,function(e){var t=e.attr("data-mce-open");e.attr("open",Ne(t)?t:null),e.attr("data-mce-open",null)})})},dP=function(e){cP(e),uP(e)},fP=rl.DOM,hP=function(e,t){var n=Ai.fromDom(e.getDoc().head),r=Ai.fromTag("style");no.set(r,"type","text/css"),ml.append(r,Ai.fromText(t)),ml.append(n,r)},pP=function(e){var t=Y(e.settings,e.schema);return t.addAttributeFilter("src,href,style,tabindex",function(t,n){for(var r,i,o,a=t.length,s=e.dom;a--;)if(r=t[a],i=r.attr(n),o="data-mce-"+n,!r.attributes.map[o]){if(0===i.indexOf("data:")||0===i.indexOf("blob:"))continue;"style"===n?(i=s.serializeStyle(s.parseStyle(i),r.name),i.length||(i=null),r.attr(o,i),r.attr(n,i)):"tabindex"===n?(r.attr(o,i),r.attr(n,null)):r.attr(o,e.convertURL(i,n,r.name))}}),t.addNodeFilter("script",function(e){for(var t,n,r=e.length;r--;)t=e[r],n=t.attr("type")||"no/type",0!==n.indexOf("mce-")&&t.attr("type","mce-"+n)}),t.addNodeFilter("#cdata",function(e){for(var t,n=e.length;n--;)t=e[n],t.type=8,t.name="#comment",t.value="[CDATA["+t.value+"]]"}),t.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(t){for(var n,r=t.length,i=e.schema.getNonEmptyElements();r--;)n=t[r],n.isEmpty(i)&&0===n.getAll("br").length&&(n.append(new FE("br",1)).shortEnded=!0)}),t},gP=function(e){e.settings.auto_focus&&Rt.setEditorTimeout(e,function(){var t;t=!0===e.settings.auto_focus?e:e.editorManager.get(e.settings.auto_focus),t.destroyed||t.focus()},100)},mP=function(e){e.bindPendingEventDelegates(),e.initialized=!0,e.fire("init"),e.focus(!0),e.nodeChanged({initial:!0}),e.execCallback("init_instance_callback",e),gP(e)},vP=function(e){return e.inline?fP.styleSheetLoader:e.dom.styleSheetLoader},bP=function(e,t){var n,r,i=e.settings,o=e.getElement(),a=e.getDoc();i.inline||(e.getElement().style.visibility=e.orgVisibility),t||i.content_editable||(a.open(),a.write(e.iframeHTML),a.close()),i.content_editable&&(e.on("remove",function(){var e=this.getBody();fP.removeClass(e,"mce-content-body"),fP.removeClass(e,"mce-edit-focus"),fP.setAttrib(e,"contentEditable",null)}),fP.addClass(o,"mce-content-body"),e.contentDocument=a=i.content_document||document,e.contentWindow=i.content_window||window,e.bodyElement=o,i.content_document=i.content_window=null,i.root_name=o.nodeName.toLowerCase()),n=e.getBody(),n.disabled=!0,e.readonly=i.readonly,e.readonly||(e.inline&&"static"===fP.getStyle(n,"position",!0)&&(n.style.position="relative"),n.contentEditable=e.getParam("content_editable_state",!0)),n.disabled=!1,e.editorUpload=$(e),e.schema=v(i),e.dom=rl(a,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,hex_colors:i.force_hex_style_colors,class_filter:i.class_filter,update_styles:!0,root_element:e.inline?e.getBody():null,collect:i.content_editable,schema:e.schema,onSetAttrib:function(t){e.fire("SetAttrib",t)}}),e.parser=pP(e),e.serializer=K(i,e),e.selection=lA(e.dom,e.getWin(),e.serializer,e),e.annotator=k(e),e.formatter=V(e),e.undoManager=W(e),e._nodeChangeDispatcher=new U(e),e._selectionOverrides=KT(e),dP(e),lP(e),oP.setup(e),Ok.setup(e),e.fire("PreInit"),i.browser_spellcheck||i.gecko_spellcheck||(a.body.spellcheck=!1,fP.setAttrib(n,"spellcheck","false")),e.quirks=J(e),e.fire("PostRender"),i.directionality&&(n.dir=i.directionality),i.nowrap&&(n.style.whiteSpace="nowrap"),i.protect&&e.on("BeforeSetContent",function(e){gr.each(i.protect,function(t){e.content=e.content.replace(t,function(e){return"\x3c!--mce:protected "+escape(e)+"--\x3e"})})}),e.on("SetContent",function(){e.addVisual(e.getBody())}),e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"}),e.on("compositionstart compositionend",function(t){e.composing="compositionstart"===t.type}),e.contentStyles.length>0&&(r="",gr.each(e.contentStyles,function(e){r+=e+"\r\n"}),e.dom.addStyle(r)),vP(e).loadAll(e.contentCSS,function(t){mP(e)},function(t){mP(e)}),i.content_style&&hP(e,i.content_style)},yP={initContentBody:bP},wP=rl.DOM,_P=function(e,t){if(document.domain!==window.location.hostname&&Ct.ie&&Ct.ie<12){var n=Sk.uuid("mce");e[n]=function(){yP.initContentBody(e)};var r='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinymce.get("'+e.id+'");document.write(ed.iframeHTML);document.close();ed.'+n+"(true);})()";return wP.setAttrib(t,"src",r),!0}return!1},xP=function(e){var t="number"==typeof e?e+"px":e;return t||""},CP=function(e,t,n,r){var i=Ai.fromTag("iframe");return no.setAll(i,r),no.setAll(i,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:t}),So.setAll(i,{width:"100%",height:xP(n),display:"block"}),i},kP=function(e){var t,n,r;return r=Dh.getDocType(e)+"<html><head>",Dh.getDocumentBaseUrl(e)!==e.documentBaseUrl&&(r+='<base href="'+e.documentBaseURI.getURI()+'" />'),r+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',t=Dh.getBodyId(e),n=Dh.getBodyClass(e),Dh.getContentSecurityPolicy(e)&&(r+='<meta http-equiv="Content-Security-Policy" content="'+Dh.getContentSecurityPolicy(e)+'" />'),r+='</head><body id="'+t+'" class="mce-content-body '+n+'" data-id="'+e.id+'"><br></body></html>'},TP=function(e,t){var n=e.editorManager.translate("Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help"),r=CP(e.id,n,t.height,Dh.getIframeAttrs(e)).dom();r.onload=function(){r.onload=null,e.fire("load")};var i=_P(e,r);return e.contentAreaContainer=t.iframeContainer,e.iframeElement=r,e.iframeHTML=kP(e),wP.add(t.iframeContainer,r),i},SP=function(e,t){var n=TP(e,t);t.editorContainer&&(wP.get(t.editorContainer).style.display=e.orgDisplay,e.hidden=wP.isHidden(t.editorContainer)),e.getElement().style.display="none",wP.setAttrib(e.id,"aria-hidden","true"),n||yP.initContentBody(e)},DP={init:SP},EP=rl.DOM,NP=function(e,t,n){var r,i,o=lk.get(n);if(r=lk.urls[n]||e.documentBaseUrl.replace(/\/$/,""),n=gr.trim(n),o&&-1===gr.inArray(t,n)){if(gr.each(lk.dependencies(n),function(n){NP(e,t,n)}),e.plugins[n])return;i=new o(e,r,e.$),e.plugins[n]=i,i.init&&(i.init(e,r),t.push(n))}},AP=function(e){return e.replace(/^\-/,"")},RP=function(e){var t=[];gr.each(e.settings.plugins.split(/[ ,]/),function(n){NP(e,t,AP(n))})},PP=function(e){var t,n=e.settings.theme;Ne(n)?(e.settings.theme=AP(n),t=ck.get(n),e.theme=new t(e,ck.urls[n]),e.theme.init&&e.theme.init(e,ck.urls[n]||e.documentBaseUrl.replace(/\/$/,""),e.$)):e.theme={}},OP=function(e){var t,n,r,i,o,a=e.settings,s=e.getElement();return t=a.width||EP.getStyle(s,"width")||"100%",n=a.height||EP.getStyle(s,"height")||s.offsetHeight,r=a.min_height||100,i=/^[0-9\.]+(|px)$/i,i.test(""+t)&&(t=Math.max(parseInt(t,10),100)),i.test(""+n)&&(n=Math.max(parseInt(n,10),r)),o=e.theme.renderUI({targetNode:s,width:t,height:n,deltaWidth:a.delta_width,deltaHeight:a.delta_height}),a.content_editable||(n=(o.iframeHeight||n)+("number"==typeof n?o.deltaHeight||0:""))<r&&(n=r),o.height=n,o},IP=function(e){var t,n=e.getElement();return t=e.settings.theme(e,n),t.editorContainer.nodeType&&(t.editorContainer.id=t.editorContainer.id||e.id+"_parent"),t.iframeContainer&&t.iframeContainer.nodeType&&(t.iframeContainer.id=t.iframeContainer.id||e.id+"_iframecontainer"),t.height=t.iframeHeight?t.iframeHeight:n.offsetHeight,t},MP=function(e){return{editorContainer:e,iframeContainer:e}},jP=function(e){var t=EP.create("div");return EP.insertAfter(t,e),MP(t)},BP=function(e){var t=e.getElement();return e.inline?MP(null):jP(t)},LP=function(e){var t=e.settings,n=e.getElement();return e.orgDisplay=n.style.display,Ne(t.theme)?OP(e):Ie(t.theme)?IP(e):BP(e)},FP=function(e){var t,n=e.settings,r=e.getElement();return e.rtl=n.rtl_ui||e.editorManager.i18n.rtl,e.editorManager.i18n.setCode(n.language),n.aria_label=n.aria_label||EP.getAttrib(r,"aria-label",e.getLang("aria.rich_text_area")),e.fire("ScriptsLoaded"),PP(e),RP(e),t=LP(e),e.editorContainer=t.editorContainer?t.editorContainer:null,n.content_css&&gr.each(gr.explode(n.content_css),function(t){e.contentCSS.push(e.documentBaseURI.toAbsolute(t))}),n.content_editable?yP.initContentBody(e):DP.init(e,t)},HP={init:FP},$P=rl.DOM,UP=function(e){return"-"===e.charAt(0)},zP=function(e,t){var n=t.settings;n.language&&"en"!==n.language&&!n.language_url&&(n.language_url=t.editorManager.baseURL+"/langs/"+n.language+".js"),n.language_url&&!t.editorManager.i18n.data[n.language]&&e.add(n.language_url)},WP=function(e,t,n,r){var i=t.settings,o=i.theme;if(Ne(o)){if(!UP(o)&&!ck.urls.hasOwnProperty(o)){var a=i.theme_url;a?ck.load(o,t.documentBaseURI.toAbsolute(a)):ck.load(o,"themes/"+o+"/theme"+n+".js")}e.loadQueue(function(){ck.waitFor(o,r)})}else r()},qP=function(e,t){gr.isArray(e.plugins)&&(e.plugins=e.plugins.join(" ")),gr.each(e.external_plugins,function(t,n){lk.load(n,t),e.plugins+=" "+n}),gr.each(e.plugins.split(/[ ,]/),function(e){if((e=gr.trim(e))&&!lk.urls[e])if(UP(e)){e=e.substr(1,e.length);var n=lk.dependencies(e);gr.each(n,function(e){var n={prefix:"plugins/",resource:e,suffix:"/plugin"+t+".js"};e=lk.createUrl(n,e),lk.load(e.resource,e)})}else lk.load(e,{prefix:"plugins/",resource:e,suffix:"/plugin"+t+".js"})})},VP=function(e,t){var n=ll.ScriptLoader;WP(n,e,t,function(){zP(n,e),qP(e.settings,t),n.loadQueue(function(){e.removed||HP.init(e)},e,function(t){sk.pluginLoadError(e,t[0]),e.removed||HP.init(e)})})},YP=function(e){var t=e.settings,n=e.id,r=function(){$P.unbind(window,"ready",r),e.render()};if(!Ut.Event.domLoaded)return void $P.bind(window,"ready",r);if(e.getElement()&&Ct.contentEditable){t.inline?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");var i=e.getElement().form||$P.getParent(n,"form");i&&(e.formElement=i,t.hidden_input&&!/TEXTAREA|INPUT/i.test(e.getElement().nodeName)&&($P.insertAfter($P.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=function(t){e.fire(t.type,t)},$P.bind(i,"submit reset",e.formEventDelegate),e.on("reset",function(){e.setContent(e.startContent,{format:"raw"})}),!t.submit_patch||i.submit.nodeType||i.submit.length||i._mceOldSubmit||(i._mceOldSubmit=i.submit,i.submit=function(){return e.editorManager.triggerSave(),e.setDirty(!1),i._mceOldSubmit(i)})),e.windowManager=P(e),e.notificationManager=A(e),"xml"===t.encoding&&e.on("GetContent",function(e){e.save&&(e.content=$P.encode(e.content))}),t.add_form_submit_trigger&&e.on("submit",function(){e.initialized&&e.save()}),t.add_unload_trigger&&(e._beforeUnload=function(){!e.initialized||e.destroyed||e.isHidden()||e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),VP(e,e.suffix)}},GP={render:YP},KP=function(e,t,n){var r=e.sidebars?e.sidebars:[];r.push({name:t,settings:n}),e.sidebars=r},XP={add:KP},JP=gr.each,QP=gr.trim,ZP="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),eO={ftp:21,http:80,https:443,mailto:25},tO=function(e,t){var n,r,i=this;if(e=QP(e),t=i.settings=t||{},n=t.base_uri,/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e))return void(i.source=e);var o=0===e.indexOf("//");0!==e.indexOf("/")||o||(e=(n?n.protocol||"http":"http")+"://mce_host"+e),/^[\w\-]*:?\/\//.test(e)||(r=t.base_uri?t.base_uri.path:new tO(document.location.href).directory,""==t.base_uri.protocol?e="//mce_host"+i.toAbsPath(r,e):(e=/([^#?]*)([#?]?.*)/.exec(e),e=(n&&n.protocol||"http")+"://mce_host"+i.toAbsPath(r,e[1])+e[2])),e=e.replace(/@@/g,"(mce_at)"),e=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e),JP(ZP,function(t,n){var r=e[n];r&&(r=r.replace(/\(mce_at\)/g,"@@")),i[t]=r}),n&&(i.protocol||(i.protocol=n.protocol),i.userInfo||(i.userInfo=n.userInfo),i.port||"mce_host"!==i.host||(i.port=n.port),i.host&&"mce_host"!==i.host||(i.host=n.host),i.source=""),o&&(i.protocol="")};tO.prototype={setPath:function(e){var t=this;e=/^(.*?)\/?(\w+)?$/.exec(e),t.path=e[0],t.directory=e[1],t.file=e[2],t.source="",t.getURI()},toRelative:function(e){var t,n=this;if("./"===e)return e;if(e=new tO(e,{base_uri:n}),"mce_host"!==e.host&&n.host!==e.host&&e.host||n.port!==e.port||n.protocol!==e.protocol&&""!==e.protocol)return e.getURI();var r=n.getURI(),i=e.getURI();return r===i||"/"===r.charAt(r.length-1)&&r.substr(0,r.length-1)===i?r:(t=n.toRelPath(n.path,e.path),e.query&&(t+="?"+e.query),e.anchor&&(t+="#"+e.anchor),t)},toAbsolute:function(e,t){return e=new tO(e,{base_uri:this}),e.getURI(t&&this.isSameOrigin(e))},isSameOrigin:function(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;var t=eO[this.protocol];if(t&&(this.port||t)==(e.port||t))return!0}return!1},toRelPath:function(e,t){var n,r,i,o=0,a="";if(e=e.substring(0,e.lastIndexOf("/")),e=e.split("/"),n=t.split("/"),e.length>=n.length)for(r=0,i=e.length;r<i;r++)if(r>=n.length||e[r]!==n[r]){o=r+1;break}if(e.length<n.length)for(r=0,i=n.length;r<i;r++)if(r>=e.length||e[r]!==n[r]){o=r+1;break}if(1===o)return t;for(r=0,i=e.length-(o-1);r<i;r++)a+="../";for(r=o-1,i=n.length;r<i;r++)a+=r!==o-1?"/"+n[r]:n[r];return a},toAbsPath:function(e,t){var n,r,i,o=0,a=[];for(r=/\/$/.test(t)?"/":"",e=e.split("/"),t=t.split("/"),JP(e,function(e){e&&a.push(e)}),e=a,n=t.length-1,a=[];n>=0;n--)0!==t[n].length&&"."!==t[n]&&(".."!==t[n]?o>0?o--:a.push(t[n]):o++);return n=e.length-o,i=n<=0?a.reverse().join("/"):e.slice(0,n).join("/")+"/"+a.reverse().join("/"),0!==i.indexOf("/")&&(i="/"+i),r&&i.lastIndexOf("/")!==i.length-1&&(i+=r),i},getURI:function(e){var t,n=this;return n.source&&!e||(t="",e||(n.protocol?t+=n.protocol+"://":t+="//",n.userInfo&&(t+=n.userInfo+"@"),n.host&&(t+=n.host),n.port&&(t+=":"+n.port)),n.path&&(t+=n.path),n.query&&(t+="?"+n.query),n.anchor&&(t+="#"+n.anchor),n.source=t),n.source}},tO.parseDataUri=function(e){var t,n;return e=decodeURIComponent(e).split(","),n=/data:([^;]+)/.exec(e[0]),n&&(t=n[1]),{type:t,data:e[1]}},tO.getDocumentBaseUrl=function(e){var t;return t=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?e.href:e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(t)&&(t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/")),t};var nO=function(e,t){var n=Dh.getForcedRootBlock(e),r=new RegExp("^(<"+n+"[^>]*>(&nbsp;|&#160;|\\s||<br \\/>|)<\\/"+n+">[\r\n]*|<br \\/>[\r\n]*)$");return t.replace(r,"")},rO=function(e,t,n){var r;if(t.format=t.format?t.format:"html",t.get=!0,t.getInner=!0,t.no_events||e.fire("BeforeGetContent",t),"raw"===t.format)r=gr.trim(iS.trimExternal(e.serializer,n.innerHTML));else if("text"===t.format)r=nu.trim(n.innerText||n.textContent);else{if("tree"===t.format)return e.serializer.serialize(n,t);r=nO(e,e.serializer.serialize(n,t))}return"text"===t.format||es(Ai.fromDom(n))?t.content=r:t.content=gr.trim(r),t.no_events||e.fire("GetContent",t),t.content},iO=function(e,t){return void 0===t&&(t={}),Se.from(e.getBody()).fold(pe("tree"===t.format?new FE("body",11):""),function(n){return rO(e,t,n)})},oO=function(e,t){t(e),e.firstChild&&oO(e.firstChild,t),e.next&&oO(e.next,t)},aO=function(e,t,n){var r={},i={},o=[];n.firstChild&&oO(n.firstChild,function(n){$e(e,function(e){e.name===n.name&&(r[e.name]?r[e.name].nodes.push(n):r[e.name]={filter:e,nodes:[n]})}),$e(t,function(e){"string"==typeof n.attr(e.name)&&(i[e.name]?i[e.name].nodes.push(n):i[e.name]={filter:e,nodes:[n]})})});for(var a in r)r.hasOwnProperty(a)&&o.push(r[a]);for(var a in i)i.hasOwnProperty(a)&&o.push(i[a]);return o},sO=function(e,t,n){var r=aO(e,t,n);$e(r,function(e){$e(e.filter.callbacks,function(t){t(e.nodes,e.filter.name,{})})})},lO=function(e){return e instanceof FE},cO=function(e){FC.hasFocus(e)&&Ip.firstPositionIn(e.getBody()).each(function(t){var n=t.getNode(),r=bs.isTable(n)?Ip.firstPositionIn(n).getOr(t):t;e.selection.setRng(r.toRange())})},uO=function(e,t){e.dom.setHTML(e.getBody(),t),cO(e)},dO=function(e,t,n,r){var i,o;return 0===n.length||/^\s+$/.test(n)?(o='<br data-mce-bogus="1">',"TABLE"===t.nodeName?n="<tr><td>"+o+"</td></tr>":/^(UL|OL)$/.test(t.nodeName)&&(n="<li>"+o+"</li>"),i=Dh.getForcedRootBlock(e),i&&e.schema.isValidChild(t.nodeName.toLowerCase(),i.toLowerCase())?(n=o,n=e.dom.createHTML(i,e.settings.forced_root_block_attrs,n)):n||(n='<br data-mce-bogus="1">'),uO(e,n),e.fire("SetContent",r)):("raw"!==r.format&&(n=S({validate:e.validate},e.schema).serialize(e.parser.parse(n,{isRootContent:!0,insert:!0}))),r.content=es(Ai.fromDom(t))?n:gr.trim(n),uO(e,r.content),r.no_events||e.fire("SetContent",r)),r.content},fO=function(e,t,n,r){sO(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),n);var i=S({validate:e.validate},e.schema).serialize(n);return r.content=es(Ai.fromDom(t))?i:gr.trim(i),uO(e,r.content),r.no_events||e.fire("SetContent",r),n},hO=function(e,t,n){return void 0===n&&(n={}),n.format=n.format?n.format:"html",n.set=!0,n.content=lO(t)?"":t,lO(t)||n.no_events||(e.fire("BeforeSetContent",n),t=n.content),Se.from(e.getBody()).fold(pe(t),function(r){return lO(t)?fO(e,r,t,n):dO(e,r,t,n)})},pO=rl.DOM,gO=function(e){pO.setStyle(e.id,"display",e.orgDisplay)},mO=function(e){return Se.from(e).each(function(e){return e.destroy()})},vO=function(e){e.contentAreaContainer=e.formElement=e.container=e.editorContainer=null,e.bodyElement=e.contentDocument=e.contentWindow=null,e.iframeElement=e.targetElm=null,e.selection&&(e.selection=e.selection.win=e.selection.dom=e.selection.dom.doc=null)},bO=function(e){var t=e.formElement;t&&(t._mceOldSubmit&&(t.submit=t._mceOldSubmit,t._mceOldSubmit=null),pO.unbind(t,"submit reset",e.formEventDelegate))},yO=function(e){if(!e.removed){var t=e._selectionOverrides,n=e.editorUpload,r=e.getBody(),i=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&i&&pO.remove(i.nextSibling),!e.inline&&r&&gO(e),Gx.fireRemove(e),e.editorManager.remove(e),pO.remove(e.getContainer()),mO(t),mO(n),e.destroy()}},wO=function(e,t){var n=e.selection,r=e.dom;if(!e.destroyed){if(!t&&!e.removed)return void e.remove()
;t||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),mO(n),mO(r)),bO(e),vO(e),e.destroyed=!0}},_O=rl.DOM,xO=gr.extend,CO=gr.each,kO=gr.resolve,TO=Ct.ie,SO=function(e,t,n){var r=this,i=r.documentBaseUrl=n.documentBaseURL,o=n.baseURI;t=Zm(r,e,i,n.defaultSettings,t),r.settings=t,w.language=t.language||"en",w.languageLoad=t.language_load,w.baseURL=n.baseURL,r.id=e,r.setDirty(!1),r.plugins={},r.documentBaseURI=new tO(t.document_base_url,{base_uri:o}),r.baseURI=o,r.contentCSS=[],r.contentStyles=[],r.shortcuts=new E(r),r.loadedCSS={},r.editorCommands=new D(r),r.suffix=n.suffix,r.editorManager=n,r.inline=t.inline,r.buttons={},r.menuItems={},t.cache_suffix&&(Ct.cacheSuffix=t.cache_suffix.replace(/^[\?\&]+/,"")),!1===t.override_viewport&&(Ct.overrideViewPort=!1),n.fire("SetupEditor",{editor:r}),r.execCallback("setup",r),r.$=Mr.overrideDefaults(function(){return{context:r.inline?r.getBody():r.getDoc(),element:r.getBody()}})};SO.prototype={render:function(){GP.render(this)},focus:function(e){FC.focus(this,e)},hasFocus:function(){return FC.hasFocus(this)},execCallback:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r,i=this,o=i.settings[e];if(o)return i.callbackLookup&&(r=i.callbackLookup[e])&&(o=r.func,r=r.scope),"string"==typeof o&&(r=o.replace(/\.\w+$/,""),r=r?kO(r):0,o=kO(o),i.callbackLookup=i.callbackLookup||{},i.callbackLookup[e]={func:o,scope:r}),o.apply(r||i,Array.prototype.slice.call(arguments,1))},translate:function(e){if(e&&gr.is(e,"string")){var t=this.settings.language||"en",n=this.editorManager.i18n;e=n.data[t+"."+e]||e.replace(/\{\#([^\}]+)\}/g,function(e,r){return n.data[t+"."+r]||"{#"+r+"}"})}return this.editorManager.translate(e)},getLang:function(e,t){return this.editorManager.i18n.data[(this.settings.language||"en")+"."+e]||(void 0!==t?t:"{#"+e+"}")},getParam:function(e,t,n){return iv(this,e,t,n)},nodeChanged:function(e){this._nodeChangeDispatcher.nodeChanged(e)},addButton:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),t.stateSelector&&void 0===t.active&&(t.active=!1),t.text||t.icon||(t.icon=e),n.buttons=n.buttons,t.tooltip=t.tooltip||t.title,n.buttons[e]=t},addSidebar:function(e,t){return XP.add(this,e,t)},addMenuItem:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),n.menuItems=n.menuItems,n.menuItems[e]=t},addContextToolbar:function(e,t){var n,r=this;r.contextToolbars=r.contextToolbars||[],"string"==typeof e&&(n=e,e=function(e){return r.dom.is(e,n)}),r.contextToolbars.push({id:Sk.uuid("mcet"),predicate:e,items:t})},addCommand:function(e,t,n){this.editorCommands.addCommand(e,t,n)},addQueryStateHandler:function(e,t,n){this.editorCommands.addQueryStateHandler(e,t,n)},addQueryValueHandler:function(e,t,n){this.editorCommands.addQueryValueHandler(e,t,n)},addShortcut:function(e,t,n,r){this.shortcuts.add(e,t,n,r)},execCommand:function(e,t,n,r){return this.editorCommands.execCommand(e,t,n,r)},queryCommandState:function(e){return this.editorCommands.queryCommandState(e)},queryCommandValue:function(e){return this.editorCommands.queryCommandValue(e)},queryCommandSupported:function(e){return this.editorCommands.queryCommandSupported(e)},show:function(){var e=this;e.hidden&&(e.hidden=!1,e.inline?e.getBody().contentEditable=!0:(_O.show(e.getContainer()),_O.hide(e.id)),e.load(),e.fire("show"))},hide:function(){var e=this,t=e.getDoc();e.hidden||(TO&&t&&!e.inline&&t.execCommand("SelectAll"),e.save(),e.inline?(e.getBody().contentEditable=!1,e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(_O.hide(e.getContainer()),_O.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.fire("hide"))},isHidden:function(){return!!this.hidden},setProgressState:function(e,t){this.fire("ProgressState",{state:e,time:t})},load:function(e){var t,n=this,r=n.getElement();return n.removed?"":r?(e=e||{},e.load=!0,t=n.setContent(void 0!==r.value?r.value:r.innerHTML,e),e.element=r,e.no_events||n.fire("LoadContent",e),e.element=r=null,t):void 0},save:function(e){var t,n,r=this,i=r.getElement();if(i&&r.initialized&&!r.removed)return e=e||{},e.save=!0,e.element=i,t=e.content=r.getContent(e),e.no_events||r.fire("SaveContent",e),"raw"===e.format&&r.fire("RawSaveContent",e),t=e.content,/TEXTAREA|INPUT/i.test(i.nodeName)?i.value=t:(!e.is_removing&&r.inline||(i.innerHTML=t),(n=_O.getParent(r.id,"form"))&&CO(n.elements,function(e){if(e.name===r.id)return e.value=t,!1})),e.element=i=null,!1!==e.set_dirty&&r.setDirty(!1),t},setContent:function(e,t){return hO(this,e,t)},getContent:function(e){return iO(this,e)},insertContent:function(e,t){t&&(e=xO({content:e},t)),this.execCommand("mceInsertContent",!1,e)},isDirty:function(){return!this.isNotDirty},setDirty:function(e){var t=!this.isNotDirty;this.isNotDirty=!e,e&&e!==t&&this.fire("dirty")},setMode:function(e){Qx(this,e)},getContainer:function(){var e=this;return e.container||(e.container=_O.get(e.editorContainer||e.id+"_parent")),e.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return this.targetElm||(this.targetElm=_O.get(this.id)),this.targetElm},getWin:function(){var e,t=this;return t.contentWindow||(e=t.iframeElement)&&(t.contentWindow=e.contentWindow),t.contentWindow},getDoc:function(){var e,t=this;return t.contentDocument||(e=t.getWin())&&(t.contentDocument=e.document),t.contentDocument},getBody:function(){var e=this.getDoc();return this.bodyElement||(e?e.body:null)},convertURL:function(e,t,n){var r=this,i=r.settings;return i.urlconverter_callback?r.execCallback("urlconverter_callback",e,n,!0,t):!i.convert_urls||n&&"LINK"===n.nodeName||0===e.indexOf("file:")||0===e.length?e:i.relative_urls?r.documentBaseURI.toRelative(e):e=r.documentBaseURI.toAbsolute(e,i.remove_script_host)},addVisual:function(e){var t,n=this,r=n.settings,i=n.dom;e=e||n.getBody(),void 0===n.hasVisual&&(n.hasVisual=r.visual),CO(i.select("table,a",e),function(e){var o;switch(e.nodeName){case"TABLE":return t=r.visual_table_class||"mce-item-table",o=i.getAttrib(e,"border"),void(o&&"0"!==o||!n.hasVisual?i.removeClass(e,t):i.addClass(e,t));case"A":return void(i.getAttrib(e,"href")||(o=i.getAttrib(e,"name")||e.id,t=r.visual_anchor_class||"mce-item-anchor",o&&n.hasVisual?i.addClass(e,t):i.removeClass(e,t)))}}),n.fire("VisualAid",{element:e,hasVisual:n.hasVisual})},remove:function(){yO(this)},destroy:function(e){wO(this,e)},uploadImages:function(e){return this.editorUpload.uploadImages(e)},_scanForImages:function(){return this.editorUpload.scanForImages()}},xO(SO.prototype,lC);var DO,EO,NO,AO=function(e){return-1!==e.className.toString().indexOf("mce-")},RO={isEditorUIElement:AO},PO=function(e){return"nodechange"===e.type&&e.selectionChange},OO=function(e,t){var n=function(){t.throttle()};rl.DOM.bind(document,"mouseup",n),e.on("remove",function(){rl.DOM.unbind(document,"mouseup",n)})},IO=function(e){e.on("focusout",function(){Ax.store(e)})},MO=function(e,t){e.on("mouseup touchend",function(e){t.throttle()})},jO=function(e,t){ki.detect().browser.isIE()?IO(e):MO(e,t),e.on("keyup nodechange",function(t){PO(t)||Ax.store(e)})},BO=function(e){var t=Sl(function(){Ax.store(e)},0);e.inline&&OO(e,t),e.on("init",function(){jO(e,t)}),e.on("remove",function(){t.cancel()})},LO={register:BO},FO=rl.DOM,HO=function(e){return RO.isEditorUIElement(e)},$O=function(e,t){var n=e?e.settings.custom_ui_selector:"";return null!==FO.getParent(t,function(t){return HO(t)||!!n&&e.dom.is(t,n)})},UO=function(){try{return document.activeElement}catch(e){return document.body}},zO=function(e,t){var n=t.editor;LO.register(n),n.on("focusin",function(){var t=this,n=e.focusedEditor;n!==t&&(n&&n.fire("blur",{focusedEditor:t}),e.setActive(t),e.focusedEditor=t,t.fire("focus",{blurredEditor:n}),t.focus(!0))}),n.on("focusout",function(){var t=this;Rt.setEditorTimeout(t,function(){var n=e.focusedEditor;$O(t,UO())||n!==t||(t.fire("blur",{focusedEditor:null}),e.focusedEditor=null)})}),DO||(DO=function(t){var n,r=e.activeEditor;n=t.target,r&&n.ownerDocument===document&&(n===document.body||$O(r,n)||e.focusedEditor!==r||(r.fire("blur",{focusedEditor:null}),e.focusedEditor=null))},FO.bind(document,"focusin",DO))},WO=function(e,t){e.focusedEditor===t.editor&&(e.focusedEditor=null),e.activeEditor||(FO.unbind(document,"focusin",DO),DO=null)},qO=function(e){e.on("AddEditor",me(zO,e)),e.on("RemoveEditor",me(WO,e))},VO={setup:qO,isEditorUIElement:HO,isUIElement:$O},YO={},GO="en",KO={setCode:function(e){e&&(GO=e,this.rtl=!!this.data[e]&&"rtl"===this.data[e]._dir)},getCode:function(){return GO},rtl:!1,add:function(e,t){var n=YO[e];n||(YO[e]=n={});for(var r in t)n[r]=t[r];this.setCode(e)},translate:function(e){var t=YO[GO]||{},n=function(e){return gr.is(e,"function")?Object.prototype.toString.call(e):r(e)?"":""+e},r=function(e){return""===e||null===e||gr.is(e,"undefined")},i=function(e){return e=n(e),gr.hasOwn(t,e)?n(t[e]):e};if(r(e))return"";if(gr.is(e,"object")&&gr.hasOwn(e,"raw"))return n(e.raw);if(gr.is(e,"array")){var o=e.slice(1);e=i(e[0]).replace(/\{([0-9]+)\}/g,function(e,t){return gr.hasOwn(o,t)?n(o[t]):e})}return i(e).replace(/{context:\w+}$/,"")},data:YO},XO=rl.DOM,JO=gr.explode,QO=gr.each,ZO=gr.extend,eI=0,tI=!1,nI=[],rI=[],iI=function(e){return"length"!==e},oI=function(e){QO(NO.get(),function(t){"scroll"===e.type?t.fire("ScrollWindow",e):t.fire("ResizeWindow",e)})},aI=function(e){e!==tI&&(e?Mr(window).on("resize scroll",oI):Mr(window).off("resize scroll",oI),tI=e)},sI=function(e){var t=rI;delete nI[e.id];for(var n=0;n<nI.length;n++)if(nI[n]===e){nI.splice(n,1);break}return rI=We(rI,function(t){return e!==t}),NO.activeEditor===e&&(NO.activeEditor=rI.length>0?rI[0]:null),NO.focusedEditor===e&&(NO.focusedEditor=null),t.length!==rI.length},lI=function(e){return e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(sI(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0,e=null),e};NO={defaultSettings:{},$:Mr,majorVersion:"4",minorVersion:"8.2",releaseDate:"2018-08-09",editors:nI,i18n:KO,activeEditor:null,settings:{},setup:function(){var e,t,n,r,i=this,o="";if(t=tO.getDocumentBaseUrl(document.location),/^[^:]+:\/\/\/?[^\/]+\//.test(t)&&(t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/")),n=window.tinymce||window.tinyMCEPreInit)e=n.base||n.baseURL,o=n.suffix;else{for(var a=document.getElementsByTagName("script"),s=0;s<a.length;s++){r=a[s].src;var l=r.substring(r.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(r)){-1!==l.indexOf(".min")&&(o=".min"),e=r.substring(0,r.lastIndexOf("/"));break}}!e&&document.currentScript&&(r=document.currentScript.src,-1!==r.indexOf(".min")&&(o=".min"),e=r.substring(0,r.lastIndexOf("/")))}i.baseURL=new tO(t).toAbsolute(e),i.documentBaseURL=t,i.baseURI=new tO(i.baseURL),i.suffix=o,VO.setup(i)},overrideDefaults:function(e){var t,n;t=e.base_url,t&&(this.baseURL=new tO(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,"")),this.baseURI=new tO(this.baseURL)),n=e.suffix,e.suffix&&(this.suffix=n),this.defaultSettings=e;var r=e.plugin_base_urls;for(var i in r)w.PluginManager.urls[i]=r[i]},init:function(e){var t,n,r=this;n=gr.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option tbody tfoot thead tr script noscript style textarea video audio iframe object menu"," ");var i=function(e,t){return e.inline&&t.tagName.toLowerCase()in n},o=function(e){var t=e.id;return t||(t=e.name,t=t&&!XO.get(t)?e.name:XO.uniqueId(),e.setAttribute("id",t)),t},a=function(t){var n=e[t];if(n)return n.apply(r,Array.prototype.slice.call(arguments,2))},s=function(e,t){return t.constructor===RegExp?t.test(e.className):XO.hasClass(e,t)},l=function(e){var t,n=[];if(Ct.ie&&Ct.ie<11)return sk.initError("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/"),[];if(e.types)return QO(e.types,function(e){n=n.concat(XO.select(e.selector))}),n;if(e.selector)return XO.select(e.selector);if(e.target)return[e.target];switch(e.mode){case"exact":t=e.elements||"",t.length>0&&QO(JO(t),function(e){var t;(t=XO.get(e))?n.push(t):QO(document.forms,function(t){QO(t.elements,function(t){t.name===e&&(e="mce_editor_"+eI++,XO.setAttrib(t,"id",e),n.push(t))})})});break;case"textareas":case"specific_textareas":QO(XO.select("textarea"),function(t){e.editor_deselector&&s(t,e.editor_deselector)||e.editor_selector&&!s(t,e.editor_selector)||n.push(t)})}return n},c=function(e){t=e},u=function(){var t,n=0,s=[],d=function(e,i,o){var a=new SO(e,i,r);s.push(a),a.on("init",function(){++n===t.length&&c(s)}),a.targetElm=a.targetElm||o,a.render()};if(XO.unbind(window,"ready",u),a("onpageload"),t=Mr.unique(l(e)),e.types)return void QO(e.types,function(n){gr.each(t,function(t){return!XO.is(t,n.selector)||(d(o(t),ZO({},e,n),t),!1)})});gr.each(t,function(e){lI(r.get(e.id))}),t=gr.grep(t,function(e){return!r.get(e.id)}),0===t.length?c([]):QO(t,function(t){i(e,t)?sk.initError("Could not initialize inline editor on invalid inline target element",t):d(o(t),e,t)})};return r.settings=e,XO.bind(window,"ready",u),new kt(function(e){t?e(t):c=function(t){e(t)}})},get:function(e){return 0===arguments.length?rI.slice(0):Ne(e)?Ye(rI,function(t){return t.id===e}).getOr(null):Me(e)&&rI[e]?rI[e]:null},add:function(e){var t=this;return nI[e.id]===e?e:(null===t.get(e.id)&&(iI(e.id)&&(nI[e.id]=e),nI.push(e),rI.push(e)),aI(!0),t.activeEditor=e,t.fire("AddEditor",{editor:e}),EO||(EO=function(){t.fire("BeforeUnload")},XO.bind(window,"beforeunload",EO)),e)},createEditor:function(e,t){return this.add(new SO(e,t,this))},remove:function(e){var t,n,r=this;if(e)return Ne(e)?void QO(XO.select(e),function(e){(n=r.get(e.id))&&r.remove(n)}):(n=e,Pe(r.get(n.id))?null:(sI(n)&&r.fire("RemoveEditor",{editor:n}),0===rI.length&&XO.unbind(window,"beforeunload",EO),n.remove(),aI(rI.length>0),n));for(t=rI.length-1;t>=0;t--)r.remove(rI[t])},execCommand:function(e,t,n){var r=this,i=r.get(n);switch(e){case"mceAddEditor":return r.get(n)||new SO(n,r.settings,r).render(),!0;case"mceRemoveEditor":return i&&i.remove(),!0;case"mceToggleEditor":return i?(i.isHidden()?i.show():i.hide(),!0):(r.execCommand("mceAddEditor",0,n),!0)}return!!r.activeEditor&&r.activeEditor.execCommand(e,t,n)},triggerSave:function(){QO(rI,function(e){e.save()})},addI18n:function(e,t){KO.add(e,t)},translate:function(e){return KO.translate(e)},setActive:function(e){var t=this.activeEditor;this.activeEditor!==e&&(t&&t.fire("deactivate",{relatedTarget:e}),e.fire("activate",{relatedTarget:t})),this.activeEditor=e}},ZO(NO,$x),NO.setup();var cI=NO;!function(e){e.compareRanges=R_.isEq,e.getCaretRangeFromPoint=hN.fromPoint,e.getSelectedNode=qu,e.getNode=Vu}(Q||(Q={}));var uI,dI,fI=Q,hI=Math.min,pI=Math.max,gI=Math.round,mI=function(e,t,n){var r,i,o,a,s,l;return r=t.x,i=t.y,o=e.w,a=e.h,s=t.w,l=t.h,n=(n||"").split(""),"b"===n[0]&&(i+=l),"r"===n[1]&&(r+=s),"c"===n[0]&&(i+=gI(l/2)),"c"===n[1]&&(r+=gI(s/2)),"b"===n[3]&&(i-=a),"r"===n[4]&&(r-=o),"c"===n[3]&&(i-=gI(a/2)),"c"===n[4]&&(r-=gI(o/2)),_I(r,i,o,a)},vI=function(e,t,n,r){var i,o;for(o=0;o<r.length;o++)if(i=mI(e,t,r[o]),i.x>=n.x&&i.x+i.w<=n.w+n.x&&i.y>=n.y&&i.y+i.h<=n.h+n.y)return r[o];return null},bI=function(e,t,n){return _I(e.x-t,e.y-n,e.w+2*t,e.h+2*n)},yI=function(e,t){var n,r,i,o;return n=pI(e.x,t.x),r=pI(e.y,t.y),i=hI(e.x+e.w,t.x+t.w),o=hI(e.y+e.h,t.y+t.h),i-n<0||o-r<0?null:_I(n,r,i-n,o-r)},wI=function(e,t,n){var r,i,o,a,s,l,c,u,d,f;return s=e.x,l=e.y,c=e.x+e.w,u=e.y+e.h,d=t.x+t.w,f=t.y+t.h,r=pI(0,t.x-s),i=pI(0,t.y-l),o=pI(0,c-d),a=pI(0,u-f),s+=r,l+=i,n&&(c+=r,u+=i,s-=o,l-=a),c-=o,u-=a,_I(s,l,c-s,u-l)},_I=function(e,t,n,r){return{x:e,y:t,w:n,h:r}},xI=function(e){return _I(e.left,e.top,e.width,e.height)},CI={inflate:bI,relativePosition:mI,findBestRelativePosition:vI,intersect:yI,clamp:wI,create:_I,fromClientRect:xI},kI={},TI={add:function(e,t){kI[e.toLowerCase()]=t},has:function(e){return!!kI[e.toLowerCase()]},get:function(e){var t=e.toLowerCase(),n=kI.hasOwnProperty(t)?kI[t]:null;if(null===n)throw new Error("Could not find module for type: "+e);return n},create:function(e,t){var n;if("string"==typeof e?(t=t||{},t.type=e):(t=e,e=t.type),e=e.toLowerCase(),!(n=kI[e]))throw new Error("Could not find control by type: "+e);return n=new n(t),n.type=e,n}},SI=gr.each,DI=gr.extend,EI=function(){};EI.extend=uI=function(e){var t,n,r,i=this,o=i.prototype,a=function(){var e,t,n,r=this;if(!dI&&(r.init&&r.init.apply(r,arguments),t=r.Mixins))for(e=t.length;e--;)n=t[e],n.init&&n.init.apply(r,arguments)},s=function(){return this};dI=!0,t=new i,dI=!1,e.Mixins&&(SI(e.Mixins,function(t){for(var n in t)"init"!==n&&(e[n]=t[n])}),o.Mixins&&(e.Mixins=o.Mixins.concat(e.Mixins))),e.Methods&&SI(e.Methods.split(","),function(t){e[t]=s}),e.Properties&&SI(e.Properties.split(","),function(t){var n="_"+t;e[t]=function(e){var t=this;return void 0!==e?(t[n]=e,t):t[n]}}),e.Statics&&SI(e.Statics,function(e,t){a[t]=e}),e.Defaults&&o.Defaults&&(e.Defaults=DI({},o.Defaults,e.Defaults));for(n in e)r=e[n],"function"==typeof r&&o[n]?t[n]=function(e,t){return function(){var n,r=this,i=r._super;return r._super=o[e],n=t.apply(r,arguments),r._super=i,n}}(n,r):t[n]=r;return a.prototype=t,a.constructor=a,a.extend=uI,a};var NI=Math.min,AI=Math.max,RI=Math.round,PI=function(e){var t={},n=0,r=0,i=0,o=function(e,t,n){var r,i,o,a,s,l;return r=0,i=0,o=0,e/=255,t/=255,n/=255,s=NI(e,NI(t,n)),l=AI(e,AI(t,n)),s===l?(o=s,{h:0,s:0,v:100*o}):(a=e===s?t-n:n===s?e-t:n-e,r=e===s?3:n===s?1:5,r=60*(r-a/(l-s)),i=(l-s)/l,o=l,{h:RI(r),s:RI(100*i),v:RI(100*o)})},a=function(e,t,o){var a,s,l,c;if(e=(parseInt(e,10)||0)%360,t=parseInt(t,10)/100,o=parseInt(o,10)/100,t=AI(0,NI(t,1)),o=AI(0,NI(o,1)),0===t)return void(n=r=i=RI(255*o));switch(a=e/60,s=o*t,l=s*(1-Math.abs(a%2-1)),c=o-s,Math.floor(a)){case 0:n=s,r=l,i=0;break;case 1:n=l,r=s,i=0;break;case 2:n=0,r=s,i=l;break;case 3:n=0,r=l,i=s;break;case 4:n=l,r=0,i=s;break;case 5:n=s,r=0,i=l;break;default:n=r=i=0}n=RI(255*(n+c)),r=RI(255*(r+c)),i=RI(255*(i+c))},s=function(){var e=function(e){return e=parseInt(e,10).toString(16),e.length>1?e:"0"+e};return"#"+e(n)+e(r)+e(i)},l=function(){return{r:n,g:r,b:i}},c=function(){return o(n,r,i)},u=function(e){var o;return"object"==typeof e?"r"in e?(n=e.r,r=e.g,i=e.b):"v"in e&&a(e.h,e.s,e.v):(o=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(e))?(n=parseInt(o[1],10),r=parseInt(o[2],10),i=parseInt(o[3],10)):(o=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(e))?(n=parseInt(o[1],16),r=parseInt(o[2],16),i=parseInt(o[3],16)):(o=/#([0-F])([0-F])([0-F])/gi.exec(e))&&(n=parseInt(o[1]+o[1],16),r=parseInt(o[2]+o[2],16),i=parseInt(o[3]+o[3],16)),n=n<0?0:n>255?255:n,r=r<0?0:r>255?255:r,i=i<0?0:i>255?255:i,t};return e&&u(e),t.toRgb=l,t.toHsv=c,t.toHex=s,t.parse=u,t},OI=function(e,t){var n,r,i,o;if(t=t||'"',null===e)return"null";if("string"===(i=typeof e))return r="\bb\tt\nn\ff\rr\"\"''\\\\",t+e.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(e,i){return'"'===t&&"'"===e?e:(n=r.indexOf(i))+1?"\\"+r.charAt(n+1):(e=i.charCodeAt().toString(16),"\\u"+"0000".substring(e.length)+e)})+t;if("object"===i){if(e.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(e)){for(n=0,r="[";n<e.length;n++)r+=(n>0?",":"")+OI(e[n],t);return r+"]"}r="{";for(o in e)e.hasOwnProperty(o)&&(r+="function"!=typeof e[o]?(r.length>1?","+t:t)+o+t+":"+OI(e[o],t):"");return r+"}"}return""+e},II={serialize:OI,parse:function(e){try{return JSON.parse(e)}catch(e){}}},MI={callbacks:{},count:0,send:function(e){var t=this,n=rl.DOM,r=void 0!==e.count?e.count:t.count,i="tinymce_jsonp_"+r;t.callbacks[r]=function(o){n.remove(i),delete t.callbacks[r],e.callback(o)},n.add(n.doc.body,"script",{id:i,src:e.url,type:"text/javascript"}),t.count++}},jI={send:function(e){var t,n=0,r=function(){!e.async||4===t.readyState||n++>1e4?(e.success&&n<1e4&&200===t.status?e.success.call(e.success_scope,""+t.responseText,t,e):e.error&&e.error.call(e.error_scope,n>1e4?"TIMED_OUT":"GENERAL",t,e),t=null):setTimeout(r,10)};if(e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e.async=!1!==e.async,e.data=e.data||"",jI.fire("beforeInitialize",{settings:e}),t=new O){if(t.overrideMimeType&&t.overrideMimeType(e.content_type),t.open(e.type||(e.data?"POST":"GET"),e.url,e.async),e.crossDomain&&(t.withCredentials=!0),e.content_type&&t.setRequestHeader("Content-Type",e.content_type),e.requestheaders&&gr.each(e.requestheaders,function(e){t.setRequestHeader(e.key,e.value)}),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t=jI.fire("beforeSend",{xhr:t,settings:e}).xhr,t.send(e.data),!e.async)return r();setTimeout(r,10)}}};gr.extend(jI,$x);var BI=gr.extend,LI=function(e){this.settings=BI({},e),this.count=0};LI.sendRPC=function(e){return(new LI).send(e)},LI.prototype={send:function(e){var t=e.error,n=e.success;e=BI(this.settings,e),e.success=function(r,i){r=II.parse(r),void 0===r&&(r={error:"JSON Parse error."}),r.error?t.call(e.error_scope||e.scope,r.error,i):n.call(e.success_scope||e.scope,r.result)},e.error=function(n,r){t&&t.call(e.error_scope||e.scope,n,r)},e.data=II.serialize({id:e.id||"c"+this.count++,method:e.method,params:e.params}),e.content_type="application/json",jI.send(e)}};var FI;try{FI=window.localStorage}catch(e){FI=function(){return function(){var e={},t=[],n={getItem:function(t){var n=e[t];return n||null},setItem:function(n,r){t.push(n),e[n]=String(r)},key:function(e){return t[e]},removeItem:function(n){t=t.filter(function(e){return e===n}),delete e[n]},clear:function(){t=[],e={}},length:0};return Object.defineProperty(n,"length",{get:function(){return t.length},configurable:!1,enumerable:!1}),n}()}()}var HI=FI,$I=cI,UI={geom:{Rect:CI},util:{Promise:kt,Delay:Rt,Tools:gr,VK:zT,URI:tO,Class:EI,EventDispatcher:Lx,Observable:$x,I18n:KO,XHR:jI,JSON:II,JSONRequest:LI,JSONP:MI,LocalStorage:HI,Color:PI},dom:{EventUtils:Ut,Sizzle:qn,DomQuery:Mr,TreeWalker:m,DOMUtils:rl,ScriptLoader:ll,RangeUtils:fI,Serializer:K,ControlSelection:sN,BookmarkManager:rN,Selection:lA,Event:Ut.Event},html:{Styles:b,Entities:Bs,Node:FE,Schema:v,SaxParser:eS,DomParser:Y,Writer:T,Serializer:S},ui:{Factory:TI},Env:Ct,AddOnManager:w,Annotator:k,Formatter:V,UndoManager:W,EditorCommands:D,WindowManager:P,NotificationManager:A,EditorObservable:lC,Shortcuts:E,Editor:SO,FocusManager:RO,EditorManager:cI,DOM:rl.DOM,ScriptLoader:ll.ScriptLoader,PluginManager:w.PluginManager,ThemeManager:w.ThemeManager,trim:gr.trim,isArray:gr.isArray,is:gr.is,toArray:gr.toArray,makeMap:gr.makeMap,each:gr.each,map:gr.map,grep:gr.grep,inArray:gr.inArray,extend:gr.extend,create:gr.create,walk:gr.walk,createNS:gr.createNS,resolve:gr.resolve,explode:gr.explode,_addCacheSuffix:gr._addCacheSuffix,isOpera:Ct.opera,isWebKit:Ct.webkit,isIE:Ct.ie,isGecko:Ct.gecko,isMac:Ct.mac};$I=gr.extend($I,UI);var zI=$I;!function(e){window.tinymce=e,window.tinyMCE=e}(zI),function(e){if("object"==typeof module)try{module.exports=e}catch(e){}}(zI)}()}(),function(){!function(){"use strict";function e(){}var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.util.Tools"),r=function(e,t,n){var r="UL"===t?"InsertUnorderedList":"InsertOrderedList";e.execCommand(r,!1,!1===n?null:{"list-style-type":n})},i={applyListFormat:r},o=function(e){e.addCommand("ApplyUnorderedListStyle",function(t,n){i.applyListFormat(e,"UL",n["list-style-type"])}),e.addCommand("ApplyOrderedListStyle",function(t,n){i.applyListFormat(e,"OL",n["list-style-type"])})},a={register:o},s=function(e){var t=e.getParam("advlist_number_styles","default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman");return t?t.split(/[ ,]/):[]},l=function(e){var t=e.getParam("advlist_bullet_styles","default,circle,disc,square");return t?t.split(/[ ,]/):[]},c={getNumberStyles:s,getBulletStyles:l},u=function(e,t){return e.$.contains(e.getBody(),t)},d=function(e){return e&&/^(TH|TD)$/.test(e.nodeName)},f=function(e){return function(t){return t&&/^(OL|UL|DL)$/.test(t.nodeName)&&u(e,t)}},h=function(e){var t=e.dom.getParent(e.selection.getNode(),"ol,ul");return e.dom.getStyle(t,"listStyleType")||""},p={isTableCellNode:d,isListNode:f,getSelectedStyleType:h},g=function(e){return e.replace(/\-/g," ").replace(/\b\w/g,function(e){return e.toUpperCase()})},m=function(e){return n.map(e,function(e){return{text:g(e),data:"default"===e?"":e}})},v={toMenuItems:m},b=function(e,t){for(var n=0;n<e.length;n++){if(t(e[n]))return n}return-1},y=function(e,t){return function(r){var i=r.control;e.on("NodeChange",function(r){var o=b(r.parents,p.isTableCellNode),a=-1!==o?r.parents.slice(0,o):r.parents,s=n.grep(a,p.isListNode(e));i.active(s.length>0&&s[0].nodeName===t)})}},w=function(e){return function(t){var n=p.getSelectedStyleType(e);t.control.items().each(function(e){e.active(e.settings.data===n)})}},_=function(e,t,n,r,o,a){e.addButton(t,{active:!1,type:"splitbutton",tooltip:n,menu:v.toMenuItems(a),onPostRender:y(e,o),onshow:w(e),onselect:function(t){i.applyListFormat(e,o,t.control.settings.data)},onclick:function(){e.execCommand(r)}})},x=function(e,t,n,r,i,o){e.addButton(t,{active:!1,type:"button",tooltip:n,onPostRender:y(e,i),onclick:function(){e.execCommand(r)}})},C=function(e,t,n,r,i,o){o.length>0?_(e,t,n,r,i,o):x(e,t,n,r,i)},k=function(e){C(e,"numlist","Numbered list","InsertOrderedList","OL",c.getNumberStyles(e)),C(e,"bullist","Bullet list","InsertUnorderedList","UL",c.getBulletStyles(e))},T={register:k};t.add("advlist",function(e){(function(e,t){var r=e.settings.plugins?e.settings.plugins:"";return-1!==n.inArray(r.split(/[ ,]/),t)})(e,"lists")&&(T.register(e),a.register(e))})}()}(),function(){!function(){"use strict";function e(){}var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(e){return/^[A-Za-z][A-Za-z0-9\-:._]*$/.test(e)},r=function(e){var t=e.selection.getNode();return"A"===t.tagName&&""===e.dom.getAttrib(t,"href")?t.id||t.name:""},i=function(e,t){var n=e.selection.getNode();"A"===n.tagName&&""===e.dom.getAttrib(n,"href")?(n.removeAttribute("name"),n.id=t,e.undoManager.add()):(e.focus(),e.selection.collapse(!0),e.execCommand("mceInsertContent",!1,e.dom.createHTML("a",{id:t})))},o={isValidId:n,getId:r,insert:i},a=function(e,t){return o.isValidId(t)?(o.insert(e,t),!1):(e.windowManager.alert("Id should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores."),!0)},s=function(e){var t=o.getId(e);e.windowManager.open({title:"Anchor",body:{type:"textbox",name:"id",size:40,label:"Id",value:t},onsubmit:function(t){var n=t.data.id;a(e,n)&&t.preventDefault()}})},l={open:s},c=function(e){e.addCommand("mceAnchor",function(){l.open(e)})},u={register:c},d=function(e){return!e.attr("href")&&(e.attr("id")||e.attr("name"))&&!e.firstChild},f=function(e){return function(t){for(var n=0;n<t.length;n++)d(t[n])&&t[n].attr("contenteditable",e)}},h=function(e){e.on("PreInit",function(){e.parser.addNodeFilter("a",f("false")),e.serializer.addNodeFilter("a",f(null))})},p={setup:h},g=function(e){e.addButton("anchor",{icon:"anchor",tooltip:"Anchor",cmd:"mceAnchor",stateSelector:"a:not([href])"}),e.addMenuItem("anchor",{icon:"anchor",text:"Anchor",context:"insert",cmd:"mceAnchor"})},m={register:g};t.add("anchor",function(e){p.setup(e),u.register(e),m.register(e)})}()}(),function(){!function(){"use strict";function e(){}var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.Env"),r=function(e){return e.getParam("autolink_pattern",/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.|(?:mailto:)?[A-Z0-9._%+\-]+@)(.+)$/i)},i=function(e){return e.getParam("default_link_target","")},o={getAutoLinkPattern:r,getDefaultLinkTarget:i},a=function(e,t){return e===t||" "===e||160===e.charCodeAt(0)},s=function(e){h(e,-1,"(")},l=function(e){h(e,0,"")},c=function(e){h(e,-1,"")},u=function(e,t){if(t<0&&(t=0),3===e.nodeType){var n=e.data.length;t>n&&(t=n)}return t},d=function(e,t,n){1!==t.nodeType||t.hasChildNodes()?e.setStart(t,u(t,n)):e.setStartBefore(t)},f=function(e,t,n){1!==t.nodeType||t.hasChildNodes()?e.setEnd(t,u(t,n)):e.setEndAfter(t)},h=function(e,t,n){var r,i,s,l,c,u,h,p,g,m,v=o.getAutoLinkPattern(e),b=o.getDefaultLinkTarget(e);if("A"!==e.selection.getNode().tagName){if(r=e.selection.getRng(!0).cloneRange(),r.startOffset<5){if(!(p=r.endContainer.previousSibling)){if(!r.endContainer.firstChild||!r.endContainer.firstChild.nextSibling)return;p=r.endContainer.firstChild.nextSibling}if(g=p.length,d(r,p,g),f(r,p,g),r.endOffset<5)return;i=r.endOffset,l=p}else{if(l=r.endContainer,3!==l.nodeType&&l.firstChild){for(;3!==l.nodeType&&l.firstChild;)l=l.firstChild;3===l.nodeType&&(d(r,l,0),f(r,l,l.nodeValue.length))}i=1===r.endOffset?2:r.endOffset-1-t}s=i;do{d(r,l,i>=2?i-2:0),f(r,l,i>=1?i-1:0),i-=1,m=r.toString()}while(" "!==m&&""!==m&&160!==m.charCodeAt(0)&&i-2>=0&&m!==n);a(r.toString(),n)?(d(r,l,i),f(r,l,s),i+=1):0===r.startOffset?(d(r,l,0),f(r,l,s)):(d(r,l,i),f(r,l,s)),u=r.toString(),"."===u.charAt(u.length-1)&&f(r,l,s-1),u=r.toString().trim(),h=u.match(v),h&&("www."===h[1]?h[1]="http://www.":/@$/.test(h[1])&&!/^mailto:/.test(h[1])&&(h[1]="mailto:"+h[1]),c=e.selection.getBookmark(),e.selection.setRng(r),e.execCommand("createlink",!1,h[1]+h[2]),b&&e.dom.setAttrib(e.selection.getNode(),"target",b),e.selection.moveToBookmark(c),e.nodeChanged())}},p=function(e){var t;if(e.on("keydown",function(t){if(13===t.keyCode)return c(e)}),n.ie)return void e.on("focus",function(){if(!t){t=!0;try{e.execCommand("AutoUrlDetect",!1,!0)}catch(e){}}});e.on("keypress",function(t){if(41===t.keyCode)return s(e)}),e.on("keyup",function(t){if(32===t.keyCode)return l(e)})},g={setup:p};t.add("autolink",function(e){g.setup(e)})}()}(),function(){!function(){"use strict";function e(){}var t=function(e){var n=e,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return t(r())}}},n=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=tinymce.util.Tools.resolve("tinymce.Env"),i=tinymce.util.Tools.resolve("tinymce.util.Delay"),o=function(e){return parseInt(e.getParam("autoresize_min_height",e.getElement().offsetHeight),10)},a=function(e){return parseInt(e.getParam("autoresize_max_height",0),10)},s=function(e){return e.getParam("autoresize_overflow_padding",1)},l=function(e){return e.getParam("autoresize_bottom_margin",50)},c=function(e){return e.getParam("autoresize_on_init",!0)},u={getAutoResizeMinHeight:o,getAutoResizeMaxHeight:a,getAutoResizeOverflowPadding:s,getAutoResizeBottomMargin:l,shouldAutoResizeOnInit:c},d=function(e){return e.plugins.fullscreen&&e.plugins.fullscreen.isFullscreen()},f=function(e,t,n,r,o){i.setEditorTimeout(e,function(){p(e,t),n--?f(e,t,n,r,o):o&&o()},r)},h=function(e,t){var n=e.getBody();n&&(n.style.overflowY=t?"":"hidden",t||(n.scrollTop=0))},p=function(e,t){var n,i,o,a,s,l,c,f,g,m,v,b=e.dom;if(i=e.getDoc()){if(d(e))return void h(e,!0);o=i.body,a=u.getAutoResizeMinHeight(e),l=b.getStyle(o,"margin-top",!0),c=b.getStyle(o,"margin-bottom",!0),f=b.getStyle(o,"padding-top",!0),g=b.getStyle(o,"padding-bottom",!0),m=b.getStyle(o,"border-top-width",!0),v=b.getStyle(o,"border-bottom-width",!0),s=o.offsetHeight+parseInt(l,10)+parseInt(c,10)+parseInt(f,10)+parseInt(g,10)+parseInt(m,10)+parseInt(v,10),(isNaN(s)||s<=0)&&(s=r.ie?o.scrollHeight:r.webkit&&0===o.clientHeight?0:o.offsetHeight),s>u.getAutoResizeMinHeight(e)&&(a=s);var y=u.getAutoResizeMaxHeight(e);y&&s>y?(a=y,h(e,!0)):h(e,!1),a!==t.get()&&(n=a-t.get(),b.setStyle(e.iframeElement,"height",a+"px"),t.set(a),r.webkit&&n<0&&p(e,t))}},g=function(e,t){e.on("init",function(){var t,n,r=e.dom;t=u.getAutoResizeOverflowPadding(e),n=u.getAutoResizeBottomMargin(e),!1!==t&&r.setStyles(e.getBody(),{paddingLeft:t,paddingRight:t}),!1!==n&&r.setStyles(e.getBody(),{paddingBottom:n})}),e.on("nodechange setcontent keyup FullscreenStateChanged",function(n){p(e,t)}),u.shouldAutoResizeOnInit(e)&&e.on("init",function(){f(e,t,20,100,function(){f(e,t,5,1e3)})})},m={setup:g,resize:p},v=function(e,t){
e.addCommand("mceAutoResize",function(){m.resize(e,t)})},b={register:v};n.add("autoresize",function(e){if(!e.inline){var n=t(0);b.register(e,n),m.setup(e,n)}})}()}(),function(){!function(){"use strict";function e(){}var t=function(e){var n=e,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return t(r())}}},n=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=tinymce.util.Tools.resolve("tinymce.util.LocalStorage"),i=tinymce.util.Tools.resolve("tinymce.util.Tools"),o=function(e){return e.fire("RestoreDraft")},a=function(e){return e.fire("StoreDraft")},s=function(e){return e.fire("RemoveDraft")},l={fireRestoreDraft:o,fireStoreDraft:a,fireRemoveDraft:s},c=function(e,t){var n={s:1e3,m:6e4};return e=/^(\d+)([ms]?)$/.exec(""+(e||t)),(e[2]?n[e[2]]:1)*parseInt(e,10)},u={parse:c},d=function(e){return e.getParam("autosave_ask_before_unload",!0)},f=function(e){var t=e.getParam("autosave_prefix","tinymce-autosave-{path}{query}{hash}-{id}-");return t=t.replace(/\{path\}/g,document.location.pathname),t=t.replace(/\{query\}/g,document.location.search),t=t.replace(/\{hash\}/g,document.location.hash),t=t.replace(/\{id\}/g,e.id)},h=function(e){return e.getParam("autosave_restore_when_empty",!1)},p=function(e){return u.parse(e.settings.autosave_interval,"30s")},g=function(e){return u.parse(e.settings.autosave_retention,"20m")},m={shouldAskBeforeUnload:d,getAutoSavePrefix:f,shouldRestoreWhenEmpty:h,getAutoSaveInterval:p,getAutoSaveRetention:g},v=function(e,t){var n=e.settings.forced_root_block;return""===(t=i.trim(void 0===t?e.getBody().innerHTML:t))||new RegExp("^<"+n+"[^>]*>((|&nbsp;|[ \t]|<br[^>]*>)+?|)</"+n+">|<br>$","i").test(t)},b=function(e){var t=parseInt(r.getItem(m.getAutoSavePrefix(e)+"time"),10)||0;return!((new Date).getTime()-t>m.getAutoSaveRetention(e))||(y(e,!1),!1)},y=function(e,t){var n=m.getAutoSavePrefix(e);r.removeItem(n+"draft"),r.removeItem(n+"time"),!1!==t&&l.fireRemoveDraft(e)},w=function(e){var t=m.getAutoSavePrefix(e);!v(e)&&e.isDirty()&&(r.setItem(t+"draft",e.getContent({format:"raw",no_events:!0})),r.setItem(t+"time",(new Date).getTime().toString()),l.fireStoreDraft(e))},_=function(e){var t=m.getAutoSavePrefix(e);b(e)&&(e.setContent(r.getItem(t+"draft"),{format:"raw"}),l.fireRestoreDraft(e))},x=function(e,t){var n=m.getAutoSaveInterval(e);t.get()||(setInterval(function(){e.removed||w(e)},n),t.set(!0))},C=function(e){e.undoManager.transact(function(){_(e),y(e)}),e.focus()},k={isEmpty:v,hasDraft:b,removeDraft:y,storeDraft:w,restoreDraft:_,startStoreDraft:x,restoreLastDraft:C},T=function(e,t){return function(){var n=Array.prototype.slice.call(arguments);return e.apply(null,[t].concat(n))}},S=function(e){return{hasDraft:T(k.hasDraft,e),storeDraft:T(k.storeDraft,e),restoreDraft:T(k.restoreDraft,e),removeDraft:T(k.removeDraft,e),isEmpty:T(k.isEmpty,e)}},D={get:S},E=tinymce.util.Tools.resolve("tinymce.EditorManager");E._beforeUnloadHandler=function(){var e;return i.each(E.get(),function(t){t.plugins.autosave&&t.plugins.autosave.storeDraft(),!e&&t.isDirty()&&m.shouldAskBeforeUnload(t)&&(e=t.translate("You have unsaved changes are you sure you want to navigate away?"))}),e};var N=function(e){window.onbeforeunload=E._beforeUnloadHandler},A={setup:N},R=function(e,t){return function(n){var r=n.control;r.disabled(!k.hasDraft(e)),e.on("StoreDraft RestoreDraft RemoveDraft",function(){r.disabled(!k.hasDraft(e))}),k.startStoreDraft(e,t)}},P=function(e,t){e.addButton("restoredraft",{title:"Restore last draft",onclick:function(){k.restoreLastDraft(e)},onPostRender:R(e,t)}),e.addMenuItem("restoredraft",{text:"Restore last draft",onclick:function(){k.restoreLastDraft(e)},onPostRender:R(e,t),context:"file"})},O={register:P};n.add("autosave",function(e){var n=t(!1);return A.setup(e),O.register(e,n),D.get(e)})}()}(),function(){!function(){"use strict";function e(){}var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.util.Tools"),r=function(e){e=n.trim(e);var t=function(t,n){e=e.replace(t,n)};return t(/<a.*?href=\"(.*?)\".*?>(.*?)<\/a>/gi,"[url=$1]$2[/url]"),t(/<font.*?color=\"(.*?)\".*?class=\"codeStyle\".*?>(.*?)<\/font>/gi,"[code][color=$1]$2[/color][/code]"),t(/<font.*?color=\"(.*?)\".*?class=\"quoteStyle\".*?>(.*?)<\/font>/gi,"[quote][color=$1]$2[/color][/quote]"),t(/<font.*?class=\"codeStyle\".*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[code][color=$1]$2[/color][/code]"),t(/<font.*?class=\"quoteStyle\".*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[quote][color=$1]$2[/color][/quote]"),t(/<span style=\"color: ?(.*?);\">(.*?)<\/span>/gi,"[color=$1]$2[/color]"),t(/<font.*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[color=$1]$2[/color]"),t(/<span style=\"font-size:(.*?);\">(.*?)<\/span>/gi,"[size=$1]$2[/size]"),t(/<font>(.*?)<\/font>/gi,"$1"),t(/<img.*?src=\"(.*?)\".*?\/>/gi,"[img]$1[/img]"),t(/<span class=\"codeStyle\">(.*?)<\/span>/gi,"[code]$1[/code]"),t(/<span class=\"quoteStyle\">(.*?)<\/span>/gi,"[quote]$1[/quote]"),t(/<strong class=\"codeStyle\">(.*?)<\/strong>/gi,"[code][b]$1[/b][/code]"),t(/<strong class=\"quoteStyle\">(.*?)<\/strong>/gi,"[quote][b]$1[/b][/quote]"),t(/<em class=\"codeStyle\">(.*?)<\/em>/gi,"[code][i]$1[/i][/code]"),t(/<em class=\"quoteStyle\">(.*?)<\/em>/gi,"[quote][i]$1[/i][/quote]"),t(/<u class=\"codeStyle\">(.*?)<\/u>/gi,"[code][u]$1[/u][/code]"),t(/<u class=\"quoteStyle\">(.*?)<\/u>/gi,"[quote][u]$1[/u][/quote]"),t(/<\/(strong|b)>/gi,"[/b]"),t(/<(strong|b)>/gi,"[b]"),t(/<\/(em|i)>/gi,"[/i]"),t(/<(em|i)>/gi,"[i]"),t(/<\/u>/gi,"[/u]"),t(/<span style=\"text-decoration: ?underline;\">(.*?)<\/span>/gi,"[u]$1[/u]"),t(/<u>/gi,"[u]"),t(/<blockquote[^>]*>/gi,"[quote]"),t(/<\/blockquote>/gi,"[/quote]"),t(/<br \/>/gi,"\n"),t(/<br\/>/gi,"\n"),t(/<br>/gi,"\n"),t(/<p>/gi,""),t(/<\/p>/gi,"\n"),t(/&nbsp;|\u00a0/gi," "),t(/&quot;/gi,'"'),t(/&lt;/gi,"<"),t(/&gt;/gi,">"),t(/&amp;/gi,"&"),e},i=function(e){e=n.trim(e);var t=function(t,n){e=e.replace(t,n)};return t(/\n/gi,"<br />"),t(/\[b\]/gi,"<strong>"),t(/\[\/b\]/gi,"</strong>"),t(/\[i\]/gi,"<em>"),t(/\[\/i\]/gi,"</em>"),t(/\[u\]/gi,"<u>"),t(/\[\/u\]/gi,"</u>"),t(/\[url=([^\]]+)\](.*?)\[\/url\]/gi,'<a href="$1">$2</a>'),t(/\[url\](.*?)\[\/url\]/gi,'<a href="$1">$1</a>'),t(/\[img\](.*?)\[\/img\]/gi,'<img src="$1" />'),t(/\[color=(.*?)\](.*?)\[\/color\]/gi,'<font color="$1">$2</font>'),t(/\[code\](.*?)\[\/code\]/gi,'<span class="codeStyle">$1</span>&nbsp;'),t(/\[quote.*?\](.*?)\[\/quote\]/gi,'<span class="quoteStyle">$1</span>&nbsp;'),e},o={html2bbcode:r,bbcode2html:i};t.add("bbcode",function(){return{init:function(e){e.on("beforeSetContent",function(e){e.content=o.bbcode2html(e.content)}),e.on("postProcess",function(e){e.set&&(e.content=o.bbcode2html(e.content)),e.get&&(e.content=o.html2bbcode(e.content))})}}})}()}(),function(){!function(){"use strict";function e(){}var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(e,t){return e.fire("insertCustomChar",{chr:t})},r={fireInsertCustomChar:n},i=function(e,t){var n=r.fireInsertCustomChar(e,t).chr;e.execCommand("mceInsertContent",!1,n)},o={insertChar:i},a=tinymce.util.Tools.resolve("tinymce.util.Tools"),s=function(e){return e.settings.charmap},l=function(e){return e.settings.charmap_append},c={getCharMap:s,getCharMapAppend:l},u=a.isArray,d=function(){return[["160","no-break space"],["173","soft hyphen"],["34","quotation mark"],["162","cent sign"],["8364","euro sign"],["163","pound sign"],["165","yen sign"],["169","copyright sign"],["174","registered sign"],["8482","trade mark sign"],["8240","per mille sign"],["181","micro sign"],["183","middle dot"],["8226","bullet"],["8230","three dot leader"],["8242","minutes / feet"],["8243","seconds / inches"],["167","section sign"],["182","paragraph sign"],["223","sharp s / ess-zed"],["8249","single left-pointing angle quotation mark"],["8250","single right-pointing angle quotation mark"],["171","left pointing guillemet"],["187","right pointing guillemet"],["8216","left single quotation mark"],["8217","right single quotation mark"],["8220","left double quotation mark"],["8221","right double quotation mark"],["8218","single low-9 quotation mark"],["8222","double low-9 quotation mark"],["60","less-than sign"],["62","greater-than sign"],["8804","less-than or equal to"],["8805","greater-than or equal to"],["8211","en dash"],["8212","em dash"],["175","macron"],["8254","overline"],["164","currency sign"],["166","broken bar"],["168","diaeresis"],["161","inverted exclamation mark"],["191","turned question mark"],["710","circumflex accent"],["732","small tilde"],["176","degree sign"],["8722","minus sign"],["177","plus-minus sign"],["247","division sign"],["8260","fraction slash"],["215","multiplication sign"],["185","superscript one"],["178","superscript two"],["179","superscript three"],["188","fraction one quarter"],["189","fraction one half"],["190","fraction three quarters"],["402","function / florin"],["8747","integral"],["8721","n-ary sumation"],["8734","infinity"],["8730","square root"],["8764","similar to"],["8773","approximately equal to"],["8776","almost equal to"],["8800","not equal to"],["8801","identical to"],["8712","element of"],["8713","not an element of"],["8715","contains as member"],["8719","n-ary product"],["8743","logical and"],["8744","logical or"],["172","not sign"],["8745","intersection"],["8746","union"],["8706","partial differential"],["8704","for all"],["8707","there exists"],["8709","diameter"],["8711","backward difference"],["8727","asterisk operator"],["8733","proportional to"],["8736","angle"],["180","acute accent"],["184","cedilla"],["170","feminine ordinal indicator"],["186","masculine ordinal indicator"],["8224","dagger"],["8225","double dagger"],["192","A - grave"],["193","A - acute"],["194","A - circumflex"],["195","A - tilde"],["196","A - diaeresis"],["197","A - ring above"],["256","A - macron"],["198","ligature AE"],["199","C - cedilla"],["200","E - grave"],["201","E - acute"],["202","E - circumflex"],["203","E - diaeresis"],["274","E - macron"],["204","I - grave"],["205","I - acute"],["206","I - circumflex"],["207","I - diaeresis"],["298","I - macron"],["208","ETH"],["209","N - tilde"],["210","O - grave"],["211","O - acute"],["212","O - circumflex"],["213","O - tilde"],["214","O - diaeresis"],["216","O - slash"],["332","O - macron"],["338","ligature OE"],["352","S - caron"],["217","U - grave"],["218","U - acute"],["219","U - circumflex"],["220","U - diaeresis"],["362","U - macron"],["221","Y - acute"],["376","Y - diaeresis"],["562","Y - macron"],["222","THORN"],["224","a - grave"],["225","a - acute"],["226","a - circumflex"],["227","a - tilde"],["228","a - diaeresis"],["229","a - ring above"],["257","a - macron"],["230","ligature ae"],["231","c - cedilla"],["232","e - grave"],["233","e - acute"],["234","e - circumflex"],["235","e - diaeresis"],["275","e - macron"],["236","i - grave"],["237","i - acute"],["238","i - circumflex"],["239","i - diaeresis"],["299","i - macron"],["240","eth"],["241","n - tilde"],["242","o - grave"],["243","o - acute"],["244","o - circumflex"],["245","o - tilde"],["246","o - diaeresis"],["248","o slash"],["333","o macron"],["339","ligature oe"],["353","s - caron"],["249","u - grave"],["250","u - acute"],["251","u - circumflex"],["252","u - diaeresis"],["363","u - macron"],["253","y - acute"],["254","thorn"],["255","y - diaeresis"],["563","y - macron"],["913","Alpha"],["914","Beta"],["915","Gamma"],["916","Delta"],["917","Epsilon"],["918","Zeta"],["919","Eta"],["920","Theta"],["921","Iota"],["922","Kappa"],["923","Lambda"],["924","Mu"],["925","Nu"],["926","Xi"],["927","Omicron"],["928","Pi"],["929","Rho"],["931","Sigma"],["932","Tau"],["933","Upsilon"],["934","Phi"],["935","Chi"],["936","Psi"],["937","Omega"],["945","alpha"],["946","beta"],["947","gamma"],["948","delta"],["949","epsilon"],["950","zeta"],["951","eta"],["952","theta"],["953","iota"],["954","kappa"],["955","lambda"],["956","mu"],["957","nu"],["958","xi"],["959","omicron"],["960","pi"],["961","rho"],["962","final sigma"],["963","sigma"],["964","tau"],["965","upsilon"],["966","phi"],["967","chi"],["968","psi"],["969","omega"],["8501","alef symbol"],["982","pi symbol"],["8476","real part symbol"],["978","upsilon - hook symbol"],["8472","Weierstrass p"],["8465","imaginary part"],["8592","leftwards arrow"],["8593","upwards arrow"],["8594","rightwards arrow"],["8595","downwards arrow"],["8596","left right arrow"],["8629","carriage return"],["8656","leftwards double arrow"],["8657","upwards double arrow"],["8658","rightwards double arrow"],["8659","downwards double arrow"],["8660","left right double arrow"],["8756","therefore"],["8834","subset of"],["8835","superset of"],["8836","not a subset of"],["8838","subset of or equal to"],["8839","superset of or equal to"],["8853","circled plus"],["8855","circled times"],["8869","perpendicular"],["8901","dot operator"],["8968","left ceiling"],["8969","right ceiling"],["8970","left floor"],["8971","right floor"],["9001","left-pointing angle bracket"],["9002","right-pointing angle bracket"],["9674","lozenge"],["9824","black spade suit"],["9827","black club suit"],["9829","black heart suit"],["9830","black diamond suit"],["8194","en space"],["8195","em space"],["8201","thin space"],["8204","zero width non-joiner"],["8205","zero width joiner"],["8206","left-to-right mark"],["8207","right-to-left mark"]]},f=function(e){return a.grep(e,function(e){return u(e)&&2===e.length})},h=function(e){return u(e)?[].concat(f(e)):"function"==typeof e?e():[]},p=function(e,t){var n=c.getCharMap(e);n&&(t=h(n));var r=c.getCharMapAppend(e);return r?[].concat(t).concat(h(r)):t},g=function(e){return p(e,d())},m={getCharMap:g},v=function(e){return{getCharMap:function(){return m.getCharMap(e)},insertChar:function(t){o.insertChar(e,t)}}},b={get:v},y=function(e){var t,n,r,i=Math.min(e.length,25),o=Math.ceil(e.length/i);for(t='<table role="presentation" cellspacing="0" class="mce-charmap"><tbody>',r=0;r<o;r++){for(t+="<tr>",n=0;n<i;n++){var a=r*i+n;if(a<e.length){var s=e[a],l=parseInt(s[0],10),c=s?String.fromCharCode(l):"&nbsp;";t+='<td title="'+s[1]+'"><div tabindex="-1" title="'+s[1]+'" role="button" data-chr="'+l+'">'+c+"</div></td>"}else t+="<td />"}t+="</tr>"}return t+="</tbody></table>"},w={getHtml:y},_=function(e){for(;e;){if("TD"===e.nodeName)return e;e=e.parentNode}},x=function(e){var t,n={type:"container",html:w.getHtml(m.getCharMap(e)),onclick:function(n){var r=n.target;if(/^(TD|DIV)$/.test(r.nodeName)){var i=_(r).firstChild;if(i&&i.hasAttribute("data-chr")){var a=i.getAttribute("data-chr"),s=parseInt(a,10);isNaN(s)||o.insertChar(e,String.fromCharCode(s)),n.ctrlKey||t.close()}}},onmouseover:function(e){var n=_(e.target);n&&n.firstChild?(t.find("#preview").text(n.firstChild.firstChild.data),t.find("#previewTitle").text(n.title)):(t.find("#preview").text(" "),t.find("#previewTitle").text(" "))}};t=e.windowManager.open({title:"Special character",spacing:10,padding:10,items:[n,{type:"container",layout:"flex",direction:"column",align:"center",spacing:5,minWidth:160,minHeight:160,items:[{type:"label",name:"preview",text:" ",style:"font-size: 40px; text-align: center",border:1,minWidth:140,minHeight:80},{type:"spacer",minHeight:20},{type:"label",name:"previewTitle",text:" ",style:"white-space: pre-wrap;",border:1,minWidth:140}]}],buttons:[{text:"Close",onclick:function(){t.close()}}]})},C={open:x},k=function(e){e.addCommand("mceShowCharmap",function(){C.open(e)})},T={register:k},S=function(e){e.addButton("charmap",{icon:"charmap",tooltip:"Special character",cmd:"mceShowCharmap"}),e.addMenuItem("charmap",{icon:"charmap",text:"Special character",cmd:"mceShowCharmap",context:"insert"})},D={register:S};t.add("charmap",function(e){return T.register(e),D.register(e),b.get(e)})}()}(),function(){!function(){"use strict";function e(){}var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),r=function(e){return e.getParam("code_dialog_width",600)},i=function(e){return e.getParam("code_dialog_height",Math.min(n.DOM.getViewPort().h-200,500))},o={getMinWidth:r,getMinHeight:i},a=function(e,t){e.focus(),e.undoManager.transact(function(){e.setContent(t)}),e.selection.setCursorLocation(),e.nodeChanged()},s=function(e){return e.getContent({source_view:!0})},l={setContent:a,getContent:s},c=function(e){var t=o.getMinWidth(e),n=o.getMinHeight(e);e.windowManager.open({title:"Source code",body:{type:"textbox",name:"code",multiline:!0,minWidth:t,minHeight:n,spellcheck:!1,style:"direction: ltr; text-align: left"},onSubmit:function(t){l.setContent(e,t.data.code)}}).find("#code").value(l.getContent(e))},u={open:c},d=function(e){e.addCommand("mceCodeEditor",function(){u.open(e)})},f={register:d},h=function(e){e.addButton("code",{icon:"code",tooltip:"Source code",onclick:function(){u.open(e)}}),e.addMenuItem("code",{icon:"code",text:"Source code",onclick:function(){u.open(e)}})},p={register:h};t.add("code",function(e){return f.register(e),p.register(e),{}})}()}(),function(){!function(){"use strict";function e(e){return e&&"PRE"===e.nodeName&&-1!==e.className.indexOf("language-")}function t(e){return function(t,n){return e(n)}}function n(){}var r=function(e){var t=e,n=function(){return t};return{get:n,set:function(e){t=e},clone:function(){return r(n())}}},i=tinymce.util.Tools.resolve("tinymce.PluginManager"),o=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),a=function(e){return e.settings.codesample_content_css},s=function(e){return e.settings.codesample_languages},l=function(e){return Math.min(o.DOM.getViewPort().w,e.getParam("codesample_dialog_width",800))},c=function(e){return Math.min(o.DOM.getViewPort().w,e.getParam("codesample_dialog_height",650))},u={getContentCss:a,getLanguages:s,getDialogMinWidth:l,getDialogMinHeight:c},d={},f=d,h=void 0!==d?d:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},p=function(){var e=/\blang(?:uage)?-(?!\*)(\w+)\b/i,t=h.Prism={util:{encode:function(e){return e instanceof n?new n(e.type,t.util.encode(e.content),e.alias):"Array"===t.util.type(e)?e.map(t.util.encode):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1]},clone:function(e){switch(t.util.type(e)){case"Object":var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=t.util.clone(e[r]));return n;case"Array":return e.map&&e.map(function(e){return t.util.clone(e)})}return e}},languages:{extend:function(e,n){var r=t.util.clone(t.languages[e]);for(var i in n)r[i]=n[i];return r},insertBefore:function(e,n,r,i){i=i||t.languages;var o=i[e];if(2===arguments.length){r=arguments[1];for(var a in r)r.hasOwnProperty(a)&&(o[a]=r[a]);return o}var s={};for(var l in o)if(o.hasOwnProperty(l)){if(l===n)for(var a in r)r.hasOwnProperty(a)&&(s[a]=r[a]);s[l]=o[l]}return t.languages.DFS(t.languages,function(t,n){n===i[e]&&t!==e&&(this[t]=s)}),i[e]=s},DFS:function(e,n,r){for(var i in e)e.hasOwnProperty(i)&&(n.call(e,i,e[i],r||i),"Object"===t.util.type(e[i])?t.languages.DFS(e[i],n):"Array"===t.util.type(e[i])&&t.languages.DFS(e[i],n,i))}},plugins:{},highlightAll:function(e,n){for(var r=document.querySelectorAll('code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'),i=0,o=void 0;o=r[i++];)t.highlightElement(o,!0===e,n)},highlightElement:function(n,r,i){for(var o,a,s=n;s&&!e.test(s.className);)s=s.parentNode;s&&(o=(s.className.match(e)||[,""])[1],a=t.languages[o]),n.className=n.className.replace(e,"").replace(/\s+/g," ")+" language-"+o,s=n.parentNode,/pre/i.test(s.nodeName)&&(s.className=s.className.replace(e,"").replace(/\s+/g," ")+" language-"+o);var l=n.textContent,c={element:n,language:o,grammar:a,code:l};if(!l||!a)return void t.hooks.run("complete",c);if(t.hooks.run("before-highlight",c),r&&h.Worker){var u=new Worker(t.filename);u.onmessage=function(e){c.highlightedCode=e.data,t.hooks.run("before-insert",c),c.element.innerHTML=c.highlightedCode,i&&i.call(c.element),t.hooks.run("after-highlight",c),t.hooks.run("complete",c)},u.postMessage(JSON.stringify({language:c.language,code:c.code,immediateClose:!0}))}else c.highlightedCode=t.highlight(c.code,c.grammar,c.language),t.hooks.run("before-insert",c),c.element.innerHTML=c.highlightedCode,i&&i.call(n),t.hooks.run("after-highlight",c),t.hooks.run("complete",c)},highlight:function(e,r,i){var o=t.tokenize(e,r);return n.stringify(t.util.encode(o),i)},tokenize:function(e,n,r){var i=t.Token,o=[e],a=n.rest;if(a){for(var s in a)n[s]=a[s];delete n.rest}e:for(var s in n)if(n.hasOwnProperty(s)&&n[s]){var l=n[s];l="Array"===t.util.type(l)?l:[l];for(var c=0;c<l.length;++c){var u=l[c],d=u.inside,f=!!u.lookbehind,h=0,p=u.alias;u=u.pattern||u;for(var g=0;g<o.length;g++){var m=o[g];if(o.length>e.length)break e;if(!(m instanceof i)){u.lastIndex=0;var v=u.exec(m);if(v){f&&(h=v[1].length);var b=v.index-1+h;v=v[0].slice(h);var y=v.length,w=b+y,_=m.slice(0,b+1),x=m.slice(w+1),C=[g,1];_&&C.push(_);var k=new i(s,d?t.tokenize(v,d):v,p);C.push(k),x&&C.push(x),Array.prototype.splice.apply(o,C)}}}}}return o},hooks:{all:{},add:function(e,n){var r=t.hooks.all;r[e]=r[e]||[],r[e].push(n)},run:function(e,n){var r=t.hooks.all[e];if(r&&r.length)for(var i=0,o=void 0;o=r[i++];)o(n)}}},n=t.Token=function(e,t,n){this.type=e,this.content=t,this.alias=n};if(n.stringify=function(e,r,i){if("string"==typeof e)return e;if("Array"===t.util.type(e))return e.map(function(t){return n.stringify(t,r,e)}).join("");var o={type:e.type,content:n.stringify(e.content,r,i),tag:"span",classes:["token",e.type],attributes:{},language:r,parent:i};if("comment"===o.type&&(o.attributes.spellcheck="true"),e.alias){var a="Array"===t.util.type(e.alias)?e.alias:[e.alias];Array.prototype.push.apply(o.classes,a)}t.hooks.run("wrap",o);var s="";for(var l in o.attributes)s+=(s?" ":"")+l+'="'+(o.attributes[l]||"")+'"';return"<"+o.tag+' class="'+o.classes.join(" ")+'" '+s+">"+o.content+"</"+o.tag+">"},!h.document)return h.addEventListener?(h.addEventListener("message",function(e){var n=JSON.parse(e.data),r=n.language,i=n.code,o=n.immediateClose;h.postMessage(t.highlight(i,t.languages[r],r)),o&&h.close()},!1),h.Prism):h.Prism}();void 0!==f&&(f.Prism=p),p.languages.markup={comment:/<!--[\w\W]*?-->/,prolog:/<\?[\w\W]+?\?>/,doctype:/<!DOCTYPE[\w\W]+?>/,cdata:/<!\[CDATA\[[\w\W]*?]]>/i,tag:{pattern:/<\/?[^\s>\/=.]+(?:\s+[^\s>\/=]+(?:=(?:("|')(?:\\\1|\\?(?!\1)[\w\W])*\1|[^\s'">=]+))?)*\s*\/?>/i,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"attr-value":{pattern:/=(?:('|")[\w\W]*?(\1)|[^\s>]+)/i,inside:{punctuation:/[=>"']/}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:/&#?[\da-z]{1,8};/i},p.hooks.add("wrap",function(e){"entity"===e.type&&(e.attributes.title=e.content.replace(/&amp;/,"&"))}),p.languages.xml=p.languages.markup,p.languages.html=p.languages.markup,p.languages.mathml=p.languages.markup,p.languages.svg=p.languages.markup,p.languages.css={comment:/\/\*[\w\W]*?\*\//,atrule:{pattern:/@[\w-]+?.*?(;|(?=\s*\{))/i,inside:{rule:/@[\w-]+/}},url:/url\((?:(["'])(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1|.*?)\)/i,selector:/[^\{\}\s][^\{\};]*?(?=\s*\{)/,string:/("|')(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1/,property:/(\b|\B)[\w-]+(?=\s*:)/i,important:/\B!important\b/i,function:/[-a-z0-9]+(?=\()/i,punctuation:/[(){};:]/},p.languages.css.atrule.inside.rest=p.util.clone(p.languages.css),p.languages.markup&&(p.languages.insertBefore("markup","tag",{style:{pattern:/<style[\w\W]*?>[\w\W]*?<\/style>/i,inside:{tag:{pattern:/<style[\w\W]*?>|<\/style>/i,inside:p.languages.markup.tag.inside},rest:p.languages.css},alias:"language-css"}}),p.languages.insertBefore("inside","attr-value",{"style-attr":{pattern:/\s*style=("|').*?\1/i,inside:{"attr-name":{pattern:/^\s*style/i,inside:p.languages.markup.tag.inside},punctuation:/^\s*=\s*['"]|['"]\s*$/,"attr-value":{pattern:/.+/i,inside:p.languages.css}},alias:"language-css"}},p.languages.markup.tag)),p.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\w\W]*?\*\//,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0}],string:/(["'])(\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,"class-name":{pattern:/((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[a-z0-9_\.\\]+/i,lookbehind:!0,inside:{punctuation:/(\.|\\)/}},keyword:/\b(if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,boolean:/\b(true|false)\b/,function:/[a-z0-9_]+(?=\()/i,number:/\b-?(?:0x[\da-f]+|\d*\.?\d+(?:e[+-]?\d+)?)\b/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,punctuation:/[{}[\];(),.:]/},p.languages.javascript=p.languages.extend("clike",{keyword:/\b(as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|false|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|true|try|typeof|var|void|while|with|yield)\b/,number:/\b-?(0x[\dA-Fa-f]+|0b[01]+|0o[0-7]+|\d*\.?\d+([Ee][+-]?\d+)?|NaN|Infinity)\b/,function:/[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*(?=\()/i}),p.languages.insertBefore("javascript","keyword",{regex:{pattern:/(^|[^\/])\/(?!\/)(\[.+?]|\\.|[^\/\\\r\n])+\/[gimyu]{0,5}(?=\s*($|[\r\n,.;})]))/,lookbehind:!0}}),p.languages.insertBefore("javascript","class-name",{"template-string":{pattern:/`(?:\\`|\\?[^`])*`/,inside:{interpolation:{pattern:/\$\{[^}]+\}/,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:p.languages.javascript}},string:/[\s\S]+/}}}),p.languages.markup&&p.languages.insertBefore("markup","tag",{script:{pattern:/<script[\w\W]*?>[\w\W]*?<\/script>/i,inside:{tag:{pattern:/<script[\w\W]*?>|<\/script>/i,inside:p.languages.markup.tag.inside},rest:p.languages.javascript},alias:"language-javascript"}}),p.languages.js=p.languages.javascript,p.languages.c=p.languages.extend("clike",{keyword:/\b(asm|typeof|inline|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|union|unsigned|void|volatile|while)\b/,operator:/\-[>-]?|\+\+?|!=?|<<?=?|>>?=?|==?|&&?|\|?\||[~^%?*\/]/,number:/\b-?(?:0x[\da-f]+|\d*\.?\d+(?:e[+-]?\d+)?)[ful]*\b/i}),p.languages.insertBefore("c","string",{macro:{pattern:/(^\s*)#\s*[a-z]+([^\r\n\\]|\\.|\\(?:\r\n?|\n))*/im,lookbehind:!0,alias:"property",inside:{string:{pattern:/(#\s*include\s*)(<.+?>|("|')(\\?.)+?\3)/,lookbehind:!0}}}}),delete p.languages.c["class-name"],delete p.languages.c.boolean,p.languages.csharp=p.languages.extend("clike",{keyword:/\b(abstract|as|async|await|base|bool|break|byte|case|catch|char|checked|class|const|continue|decimal|default|delegate|do|double|else|enum|event|explicit|extern|false|finally|fixed|float|for|foreach|goto|if|implicit|in|int|interface|internal|is|lock|long|namespace|new|null|object|operator|out|override|params|private|protected|public|readonly|ref|return|sbyte|sealed|short|sizeof|stackalloc|static|string|struct|switch|this|throw|true|try|typeof|uint|ulong|unchecked|unsafe|ushort|using|virtual|void|volatile|while|add|alias|ascending|async|await|descending|dynamic|from|get|global|group|into|join|let|orderby|partial|remove|select|set|value|var|where|yield)\b/,string:[/@("|')(\1\1|\\\1|\\?(?!\1)[\s\S])*\1/,/("|')(\\?.)*?\1/],number:/\b-?(0x[\da-f]+|\d*\.?\d+)\b/i}),p.languages.insertBefore("csharp","keyword",{preprocessor:{pattern:/(^\s*)#.*/m,lookbehind:!0}}),p.languages.cpp=p.languages.extend("c",{keyword:/\b(alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|class|compl|const|constexpr|const_cast|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|float|for|friend|goto|if|inline|int|long|mutable|namespace|new|noexcept|nullptr|operator|private|protected|public|register|reinterpret_cast|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,boolean:/\b(true|false)\b/,operator:/[-+]{1,2}|!=?|<{1,2}=?|>{1,2}=?|\->|:{1,2}|={1,2}|\^|~|%|&{1,2}|\|?\||\?|\*|\/|\b(and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/}),p.languages.insertBefore("cpp","keyword",{"class-name":{pattern:/(class\s+)[a-z0-9_]+/i,lookbehind:!0}}),p.languages.java=p.languages.extend("clike",{keyword:/\b(abstract|continue|for|new|switch|assert|default|goto|package|synchronized|boolean|do|if|private|this|break|double|implements|protected|throw|byte|else|import|public|throws|case|enum|instanceof|return|transient|catch|extends|int|short|try|char|final|interface|static|void|class|finally|long|strictfp|volatile|const|float|native|super|while)\b/,number:/\b0b[01]+\b|\b0x[\da-f]*\.?[\da-fp\-]+\b|\b\d*\.?\d+(?:e[+-]?\d+)?[df]?\b/i,operator:{pattern:/(^|[^.])(?:\+[+=]?|-[-=]?|!=?|<<?=?|>>?>?=?|==?|&[&=]?|\|[|=]?|\*=?|\/=?|%=?|\^=?|[?:~])/m,lookbehind:!0}}),p.languages.php=p.languages.extend("clike",{keyword:/\b(and|or|xor|array|as|break|case|cfunction|class|const|continue|declare|default|die|do|else|elseif|enddeclare|endfor|endforeach|endif|endswitch|endwhile|extends|for|foreach|function|include|include_once|global|if|new|return|static|switch|use|require|require_once|var|while|abstract|interface|public|implements|private|protected|parent|throw|null|echo|print|trait|namespace|final|yield|goto|instanceof|finally|try|catch)\b/i,constant:/\b[A-Z0-9_]{2,}\b/,comment:{pattern:/(^|[^\\])(?:\/\*[\w\W]*?\*\/|\/\/.*)/,lookbehind:!0}}),p.languages.insertBefore("php","class-name",{"shell-comment":{pattern:/(^|[^\\])#.*/,lookbehind:!0,alias:"comment"}}),p.languages.insertBefore("php","keyword",{delimiter:/\?>|<\?(?:php)?/i,variable:/\$\w+\b/i,package:{pattern:/(\\|namespace\s+|use\s+)[\w\\]+/,lookbehind:!0,inside:{punctuation:/\\/}}}),p.languages.insertBefore("php","operator",{property:{pattern:/(->)[\w]+/,lookbehind:!0}}),p.languages.markup&&(p.hooks.add("before-highlight",function(e){"php"===e.language&&(e.tokenStack=[],e.backupCode=e.code,e.code=e.code.replace(/(?:<\?php|<\?)[\w\W]*?(?:\?>)/gi,function(t){return e.tokenStack.push(t),"{{{PHP"+e.tokenStack.length+"}}}"}))}),p.hooks.add("before-insert",function(e){"php"===e.language&&(e.code=e.backupCode,delete e.backupCode)}),p.hooks.add("after-highlight",function(e){if("php"===e.language){for(var t=0,n=void 0;n=e.tokenStack[t];t++)e.highlightedCode=e.highlightedCode.replace("{{{PHP"+(t+1)+"}}}",p.highlight(n,e.grammar,"php").replace(/\$/g,"$$$$"));e.element.innerHTML=e.highlightedCode}}),p.hooks.add("wrap",function(e){"php"===e.language&&"markup"===e.type&&(e.content=e.content.replace(/(\{\{\{PHP[0-9]+\}\}\})/g,'<span class="token php">$1</span>'))}),p.languages.insertBefore("php","comment",{markup:{pattern:/<[^?]\/?(.*?)>/,inside:p.languages.markup},php:/\{\{\{PHP[0-9]+\}\}\}/})),p.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0},string:/"""[\s\S]+?"""|'''[\s\S]+?'''|("|')(?:\\?.)*?\1/,function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_][a-zA-Z0-9_]*(?=\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)[a-z0-9_]+/i,lookbehind:!0},keyword:/\b(?:as|assert|async|await|break|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|pass|print|raise|return|try|while|with|yield)\b/,boolean:/\b(?:True|False)\b/,number:/\b-?(?:0[bo])?(?:(?:\d|0x[\da-f])[\da-f]*\.?\d*|\.\d+)(?:e[+-]?\d+)?j?\b/i,operator:/[-+%=]=?|!=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]|\b(?:or|and|not)\b/,punctuation:/[{}[\];(),.:]/},function(e){e.languages.ruby=e.languages.extend("clike",{comment:/#(?!\{[^\r\n]*?\}).*/,keyword:/\b(alias|and|BEGIN|begin|break|case|class|def|define_method|defined|do|each|else|elsif|END|end|ensure|false|for|if|in|module|new|next|nil|not|or|raise|redo|require|rescue|retry|return|self|super|then|throw|true|undef|unless|until|when|while|yield)\b/});var t={pattern:/#\{[^}]+\}/,inside:{delimiter:{pattern:/^#\{|\}$/,alias:"tag"},
rest:e.util.clone(e.languages.ruby)}};e.languages.insertBefore("ruby","keyword",{regex:[{pattern:/%r([^a-zA-Z0-9\s\{\(\[<])(?:[^\\]|\\[\s\S])*?\1[gim]{0,3}/,inside:{interpolation:t}},{pattern:/%r\((?:[^()\\]|\\[\s\S])*\)[gim]{0,3}/,inside:{interpolation:t}},{pattern:/%r\{(?:[^#{}\\]|#(?:\{[^}]+\})?|\\[\s\S])*\}[gim]{0,3}/,inside:{interpolation:t}},{pattern:/%r\[(?:[^\[\]\\]|\\[\s\S])*\][gim]{0,3}/,inside:{interpolation:t}},{pattern:/%r<(?:[^<>\\]|\\[\s\S])*>[gim]{0,3}/,inside:{interpolation:t}},{pattern:/(^|[^\/])\/(?!\/)(\[.+?]|\\.|[^\/\r\n])+\/[gim]{0,3}(?=\s*($|[\r\n,.;})]))/,lookbehind:!0}],variable:/[@$]+[a-zA-Z_][a-zA-Z_0-9]*(?:[?!]|\b)/,symbol:/:[a-zA-Z_][a-zA-Z_0-9]*(?:[?!]|\b)/}),e.languages.insertBefore("ruby","number",{builtin:/\b(Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Stat|File|Fixnum|Fload|Hash|Integer|IO|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|String|Struct|TMS|Symbol|ThreadGroup|Thread|Time|TrueClass)\b/,constant:/\b[A-Z][a-zA-Z_0-9]*(?:[?!]|\b)/}),e.languages.ruby.string=[{pattern:/%[qQiIwWxs]?([^a-zA-Z0-9\s\{\(\[<])(?:[^\\]|\\[\s\S])*?\1/,inside:{interpolation:t}},{pattern:/%[qQiIwWxs]?\((?:[^()\\]|\\[\s\S])*\)/,inside:{interpolation:t}},{pattern:/%[qQiIwWxs]?\{(?:[^#{}\\]|#(?:\{[^}]+\})?|\\[\s\S])*\}/,inside:{interpolation:t}},{pattern:/%[qQiIwWxs]?\[(?:[^\[\]\\]|\\[\s\S])*\]/,inside:{interpolation:t}},{pattern:/%[qQiIwWxs]?<(?:[^<>\\]|\\[\s\S])*>/,inside:{interpolation:t}},{pattern:/("|')(#\{[^}]+\}|\\(?:\r?\n|\r)|\\?.)*?\1/,inside:{interpolation:t}}]}(p);var g={isCodeSample:e,trimArg:t},m=function(e){var t=e.selection.getNode();return g.isCodeSample(t)?t:null},v=function(e,t,n){e.undoManager.transact(function(){var r=m(e);n=o.DOM.encode(n),r?(e.dom.setAttrib(r,"class","language-"+t),r.innerHTML=n,p.highlightElement(r),e.selection.select(r)):(e.insertContent('<pre id="__new" class="language-'+t+'">'+n+"</pre>"),e.selection.select(e.$("#__new").removeAttr("id")[0]))})},b=function(e){var t=m(e);return t?t.textContent:""},y={getSelectedCodeSample:m,insertCodeSample:v,getCurrentCode:b},w=function(e){var t=[{text:"HTML/XML",value:"markup"},{text:"JavaScript",value:"javascript"},{text:"CSS",value:"css"},{text:"PHP",value:"php"},{text:"Ruby",value:"ruby"},{text:"Python",value:"python"},{text:"Java",value:"java"},{text:"C",value:"c"},{text:"C#",value:"csharp"},{text:"C++",value:"cpp"}],n=u.getLanguages(e);return n||t},_=function(e){var t,n=y.getSelectedCodeSample(e);return n?(t=n.className.match(/language-(\w+)/),t?t[1]:""):""},x={getLanguages:w,getCurrentLanguage:_},C={open:function(e){var t=u.getDialogMinWidth(e),n=u.getDialogMinHeight(e),r=x.getCurrentLanguage(e),i=x.getLanguages(e),o=y.getCurrentCode(e);e.windowManager.open({title:"Insert/Edit code sample",minWidth:t,minHeight:n,layout:"flex",direction:"column",align:"stretch",body:[{type:"listbox",name:"language",label:"Language",maxWidth:200,value:r,values:i},{type:"textbox",name:"code",multiline:!0,spellcheck:!1,ariaLabel:"Code view",flex:1,style:"direction: ltr; text-align: left",classes:"monospace",value:o,autofocus:!0}],onSubmit:function(t){y.insertCodeSample(e,t.data.language,t.data.code)}})}},k=function(e){e.addCommand("codesample",function(){var t=e.selection.getNode();e.selection.isCollapsed()||g.isCodeSample(t)?C.open(e):e.formatter.toggle("code")})},T={register:k},S=function(e){var t=e.$;e.on("PreProcess",function(e){t("pre[contenteditable=false]",e.node).filter(g.trimArg(g.isCodeSample)).each(function(e,n){var r=t(n),i=n.textContent;r.attr("class",t.trim(r.attr("class"))),r.removeAttr("contentEditable"),r.empty().append(t("<code></code>").each(function(){this.textContent=i}))})}),e.on("SetContent",function(){var n=t("pre").filter(g.trimArg(g.isCodeSample)).filter(function(e,t){return"false"!==t.contentEditable});n.length&&e.undoManager.transact(function(){n.each(function(n,r){t(r).find("br").each(function(t,n){n.parentNode.replaceChild(e.getDoc().createTextNode("\n"),n)}),r.contentEditable=!1,r.innerHTML=e.dom.encode(r.textContent),p.highlightElement(r),r.className=t.trim(r.className)})})})},D={setup:S},E=function(e,t,n,r){var i,o=u.getContentCss(e);e.inline&&n.get()||!e.inline&&r.get()||(e.inline?n.set(!0):r.set(!0),!1!==o&&(i=e.dom.create("link",{rel:"stylesheet",href:o||t+"/css/prism.css"}),e.getDoc().getElementsByTagName("head")[0].appendChild(i)))},N={loadCss:E},A=function(e){e.addButton("codesample",{cmd:"codesample",title:"Insert/Edit code sample"}),e.addMenuItem("codesample",{cmd:"codesample",text:"Code sample",icon:"codesample"})},R={register:A},P=r(!1);i.add("codesample",function(e,t){var n=r(!1);D.setup(e),R.register(e),T.register(e),e.on("init",function(){N.loadCss(e,t,P,n)}),e.on("dblclick",function(t){g.isCodeSample(t.target)&&C.open(e)})})}()}(),function(){!function(){"use strict";function e(){}var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.util.Color"),r=function(e,t){e.find("#preview")[0].getEl().style.background=t},i=function(e,t){var i=n(t),o=i.toRgb();e.fromJSON({r:o.r,g:o.g,b:o.b,hex:i.toHex().substr(1)}),r(e,i.toHex())},o=function(e,t,n){var o=e.windowManager.open({title:"Color",items:{type:"container",layout:"flex",direction:"row",align:"stretch",padding:5,spacing:10,items:[{type:"colorpicker",value:n,onchange:function(){var e=this.rgb();o&&(o.find("#r").value(e.r),o.find("#g").value(e.g),o.find("#b").value(e.b),o.find("#hex").value(this.value().substr(1)),r(o,this.value()))}},{type:"form",padding:0,labelGap:5,defaults:{type:"textbox",size:7,value:"0",flex:1,spellcheck:!1,onchange:function(){var e,t,n=o.find("colorpicker")[0];if(e=this.name(),t=this.value(),"hex"===e)return t="#"+t,i(o,t),void n.value(t);t={r:o.find("#r").value(),g:o.find("#g").value(),b:o.find("#b").value()},n.value(t),i(o,t)}},items:[{name:"r",label:"R",autofocus:1},{name:"g",label:"G"},{name:"b",label:"B"},{name:"hex",label:"#",value:"000000"},{name:"preview",type:"container",border:1}]}]},onSubmit:function(){t("#"+o.toJSON().hex)}});i(o,n)},a={open:o};t.add("colorpicker",function(e){e.settings.color_picker_callback||(e.settings.color_picker_callback=function(t,n){a.open(e,t,n)})})}()}(),function(){!function(){"use strict";function e(){}var t=function(e){var n=e,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return t(r())}}},n=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=function(e){return{isContextMenuVisible:function(){return e.get()}}},i={get:r},o=function(e){return e.settings.contextmenu_never_use_native},a=function(e){return e.getParam("contextmenu","link openlink image inserttable | cell row column deletetable")},s={shouldNeverUseNative:o,getContextMenu:a},l=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),c=function(e){return l.DOM.select(e.settings.ui_container)[0]},u=function(e,t){return{x:e,y:t}},d=function(e,t,n){return u(e.x+t,e.y+n)},f=function(e){return u(e.pageX,e.pageY)},h=function(e){return u(e.clientX,e.clientY)},p=function(e,t){if(e&&"static"!==l.DOM.getStyle(e,"position",!0)){var n=l.DOM.getPos(e),r=n.x-e.scrollLeft,i=n.y-e.scrollTop;return d(t,-r,-i)}return d(t,0,0)},g=function(e,t){var n=l.DOM.getPos(e);return d(t,n.x,n.y)},m=function(e,t){if(e.inline)return p(c(e),f(t));var n=g(e.getContentAreaContainer(),h(t));return p(c(e),n)},v={getPos:m},b=tinymce.util.Tools.resolve("tinymce.ui.Factory"),y=tinymce.util.Tools.resolve("tinymce.util.Tools"),w=function(e,t){var n,r,i=[];r=s.getContextMenu(e),y.each(r.split(/[ ,]/),function(t){var n=e.menuItems[t];"|"===t&&(n={text:t}),n&&(n.shortcut="",i.push(n))});for(var o=0;o<i.length;o++)"|"===i[o].text&&(0!==o&&o!==i.length-1||i.splice(o,1));return n=b.create("menu",{items:i,context:"contextmenu",classes:"contextmenu"}),n.uiContainer=c(e),n.renderTo(c(e)),n.on("hide",function(e){e.control===this&&t.set(!1)}),e.on("remove",function(){n.remove(),n=null}),n},_=function(e,t,n,r){null===r.get()?r.set(w(e,n)):r.get().show(),r.get().moveTo(t.x,t.y),n.set(!0)},x={show:_},C=function(e,t){return t.ctrlKey&&!s.shouldNeverUseNative(e)},k=function(e,t,n){e.on("contextmenu",function(r){C(e,r)||(r.preventDefault(),x.show(e,v.getPos(e,r),t,n))})},T={setup:k};n.add("contextmenu",function(e){var n=t(null),r=t(!1);return T.setup(e,r,n),i.get(r)})}()}(),function(){!function(){"use strict";function e(){}var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.util.Tools"),r=function(e,t){var r,i=e.dom,o=e.selection.getSelectedBlocks();o.length&&(r=i.getAttrib(o[0],"dir"),n.each(o,function(e){i.getParent(e.parentNode,'*[dir="'+t+'"]',i.getRoot())||i.setAttrib(e,"dir",r!==t?t:null)}),e.nodeChanged())},i={setDir:r},o=function(e){e.addCommand("mceDirectionLTR",function(){i.setDir(e,"ltr")}),e.addCommand("mceDirectionRTL",function(){i.setDir(e,"rtl")})},a={register:o},s=function(e){var t=[];return n.each("h1 h2 h3 h4 h5 h6 div p".split(" "),function(n){t.push(n+"[dir="+e+"]")}),t.join(",")},l=function(e){e.addButton("ltr",{title:"Left to right",cmd:"mceDirectionLTR",stateSelector:s("ltr")}),e.addButton("rtl",{title:"Right to left",cmd:"mceDirectionRTL",stateSelector:s("rtl")})},c={register:l};t.add("directionality",function(e){a.register(e),c.register(e)})}()}(),function(){!function(){"use strict";function e(){}var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.util.Tools"),r=[["cool","cry","embarassed","foot-in-mouth"],["frown","innocent","kiss","laughing"],["money-mouth","sealed","smile","surprised"],["tongue-out","undecided","wink","yell"]],i=function(e){var t;return t='<table role="list" class="mce-grid">',n.each(r,function(r){t+="<tr>",n.each(r,function(n){var r=e+"/img/smiley-"+n+".gif";t+='<td><a href="#" data-mce-url="'+r+'" data-mce-alt="'+n+'" tabindex="-1" role="option" aria-label="'+n+'"><img src="'+r+'" style="width: 18px; height: 18px" role="presentation" /></a></td>'}),t+="</tr>"}),t+="</table>"},o={getHtml:i},a=function(e,t,n){e.insertContent(e.dom.createHTML("img",{src:t,alt:n}))},s=function(e,t){var n=o.getHtml(t);e.addButton("emoticons",{type:"panelbutton",panel:{role:"application",autohide:!0,html:n,onclick:function(t){var n=e.dom.getParent(t.target,"a");n&&(a(e,n.getAttribute("data-mce-url"),n.getAttribute("data-mce-alt")),this.hide())}},tooltip:"Emoticons"})},l={register:s};t.add("emoticons",function(e,t){l.register(e,t)})}()}(),function(){!function(){"use strict";function e(){}var t=function(e){var n=e,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return t(r())}}},n=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=tinymce.util.Tools.resolve("tinymce.util.Tools"),i=tinymce.util.Tools.resolve("tinymce.html.DomParser"),o=tinymce.util.Tools.resolve("tinymce.html.Node"),a=tinymce.util.Tools.resolve("tinymce.html.Serializer"),s=function(e){return e.getParam("fullpage_hide_in_source_view")},l=function(e){return e.getParam("fullpage_default_xml_pi")},c=function(e){return e.getParam("fullpage_default_encoding")},u=function(e){return e.getParam("fullpage_default_font_family")},d=function(e){return e.getParam("fullpage_default_font_size")},f=function(e){return e.getParam("fullpage_default_text_color")},h=function(e){return e.getParam("fullpage_default_title")},p=function(e){return e.getParam("fullpage_default_doctype","<!DOCTYPE html>")},g={shouldHideInSourceView:s,getDefaultXmlPi:l,getDefaultEncoding:c,getDefaultFontFamily:u,getDefaultFontSize:d,getDefaultTextColor:f,getDefaultTitle:h,getDefaultDocType:p},m=function(e){return i({validate:!1,root_name:"#document"}).parse(e)},v=function(e,t){function n(e,t){return e.attr(t)||""}var i,o,a=m(t),s={};return s.fontface=g.getDefaultFontFamily(e),s.fontsize=g.getDefaultFontSize(e),i=a.firstChild,7===i.type&&(s.xml_pi=!0,(o=/encoding="([^"]+)"/.exec(i.value))&&(s.docencoding=o[1])),i=a.getAll("#doctype")[0],i&&(s.doctype="<!DOCTYPE"+i.value+">"),i=a.getAll("title")[0],i&&i.firstChild&&(s.title=i.firstChild.value),r.each(a.getAll("meta"),function(e){var t,n=e.attr("name"),r=e.attr("http-equiv");n?s[n.toLowerCase()]=e.attr("content"):"Content-Type"===r&&(t=/charset\s*=\s*(.*)\s*/gi.exec(e.attr("content")))&&(s.docencoding=t[1])}),i=a.getAll("html")[0],i&&(s.langcode=n(i,"lang")||n(i,"xml:lang")),s.stylesheets=[],r.each(a.getAll("link"),function(e){"stylesheet"===e.attr("rel")&&s.stylesheets.push(e.attr("href"))}),i=a.getAll("body")[0],i&&(s.langdir=n(i,"dir"),s.style=n(i,"style"),s.visited_color=n(i,"vlink"),s.link_color=n(i,"link"),s.active_color=n(i,"alink")),s},b=function(e,t,n){function i(e,t,n){e.attr(t,n||void 0)}function s(e){c.firstChild?c.insert(e,c.firstChild):c.append(e)}var l,c,u,d,f,h=e.dom;l=m(n),c=l.getAll("head")[0],c||(d=l.getAll("html")[0],c=new o("head",1),d.firstChild?d.insert(c,d.firstChild,!0):d.append(c)),d=l.firstChild,t.xml_pi?(f='version="1.0"',t.docencoding&&(f+=' encoding="'+t.docencoding+'"'),7!==d.type&&(d=new o("xml",7),l.insert(d,l.firstChild,!0)),d.value=f):d&&7===d.type&&d.remove(),d=l.getAll("#doctype")[0],t.doctype?(d||(d=new o("#doctype",10),t.xml_pi?l.insert(d,l.firstChild):s(d)),d.value=t.doctype.substring(9,t.doctype.length-1)):d&&d.remove(),d=null,r.each(l.getAll("meta"),function(e){"Content-Type"===e.attr("http-equiv")&&(d=e)}),t.docencoding?(d||(d=new o("meta",1),d.attr("http-equiv","Content-Type"),d.shortEnded=!0,s(d)),d.attr("content","text/html; charset="+t.docencoding)):d&&d.remove(),d=l.getAll("title")[0],t.title?(d?d.empty():(d=new o("title",1),s(d)),d.append(new o("#text",3)).value=t.title):d&&d.remove(),r.each("keywords,description,author,copyright,robots".split(","),function(e){var n,r,i=l.getAll("meta"),a=t[e];for(n=0;n<i.length;n++)if(r=i[n],r.attr("name")===e)return void(a?r.attr("content",a):r.remove());a&&(d=new o("meta",1),d.attr("name",e),d.attr("content",a),d.shortEnded=!0,s(d))});var p={};return r.each(l.getAll("link"),function(e){"stylesheet"===e.attr("rel")&&(p[e.attr("href")]=e)}),r.each(t.stylesheets,function(e){p[e]||(d=new o("link",1),d.attr({rel:"stylesheet",text:"text/css",href:e}),d.shortEnded=!0,s(d)),delete p[e]}),r.each(p,function(e){e.remove()}),d=l.getAll("body")[0],d&&(i(d,"dir",t.langdir),i(d,"style",t.style),i(d,"vlink",t.visited_color),i(d,"link",t.link_color),i(d,"alink",t.active_color),h.setAttribs(e.getBody(),{style:t.style,dir:t.dir,vLink:t.visited_color,link:t.link_color,aLink:t.active_color})),d=l.getAll("html")[0],d&&(i(d,"lang",t.langcode),i(d,"xml:lang",t.langcode)),c.firstChild||c.remove(),u=a({validate:!1,indent:!0,apply_source_formatting:!0,indent_before:"head,html,body,meta,title,script,link,style",indent_after:"head,html,body,meta,title,script,link,style"}).serialize(l),u.substring(0,u.indexOf("</body>"))},y={parseHeader:m,htmlToData:v,dataToHtml:b},w=function(e,t){var n=y.htmlToData(e,t.get());e.windowManager.open({title:"Document properties",data:n,defaults:{type:"textbox",size:40},body:[{name:"title",label:"Title"},{name:"keywords",label:"Keywords"},{name:"description",label:"Description"},{name:"robots",label:"Robots"},{name:"author",label:"Author"},{name:"docencoding",label:"Encoding"}],onSubmit:function(i){var o=y.dataToHtml(e,r.extend(n,i.data),t.get());t.set(o)}})},_={open:w},x=function(e,t){e.addCommand("mceFullPageProperties",function(){_.open(e,t)})},C={register:x},k=function(e,t){return r.each(e,function(e){t=t.replace(e,function(e){return"\x3c!--mce:protected "+escape(e)+"--\x3e"})}),t},T=function(e){return e.replace(/<!--mce:protected ([\s\S]*?)-->/g,function(e,t){return unescape(t)})},S={protectHtml:k,unprotectHtml:T},D=r.each,E=function(e){return e.replace(/<\/?[A-Z]+/g,function(e){return e.toLowerCase()})},N=function(e,t,n,i){var o,a,s,l,c,u="",d=e.dom;if(!(i.selection||(s=S.protectHtml(e.settings.protect,i.content),"raw"===i.format&&t.get()||i.source_view&&g.shouldHideInSourceView(e)))){0!==s.length||i.source_view||(s=r.trim(t.get())+"\n"+r.trim(s)+"\n"+r.trim(n.get())),s=s.replace(/<(\/?)BODY/gi,"<$1body"),o=s.indexOf("<body"),-1!==o?(o=s.indexOf(">",o),t.set(E(s.substring(0,o+1))),a=s.indexOf("</body",o),-1===a&&(a=s.length),i.content=r.trim(s.substring(o+1,a)),n.set(E(s.substring(a)))):(t.set(A(e)),n.set("\n</body>\n</html>")),l=y.parseHeader(t.get()),D(l.getAll("style"),function(e){e.firstChild&&(u+=e.firstChild.value)}),c=l.getAll("body")[0],c&&d.setAttribs(e.getBody(),{style:c.attr("style")||"",dir:c.attr("dir")||"",vLink:c.attr("vlink")||"",link:c.attr("link")||"",aLink:c.attr("alink")||""}),d.remove("fullpage_styles");var f=e.getDoc().getElementsByTagName("head")[0];u&&(d.add(f,"style",{id:"fullpage_styles"},u),c=d.get("fullpage_styles"),c.styleSheet&&(c.styleSheet.cssText=u));var h={};r.each(f.getElementsByTagName("link"),function(e){"stylesheet"===e.rel&&e.getAttribute("data-mce-fullpage")&&(h[e.href]=e)}),r.each(l.getAll("link"),function(e){var t=e.attr("href");if(!t)return!0;h[t]||"stylesheet"!==e.attr("rel")||d.add(f,"link",{rel:"stylesheet",text:"text/css",href:t,"data-mce-fullpage":"1"}),delete h[t]}),r.each(h,function(e){e.parentNode.removeChild(e)})}},A=function(e){var t,n="",r="";if(g.getDefaultXmlPi(e)){var i=g.getDefaultEncoding(e);n+='<?xml version="1.0" encoding="'+(i||"ISO-8859-1")+'" ?>\n'}return n+=g.getDefaultDocType(e),n+="\n<html>\n<head>\n",(t=g.getDefaultTitle(e))&&(n+="<title>"+t+"</title>\n"),(t=g.getDefaultEncoding(e))&&(n+='<meta http-equiv="Content-Type" content="text/html; charset='+t+'" />\n'),(t=g.getDefaultFontFamily(e))&&(r+="font-family: "+t+";"),(t=g.getDefaultFontSize(e))&&(r+="font-size: "+t+";"),(t=g.getDefaultTextColor(e))&&(r+="color: "+t+";"),n+="</head>\n<body"+(r?' style="'+r+'"':"")+">\n"},R=function(e,t,n,i){i.selection||i.source_view&&g.shouldHideInSourceView(e)||(i.content=S.unprotectHtml(r.trim(t)+"\n"+r.trim(i.content)+"\n"+r.trim(n)))},P=function(e,t,n){e.on("BeforeSetContent",function(r){N(e,t,n,r)}),e.on("GetContent",function(r){R(e,t.get(),n.get(),r)})},O={setup:P},I=function(e){e.addButton("fullpage",{title:"Document properties",cmd:"mceFullPageProperties"}),e.addMenuItem("fullpage",{text:"Document properties",cmd:"mceFullPageProperties",context:"file"})},M={register:I};n.add("fullpage",function(e){var n=t(""),r=t("");C.register(e,n),M.register(e),O.setup(e,n,r)})}()}(),function(){!function(){"use strict";function e(){}var t=function(e){var n=e,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return t(r())}}},n=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=function(e){return{isFullscreen:function(){return null!==e.get()}}},i={get:r},o=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),a=function(e,t){e.fire("FullscreenStateChanged",{state:t})},s={fireFullscreenStateChanged:a},l=o.DOM,c=function(){var e,t,n=window,r=document,i=r.body;return i.offsetWidth&&(e=i.offsetWidth,t=i.offsetHeight),n.innerWidth&&n.innerHeight&&(e=n.innerWidth,t=n.innerHeight),{w:e,h:t}},u=function(){var e=l.getViewPort();return{x:e.x,y:e.y}},d=function(e){window.scrollTo(e.x,e.y)},f=function(e,t){var n,r,i,o,a=document.body,f=document.documentElement,h=t.get(),p=function(){l.setStyle(i,"height",c().h-(r.clientHeight-i.clientHeight))},g=function(){l.unbind(window,"resize",p)};if(r=e.getContainer(),n=r.style,i=e.getContentAreaContainer().firstChild,o=i.style,h)o.width=h.iframeWidth,o.height=h.iframeHeight,h.containerWidth&&(n.width=h.containerWidth),h.containerHeight&&(n.height=h.containerHeight),l.removeClass(a,"mce-fullscreen"),l.removeClass(f,"mce-fullscreen"),l.removeClass(r,"mce-fullscreen"),d(h.scrollPos),l.unbind(window,"resize",h.resizeHandler),e.off("remove",h.removeHandler),t.set(null),s.fireFullscreenStateChanged(e,!1);else{var m={scrollPos:u(),containerWidth:n.width,containerHeight:n.height,iframeWidth:o.width,iframeHeight:o.height,resizeHandler:p,removeHandler:g};o.width=o.height="100%",n.width=n.height="",l.addClass(a,"mce-fullscreen"),l.addClass(f,"mce-fullscreen"),l.addClass(r,"mce-fullscreen"),l.bind(window,"resize",p),e.on("remove",g),p(),t.set(m),s.fireFullscreenStateChanged(e,!0)}},h={toggleFullscreen:f},p=function(e,t){e.addCommand("mceFullScreen",function(){h.toggleFullscreen(e,t)})},g={register:p},m=function(e){return function(t){var n=t.control;e.on("FullscreenStateChanged",function(e){n.active(e.state)})}},v=function(e){e.addMenuItem("fullscreen",{text:"Fullscreen",shortcut:"Ctrl+Shift+F",selectable:!0,cmd:"mceFullScreen",onPostRender:m(e),context:"view"}),e.addButton("fullscreen",{active:!1,tooltip:"Fullscreen",cmd:"mceFullScreen",onPostRender:m(e)})},b={register:v};n.add("fullscreen",function(e){var n=t(null);return e.settings.inline?i.get(n):(g.register(e,n),b.register(e),e.addShortcut("Ctrl+Shift+F","","mceFullScreen"),i.get(n))})}()}(),function(){!function(){"use strict";function e(){}var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(e){return function(){return e}},r=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=new Array(arguments.length-1),i=1;i<arguments.length;i++)r[i-1]=arguments[i];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var i=new Array(arguments.length),o=0;o<i.length;o++)i[o]=arguments[o];var a=r.concat(i);return e.apply(null,a)}},i=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return!e.apply(null,arguments)}},o=n(!1),a=n(!0),s=o,l=a,c=function(){return u},u=function(){var e=function(e){return e.isNone()},t=function(e){return e()},r=function(e){return e},i=function(){},o=function(){return null},a=function(){},u={fold:function(e,t){return e()},is:s,isSome:s,isNone:l,getOr:r,getOrThunk:t,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:o,getOrUndefined:a,or:r,orThunk:t,map:c,ap:c,each:i,bind:c,flatten:c,exists:s,forall:l,filter:c,equals:e,equals_:e,toArray:function(){return[]},toString:n("none()")};return Object.freeze&&Object.freeze(u),u}(),d=function(e){var t=function(){return e},n=function(){return o},r=function(t){return d(t(e))},i=function(t){return t(e)},o={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:l,isNone:s,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:r,ap:function(t){return t.fold(c,function(t){return d(t(e))})},each:function(t){t(e)},bind:i,flatten:t,exists:i,forall:i,filter:function(t){return t(e)?o:u},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(s,function(t){return n(e,t)})},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return o},f=function(e){return null===e||void 0===e?u:d(e)},h={some:d,none:c,from:f},p=function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&Array.prototype.isPrototypeOf(e)?"array":"object"===t&&String.prototype.isPrototypeOf(e)?"string":t},g=function(e){return function(t){return p(t)===e}}("function"),m=function(){var e=Array.prototype.indexOf,t=function(t,n){return e.call(t,n)},n=function(e,t){return _(e,t)};return void 0===e?n:t}(),v=function(e,t){return m(e,t)>-1},b=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;i++){var o=e[i];r[i]=t(o,i,e)}return r},y=function(e,t){for(var n=[],r=0,i=e.length;r<i;r++){var o=e[r];t(o,r,e)&&n.push(o)}return n},w=function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];if(t(i,n,e))return h.some(i)}return h.none()},_=function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return n;return-1},x=Array.prototype.slice,C=(g(Array.from)&&Array.from,tinymce.util.Tools.resolve("tinymce.util.I18n")),k=tinymce.util.Tools.resolve("tinymce.Env"),T=k.mac?"":"Ctrl",S=k.mac?"Ctrl + Alt":"Shift + Alt",D=[{shortcut:T+" + B",action:"Bold"},{shortcut:T+" + I",action:"Italic"},{shortcut:T+" + U",action:"Underline"},{shortcut:T+" + A",action:"Select all"},{shortcut:T+" + Y or "+T+" + Shift + Z",action:"Redo"},{shortcut:T+" + Z",action:"Undo"},{shortcut:S+" + 1",action:"Header 1"},{shortcut:S+" + 2",action:"Header 2"},{shortcut:S+" + 3",action:"Header 3"},{shortcut:S+" + 4",action:"Header 4"},{shortcut:S+" + 5",action:"Header 5"},{shortcut:S+" + 6",action:"Header 6"},{shortcut:S+" + 7",action:"Paragraph"},{shortcut:S+" + 8",action:"Div"},{shortcut:S+" + 9",action:"Address"},{shortcut:"Alt + F9",action:"Focus to menubar"},{shortcut:"Alt + F10",action:"Focus to toolbar"},{shortcut:"Alt + F11",action:"Focus to element path"},{shortcut:"Ctrl + Shift + P > Ctrl + Shift + P",action:"Focus to contextual toolbar"},{shortcut:T+" + K",action:"Insert link (if link plugin activated)"},{shortcut:T+" + S",action:"Save (if save plugin activated)"},{shortcut:T+" + F",action:"Find (if searchreplace plugin activated)"}],E={shortcuts:D},N=function(){var e=function(e){return'aria-label="Action: '+e.action+", Shortcut: "+e.shortcut.replace(/Ctrl/g,"Control")+'"'},t=b(E.shortcuts,function(t){return'<tr data-mce-tabstop="1" tabindex="-1" '+e(t)+"><td>"+C.translate(t.action)+"</td><td>"+t.shortcut+"</td></tr>"}).join("");return{title:"Handy Shortcuts",type:"container",style:"overflow-y: auto; overflow-x: hidden; max-height: 250px",items:[{type:"container",html:'<div><table class="mce-table-striped"><thead><th>'+C.translate("Action")+"</th><th>"+C.translate("Shortcut")+"</th></thead>"+t+"</table></div>"}]}},A={makeTab:N},R=Object.keys,P=function(e,t){var n=function(e){var t=typeof e;return"string"===t||"number"===t};return e.replace(/\$\{([^{}]*)\}/g,function(e,r){var i=t[r];return n(i)?i.toString():e})},O=[{key:"advlist",name:"Advanced List"},{key:"anchor",name:"Anchor"},{key:"autolink",name:"Autolink"},{key:"autoresize",name:"Autoresize"},{key:"autosave",name:"Autosave"},{key:"bbcode",name:"BBCode"},{key:"charmap",name:"Character Map"},{key:"code",name:"Code"},{key:"codesample",name:"Code Sample"},{key:"colorpicker",name:"Color Picker"},{key:"compat3x",name:"3.x Compatibility"},{key:"contextmenu",name:"Context Menu"},{key:"directionality",name:"Directionality"},{key:"emoticons",name:"Emoticons"},{key:"fullpage",name:"Full Page"},{key:"fullscreen",name:"Full Screen"},{key:"help",name:"Help"},{key:"hr",name:"Horizontal Rule"},{key:"image",name:"Image"},{key:"imagetools",name:"Image Tools"},{key:"importcss",name:"Import CSS"},{key:"insertdatetime",name:"Insert Date/Time"},{key:"legacyoutput",name:"Legacy Output"},{key:"link",name:"Link"},{key:"lists",name:"Lists"},{key:"media",name:"Media"},{key:"nonbreaking",name:"Nonbreaking"},{key:"noneditable",name:"Noneditable"},{key:"pagebreak",name:"Page Break"},{key:"paste",name:"Paste"},{key:"preview",name:"Preview"},{key:"print",name:"Print"},{key:"save",name:"Save"},{key:"searchreplace",name:"Search and Replace"},{key:"spellchecker",name:"Spell Checker"},{key:"tabfocus",name:"Tab Focus"},{key:"table",name:"Table"},{key:"template",name:"Template"},{key:"textcolor",name:"Text Color"},{key:"textpattern",name:"Text Pattern"},{key:"toc",name:"Table of Contents"},{key:"visualblocks",name:"Visual Blocks"},{key:"visualchars",name:"Visual Characters"},{key:"wordcount",name:"Word Count"}],I={urls:O},M=r(P,'<a href="${url}" target="_blank" rel="noopener">${name}</a>'),j=function(e,t){return w(I.urls,function(e){return e.key===t}).fold(function(){var n=e.plugins[t].getMetadata;return"function"==typeof n?M(n()):t},function(e){return M({name:e.name,url:"https://www.tinymce.com/docs/plugins/"+e.key})})},B=function(e){var t=R(e.plugins);return void 0===e.settings.forced_plugins?t:y(t,i(r(v,e.settings.forced_plugins)))},L=function(e){var t=B(e),n=b(t,function(t){return"<li>"+j(e,t)+"</li>"}),r=n.length,i=n.join("");return"<p><b>"+C.translate(["Plugins installed ({0}):",r])+"</b></p><ul>"+i+"</ul>"},F=function(e){return{type:"container",html:'<div style="overflow-y: auto; overflow-x: hidden; max-height: 230px; height: 230px;" data-mce-tabstop="1" tabindex="-1">'+L(e)+"</div>",flex:1}},H=function(){return{type:"container",html:'<div style="padding: 10px; background: #e3e7f4; height: 100%;" data-mce-tabstop="1" tabindex="-1"><p><b>'+C.translate("Premium plugins:")+'</b></p><ul><li>PowerPaste</li><li>Spell Checker Pro</li><li>Accessibility Checker</li><li>Advanced Code Editor</li><li>Enhanced Media Embed</li><li>Link Checker</li></ul><br /><p style="float: right;"><a href="https://www.tinymce.com/pricing/?utm_campaign=editor_referral&utm_medium=help_dialog&utm_source=tinymce" target="_blank">'+C.translate("Learn more...")+"</a></p></div>",flex:1}},$=function(e){return{title:"Plugins",type:"container",style:"overflow-y: auto; overflow-x: hidden;",layout:"flex",padding:10,spacing:10,items:[F(e),H()]}},U={makeTab:$},z=tinymce.util.Tools.resolve("tinymce.EditorManager"),W=function(e,t){return 0===e.indexOf("@")?"X.X.X":e+"."+t},q=function(){var e=W(z.majorVersion,z.minorVersion),t='<a href="https://www.tinymce.com/docs/changelog/?utm_campaign=editor_referral&utm_medium=help_dialog&utm_source=tinymce" target="_blank">TinyMCE '+e+"</a>";return[{type:"label",html:C.translate(["You are using {0}",t])},{type:"spacer",flex:1},{text:"Close",onclick:function(){this.parent().parent().close()}}]},V={makeRow:q},Y=function(e,t){return function(){e.windowManager.open({title:"Help",bodyType:"tabpanel",layout:"flex",body:[A.makeTab(),U.makeTab(e)],buttons:V.makeRow(),onPostRender:function(){this.getEl("title").innerHTML='<img src="'+t+'/img/logo.png" alt="TinyMCE Logo" style="display: inline-block; width: 200px; height: 50px">'}})}},G={open:Y},K=function(e,t){e.addCommand("mceHelp",G.open(e,t))},X={register:K},J=function(e,t){e.addButton("help",{icon:"help",onclick:G.open(e,t)}),e.addMenuItem("help",{text:"Help",icon:"help",context:"help",onclick:G.open(e,t)})},Q={register:J};t.add("help",function(e,t){Q.register(e,t),X.register(e,t),e.shortcuts.add("Alt+0","Open help dialog","mceHelp")})}()}(),function(){!function(){"use strict";function e(){}var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(e){e.addCommand("InsertHorizontalRule",function(){e.execCommand("mceInsertContent",!1,"<hr />")})},r={register:n},i=function(e){e.addButton("hr",{icon:"hr",tooltip:"Horizontal line",cmd:"InsertHorizontalRule"}),e.addMenuItem("hr",{icon:"hr",text:"Horizontal line",cmd:"InsertHorizontalRule",context:"insert"})},o={register:i};t.add("hr",function(e){r.register(e),o.register(e)})}()}(),function(){!function(){"use strict";function e(){return new(S.getOrDie("FileReader"))}function t(){return new(S.getOrDie("XMLHttpRequest"))}function n(e){var n=function(n,r,i,o){var a,s;a=new t,a.open("POST",e.url),a.withCredentials=e.credentials,a.upload.onprogress=function(e){o(e.loaded/e.total*100)},a.onerror=function(){i("Image upload failed due to a XHR Transport error. Code: "+a.status)},a.onload=function(){var t;return a.status<200||a.status>=300?void i("HTTP Error: "+a.status):(t=JSON.parse(a.responseText))&&"string"==typeof t.location?void r(Ge(e.basePath,t.location)):void i("Invalid JSON: "+a.responseText)},s=new FormData,s.append("file",n.blob(),n.filename()),a.send(s)},r=function(e,t){return new D(function(n,r){try{t(e,n,r,Ye)}catch(e){r(e.message)}})},i=function(e){return e===n},o=function(t){return!e.url&&i(e.handler)?D.reject("Upload url missing from the settings."):r(t,e.handler)};return e=E.extend({credentials:!1,handler:n},e),{upload:o}}function r(e){function t(t){var n,r,i=we(e);if(t&&(r={type:"listbox",label:"Image list",name:"image-list",values:F.buildListItems(t,function(t){t.value=e.convertURL(t.value||t.url,"src")},[{text:"None",value:""}]),value:i.src&&e.convertURL(i.src,"src"),onselect:function(e){var t=n.find("#alt");(!t.value()||e.lastControl&&t.value()===e.lastControl.text())&&t.value(e.control.text()),n.find("#src").value(e.control.value()).fire("change")},onPostRender:function(){r=this}}),w.hasAdvTab(e)||w.hasUploadUrl(e)||w.hasUploadHandler(e)){var o=[$e.makeTab(e,r)];w.hasAdvTab(e)&&o.push(Ne.makeTab(e)),(w.hasUploadUrl(e)||w.hasUploadHandler(e))&&o.push(Je.makeTab(e)),n=e.windowManager.open({title:"Insert/edit image",data:i,bodyType:"tabpanel",body:o,onSubmit:Qe(Ze,e)})}else n=e.windowManager.open({title:"Insert/edit image",data:i,body:$e.getGeneralItems(e,r),onSubmit:Qe(Ze,e)});je.syncSize(n)}function n(){
F.createImageList(e,t)}return{open:n}}function i(){}var o=tinymce.util.Tools.resolve("tinymce.PluginManager"),a=function(e){return!1!==e.settings.image_dimensions},s=function(e){return!0===e.settings.image_advtab},l=function(e){return e.getParam("image_prepend_url","")},c=function(e){return e.getParam("image_class_list")},u=function(e){return!1!==e.settings.image_description},d=function(e){return!0===e.settings.image_title},f=function(e){return!0===e.settings.image_caption},h=function(e){return e.getParam("image_list",!1)},p=function(e){return e.getParam("images_upload_url",!1)},g=function(e){return e.getParam("images_upload_handler",!1)},m=function(e){return e.getParam("images_upload_url")},v=function(e){return e.getParam("images_upload_handler")},b=function(e){return e.getParam("images_upload_base_path")},y=function(e){return e.getParam("images_upload_credentials")},w={hasDimensions:a,hasAdvTab:s,getPrependUrl:l,getClassList:c,hasDescription:u,hasImageTitle:d,hasImageCaption:f,getImageList:h,hasUploadUrl:p,hasUploadHandler:g,getUploadUrl:m,getUploadHandler:v,getUploadBasePath:b,getUploadCredentials:y},_="undefined"!=typeof window?window:Function("return this;")(),x=function(e,t){for(var n=void 0!==t&&null!==t?t:_,r=0;r<e.length&&void 0!==n&&null!==n;++r)n=n[e[r]];return n},C=function(e,t){var n=e.split(".");return x(n,t)},k=function(e,t){return C(e,t)},T=function(e,t){var n=k(e,t);if(void 0===n||null===n)throw e+" not available on this browser";return n},S={getOrDie:T},D=tinymce.util.Tools.resolve("tinymce.util.Promise"),E=tinymce.util.Tools.resolve("tinymce.util.Tools"),N=tinymce.util.Tools.resolve("tinymce.util.XHR"),A=function(e,t){return Math.max(parseInt(e,10),parseInt(t,10))},R=function(e,t){function n(e,n){r.parentNode&&r.parentNode.removeChild(r),t({width:e,height:n})}var r=document.createElement("img");r.onload=function(){n(A(r.width,r.clientWidth),A(r.height,r.clientHeight))},r.onerror=function(){n(0,0)};var i=r.style;i.visibility="hidden",i.position="fixed",i.bottom=i.left="0px",i.width=i.height="auto",document.body.appendChild(r),r.src=e},P=function(e,t,n){function r(e,n){return n=n||[],E.each(e,function(e){var i={text:e.text||e.title};e.menu?i.menu=r(e.menu):(i.value=e.value,t(i)),n.push(i)}),n}return r(e,n||[])},O=function(e){return e&&(e=e.replace(/px$/,"")),e},I=function(e){return e.length>0&&/^[0-9]+$/.test(e)&&(e+="px"),e},M=function(e){if(e.margin){var t=e.margin.split(" ");switch(t.length){case 1:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[0],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[0];break;case 2:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[1];break;case 3:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[1];break;case 4:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[3]}delete e.margin}return e},j=function(e,t){var n=w.getImageList(e);"string"==typeof n?N.send({url:n,success:function(e){t(JSON.parse(e))}}):"function"==typeof n?n(t):t(n)},B=function(e,t,n){function r(){n.onload=n.onerror=null,e.selection&&(e.selection.select(n),e.nodeChanged())}n.onload=function(){t.width||t.height||!w.hasDimensions(e)||e.dom.setAttribs(n,{width:n.clientWidth,height:n.clientHeight}),r()},n.onerror=r},L=function(t){return new D(function(n,r){var i=new e;i.onload=function(){n(i.result)},i.onerror=function(){r(e.error.message)},i.readAsDataURL(t)})},F={getImageSize:R,buildListItems:P,removePixelSuffix:O,addPixelSuffix:I,mergeMargins:M,createImageList:j,waitLoadImage:B,blobToDataUri:L},H=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),$=Object.prototype.hasOwnProperty,U=function(e,t){return t},z=function(e){return function(){for(var t=new Array(arguments.length),n=0;n<t.length;n++)t[n]=arguments[n];if(0===t.length)throw new Error("Can't merge zero objects");for(var r={},i=0;i<t.length;i++){var o=t[i];for(var a in o)$.call(o,a)&&(r[a]=e(r[a],o[a]))}return r}}(U),W=H.DOM,q=function(e){return e.style.marginLeft&&e.style.marginRight&&e.style.marginLeft===e.style.marginRight?F.removePixelSuffix(e.style.marginLeft):""},V=function(e){return e.style.marginTop&&e.style.marginBottom&&e.style.marginTop===e.style.marginBottom?F.removePixelSuffix(e.style.marginTop):""},Y=function(e){return e.style.borderWidth?F.removePixelSuffix(e.style.borderWidth):""},G=function(e,t){return e.hasAttribute(t)?e.getAttribute(t):""},K=function(e,t){return e.style[t]?e.style[t]:""},X=function(e){return null!==e.parentNode&&"FIGURE"===e.parentNode.nodeName},J=function(e,t,n){e.setAttribute(t,n)},Q=function(e){var t=W.create("figure",{class:"image"});W.insertAfter(t,e),t.appendChild(e),t.appendChild(W.create("figcaption",{contentEditable:!0},"Caption")),t.contentEditable="false"},Z=function(e){var t=e.parentNode;W.insertAfter(e,t),W.remove(t)},ee=function(e){X(e)?Z(e):Q(e)},te=function(e,t){var n=e.getAttribute("style"),r=t(null!==n?n:"");r.length>0?(e.setAttribute("style",r),e.setAttribute("data-mce-style",r)):e.removeAttribute("style")},ne=function(e,t){return function(e,n,r){e.style[n]?(e.style[n]=F.addPixelSuffix(r),te(e,t)):J(e,n,r)}},re=function(e,t){return e.style[t]?F.removePixelSuffix(e.style[t]):G(e,t)},ie=function(e,t){var n=F.addPixelSuffix(t);e.style.marginLeft=n,e.style.marginRight=n},oe=function(e,t){var n=F.addPixelSuffix(t);e.style.marginTop=n,e.style.marginBottom=n},ae=function(e,t){var n=F.addPixelSuffix(t);e.style.borderWidth=n},se=function(e,t){e.style.borderStyle=t},le=function(e){return K(e,"borderStyle")},ce=function(e){return"FIGURE"===e.nodeName},ue=function(){return{src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:""}},de=function(e,t){var n=document.createElement("img");return J(n,"style",t.style),(q(n)||""!==t.hspace)&&ie(n,t.hspace),(V(n)||""!==t.vspace)&&oe(n,t.vspace),(Y(n)||""!==t.border)&&ae(n,t.border),(le(n)||""!==t.borderStyle)&&se(n,t.borderStyle),e(n.getAttribute("style"))},fe=function(e,t){var n=document.createElement("img");if(me(e,z(t,{caption:!1}),n),J(n,"alt",t.alt),t.caption){var r=W.create("figure",{class:"image"});return r.appendChild(n),r.appendChild(W.create("figcaption",{contentEditable:!0},"Caption")),r.contentEditable="false",r}return n},he=function(e,t){return{src:G(t,"src"),alt:G(t,"alt"),title:G(t,"title"),width:re(t,"width"),height:re(t,"height"),class:G(t,"class"),style:e(G(t,"style")),caption:X(t),hspace:q(t),vspace:V(t),border:Y(t),borderStyle:K(t,"borderStyle")}},pe=function(e,t,n,r,i){n[r]!==t[r]&&i(e,r,n[r])},ge=function(e,t){return function(n,r,i){e(n,i),te(n,t)}},me=function(e,t,n){var r=he(e,n);pe(n,r,t,"caption",function(e,t,n){return ee(e)}),pe(n,r,t,"src",J),pe(n,r,t,"alt",J),pe(n,r,t,"title",J),pe(n,r,t,"width",ne(0,e)),pe(n,r,t,"height",ne(0,e)),pe(n,r,t,"class",J),pe(n,r,t,"style",ge(function(e,t){return J(e,"style",t)},e)),pe(n,r,t,"hspace",ge(ie,e)),pe(n,r,t,"vspace",ge(oe,e)),pe(n,r,t,"border",ge(ae,e)),pe(n,r,t,"borderStyle",ge(se,e))},ve=function(e,t){var n=e.dom.styles.parse(t),r=F.mergeMargins(n),i=e.dom.styles.parse(e.dom.styles.serialize(r));return e.dom.styles.serialize(i)},be=function(e){var t=e.selection.getNode(),n=e.dom.getParent(t,"figure.image");return n?e.dom.select("img",n)[0]:t&&("IMG"!==t.nodeName||t.getAttribute("data-mce-object")||t.getAttribute("data-mce-placeholder"))?null:t},ye=function(e,t){var n=e.dom,r=n.getParent(t.parentNode,function(t){return e.schema.getTextBlockElements()[t.nodeName]});return r?n.split(r,t):t},we=function(e){var t=be(e);return t?he(function(t){return ve(e,t)},t):ue()},_e=function(e,t){var n=fe(function(t){return ve(e,t)},t);e.dom.setAttrib(n,"data-mce-id","__mcenew"),e.focus(),e.selection.setContent(n.outerHTML);var r=e.dom.select('*[data-mce-id="__mcenew"]')[0];if(e.dom.setAttrib(r,"data-mce-id",null),ce(r)){var i=ye(e,r);e.selection.select(i)}else e.selection.select(r)},xe=function(e,t){e.dom.setAttrib(t,"src",t.getAttribute("src"))},Ce=function(e,t){if(t){var n=e.dom.is(t.parentNode,"figure.image")?t.parentNode:t;e.dom.remove(n),e.focus(),e.nodeChanged(),e.dom.isEmpty(e.getBody())&&(e.setContent(""),e.selection.setCursorLocation())}},ke=function(e,t){var n=be(e);if(me(function(t){return ve(e,t)},t,n),xe(e,n),ce(n.parentNode)){var r=n.parentNode;ye(e,r),e.selection.select(n.parentNode)}else e.selection.select(n),F.waitLoadImage(e,t,n)},Te=function(e,t){var n=be(e);n?t.src?ke(e,t):Ce(e,n):t.src&&_e(e,t)},Se=function(e){return function(t){var n=e.dom,r=t.control.rootControl;if(w.hasAdvTab(e)){var i=r.toJSON(),o=n.parseStyle(i.style);r.find("#vspace").value(""),r.find("#hspace").value(""),o=F.mergeMargins(o),(o["margin-top"]&&o["margin-bottom"]||o["margin-right"]&&o["margin-left"])&&(o["margin-top"]===o["margin-bottom"]?r.find("#vspace").value(F.removePixelSuffix(o["margin-top"])):r.find("#vspace").value(""),o["margin-right"]===o["margin-left"]?r.find("#hspace").value(F.removePixelSuffix(o["margin-right"])):r.find("#hspace").value("")),o["border-width"]?r.find("#border").value(F.removePixelSuffix(o["border-width"])):r.find("#border").value(""),o["border-style"]?r.find("#borderStyle").value(o["border-style"]):r.find("#borderStyle").value(""),r.find("#style").value(n.serializeStyle(n.parseStyle(n.serializeStyle(o))))}}},De=function(e,t){t.find("#style").each(function(n){var r=de(function(t){return ve(e,t)},z(ue(),t.toJSON()));n.value(r)})},Ee=function(e){return{title:"Advanced",type:"form",pack:"start",items:[{label:"Style",name:"style",type:"textbox",onchange:Se(e)},{type:"form",layout:"grid",packV:"start",columns:2,padding:0,defaults:{type:"textbox",maxWidth:50,onchange:function(t){De(e,t.control.rootControl)}},items:[{label:"Vertical space",name:"vspace"},{label:"Border width",name:"border"},{label:"Horizontal space",name:"hspace"},{label:"Border style",type:"listbox",name:"borderStyle",width:90,maxWidth:90,onselect:function(t){De(e,t.control.rootControl)},values:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]}},Ne={makeTab:Ee},Ae=function(e,t){e.state.set("oldVal",e.value()),t.state.set("oldVal",t.value())},Re=function(e,t){var n=e.find("#width")[0],r=e.find("#height")[0],i=e.find("#constrain")[0];n&&r&&i&&t(n,r,i.checked())},Pe=function(e,t,n){var r=e.state.get("oldVal"),i=t.state.get("oldVal"),o=e.value(),a=t.value();n&&r&&i&&o&&a&&(o!==r?(a=Math.round(o/r*a),isNaN(a)||t.value(a)):(o=Math.round(a/i*o),isNaN(o)||e.value(o))),Ae(e,t)},Oe=function(e){Re(e,Ae)},Ie=function(e){Re(e,Pe)},Me=function(){var e=function(e){Ie(e.control.rootControl)};return{type:"container",label:"Dimensions",layout:"flex",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:5,size:5,onchange:e,ariaLabel:"Width"},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:5,size:5,onchange:e,ariaLabel:"Height"},{name:"constrain",type:"checkbox",checked:!0,text:"Constrain proportions"}]}},je={createUi:Me,syncSize:Oe,updateSize:Ie},Be=function(e,t){var n,r,i,o=e.meta||{},a=e.control,s=a.rootControl,l=s.find("#image-list")[0];l&&l.value(t.convertURL(a.value(),"src")),E.each(o,function(e,t){s.find("#"+t).value(e)}),o.width||o.height||(n=t.convertURL(a.value(),"src"),r=w.getPrependUrl(t),i=new RegExp("^(?:[a-z]+:)?//","i"),r&&!i.test(n)&&n.substring(0,r.length)!==r&&(n=r+n),a.value(n),F.getImageSize(t.documentBaseURI.toAbsolute(a.value()),function(e){e.width&&e.height&&w.hasDimensions(t)&&(s.find("#width").value(e.width),s.find("#height").value(e.height),je.syncSize(s))}))},Le=function(e){e.meta=e.control.rootControl.toJSON()},Fe=function(e,t){var n=[{name:"src",type:"filepicker",filetype:"image",label:"Source",autofocus:!0,onchange:function(t){Be(t,e)},onbeforecall:Le},t];return w.hasDescription(e)&&n.push({name:"alt",type:"textbox",label:"Image description"}),w.hasImageTitle(e)&&n.push({name:"title",type:"textbox",label:"Image Title"}),w.hasDimensions(e)&&n.push(je.createUi()),w.getClassList(e)&&n.push({name:"class",type:"listbox",label:"Class",values:F.buildListItems(w.getClassList(e),function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({inline:"img",classes:[t.value]})})})}),w.hasImageCaption(e)&&n.push({name:"caption",type:"checkbox",label:"Caption"}),n},He=function(e,t){return{title:"General",type:"form",items:Fe(e,t)}},$e={makeTab:He,getGeneralItems:Fe},Ue=function(){return S.getOrDie("URL")},ze=function(e){return Ue().createObjectURL(e)},We=function(e){Ue().revokeObjectURL(e)},qe={createObjectURL:ze,revokeObjectURL:We},Ve=tinymce.util.Tools.resolve("tinymce.ui.Factory"),Ye=function(){},Ge=function(e,t){return e?e.replace(/\/$/,"")+"/"+t.replace(/^\//,""):t},Ke=function(e){return function(t){var r=Ve.get("Throbber"),i=t.control.rootControl,o=new r(i.getEl()),a=t.control.value(),s=qe.createObjectURL(a),l=n({url:w.getUploadUrl(e),basePath:w.getUploadBasePath(e),credentials:w.getUploadCredentials(e),handler:w.getUploadHandler(e)}),c=function(){o.hide(),qe.revokeObjectURL(s)};return o.show(),F.blobToDataUri(a).then(function(t){var n=e.editorUpload.blobCache.create({blob:a,blobUri:s,name:a.name?a.name.replace(/\.[^\.]+$/,""):null,base64:t.split(",")[1]});return l.upload(n).then(function(e){var t=i.find("#src");return t.value(e),i.find("tabpanel")[0].activateTab(0),t.fire("change"),c(),e})}).catch(function(t){e.windowManager.alert(t),c()})}},Xe=function(e){return{title:"Upload",type:"form",layout:"flex",direction:"column",align:"stretch",padding:"20 20 20 20",items:[{type:"container",layout:"flex",direction:"column",align:"center",spacing:10,items:[{text:"Browse for an image",type:"browsebutton",accept:".jpg,.jpeg,.png,.gif",onchange:Ke(e)},{text:"OR",type:"label"}]},{text:"Drop an image here",type:"dropzone",accept:".jpg,.jpeg,.png,.gif",height:100,onchange:Ke(e)}]}},Je={makeTab:Xe},Qe=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=new Array(arguments.length-1),i=1;i<arguments.length;i++)r[i-1]=arguments[i];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var i=new Array(arguments.length),o=0;o<i.length;o++)i[o]=arguments[o];var a=r.concat(i);return e.apply(null,a)}},Ze=function(e,t){var n=t.control.getRoot();je.updateSize(n),e.undoManager.transact(function(){var t=z(we(e),n.toJSON());Te(e,t)}),e.editorUpload.uploadImagesAuto()},et=function(e){e.addCommand("mceImage",r(e).open)},tt={register:et},nt=function(e){var t=e.attr("class");return t&&/\bimage\b/.test(t)},rt=function(e){return function(t){for(var n,r=t.length,i=function(t){t.attr("contenteditable",e?"true":null)};r--;)n=t[r],nt(n)&&(n.attr("contenteditable",e?"false":null),E.each(n.getAll("figcaption"),i))}},it=function(e){e.on("preInit",function(){e.parser.addNodeFilter("figure",rt(!0)),e.serializer.addNodeFilter("figure",rt(!1))})},ot={setup:it},at=function(e){e.addButton("image",{icon:"image",tooltip:"Insert/edit image",onclick:r(e).open,stateSelector:"img:not([data-mce-object],[data-mce-placeholder]),figure.image"}),e.addMenuItem("image",{icon:"image",text:"Image",onclick:r(e).open,context:"insert",prependToContext:!0})},st={register:at};o.add("image",function(e){ot.setup(e),st.register(e),tt.register(e)})}()}(),function(){!function(){"use strict";function e(e,t){return i(document.createElement("canvas"),e,t)}function t(t){var r,i;return r=e(t.width,t.height),i=n(r),i.drawImage(t,0,0),r}function n(e){return e.getContext("2d")}function r(e){var t=null;try{t=e.getContext("webgl")||e.getContext("experimental-webgl")}catch(e){}return t||(t=null),t}function i(e,t,n){return e.width=t,e.height=n,e}function o(e){return e.naturalWidth||e.width}function a(e){return e.naturalHeight||e.height}function s(e,t){return new(Me.getOrDie("Blob"))(e,t)}function l(){return new(Me.getOrDie("FileReader"))}function c(e){return new(Me.getOrDie("Uint8Array"))(e)}function u(e){var t=e.src;return 0===t.indexOf("data:")?p(t):f(t)}function d(e){return new be(function(t,n){function r(){s(),t(a)}function i(){s(),n("Unable to load data of type "+e.type+": "+o)}var o=URL.createObjectURL(e),a=new Image,s=function(){a.removeEventListener("load",r),a.removeEventListener("error",i)};a.addEventListener("load",r),a.addEventListener("error",i),a.src=o,a.complete&&r()})}function f(e){return new be(function(t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="blob",r.onload=function(){200==this.status&&t(this.response)},r.onerror=function(){var e=this;n(0===this.status?function(){var e=new Error("No access to download image");return e.code=18,e.name="SecurityError",e}():function(){return new Error("Error "+e.status+" downloading image")}())},r.send()})}function h(e){var t=e.split(","),n=/data:([^;]+)/.exec(t[0]);if(!n)return Ne.none();for(var r=n[1],i=t[1],o=Le.atob(i),a=o.length,l=Math.ceil(a/1024),u=new Array(l),d=0;d<l;++d){for(var f=1024*d,h=Math.min(f+1024,a),p=new Array(h-f),g=f,m=0;g<h;++m,++g)p[m]=o[g].charCodeAt(0);u[d]=c(p)}return Ne.some(s(u,{type:r}))}function p(e){return new be(function(t,n){h(e).fold(function(){n("uri is not base64: "+e)},t)})}function g(e){return 0===e.indexOf("blob:")?f(e):0===e.indexOf("data:")?p(e):null}function m(e,t,n){return t=t||"image/png",HTMLCanvasElement.prototype.toBlob?new be(function(r){e.toBlob(function(e){r(e)},t,n)}):p(e.toDataURL(t,n))}function v(e,t,n){return t=t||"image/png",e.then(function(e){return e.toDataURL(t,n)})}function b(e){return d(e).then(function(e){x(e);var t,n;return n=me.create(ve.getWidth(e),ve.getHeight(e)),t=me.get2dContext(n),t.drawImage(e,0,0),n})}function y(e){return new be(function(t){var n=new l;n.onloadend=function(){t(n.result)},n.readAsDataURL(e)})}function w(e){return new be(function(t){var n=new l;n.onloadend=function(){t(n.result)},n.readAsArrayBuffer(e)})}function _(e){return y(e).then(function(e){return e.split(",")[1]})}function x(e){URL.revokeObjectURL(e.src)}function C(e,t,n){function r(){return be.resolve(t)}function i(){return n}function o(){return n.split(",")[1]}function a(t,n){return e.then(function(e){return Fe.canvasToBlob(e,t,n)})}function s(t,n){return e.then(function(e){return Fe.canvasToDataURL(e,t,n)})}function l(e,t){return s(e,t).then(function(e){return e.split(",")[1]})}function c(){return e.then(me.clone)}var u=t.type;return{getType:ye(u),toBlob:r,toDataURL:i,toBase64:o,toAdjustedBlob:a,toAdjustedDataURL:s,toAdjustedBase64:l,toCanvas:c}}function k(e){return Fe.blobToDataUri(e).then(function(t){return C(Fe.blobToCanvas(e),e,t)})}function T(e,t){return Fe.canvasToBlob(e,t).then(function(t){return C(be.resolve(e),t,e.toDataURL())})}function S(e){return Fe.imageToBlob(e).then(function(e){return k(e)})}function D(e,t,n){return e=parseFloat(e),e>n?e=n:e<t&&(e=t),e}function E(){return[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1]}function N(e,t){var n,r,i,o,a=[],s=new Array(10);for(n=0;n<5;n++){for(r=0;r<5;r++)a[r]=t[r+5*n];for(r=0;r<5;r++){for(o=0,i=0;i<5;i++)o+=e[r+5*i]*a[i];s[r+5*n]=o}}return s}function A(e,t){return t=D(t,0,1),e.map(function(e,n){return n%6==0?e=1-(1-e)*t:e*=t,D(e,0,1)})}function R(e,t){var n;return t=D(t,-1,1),t*=100,t<0?n=127+t/100*127:(n=t%1,n=0===n?Ke[t]:Ke[Math.floor(t)]*(1-n)+Ke[Math.floor(t)+1]*n,n=127*n+127),N(e,[n/127,0,0,0,.5*(127-n),0,n/127,0,0,.5*(127-n),0,0,n/127,0,.5*(127-n),0,0,0,1,0,0,0,0,0,1])}function P(e,t){var n,r,i,o;return t=D(t,-1,1),n=1+(t>0?3*t:t),r=.3086,i=.6094,o=.082,N(e,[r*(1-n)+n,i*(1-n),o*(1-n),0,0,r*(1-n),i*(1-n)+n,o*(1-n),0,0,r*(1-n),i*(1-n),o*(1-n)+n,0,0,0,0,0,1,0,0,0,0,0,1])}function O(e,t){var n,r,i,o,a;return t=D(t,-180,180)/180*Math.PI,n=Math.cos(t),r=Math.sin(t),i=.213,o=.715,a=.072,N(e,[i+n*(1-i)+r*-i,o+n*-o+r*-o,a+n*-a+r*(1-a),0,0,i+n*-i+.143*r,o+n*(1-o)+.14*r,a+n*-a+-.283*r,0,0,i+n*-i+r*-(1-i),o+n*-o+r*o,a+n*(1-a)+r*a,0,0,0,0,0,1,0,0,0,0,0,1])}function I(e,t){return t=D(255*t,-255,255),N(e,[1,0,0,0,t,0,1,0,0,t,0,0,1,0,t,0,0,0,1,0,0,0,0,0,1])}function M(e,t,n,r){return t=D(t,0,2),n=D(n,0,2),r=D(r,0,2),N(e,[t,0,0,0,0,0,n,0,0,0,0,0,r,0,0,0,0,0,1,0,0,0,0,0,1])}function j(e,t){return t=D(t,0,1),N(e,A([.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0,0,0,0,0,1],t))}function B(e,t){return t=D(t,0,1),N(e,A([.33,.34,.33,0,0,.33,.34,.33,0,0,.33,.34,.33,0,0,0,0,0,1,0,0,0,0,0,1],t))}function L(e,t){return e.toCanvas().then(function(n){return F(n,e.getType(),t)})}function F(e,t,n){var r,i=me.get2dContext(e);return r=function(e,t){var n,r,i,o,a,s=e.data,l=t[0],c=t[1],u=t[2],d=t[3],f=t[4],h=t[5],p=t[6],g=t[7],m=t[8],v=t[9],b=t[10],y=t[11],w=t[12],_=t[13],x=t[14],C=t[15],k=t[16],T=t[17],S=t[18],D=t[19];for(a=0;a<s.length;a+=4)n=s[a],r=s[a+1],i=s[a+2],o=s[a+3],s[a]=n*l+r*c+i*u+o*d+f,s[a+1]=n*h+r*p+i*g+o*m+v,s[a+2]=n*b+r*y+i*w+o*_+x,s[a+3]=n*C+r*k+i*T+o*S+D;return e}(i.getImageData(0,0,e.width,e.height),n),i.putImageData(r,0,0),Ge.fromCanvas(e,t)}function H(e,t){return e.toCanvas().then(function(n){return $(n,e.getType(),t)})}function $(e,t,n){var r,i,o=me.get2dContext(e);return r=o.getImageData(0,0,e.width,e.height),i=o.getImageData(0,0,e.width,e.height),i=function(e,t,n){function r(e,t,n){return e>n?e=n:e<t&&(e=t),e}var i,o,a,s,l,c,u,d,f,h,p,g,m,v,b,y,w;for(a=Math.round(Math.sqrt(n.length)),s=Math.floor(a/2),i=e.data,o=t.data,y=e.width,w=e.height,c=0;c<w;c++)for(l=0;l<y;l++){for(u=d=f=0,p=0;p<a;p++)for(h=0;h<a;h++)g=r(l+h-s,0,y-1),m=r(c+p-s,0,w-1),v=4*(m*y+g),b=n[p*a+h],u+=i[v]*b,d+=i[v+1]*b,f+=i[v+2]*b;v=4*(c*y+l),o[v]=r(u,0,255),o[v+1]=r(d,0,255),o[v+2]=r(f,0,255)}return t}(r,i,n),o.putImageData(i,0,0),Ge.fromCanvas(e,t)}function U(e){var t=function(t,n,r){var i,o,a=me.get2dContext(t),s=new Array(256);for(o=0;o<s.length;o++)s[o]=e(o,r);return i=function(e,t){var n,r=e.data;for(n=0;n<r.length;n+=4)r[n]=t[r[n]],r[n+1]=t[r[n+1]],r[n+2]=t[r[n+2]];return e}(a.getImageData(0,0,t.width,t.height),s),a.putImageData(i,0,0),Ge.fromCanvas(t,n)};return function(e,n){return e.toCanvas().then(function(r){return t(r,e.getType(),n)})}}function z(e){return function(t,n){return L(t,e(Xe.identity(),n))}}function W(e){return function(t){return H(t,e)}}function q(e,t,n){var r=ve.getWidth(e),i=ve.getHeight(e),o=t/r,a=n/i,s=!1;(o<.5||o>2)&&(o=o<.5?.5:2,s=!0),(a<.5||a>2)&&(a=a<.5?.5:2,s=!0);var l=V(e,o,a);return s?l.then(function(e){return q(e,t,n)}):l}function V(e,t,n){return new be(function(r){var i=ve.getWidth(e),o=ve.getHeight(e),a=Math.floor(i*t),s=Math.floor(o*n),l=me.create(a,s);me.get2dContext(l).drawImage(e,0,0,i,o,0,0,a,s),r(l)})}function Y(e,t){return e.toCanvas().then(function(n){return G(n,e.getType(),t)})}function G(e,t,n){var r=me.create(e.width,e.height),i=me.get2dContext(r),o=0,a=0;return n=n<0?360+n:n,90!=n&&270!=n||me.resize(r,r.height,r.width),90!=n&&180!=n||(o=r.width),270!=n&&180!=n||(a=r.height),i.translate(o,a),i.rotate(n*Math.PI/180),i.drawImage(e,0,0),Ge.fromCanvas(r,t)}function K(e,t){return e.toCanvas().then(function(n){return X(n,e.getType(),t)})}function X(e,t,n){var r=me.create(e.width,e.height),i=me.get2dContext(r);return"v"==n?(i.scale(1,-1),i.drawImage(e,0,-r.height)):(i.scale(-1,1),i.drawImage(e,-r.width,0)),Ge.fromCanvas(r,t)}function J(e,t,n,r,i){return e.toCanvas().then(function(o){return Q(o,e.getType(),t,n,r,i)})}function Q(e,t,n,r,i,o){var a=me.create(i,o);return me.get2dContext(a).drawImage(e,-n,-r),Ge.fromCanvas(a,t)}function Z(e,t,n){return e.toCanvas().then(function(r){return Qe.scale(r,t,n).then(function(t){return Ge.fromCanvas(t,e.getType())})})}function ee(){function e(e){var t;return t=o.splice(++a),o.push(e),{state:e,removed:t}}function t(){if(r())return o[--a]}function n(){if(i())return o[++a]}function r(){return a>0}function i(){return-1!==a&&a<o.length-1}var o=[],a=-1;return{data:o,add:e,undo:t,redo:n,canUndo:r,canRedo:i}}function te(e,t,n,r,i){function o(e,t){return{x:t.x+e.x,y:t.y+e.y,w:t.w,h:t.h}}function a(e,t){return{x:t.x-e.x,y:t.y-e.y,w:t.w,h:t.h}}function s(){return a(n,e)}function l(t,r,i,o){var s,l,c,u,d;s=r.x,l=r.y,c=r.w,u=r.h,s+=i*t.deltaX,l+=o*t.deltaY,c+=i*t.deltaW,u+=o*t.deltaH,c<20&&(c=20),u<20&&(u=20),d=e=Gt.clamp({x:s,y:l,w:c,h:u},n,"move"===t.name),d=a(n,d),m.fire("updateRect",{rect:d}),h(d)}function c(e){var t;t=ge.map(v,function(e){return"#"+_+"-"+e.name}).concat(ge.map(y,function(e){return"#"+_+"-"+e})).join(","),e?Jt(t,r).show():Jt(t,r).hide()}function u(e){function n(e,t){t.h<0&&(t.h=0),t.w<0&&(t.w=0),Jt("#"+_+"-"+e,r).css({left:t.x,top:t.y,width:t.w,height:t.h})}ge.each(v,function(t){Jt("#"+_+"-"+t.name,r).css({left:e.w*t.xMul+e.x,top:e.h*t.yMul+e.y})}),n("top",{x:t.x,y:t.y,w:t.w,h:e.y-t.y}),n("right",{x:e.x+e.w,y:e.y,w:t.w-e.x-e.w+t.x,h:e.h}),n("bottom",{x:t.x,y:e.y+e.h,w:t.w,h:t.h-e.y-e.h+t.y}),n("left",{x:t.x,y:e.y,w:e.x-t.x,h:e.h}),n("move",e)}function d(t){e=t,u(e)}function f(n){t=n,u(e)}function h(e){d(o(n,e))}function p(t){n=t,u(e)}function g(){ge.each(b,function(e){e.destroy()}),b=[]}var m,v,b,y,w="mce-",_=w+"crid-"+en++;return v=[{name:"move",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:0,deltaH:0,label:"Crop Mask"},{name:"nw",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:-1,deltaH:-1,label:"Top Left Crop Handle"},{name:"ne",xMul:1,yMul:0,deltaX:0,deltaY:1,deltaW:1,deltaH:-1,label:"Top Right Crop Handle"},{name:"sw",xMul:0,yMul:1,deltaX:1,deltaY:0,deltaW:-1,deltaH:1,label:"Bottom Left Crop Handle"},{name:"se",xMul:1,yMul:1,deltaX:0,deltaY:0,deltaW:1,deltaH:1,label:"Bottom Right Crop Handle"}],y=["top","right","bottom","left"],function(){function t(t){var n;return new(Yt.get("DragHelper"))(_,{document:r.ownerDocument,handle:_+"-"+t.name,start:function(){n=e},drag:function(e){l(t,n,e.deltaX,e.deltaY)}})}Jt('<div id="'+_+'" class="'+w+'croprect-container" role="grid" aria-dropeffect="execute">').appendTo(r),ge.each(y,function(e){Jt("#"+_,r).append('<div id="'+_+"-"+e+'"class="'+w+'croprect-block" style="display: none" data-mce-bogus="all">')}),ge.each(v,function(e){Jt("#"+_,r).append('<div id="'+_+"-"+e.name+'" class="'+w+"croprect-handle "+w+"croprect-handle-"+e.name+'"style="display: none" data-mce-bogus="all" role="gridcell" tabindex="-1" aria-label="'+e.label+'" aria-grabbed="false">')}),b=ge.map(v,t),u(e),Jt(r).on("focusin focusout",function(e){Jt(e.target).attr("aria-grabbed","focus"===e.type)}),Jt(r).on("keydown",function(t){function n(e,t,n,i,o){e.stopPropagation(),e.preventDefault(),l(r,n,i,o)}var r;switch(ge.each(v,function(e){if(t.target.id===_+"-"+e.name)return r=e,!1}),t.keyCode){case Zt.LEFT:n(t,r,e,-10,0);break;case Zt.RIGHT:n(t,r,e,10,0);break;case Zt.UP:n(t,r,e,0,-10);break;case Zt.DOWN:n(t,r,e,0,10);break;case Zt.ENTER:case Zt.SPACEBAR:t.preventDefault(),i()}})}(),m=ge.extend({toggleVisibility:c,setClampRect:p,setRect:d,getInnerRect:s,setInnerRect:h,setViewPortRect:f,destroy:g},Qt)}function ne(e){return{blob:e,url:Mt.createObjectURL(e)}}function re(e){e&&Mt.revokeObjectURL(e.url)}function ie(e){ge.each(e,re)}function oe(e,t,n,r){function i(e){var t,n,r,i;t=S.find("#w")[0],n=S.find("#h")[0],r=parseInt(t.value(),10),i=parseInt(n.value(),10),S.find("#constrain")[0].checked()&&K&&X&&r&&i&&("w"===e.control.settings.name?(i=Math.round(r*J),n.value(i)):(r=Math.round(i*Q),t.value(r))),K=r,X=i}function o(e){return Math.round(100*e)+"%"}function a(){S.find("#undo").disabled(!Z.canUndo()),S.find("#redo").disabled(!Z.canRedo()),S.statusbar.find("#save").disabled(!Z.canUndo())}function s(){S.find("#undo").disabled(!0),S.find("#redo").disabled(!0)}function l(e){e&&O.imageSrc(e.url)}function c(e){return function(){var t=ge.grep(G,function(t){return t.settings.name!==e});ge.each(t,function(e){e.hide()}),e.show(),e.focus()}}function u(e){N=ne(e),l(N)}function d(e){t=ne(e),l(t),ie(Z.add(t).removed),a()}function f(){var e=O.selection();Rt.blobToImageResult(t.blob).then(function(t){kt.crop(t,e.x,e.y,e.w,e.h).then(ae).then(function(e){d(e),p()})})}function h(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=[].slice.call(arguments,1);return function(){Rt.blobToImageResult(t.blob).then(function(t){e.apply(this,[t].concat(i)).then(ae).then(d)})}}function p(){l(t),re(N),c(D)(),a()}function g(t,n){N?n():setTimeout(function(){t-- >0?g(t,n):e.windowManager.alert("Error: failed to apply image operation.")},10)}function m(){N?(d(N.blob),p()):g(100,m)}function v(){var e=O.zoom();e<2&&(e+=.1),O.zoom(e)}function b(){var e=O.zoom();e>.1&&(e-=.1),O.zoom(e)}function y(){t=Z.undo(),l(t),a()}function w(){t=Z.redo(),l(t),a()}function _(){n(t.blob),S.close()}function x(e){return Yt.create("Form",{layout:"flex",direction:"row",labelGap:5,border:"0 0 1 0",align:"center",pack:"center",padding:"0 10 0 10",spacing:5,flex:0,minHeight:60,defaults:{classes:"imagetool",type:"button"},items:e})}function C(e,n){return x(te([{text:"Back",onclick:p},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:m}])).hide().on("show",function(){s(),Rt.blobToImageResult(t.blob).then(function(e){return n(e)}).then(ae).then(function(e){var t=ne(e);l(t),re(N),N=t})})}function k(n,r,i,a,c){function u(e){Rt.blobToImageResult(t.blob).then(function(t){return r(t,e)}).then(ae).then(function(e){var t=ne(e);l(t),re(N),N=t})}return x(te([{text:"Back",onclick:p},{type:"spacer",flex:1},{type:"slider",flex:1,ondragend:function(e){u(e.value)},minValue:e.rtl?c:a,maxValue:e.rtl?a:c,value:i,previewFilter:o},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:m}])).hide().on("show",function(){this.find("slider").value(i),s()})}function T(e){!0===e.control.value()&&(J=X/K,Q=K/X)}var S,D,E,N,A,R,P,O,I,M,j,B,L,F,H,$,U,z,W,q,V,Y,G,K,X,J,Q,Z=ee(),te=function(t){return e.rtl?t.reverse():t},oe=function(e){var n=[].slice.call(arguments,1);return function(){var r=N||t;Rt.blobToImageResult(r.blob).then(function(t){e.apply(this,[t].concat(n)).then(ae).then(u)})}},ae=function(e){return e.toBlob()};A=x(te([{text:"Back",onclick:p},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:f}])).hide().on("show hide",function(e){O.toggleCropRect("show"===e.type)}).on("show",s),R=x(te([{text:"Back",onclick:p},{type:"spacer",flex:1},{type:"textbox",name:"w",label:"Width",size:4,onkeyup:i},{type:"textbox",name:"h",label:"Height",size:4,onkeyup:i},{type:"checkbox",name:"constrain",text:"Constrain proportions",checked:!0,onchange:T},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:"submit"}])).hide().on("submit",function(e){var t=parseInt(S.find("#w").value(),10),n=parseInt(S.find("#h").value(),10);e.preventDefault(),h(kt.resize,t,n)(),p()}).on("show",s),P=x(te([{text:"Back",onclick:p},{type:"spacer",flex:1},{icon:"fliph",tooltip:"Flip horizontally",onclick:oe(kt.flip,"h")},{icon:"flipv",tooltip:"Flip vertically",onclick:oe(kt.flip,"v")},{icon:"rotateleft",tooltip:"Rotate counterclockwise",onclick:oe(kt.rotate,-90)},{icon:"rotateright",tooltip:"Rotate clockwise",onclick:oe(kt.rotate,90)},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:m}])).hide().on("show",s),j=C("Invert",kt.invert),W=C("Sharpen",kt.sharpen),q=C("Emboss",kt.emboss),B=k("Brightness",kt.brightness,0,-1,1),L=k("Hue",kt.hue,180,0,360),F=k("Saturate",kt.saturate,0,-1,1),H=k("Contrast",kt.contrast,0,-1,1),$=k("Grayscale",kt.grayscale,0,0,1),U=k("Sepia",kt.sepia,0,0,1),z=function(n,r){function i(){var e,n,i;e=S.find("#r")[0].value(),n=S.find("#g")[0].value(),i=S.find("#b")[0].value(),Rt.blobToImageResult(t.blob).then(function(t){return r(t,e,n,i)}).then(ae).then(function(e){var t=ne(e);l(t),re(N),N=t})}var a=e.rtl?2:0,c=e.rtl?0:2;return x(te([{text:"Back",onclick:p},{type:"spacer",flex:1},{type:"slider",label:"R",name:"r",minValue:a,value:1,maxValue:c,ondragend:i,previewFilter:o},{type:"slider",label:"G",name:"g",minValue:a,value:1,maxValue:c,ondragend:i,
previewFilter:o},{type:"slider",label:"B",name:"b",minValue:a,value:1,maxValue:c,ondragend:i,previewFilter:o},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:m}])).hide().on("show",function(){S.find("#r,#g,#b").value(1),s()})}("Colorize",kt.colorize),V=k("Gamma",kt.gamma,0,-1,1),Y=k("Exposure",kt.exposure,1,0,2),E=x(te([{text:"Back",onclick:p},{type:"spacer",flex:1},{text:"hue",icon:"hue",onclick:c(L)},{text:"saturate",icon:"saturate",onclick:c(F)},{text:"sepia",icon:"sepia",onclick:c(U)},{text:"emboss",icon:"emboss",onclick:c(q)},{text:"exposure",icon:"exposure",onclick:c(Y)},{type:"spacer",flex:1}])).hide(),D=x(te([{tooltip:"Crop",icon:"crop",onclick:c(A)},{tooltip:"Resize",icon:"resize2",onclick:c(R)},{tooltip:"Orientation",icon:"orientation",onclick:c(P)},{tooltip:"Brightness",icon:"sun",onclick:c(B)},{tooltip:"Sharpen",icon:"sharpen",onclick:c(W)},{tooltip:"Contrast",icon:"contrast",onclick:c(H)},{tooltip:"Color levels",icon:"drop",onclick:c(z)},{tooltip:"Gamma",icon:"gamma",onclick:c(V)},{tooltip:"Invert",icon:"invert",onclick:c(j)}])),O=nn.create({flex:1,imageSrc:t.url}),I=Yt.create("Container",{layout:"flex",direction:"column",pack:"start",border:"0 1 0 0",padding:5,spacing:5,items:[{type:"button",icon:"undo",tooltip:"Undo",name:"undo",onclick:y},{type:"button",icon:"redo",tooltip:"Redo",name:"redo",onclick:w},{type:"button",icon:"zoomin",tooltip:"Zoom in",onclick:v},{type:"button",icon:"zoomout",tooltip:"Zoom out",onclick:b}]}),M=Yt.create("Container",{type:"container",layout:"flex",direction:"row",align:"stretch",flex:1,items:te([I,O])}),G=[D,A,R,P,E,j,B,L,F,H,$,U,z,W,q,V,Y],S=e.windowManager.open({layout:"flex",direction:"column",align:"stretch",minWidth:Math.min(Vt.DOM.getViewPort().w,800),minHeight:Math.min(Vt.DOM.getViewPort().h,650),title:"Edit image",items:G.concat([M]),buttons:te([{text:"Save",name:"save",subtype:"primary",onclick:_},{text:"Cancel",onclick:"close"}])}),S.on("close",function(){r(),ie(Z.data),Z=null,N=null}),Z.add(t),a(),O.on("load",function(){K=O.imageSize().w,X=O.imageSize().h,J=X/K,Q=K/X,S.find("#w").value(K),S.find("#h").value(X)}),O.on("crop",f)}function ae(e,t){return new Bt(function(n,r){return t.toBlob().then(function(t){oe(e,ne(t),n,r)})})}function se(e){function t(e){return/^[0-9\.]+px$/.test(e)}var n,r;return n=e.style.width,r=e.style.height,n||r?t(n)&&t(r)?{w:parseInt(n,10),h:parseInt(r,10)}:null:(n=e.width,r=e.height,n&&r?{w:parseInt(n,10),h:parseInt(r,10)}:null)}function le(e,t){var n,r;t&&(n=e.style.width,r=e.style.height,(n||r)&&(e.style.width=t.w+"px",e.style.height=t.h+"px",e.removeAttribute("data-mce-style")),n=e.width,r=e.height,(n||r)&&(e.setAttribute("width",t.w),e.setAttribute("height",t.h)))}function ce(e){return{w:e.naturalWidth,h:e.naturalHeight}}function ue(){return new(Me.getOrDie("XMLHttpRequest"))}function de(e,t){return gn.requestUrlAsBlob(e,{},t).then(function(e){return e.status<200||e.status>=300?Tn.handleHttpError(e.status):Bt.resolve(e.blob)})}function fe(){}var he=function(e){var t=e,n=function(){return t};return{get:n,set:function(e){t=e},clone:function(){return he(n())}}},pe=tinymce.util.Tools.resolve("tinymce.PluginManager"),ge=tinymce.util.Tools.resolve("tinymce.util.Tools"),me={create:e,clone:t,resize:i,get2dContext:n,get3dContext:r},ve={getWidth:o,getHeight:a},be=window.Promise?window.Promise:function(){function e(e,t){return function(){e.apply(t,arguments)}}function t(e){var t=this;if(null===this._state)return void this._deferreds.push(e);l(function(){var n=t._state?e.onFulfilled:e.onRejected;if(null===n)return void(t._state?e.resolve:e.reject)(t._value);var r;try{r=n(t._value)}catch(t){return void e.reject(t)}e.resolve(r)})}function n(t){try{if(t===this)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var o=t.then;if("function"==typeof o)return void a(e(o,t),e(n,this),e(r,this))}this._state=!0,this._value=t,i.call(this)}catch(e){r.call(this,e)}}function r(e){this._state=!1,this._value=e,i.call(this)}function i(){for(var e=0,n=this._deferreds.length;e<n;e++)t.call(this,this._deferreds[e]);this._deferreds=null}function o(e,t,n,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r}function a(e,t,n){var r=!1;try{e(function(e){r||(r=!0,t(e))},function(e){r||(r=!0,n(e))})}catch(e){if(r)return;r=!0,n(e)}}var s=function(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],a(t,e(n,this),e(r,this))},l=s.immediateFn||"function"==typeof setImmediate&&setImmediate||function(e){setTimeout(e,1)},c=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};return s.prototype.catch=function(e){return this.then(null,e)},s.prototype.then=function(e,n){var r=this;return new s(function(i,a){t.call(r,new o(e,n,i,a))})},s.all=function(){var e=Array.prototype.slice.call(1===arguments.length&&c(arguments[0])?arguments[0]:arguments);return new s(function(t,n){function r(o,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(e){r(o,e)},n)}e[o]=a,0==--i&&t(e)}catch(e){n(e)}}if(0===e.length)return t([]);for(var i=e.length,o=0;o<e.length;o++)r(o,e[o])})},s.resolve=function(e){return e&&"object"==typeof e&&e.constructor===s?e:new s(function(t){t(e)})},s.reject=function(e){return new s(function(t,n){n(e)})},s.race=function(e){return new s(function(t,n){for(var r=0,i=e.length;r<i;r++)e[r].then(t,n)})},s}(),ye=function(e){return function(){return e}},we=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=new Array(arguments.length-1),i=1;i<arguments.length;i++)r[i-1]=arguments[i];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var i=new Array(arguments.length),o=0;o<i.length;o++)i[o]=arguments[o];var a=r.concat(i);return e.apply(null,a)}},_e=ye(!1),xe=ye(!0),Ce=_e,ke=xe,Te=function(){return Se},Se=function(){var e=function(e){return e.isNone()},t=function(e){return e()},n=function(e){return e},r=function(){},i=function(){return null},o=function(){},a={fold:function(e,t){return e()},is:Ce,isSome:Ce,isNone:ke,getOr:n,getOrThunk:t,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:i,getOrUndefined:o,or:n,orThunk:t,map:Te,ap:Te,each:r,bind:Te,flatten:Te,exists:Ce,forall:ke,filter:Te,equals:e,equals_:e,toArray:function(){return[]},toString:ye("none()")};return Object.freeze&&Object.freeze(a),a}(),De=function(e){var t=function(){return e},n=function(){return o},r=function(t){return De(t(e))},i=function(t){return t(e)},o={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:ke,isNone:Ce,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:r,ap:function(t){return t.fold(Te,function(t){return De(t(e))})},each:function(t){t(e)},bind:i,flatten:t,exists:i,forall:i,filter:function(t){return t(e)?o:Se},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(Ce,function(t){return n(e,t)})},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return o},Ee=function(e){return null===e||void 0===e?Se:De(e)},Ne={some:De,none:Te,from:Ee},Ae="undefined"!=typeof window?window:Function("return this;")(),Re=function(e,t){for(var n=void 0!==t&&null!==t?t:Ae,r=0;r<e.length&&void 0!==n&&null!==n;++r)n=n[e[r]];return n},Pe=function(e,t){var n=e.split(".");return Re(n,t)},Oe=function(e,t){return Pe(e,t)},Ie=function(e,t){var n=Oe(e,t);if(void 0===n||null===n)throw e+" not available on this browser";return n},Me={getOrDie:Ie},je=function(e){Me.getOrDie("requestAnimationFrame")(e)},Be=function(e){return Me.getOrDie("atob")(e)},Le={atob:Be,requestAnimationFrame:je},Fe={blobToImage:d,imageToBlob:u,blobToArrayBuffer:w,blobToDataUri:y,blobToBase64:_,dataUriToBlobSync:h,canvasToBlob:m,canvasToDataURL:v,blobToCanvas:b,uriToBlob:g},He=function(e){return Fe.blobToImage(e)},$e=function(e){return Fe.imageToBlob(e)},Ue=function(e){return Fe.blobToDataUri(e)},ze=function(e){return Fe.blobToBase64(e)},We=function(e){return Fe.dataUriToBlobSync(e)},qe=function(e){return Ne.from(Fe.uriToBlob(e))},Ve={blobToImage:He,imageToBlob:$e,blobToDataUri:Ue,blobToBase64:ze,dataUriToBlobSync:We,uriToBlob:qe},Ye=function(e,t){return C(Fe.blobToCanvas(e),e,t)},Ge={fromBlob:k,fromCanvas:T,fromImage:S,fromBlobAndUrlSync:Ye},Ke=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],Xe={identity:E,adjust:A,multiply:N,adjustContrast:R,adjustBrightness:I,adjustSaturation:P,adjustHue:O,adjustColors:M,adjustSepia:j,adjustGrayscale:B},Je={invert:function(e){return function(t){return L(t,e)}}([-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0]),brightness:z(Xe.adjustBrightness),hue:z(Xe.adjustHue),saturate:z(Xe.adjustSaturation),contrast:z(Xe.adjustContrast),grayscale:z(Xe.adjustGrayscale),sepia:z(Xe.adjustSepia),colorize:function(e,t,n,r){return L(e,Xe.adjustColors(Xe.identity(),t,n,r))},sharpen:W([0,-1,0,-1,5,-1,0,-1,0]),emboss:W([-2,-1,0,-1,1,1,0,1,2]),gamma:U(function(e,t){return 255*Math.pow(e/255,1-t)}),exposure:U(function(e,t){return 255*(1-Math.exp(-e/255*t))}),colorFilter:L,convoluteFilter:H},Qe={scale:q},Ze={rotate:Y,flip:K,crop:J,resize:Z},et=function(){function e(e){this.littleEndian=!1,this._dv=new DataView(e)}return e.prototype.readByteAt=function(e){return this._dv.getUint8(e)},e.prototype.read=function(e,t){if(e+t>this.length())return null;for(var n=this.littleEndian?0:-8*(t-1),r=0,i=0;r<t;r++)i|=this.readByteAt(e+r)<<Math.abs(n+8*r);return i},e.prototype.BYTE=function(e){return this.read(e,1)},e.prototype.SHORT=function(e){return this.read(e,2)},e.prototype.LONG=function(e){return this.read(e,4)},e.prototype.SLONG=function(e){var t=this.read(e,4);return t>2147483647?t-4294967296:t},e.prototype.CHAR=function(e){return String.fromCharCode(this.read(e,1))},e.prototype.STRING=function(e,t){return this.asArray("CHAR",e,t).join("")},e.prototype.SEGMENT=function(e,t){var n=this._dv.buffer;switch(arguments.length){case 2:return n.slice(e,e+t);case 1:return n.slice(e);default:return n}},e.prototype.asArray=function(e,t,n){for(var r=[],i=0;i<n;i++)r[i]=this[e](t+i);return r},e.prototype.length=function(){return this._dv?this._dv.byteLength:0},e}(),tt={tiff:{274:"Orientation",270:"ImageDescription",271:"Make",272:"Model",305:"Software",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer"},exif:{36864:"ExifVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",36867:"DateTimeOriginal",33434:"ExposureTime",33437:"FNumber",34855:"ISOSpeedRatings",37377:"ShutterSpeedValue",37378:"ApertureValue",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",41988:"DigitalZoomRatio",41992:"Contrast",41993:"Saturation",41994:"Sharpness"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude"},thumb:{513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength"}},nt={ColorSpace:{1:"sRGB",0:"Uncalibrated"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{1:"Daylight",2:"Fliorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 -5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},ExposureMode:{0:"Auto exposure",1:"Manual exposure",2:"Auto bracket"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},GPSLatitudeRef:{N:"North latitude",S:"South latitude"},GPSLongitudeRef:{E:"East longitude",W:"West longitude"}},rt=function(){function e(e){this._offsets={tiffHeader:10,IFD0:null,IFD1:null,exifIFD:null,gpsIFD:null},this._tiffTags={};var t=this;if(t._reader=new et(e),t._idx=t._offsets.tiffHeader,65505!==t.SHORT(0)||"EXIF\0"!==t.STRING(4,5).toUpperCase())throw new Error("Exif data cannot be read or not available.");if(t._reader.littleEndian=18761==t.SHORT(t._idx),42!==t.SHORT(t._idx+=2))throw new Error("Invalid Exif data.");t._offsets.IFD0=t._offsets.tiffHeader+t.LONG(t._idx+=2),t._tiffTags=t.extractTags(t._offsets.IFD0,tt.tiff),"ExifIFDPointer"in t._tiffTags&&(t._offsets.exifIFD=t._offsets.tiffHeader+t._tiffTags.ExifIFDPointer,delete t._tiffTags.ExifIFDPointer),"GPSInfoIFDPointer"in t._tiffTags&&(t._offsets.gpsIFD=t._offsets.tiffHeader+t._tiffTags.GPSInfoIFDPointer,delete t._tiffTags.GPSInfoIFDPointer);var n=t.LONG(t._offsets.IFD0+12*t.SHORT(t._offsets.IFD0)+2);n&&(t._offsets.IFD1=t._offsets.tiffHeader+n)}return e.prototype.BYTE=function(e){return this._reader.BYTE(e)},e.prototype.SHORT=function(e){return this._reader.SHORT(e)},e.prototype.LONG=function(e){return this._reader.LONG(e)},e.prototype.SLONG=function(e){return this._reader.SLONG(e)},e.prototype.CHAR=function(e){return this._reader.CHAR(e)},e.prototype.STRING=function(e,t){return this._reader.STRING(e,t)},e.prototype.SEGMENT=function(e,t){return this._reader.SEGMENT(e,t)},e.prototype.asArray=function(e,t,n){for(var r=[],i=0;i<n;i++)r[i]=this[e](t+i);return r},e.prototype.length=function(){return this._reader.length()},e.prototype.UNDEFINED=function(){return this.BYTE.apply(this,arguments)},e.prototype.RATIONAL=function(e){return this.LONG(e)/this.LONG(e+4)},e.prototype.SRATIONAL=function(e){return this.SLONG(e)/this.SLONG(e+4)},e.prototype.ASCII=function(e){return this.CHAR(e)},e.prototype.TIFF=function(){return this._tiffTags},e.prototype.EXIF=function(){var e=this,t=null;if(e._offsets.exifIFD){try{t=e.extractTags(e._offsets.exifIFD,tt.exif)}catch(e){return null}if(t.ExifVersion&&Array.isArray(t.ExifVersion)){for(var n=0,r="";n<t.ExifVersion.length;n++)r+=String.fromCharCode(t.ExifVersion[n]);t.ExifVersion=r}}return t},e.prototype.GPS=function(){var e=this,t=null;if(e._offsets.gpsIFD){try{t=e.extractTags(e._offsets.gpsIFD,tt.gps)}catch(e){return null}t.GPSVersionID&&Array.isArray(t.GPSVersionID)&&(t.GPSVersionID=t.GPSVersionID.join("."))}return t},e.prototype.thumb=function(){var e=this;if(e._offsets.IFD1)try{var t=e.extractTags(e._offsets.IFD1,tt.thumb);if("JPEGInterchangeFormat"in t)return e.SEGMENT(e._offsets.tiffHeader+t.JPEGInterchangeFormat,t.JPEGInterchangeFormatLength)}catch(e){}return null},e.prototype.extractTags=function(e,t){var n,r,i,o,a,s,l,c,u=this,d=[],f={},h={1:"BYTE",7:"UNDEFINED",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",9:"SLONG",10:"SRATIONAL"},p={BYTE:1,UNDEFINED:1,ASCII:1,SHORT:2,LONG:4,RATIONAL:8,SLONG:4,SRATIONAL:8};for(n=u.SHORT(e),r=0;r<n;r++)if(d=[],l=e+2+12*r,void 0!==(i=t[u.SHORT(l)])){if(o=h[u.SHORT(l+=2)],a=u.LONG(l+=2),!(s=p[o]))throw new Error("Invalid Exif data.");if(l+=4,s*a>4&&(l=u.LONG(l)+u._offsets.tiffHeader),l+s*a>=u.length())throw new Error("Invalid Exif data.");"ASCII"!==o?(d=u.asArray(o,l,a),c=1==a?d[0]:d,nt.hasOwnProperty(i)&&"object"!=typeof c?f[i]=nt[i][c]:f[i]=c):f[i]=u.STRING(l,a).replace(/\0$/,"").trim()}return f},e}(),it=function(e){return Fe.blobToArrayBuffer(e).then(function(t){try{var n=new et(t);if(65496===n.SHORT(0)){var r=ot(n),i=r.filter(function(e){return"APP1"===e.name}),o={};if(!i.length)return be.reject("Headers did not include required information");var a=new rt(i[0].segment);return o={tiff:a.TIFF(),exif:a.EXIF(),gps:a.GPS(),thumb:a.thumb()},o.rawHeaders=r,o}return be.reject("Image was not a jpeg")}catch(t){return be.reject("Unsupported format or not an image: "+e.type+" (Exception: "+t.message+")")}})},ot=function(e){var t,n,r=[],i=0;for(t=2;t<=e.length();)if((n=e.SHORT(t))>=65488&&n<=65495)t+=2;else{if(65498===n||65497===n)break;i=e.SHORT(t+2)+2,n>=65505&&n<=65519&&r.push({hex:n,name:"APP"+(15&n),start:t,length:i,segment:e.SEGMENT(t,i)}),t+=i}return r},at={extractFrom:it},st=function(e){return Je.invert(e)},lt=function(e){return Je.sharpen(e)},ct=function(e){return Je.emboss(e)},ut=function(e,t){return Je.gamma(e,t)},dt=function(e,t){return Je.exposure(e,t)},ft=function(e,t,n,r){return Je.colorize(e,t,n,r)},ht=function(e,t){return Je.brightness(e,t)},pt=function(e,t){return Je.hue(e,t)},gt=function(e,t){return Je.saturate(e,t)},mt=function(e,t){return Je.contrast(e,t)},vt=function(e,t){return Je.grayscale(e,t)},bt=function(e,t){return Je.sepia(e,t)},yt=function(e,t){return Ze.flip(e,t)},wt=function(e,t,n,r,i){return Ze.crop(e,t,n,r,i)},_t=function(e,t,n){return Ze.resize(e,t,n)},xt=function(e,t){return Ze.rotate(e,t)},Ct=function(e){var t=function(t){switch(t.tiff.Orientation){case 6:return xt(e,90);case 3:return xt(e,180);case 8:return xt(e,270);default:return e}},n=function(){return e};return e.toBlob().then(at.extractFrom).then(t,n)},kt={invert:st,sharpen:lt,emboss:ct,brightness:ht,hue:pt,saturate:gt,contrast:mt,grayscale:vt,sepia:bt,colorize:ft,gamma:ut,exposure:dt,flip:yt,crop:wt,resize:_t,rotate:xt,exifRotate:Ct},Tt=function(e){return Ge.fromBlob(e)},St=function(e,t){return Ge.fromBlobAndUrlSync(e,t)},Dt=function(e){return Ge.fromImage(e)},Et=function(e,t,n){return void 0===t&&void 0===n?Nt(e):e.toAdjustedBlob(t,n)},Nt=function(e){return e.toBlob()},At=function(e){return e.toDataURL()},Rt={blobToImageResult:Tt,fromBlobAndUrlSync:St,imageToImageResult:Dt,imageResultToBlob:Et,imageResultToOriginalBlob:Nt,imageResultToDataURL:At},Pt=function(){return Me.getOrDie("URL")},Ot=function(e){return Pt().createObjectURL(e)},It=function(e){Pt().revokeObjectURL(e)},Mt={createObjectURL:Ot,revokeObjectURL:It},jt=tinymce.util.Tools.resolve("tinymce.util.Delay"),Bt=tinymce.util.Tools.resolve("tinymce.util.Promise"),Lt=tinymce.util.Tools.resolve("tinymce.util.URI"),Ft=function(e){return e.getParam("imagetools_toolbar","rotateleft rotateright | flipv fliph | crop editimage imageoptions")},Ht=function(e){return e.getParam("imagetools_proxy")},$t=function(e){return e.getParam("imagetools_cors_hosts",[],"string[]")},Ut=function(e){return e.getParam("imagetools_credentials_hosts",[],"string[]")},zt=function(e){return e.getParam("api_key",e.getParam("imagetools_api_key","","string"),"string")},Wt=function(e){return e.getParam("images_upload_timeout",3e4,"number")},qt=function(e){return e.getParam("images_reuse_filename",!1,"boolean")},Vt=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Yt=tinymce.util.Tools.resolve("tinymce.ui.Factory"),Gt=tinymce.util.Tools.resolve("tinymce.geom.Rect"),Kt=function(e){return new Bt(function(t){var n=function(){e.removeEventListener("load",n),t(e)};e.complete?t(e):e.addEventListener("load",n)})},Xt={loadImage:Kt},Jt=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),Qt=tinymce.util.Tools.resolve("tinymce.util.Observable"),Zt=tinymce.util.Tools.resolve("tinymce.util.VK"),en=0,tn=function(e){return new(Yt.get("Control").extend({Defaults:{classes:"imagepanel"},selection:function(e){return arguments.length?(this.state.set("rect",e),this):this.state.get("rect")},imageSize:function(){var e=this.state.get("viewRect");return{w:e.w,h:e.h}},toggleCropRect:function(e){this.state.set("cropEnabled",e)},imageSrc:function(e){var t=this,n=new Image;n.src=e,Xt.loadImage(n).then(function(){var e,r,i=t.state.get("viewRect");if(r=t.$el.find("img"),r[0])r.replaceWith(n);else{var o=document.createElement("div");o.className="mce-imagepanel-bg",t.getEl().appendChild(o),t.getEl().appendChild(n)}e={x:0,y:0,w:n.naturalWidth,h:n.naturalHeight},t.state.set("viewRect",e),t.state.set("rect",Gt.inflate(e,-20,-20)),i&&i.w===e.w&&i.h===e.h||t.zoomFit(),t.repaintImage(),t.fire("load")})},zoom:function(e){return arguments.length?(this.state.set("zoom",e),this):this.state.get("zoom")},postRender:function(){return this.imageSrc(this.settings.imageSrc),this._super()},zoomFit:function(){var e,t,n,r,i,o,a,s=this;a=10,e=s.$el.find("img"),t=s.getEl().clientWidth,n=s.getEl().clientHeight,r=e[0].naturalWidth,i=e[0].naturalHeight,o=Math.min((t-a)/r,(n-a)/i),o>=1&&(o=1),s.zoom(o)},repaintImage:function(){var e,t,n,r,i,o,a,s,l,c,u;u=this.getEl(),l=this.zoom(),c=this.state.get("rect"),a=this.$el.find("img"),s=this.$el.find(".mce-imagepanel-bg"),i=u.offsetWidth,o=u.offsetHeight,n=a[0].naturalWidth*l,r=a[0].naturalHeight*l,e=Math.max(0,i/2-n/2),t=Math.max(0,o/2-r/2),a.css({left:e,top:t,width:n,height:r}),s.css({left:e,top:t,width:n,height:r}),this.cropRect&&(this.cropRect.setRect({x:c.x*l+e,y:c.y*l+t,w:c.w*l,h:c.h*l}),this.cropRect.setClampRect({x:e,y:t,w:n,h:r}),this.cropRect.setViewPortRect({x:0,y:0,w:i,h:o}))},bindStates:function(){function e(e){t.cropRect=te(e,t.state.get("viewRect"),t.state.get("viewRect"),t.getEl(),function(){t.fire("crop")}),t.cropRect.on("updateRect",function(e){var n=e.rect,r=t.zoom();n={x:Math.round(n.x/r),y:Math.round(n.y/r),w:Math.round(n.w/r),h:Math.round(n.h/r)},t.state.set("rect",n)}),t.on("remove",t.cropRect.destroy)}var t=this;t.state.on("change:cropEnabled",function(e){t.cropRect.toggleVisibility(e.value),t.repaintImage()}),t.state.on("change:zoom",function(){t.repaintImage()}),t.state.on("change:rect",function(n){var r=n.value;t.cropRect||e(r),t.cropRect.setRect(r)})}}))(e)},nn={create:tn},rn={edit:ae},on={getImageSize:se,setImageSize:le,getNaturalImageSize:ce},an=function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&Array.prototype.isPrototypeOf(e)?"array":"object"===t&&String.prototype.isPrototypeOf(e)?"string":t},sn=function(e){return function(t){return an(t)===e}}("function"),ln=function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];if(t(i,n,e))return Ne.some(i)}return Ne.none()},cn=Array.prototype.slice,un=(sn(Array.from)&&Array.from,function(e){return null!==e&&void 0!==e}),dn=function(e,t){var n;return n=t.reduce(function(e,t){return un(e)?e[t]:void 0},e),un(n)?n:null},fn=function(e,t,n){return new Bt(function(r){var i;i=new ue,i.onreadystatechange=function(){4===i.readyState&&r({status:i.status,blob:this.response})},i.open("GET",e,!0),i.withCredentials=n,ge.each(t,function(e,t){i.setRequestHeader(t,e)}),i.responseType="blob",i.send()})},hn=function(e){return new Bt(function(t){var n=new l;n.onload=function(e){var n=e.target;t(n.result)},n.readAsText(e)})},pn=function(e){var t;try{t=JSON.parse(e)}catch(e){}return t},gn={traverse:dn,readBlob:hn,requestUrlAsBlob:fn,parseJson:pn},mn=[{code:404,message:"Could not find Image Proxy"},{code:403,message:"Rejected request"},{code:0,message:"Incorrect Image Proxy URL"}],vn=[{type:"key_missing",message:"The request did not include an api key."},{type:"key_not_found",message:"The provided api key could not be found."},{type:"domain_not_trusted",message:"The api key is not valid for the request origins."}],bn=function(e){return 400===e||403===e||500===e},yn=function(e){return"ImageProxy HTTP error: "+ln(mn,function(t){return e===t.code}).fold(ye("Unknown ImageProxy error"),function(e){return e.message})},wn=function(e){var t=yn(e);return Bt.reject(t)},_n=function(e){return ln(vn,function(t){return t.type===e}).fold(ye("Unknown service error"),function(e){return e.message})},xn=function(e){var t=gn.parseJson(e),n=gn.traverse(t,["error","type"]);return"ImageProxy Service error: "+(n?_n(n):"Invalid JSON in service error message")},Cn=function(e,t){return gn.readBlob(t).then(function(e){var t=xn(e);return Bt.reject(t)})},kn=function(e,t){return bn(e)?Cn(0,t):wn(e)},Tn={handleServiceErrorResponse:kn,handleHttpError:wn,getHttpErrorMsg:yn,getServiceErrorMsg:_n},Sn=function(e,t){var n=-1===e.indexOf("?")?"?":"&";return/[?&]apiKey=/.test(e)||!t?e:e+n+"apiKey="+encodeURIComponent(t)},Dn=function(e,t){var n={"Content-Type":"application/json;charset=UTF-8","tiny-api-key":t};return gn.requestUrlAsBlob(Sn(e,t),n,!1).then(function(e){return e.status<200||e.status>=300?Tn.handleServiceErrorResponse(e.status,e.blob):Bt.resolve(e.blob)})},En=function(e,t,n){return t?Dn(e,t):de(e,n)},Nn={getUrl:En},An=0,Rn=function(e,t){return e.dom.is(t,"img:not([data-mce-object],[data-mce-placeholder])")&&(jn(e,t)||Bn(e,t)||e.settings.imagetools_proxy)},Pn=function(e,t){e.notificationManager.open({text:t,type:"error"})},On=function(e){return e.selection.getNode()},In=function(e,t){var n=t.match(/\/([^\/\?]+)?\.(?:jpeg|jpg|png|gif)(?:\?|$)/i);return n?e.dom.encode(n[1]):null},Mn=function(){return"imagetools"+An++},jn=function(e,t){var n=t.src;return 0===n.indexOf("data:")||0===n.indexOf("blob:")||new Lt(n).host===e.documentBaseURI.host},Bn=function(e,t){return-1!==ge.inArray($t(e),new Lt(t.src).host)},Ln=function(e,t){return-1!==ge.inArray(Ut(e),new Lt(t.src).host)},Fn=function(e,t){var n,r=t.src;return Bn(e,t)?Nn.getUrl(t.src,null,Ln(e,t)):jn(e,t)?Ve.imageToBlob(t):(r=Ht(e),r+=(-1===r.indexOf("?")?"?":"&")+"url="+encodeURIComponent(t.src),n=zt(e),Nn.getUrl(r,n,!1))},Hn=function(e){var t;return t=e.editorUpload.blobCache.getByUri(On(e).src),t?Bt.resolve(t.blob()):Fn(e,On(e))},$n=function(e,t){var n=jt.setEditorTimeout(e,function(){e.editorUpload.uploadImagesAuto()},Wt(e));t.set(n)},Un=function(e){clearTimeout(e.get())},zn=function(e,t,n,r,i){return t.toBlob().then(function(o){var a,s,l,c,u;return l=e.editorUpload.blobCache,u=On(e),a=u.src,qt(e)&&(c=l.getByUri(a),c?(a=c.uri(),s=c.name()):s=In(e,a)),c=l.create({id:Mn(),blob:o,base64:t.toBase64(),uri:a,name:s}),l.add(c),e.undoManager.transact(function(){function t(){e.$(u).off("load",t),e.nodeChanged(),n?e.editorUpload.uploadImagesAuto():(Un(r),$n(e,r))}e.$(u).on("load",t),i&&e.$(u).attr({width:i.w,height:i.h}),e.$(u).attr({src:c.blobUri()}).removeAttr("data-mce-src")}),c})},Wn=function(e,t,n,r){return function(){return e._scanForImages().then(we(Hn,e)).then(Rt.blobToImageResult).then(n).then(function(n){return zn(e,n,!1,t,r)},function(t){Pn(e,t)})}},qn=function(e,t,n){return function(){var r=on.getImageSize(On(e)),i=r?{w:r.h,h:r.w}:null;return Wn(e,t,function(e){return kt.rotate(e,n)},i)()}},Vn=function(e,t,n){return function(){return Wn(e,t,function(e){return kt.flip(e,n)})()}},Yn=function(e,t){return function(){var n=On(e),r=on.getNaturalImageSize(n),i=function(e){return new Bt(function(t){Ve.blobToImage(e).then(function(i){var o=on.getNaturalImageSize(i);r.w===o.w&&r.h===o.h||on.getImageSize(n)&&on.setImageSize(n,o),Mt.revokeObjectURL(i.src),t(e)})})},o=function(e,n){return rn.edit(e,n).then(i).then(Rt.blobToImageResult).then(function(n){return zn(e,n,!0,t)},function(){})};Hn(e).then(Rt.blobToImageResult).then(we(o,e),function(t){Pn(e,t)})}},Gn={rotate:qn,flip:Vn,editImageDialog:Yn,isEditableImage:Rn,cancelTimedUpload:Un},Kn=function(e,t){ge.each({mceImageRotateLeft:Gn.rotate(e,t,-90),mceImageRotateRight:Gn.rotate(e,t,90),mceImageFlipVertical:Gn.flip(e,t,"v"),mceImageFlipHorizontal:Gn.flip(e,t,"h"),mceEditImage:Gn.editImageDialog(e,t)},function(t,n){e.addCommand(n,t)})},Xn={register:Kn},Jn=function(e,t,n){e.on("NodeChange",function(r){var i=n.get();i&&i.src!==r.element.src&&(Gn.cancelTimedUpload(t),e.editorUpload.uploadImagesAuto(),n.set(null)),Gn.isEditableImage(e,r.element)&&n.set(r.element)})},Qn={setup:Jn},Zn=function(e){e.addButton("rotateleft",{title:"Rotate counterclockwise",cmd:"mceImageRotateLeft"}),e.addButton("rotateright",{title:"Rotate clockwise",cmd:"mceImageRotateRight"}),e.addButton("flipv",{title:"Flip vertically",cmd:"mceImageFlipVertical"}),e.addButton("fliph",{title:"Flip horizontally",cmd:"mceImageFlipHorizontal"}),e.addButton("editimage",{title:"Edit image",cmd:"mceEditImage"}),e.addButton("imageoptions",{title:"Image options",icon:"options",cmd:"mceImage"})},er={register:Zn},tr=function(e){e.addContextToolbar(we(Gn.isEditableImage,e),Ft(e))},nr={register:tr};pe.add("imagetools",function(e){var t=he(0),n=he(null);Xn.register(e,t),er.register(e),nr.register(e),Qn.setup(e,t,n)})}()}(),function(){!function(){"use strict";function e(){}var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),r=tinymce.util.Tools.resolve("tinymce.EditorManager"),i=tinymce.util.Tools.resolve("tinymce.Env"),o=tinymce.util.Tools.resolve("tinymce.util.Tools"),a=function(e){return e.getParam("importcss_merge_classes")},s=function(e){return e.getParam("importcss_exclusive")},l=function(e){return e.getParam("importcss_selector_converter")},c=function(e){return e.getParam("importcss_selector_filter")},u=function(e){return e.getParam("importcss_groups")},d=function(e){return e.getParam("importcss_append")},f=function(e){return e.getParam("importcss_file_filter")},h={shouldMergeClasses:a,shouldImportExclusive:s,getSelectorConverter:l,getSelectorFilter:c,getCssGroups:u,shouldAppend:d,getFileFilter:f},p=function(e){var t=i.cacheSuffix;return"string"==typeof e&&(e=e.replace("?"+t,"").replace("&"+t,"")),e},g=function(e,t){var n=e.settings,i=!1!==n.skin&&(n.skin||"lightgray");if(i){return t===(n.skin_url?e.documentBaseURI.toAbsolute(n.skin_url):r.baseURL+"/skins/"+i)+"/content"+(e.inline?".inline":"")+".min.css"}return!1},m=function(e){return"string"==typeof e?function(t){return-1!==t.indexOf(e)}:e instanceof RegExp?function(t){return e.test(t)}:e},v=function(e,t,n){function r(t,a){var s,l=t.href;if((l=p(l))&&n(l,a)&&!g(e,l)){o.each(t.imports,function(e){r(e,!0)});try{s=t.cssRules||t.rules}catch(e){}o.each(s,function(e){e.styleSheet?r(e.styleSheet,!0):e.selectorText&&o.each(e.selectorText.split(","),function(e){i.push(o.trim(e))})})}}var i=[],a={};o.each(e.contentCSS,function(e){a[e]=!0}),n||(n=function(e,t){return t||a[e]});try{o.each(t.styleSheets,function(e){r(e)})}catch(e){}return i},b=function(e,t){var n,r=/^(?:([a-z0-9\-_]+))?(\.[a-z0-9_\-\.]+)$/i.exec(t);if(r){var i=r[1],a=r[2].substr(1).split(".").join(" "),s=o.makeMap("a,img");return r[1]?(n={title:t},e.schema.getTextBlockElements()[i]?n.block=i:e.schema.getBlockElements()[i]||s[i.toLowerCase()]?n.selector=i:n.inline=i):r[2]&&(n={inline:"span",title:t.substr(1),classes:a}),!1!==h.shouldMergeClasses(e)?n.classes=a:n.attributes={class:a},n}},y=function(e,t){return o.grep(e,function(e){return!e.filter||e.filter(t)})},w=function(e){return o.map(e,function(e){return o.extend({},e,{original:e,selectors:{},filter:m(e.filter),item:{text:e.title,menu:[]}})})},_=function(e,t){return null===t||!1!==h.shouldImportExclusive(e)},x=function(e,t,n,r){
return!(_(e,n)?t in r:t in n.selectors)},C=function(e,t,n,r){_(e,n)?r[t]=!0:n.selectors[t]=!0},k=function(e,t,n,r){var i;return i=r&&r.selector_converter?r.selector_converter:h.getSelectorConverter(e)?h.getSelectorConverter(e):function(){return b(e,n)},i.call(t,n,r)},T=function(e){e.on("renderFormatsMenu",function(t){var r={},i=m(h.getSelectorFilter(e)),a=t.control,s=w(h.getCssGroups(e)),l=function(t,i){if(x(e,t,i,r)){C(e,t,i,r);var s=k(e,e.plugins.importcss,t,i);if(s){var l=s.name||n.DOM.uniqueId();return e.formatter.register(l,s),o.extend({},a.settings.itemDefaults,{text:s.title,format:l})}}return null};h.shouldAppend(e)||a.items().remove(),o.each(v(e,t.doc||e.getDoc(),m(h.getFileFilter(e))),function(e){if(-1===e.indexOf(".mce-")&&(!i||i(e))){var t=y(s,e);if(t.length>0)o.each(t,function(t){var n=l(e,t);n&&t.item.menu.push(n)});else{var n=l(e,null);n&&a.add(n)}}}),o.each(s,function(e){e.item.menu.length>0&&a.add(e.item)}),t.control.renderNew()})},S={defaultConvertSelectorToFormat:b,setup:T},D=function(e){return{convertSelectorToFormat:function(t){return S.defaultConvertSelectorToFormat(e,t)}}},E={get:D};t.add("importcss",function(e){return S.setup(e),E.get(e)})}()}(),function(){!function(){"use strict";function e(){}var t=function(e){var n=e,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return t(r())}}},n=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=function(e){return e.getParam("insertdatetime_dateformat",e.translate("%Y-%m-%d"))},i=function(e){return e.getParam("insertdatetime_timeformat",e.translate("%H:%M:%S"))},o=function(e){return e.getParam("insertdatetime_formats",["%H:%M:%S","%Y-%m-%d","%I:%M:%S %p","%D"])},a=function(e){var t=o(e);return t.length>0?t[0]:i(e)},s=function(e){return e.getParam("insertdatetime_element",!1)},l={getDateFormat:r,getTimeFormat:i,getFormats:o,getDefaultDateTime:a,shouldInsertTimeElement:s},c="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),u="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),d="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),f="January February March April May June July August September October November December".split(" "),h=function(e,t){if(e=""+e,e.length<t)for(var n=0;n<t-e.length;n++)e="0"+e;return e},p=function(e,t,n){return n=n||new Date,t=t.replace("%D","%m/%d/%Y"),t=t.replace("%r","%I:%M:%S %p"),t=t.replace("%Y",""+n.getFullYear()),t=t.replace("%y",""+n.getYear()),t=t.replace("%m",h(n.getMonth()+1,2)),t=t.replace("%d",h(n.getDate(),2)),t=t.replace("%H",""+h(n.getHours(),2)),t=t.replace("%M",""+h(n.getMinutes(),2)),t=t.replace("%S",""+h(n.getSeconds(),2)),t=t.replace("%I",""+((n.getHours()+11)%12+1)),t=t.replace("%p",n.getHours()<12?"AM":"PM"),t=t.replace("%B",""+e.translate(f[n.getMonth()])),t=t.replace("%b",""+e.translate(d[n.getMonth()])),t=t.replace("%A",""+e.translate(u[n.getDay()])),t=t.replace("%a",""+e.translate(c[n.getDay()])),t=t.replace("%%","%")},g=function(e,t,n,r){var i=e.dom.create("time",{datetime:n},r);t.parentNode.insertBefore(i,t),e.dom.remove(t),e.selection.select(i,!0),e.selection.collapse(!1)},m=function(e,t){if(l.shouldInsertTimeElement(e)){var n=p(e,t),r=void 0;r=/%[HMSIp]/.test(t)?p(e,"%Y-%m-%dT%H:%M"):p(e,"%Y-%m-%d");var i=e.dom.getParent(e.selection.getStart(),"time");i?g(e,i,r,n):e.insertContent('<time datetime="'+r+'">'+n+"</time>")}else e.insertContent(p(e,t))},v={insertDateTime:m,getDateTime:p},b=function(e){e.addCommand("mceInsertDate",function(){v.insertDateTime(e,l.getDateFormat(e))}),e.addCommand("mceInsertTime",function(){v.insertDateTime(e,l.getTimeFormat(e))})},y={register:b},w=tinymce.util.Tools.resolve("tinymce.util.Tools"),_=function(e,t){var n=l.getFormats(e);return w.map(n,function(n){return{text:v.getDateTime(e,n),onclick:function(){t.set(n),v.insertDateTime(e,n)}}})},x=function(e,t){var n=_(e,t);e.addButton("insertdatetime",{type:"splitbutton",title:"Insert date/time",menu:n,onclick:function(){var n=t.get();v.insertDateTime(e,n||l.getDefaultDateTime(e))}}),e.addMenuItem("insertdatetime",{icon:"date",text:"Date/time",menu:n,context:"insert"})},C={register:x};n.add("insertdatetime",function(e){var n=t(null);y.register(e),C.register(e,n)})}()}(),function(){!function(){"use strict";function e(){}var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.util.Tools"),r=function(e){var t="p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",r=n.explode(e.settings.font_size_style_values),i=e.schema;e.formatter.register({alignleft:{selector:t,attributes:{align:"left"}},aligncenter:{selector:t,attributes:{align:"center"}},alignright:{selector:t,attributes:{align:"right"}},alignjustify:{selector:t,attributes:{align:"justify"}},bold:[{inline:"b",remove:"all"},{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}}],italic:[{inline:"i",remove:"all"},{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}}],underline:[{inline:"u",remove:"all"},{inline:"span",styles:{textDecoration:"underline"},exact:!0}],strikethrough:[{inline:"strike",remove:"all"},{inline:"span",styles:{textDecoration:"line-through"},exact:!0}],fontname:{inline:"font",attributes:{face:"%value"}},fontsize:{inline:"font",attributes:{size:function(e){return n.inArray(r,e.value)+1}}},forecolor:{inline:"font",attributes:{color:"%value"}},hilitecolor:{inline:"font",styles:{backgroundColor:"%value"}}}),n.each("b,i,u,strike".split(","),function(e){i.addValidElements(e+"[*]")}),i.getElementRule("font")||i.addValidElements("font[face|size|color|style]"),n.each(t.split(","),function(e){var t=i.getElementRule(e);t&&(t.attributes.align||(t.attributes.align={},t.attributesOrder.push("align")))})},i=function(e){e.settings.inline_styles=!1,e.on("init",function(){r(e)})},o={setup:i},a=function(e){e.addButton("fontsizeselect",function(){var t=[],n=e.settings.fontsizeFormats||"8pt=1 10pt=2 12pt=3 14pt=4 18pt=5 24pt=6 36pt=7";return e.$.each(n.split(" "),function(e,n){var r=n,i=n,o=n.split("=");o.length>1&&(r=o[0],i=o[1]),t.push({text:r,value:i})}),{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:t,fixedWidth:!0,onPostRender:function(){var t=this;e.on("NodeChange",function(){var n;n=e.dom.getParent(e.selection.getNode(),"font"),n?t.value(n.size):t.value("")})},onclick:function(t){t.control.settings.value&&e.execCommand("FontSize",!1,t.control.settings.value)}}}),e.addButton("fontselect",function(){var t=[],n=function(e){e=e.replace(/;$/,"").split(";");for(var t=e.length;t--;)e[t]=e[t].split("=");return e}(e.settings.font_formats||"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats");return e.$.each(n,function(e,n){t.push({text:{raw:n[0]},value:n[1],textStyle:-1===n[1].indexOf("dings")?"font-family:"+n[1]:""})}),{type:"listbox",text:"Font Family",tooltip:"Font Family",values:t,fixedWidth:!0,onPostRender:function(){var t=this;e.on("NodeChange",function(){var n;n=e.dom.getParent(e.selection.getNode(),"font"),n?t.value(n.face):t.value("")})},onselect:function(t){t.control.settings.value&&e.execCommand("FontName",!1,t.control.settings.value)}}})},s={register:a};t.add("legacyoutput",function(e){o.setup(e),s.register(e)})}()}(),function(){!function(){"use strict";function e(){}var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.util.VK"),r=function(e){return"boolean"==typeof e.link_assume_external_targets&&e.link_assume_external_targets},i=function(e){return"boolean"==typeof e.link_context_toolbar&&e.link_context_toolbar},o=function(e){return e.link_list},a=function(e){return"string"==typeof e.default_link_target},s=function(e){return e.default_link_target},l=function(e){return e.target_list},c=function(e,t){e.settings.target_list=t},u=function(e){return!1!==l(e)},d=function(e){return e.rel_list},f=function(e){return void 0!==d(e)},h=function(e){return e.link_class_list},p=function(e){return void 0!==h(e)},g=function(e){return!1!==e.link_title},m=function(e){return"boolean"==typeof e.allow_unsafe_link_target&&e.allow_unsafe_link_target},v={assumeExternalTargets:r,hasContextToolbar:i,getLinkList:o,hasDefaultLinkTarget:a,getDefaultLinkTarget:s,getTargetList:l,setTargetList:c,shouldShowTargetList:u,getRelList:d,hasRelList:f,getLinkClassList:h,hasLinkClassList:p,shouldShowLinkTitle:g,allowUnsafeLinkTarget:m},b=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),y=tinymce.util.Tools.resolve("tinymce.Env"),w=function(e,t){document.body.appendChild(e),e.dispatchEvent(t),document.body.removeChild(e)},_=function(e){if(!y.ie||y.ie>10){var t=document.createElement("a");t.target="_blank",t.href=e,t.rel="noreferrer noopener";var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),w(t,n)}else{var r=window.open("","_blank");if(r){r.opener=null;var i=r.document;i.open(),i.write('<meta http-equiv="refresh" content="0; url='+b.DOM.encode(e)+'">'),i.close()}}},x={open:_},C=tinymce.util.Tools.resolve("tinymce.util.Tools"),k=function(e,t){var n=["noopener"],r=e?e.split(/\s+/):[],i=function(e){return e.filter(function(e){return-1===C.inArray(n,e)})};return r=t?function(e){return e=i(e),e.length?e.concat(n):n}(r):i(r),r.length?function(e){return C.trim(e.sort().join(" "))}(r):null},T=function(e){return e.replace(/\uFEFF/g,"")},S=function(e,t){return t=t||e.selection.getNode(),R(t)?e.dom.select("a[href]",t)[0]:e.dom.getParent(t,"a[href]")},D=function(e,t){var n=t?t.innerText||t.textContent:e.getContent({format:"text"});return T(n)},E=function(e){return e&&"A"===e.nodeName&&e.href},N=function(e){return C.grep(e,E).length>0},A=function(e){return!(/</.test(e)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(e)||-1===e.indexOf("href=")))},R=function(e){return e&&"FIGURE"===e.nodeName&&/\bimage\b/i.test(e.className)},P=function(e,t){return function(n){e.undoManager.transact(function(){var r=e.selection.getNode(),i=S(e,r),o={href:n.href,target:n.target?n.target:null,rel:n.rel?n.rel:null,class:n.class?n.class:null,title:n.title?n.title:null};v.hasRelList(e.settings)||!1!==v.allowUnsafeLinkTarget(e.settings)||(o.rel=k(o.rel,"_blank"===o.target)),n.href===t.href&&(t.attach(),t={}),i?(e.focus(),n.hasOwnProperty("text")&&("innerText"in i?i.innerText=n.text:i.textContent=n.text),e.dom.setAttribs(i,o),e.selection.select(i),e.undoManager.add()):R(r)?M(e,r,o):n.hasOwnProperty("text")?e.insertContent(e.dom.createHTML("a",o,e.dom.encode(n.text))):e.execCommand("mceInsertLink",!1,o)})}},O=function(e){return function(){e.undoManager.transact(function(){var t=e.selection.getNode();R(t)?I(e,t):e.execCommand("unlink")})}},I=function(e,t){var n,r;(r=e.dom.select("img",t)[0])&&(n=e.dom.getParents(r,"a[href]",t)[0])&&(n.parentNode.insertBefore(r,n),e.dom.remove(n))},M=function(e,t,n){var r,i;(i=e.dom.select("img",t)[0])&&(r=e.dom.create("a",n),i.parentNode.insertBefore(r,i),r.appendChild(i))},j={link:P,unlink:O,isLink:E,hasLinks:N,isOnlyTextSelected:A,getAnchorElement:S,getAnchorText:D,toggleTargetRules:k},B=tinymce.util.Tools.resolve("tinymce.util.Delay"),L=tinymce.util.Tools.resolve("tinymce.util.XHR"),F={},H=function(e,t){var n=v.getLinkList(e.settings);"string"==typeof n?L.send({url:n,success:function(n){t(e,JSON.parse(n))}}):"function"==typeof n?n(function(n){t(e,n)}):t(e,n)},$=function(e,t,n){var r=function(e,n){return n=n||[],C.each(e,function(e){var i={text:e.text||e.title};e.menu?i.menu=r(e.menu):(i.value=e.value,t&&t(i)),n.push(i)}),n};return r(e,n||[])},U=function(e,t,n){var r=e.selection.getRng();B.setEditorTimeout(e,function(){e.windowManager.confirm(t,function(t){e.selection.setRng(r),n(t)})})},z=function(e,t){var n,r,i,o,a,s,l,c,u,d,f,h={},p=e.selection,g=e.dom,m=function(e){var t=i.find("#text");(!t.value()||e.lastControl&&t.value()===e.lastControl.text())&&t.value(e.control.text()),i.find("#href").value(e.control.value())},b=function(){r||!o||h.text||this.parent().parent().find("#text")[0].value(this.value())},y=function(t){var n=t.meta||{};s&&s.value(e.convertURL(this.value(),"href")),C.each(t.meta,function(e,t){var n=i.find("#"+t);"text"===t?0===r.length&&(n.value(e),h.text=e):n.value(e)}),n.attach&&(F={href:this.value(),attach:n.attach}),n.text||b.call(this)},w=function(e){e.meta=i.toJSON()};o=j.isOnlyTextSelected(p.getContent()),n=j.getAnchorElement(e),h.text=r=j.getAnchorText(e.selection,n),h.href=n?g.getAttrib(n,"href"):"",n?h.target=g.getAttrib(n,"target"):v.hasDefaultLinkTarget(e.settings)&&(h.target=v.getDefaultLinkTarget(e.settings)),(f=g.getAttrib(n,"rel"))&&(h.rel=f),(f=g.getAttrib(n,"class"))&&(h.class=f),(f=g.getAttrib(n,"title"))&&(h.title=f),o&&(a={name:"text",type:"textbox",size:40,label:"Text to display",onchange:function(){h.text=this.value()}}),t&&(s={type:"listbox",label:"Link list",values:$(t,function(t){t.value=e.convertURL(t.value||t.url,"href")},[{text:"None",value:""}]),onselect:m,value:e.convertURL(h.href,"href"),onPostRender:function(){s=this}}),v.shouldShowTargetList(e.settings)&&(void 0===v.getTargetList(e.settings)&&v.setTargetList(e,[{text:"None",value:""},{text:"New window",value:"_blank"}]),c={name:"target",type:"listbox",label:"Target",values:$(v.getTargetList(e.settings))}),v.hasRelList(e.settings)&&(l={name:"rel",type:"listbox",label:"Rel",values:$(v.getRelList(e.settings),function(t){!1===v.allowUnsafeLinkTarget(e.settings)&&(t.value=j.toggleTargetRules(t.value,"_blank"===h.target))})}),v.hasLinkClassList(e.settings)&&(u={name:"class",type:"listbox",label:"Class",values:$(v.getLinkClassList(e.settings),function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({inline:"a",classes:[t.value]})})})}),v.shouldShowLinkTitle(e.settings)&&(d={name:"title",type:"textbox",label:"Title",value:h.title}),i=e.windowManager.open({title:"Insert link",data:h,body:[{name:"href",type:"filepicker",filetype:"file",size:40,autofocus:!0,label:"Url",onchange:y,onkeyup:b,onpaste:b,onbeforecall:w},a,d,function(t){var n=[];if(C.each(e.dom.select("a:not([href])"),function(e){var r=e.name||e.id;r&&n.push({text:r,value:"#"+r,selected:-1!==t.indexOf("#"+r)})}),n.length)return n.unshift({text:"None",value:""}),{name:"anchor",type:"listbox",label:"Anchors",values:n,onselect:m}}(h.href),s,l,c,u],onSubmit:function(t){var n=v.assumeExternalTargets(e.settings),i=j.link(e,F),a=j.unlink(e),s=C.extend({},h,t.data),l=s.href;return l?(o&&s.text!==r||delete s.text,l.indexOf("@")>0&&-1===l.indexOf("//")&&-1===l.indexOf("mailto:")?void U(e,"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",function(e){e&&(s.href="mailto:"+l),i(s)}):!0===n&&!/^\w+:/i.test(l)||!1===n&&/^\s*www[\.|\d\.]/i.test(l)?void U(e,"The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",function(e){e&&(s.href="http://"+l),i(s)}):void i(s)):void a()}})},W=function(e){H(e,z)},q={open:W},V=function(e,t){return e.dom.getParent(t,"a[href]")},Y=function(e){return V(e,e.selection.getStart())},G=function(e){var t=e.getAttribute("data-mce-href");return t||e.getAttribute("href")},K=function(e){var t=e.plugins.contextmenu;return!!t&&t.isContextMenuVisible()},X=function(e){return!0===e.altKey&&!1===e.shiftKey&&!1===e.ctrlKey&&!1===e.metaKey},J=function(e,t){if(t){var n=G(t);if(/^#/.test(n)){var r=e.$(n);r.length&&e.selection.scrollIntoView(r[0],!0)}else x.open(t.href)}},Q=function(e){return function(){q.open(e)}},Z=function(e){return function(){J(e,Y(e))}},ee=function(e){return function(t){var n,r,i;return!!(v.hasContextToolbar(e.settings)&&!K(e)&&j.isLink(t)&&(n=e.selection,r=n.getRng(),i=r.startContainer,3===i.nodeType&&n.isCollapsed()&&r.startOffset>0&&r.startOffset<i.data.length))}},te=function(e){e.on("click",function(t){var r=V(e,t.target);r&&n.metaKeyPressed(t)&&(t.preventDefault(),J(e,r))}),e.on("keydown",function(t){var n=Y(e);n&&13===t.keyCode&&X(t)&&(t.preventDefault(),J(e,n))})},ne=function(e){return function(){var t=this;e.on("nodechange",function(n){t.active(!e.readonly&&!!j.getAnchorElement(e,n.element))})}},re=function(e){return function(){var t=this,n=function(e){j.hasLinks(e.parents)?t.show():t.hide()};j.hasLinks(e.dom.getParents(e.selection.getStart()))||t.hide(),e.on("nodechange",n),t.on("remove",function(){e.off("nodechange",n)})}},ie={openDialog:Q,gotoSelectedLink:Z,leftClickedOnAHref:ee,setupGotoLinks:te,toggleActiveState:ne,toggleViewLinkState:re},oe=function(e){e.addCommand("mceLink",ie.openDialog(e))},ae={register:oe},se=function(e){e.addShortcut("Meta+K","",ie.openDialog(e))},le={setup:se},ce=function(e){e.addButton("link",{active:!1,icon:"link",tooltip:"Insert/edit link",onclick:ie.openDialog(e),onpostrender:ie.toggleActiveState(e)}),e.addButton("unlink",{active:!1,icon:"unlink",tooltip:"Remove link",onclick:j.unlink(e),onpostrender:ie.toggleActiveState(e)}),e.addContextToolbar&&e.addButton("openlink",{icon:"newtab",tooltip:"Open link",onclick:ie.gotoSelectedLink(e)})},ue=function(e){e.addMenuItem("openlink",{text:"Open link",icon:"newtab",onclick:ie.gotoSelectedLink(e),onPostRender:ie.toggleViewLinkState(e),prependToContext:!0}),e.addMenuItem("link",{icon:"link",text:"Link",shortcut:"Meta+K",onclick:ie.openDialog(e),stateSelector:"a[href]",context:"insert",prependToContext:!0}),e.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onclick:j.unlink(e),stateSelector:"a[href]"})},de=function(e){e.addContextToolbar&&e.addContextToolbar(ie.leftClickedOnAHref(e),"openlink | link unlink")},fe={setupButtons:ce,setupMenuItems:ue,setupContextToolbars:de};t.add("link",function(e){fe.setupButtons(e),fe.setupMenuItems(e),fe.setupContextToolbars(e),ie.setupGotoLinks(e),ae.register(e),le.setup(e)})}()}(),function(){!function(){"use strict";function e(){}var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),r=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),i=tinymce.util.Tools.resolve("tinymce.util.VK"),o=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager"),a=tinymce.util.Tools.resolve("tinymce.util.Tools"),s=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),l=function(e){return e&&3===e.nodeType},c=function(e){return e&&/^(OL|UL|DL)$/.test(e.nodeName)},u=function(e){return e&&/^(LI|DT|DD)$/.test(e.nodeName)},d=function(e){return e&&/^(TH|TD)$/.test(e.nodeName)},f=function(e){return e&&"BR"===e.nodeName},h=function(e){return e.parentNode.firstChild===e},p=function(e){return e.parentNode.lastChild===e},g=function(e,t){return t&&!!e.schema.getTextBlockElements()[t.nodeName]},m=function(e,t){return e&&e.nodeName in t},v=function(e,t){return!!f(t)&&!(!e.isBlock(t.nextSibling)||f(t.previousSibling))},b=function(e,t,n){var r=e.isEmpty(t);return!(n&&e.select("span[data-mce-type=bookmark]",t).length>0)&&r},y=function(e,t){return e.isChildOf(t,e.getRoot())},w={isTextNode:l,isListNode:c,isListItemNode:u,isTableCellNode:d,isBr:f,isFirstChild:h,isLastChild:p,isTextBlock:g,isBlock:m,isBogusBr:v,isEmpty:b,isChildOfBody:y},_=function(e,t){var r=n.getNode(e,t);if(w.isListItemNode(e)&&w.isTextNode(r)){return{container:r,offset:t>=e.childNodes.length?r.data.length:0}}return{container:e,offset:t}},x=function(e){var t=e.cloneRange(),n=_(e.startContainer,e.startOffset);t.setStart(n.container,n.offset);var r=_(e.endContainer,e.endOffset);return t.setEnd(r.container,r.offset),t},C={getNormalizedEndPoint:_,normalizeRange:x},k=s.DOM,T=function(e){var t={},n=function(n){var r,i,o;i=e[n?"startContainer":"endContainer"],o=e[n?"startOffset":"endOffset"],1===i.nodeType&&(r=k.create("span",{"data-mce-type":"bookmark"}),i.hasChildNodes()?(o=Math.min(o,i.childNodes.length-1),n?i.insertBefore(r,i.childNodes[o]):k.insertAfter(r,i.childNodes[o])):i.appendChild(r),i=r,o=0),t[n?"startContainer":"endContainer"]=i,t[n?"startOffset":"endOffset"]=o};return n(!0),e.collapsed||n(),t},S=function(e){function t(t){var n,r,i;n=i=e[t?"startContainer":"endContainer"],r=e[t?"startOffset":"endOffset"],n&&(1===n.nodeType&&(r=function(e){for(var t=e.parentNode.firstChild,n=0;t;){if(t===e)return n;1===t.nodeType&&"bookmark"===t.getAttribute("data-mce-type")||n++,t=t.nextSibling}return-1}(n),n=n.parentNode,k.remove(i),!n.hasChildNodes()&&k.isBlock(n)&&n.appendChild(k.create("br"))),e[t?"startContainer":"endContainer"]=n,e[t?"startOffset":"endOffset"]=r)}t(!0),t();var n=k.createRng();return n.setStart(e.startContainer,e.startOffset),e.endContainer&&n.setEnd(e.endContainer,e.endOffset),C.normalizeRange(n)},D={createBookmark:T,resolveBookmark:S},E=s.DOM,N=function(e,t){var n,r=t.parentNode;"LI"===r.nodeName&&r.firstChild===t&&(n=r.previousSibling,n&&"LI"===n.nodeName?(n.appendChild(t),w.isEmpty(e,r)&&E.remove(r)):E.setStyle(r,"listStyleType","none")),w.isListNode(r)&&(n=r.previousSibling)&&"LI"===n.nodeName&&n.appendChild(t)},A=function(e,t){a.each(a.grep(e.select("ol,ul",t)),function(t){N(e,t)})},R={normalizeList:N,normalizeLists:A},P=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),O=function(e){var t=e.selection.getStart(!0);return e.dom.getParent(t,"OL,UL,DL",F(e,t))},I=function(e,t){return e&&1===t.length&&t[0]===e},M=function(e){return a.grep(e.querySelectorAll("ol,ul,dl"),function(e){return w.isListNode(e)})},j=function(e){var t=O(e),n=e.selection.getSelectedBlocks();return I(t,n)?M(t):a.grep(n,function(e){return w.isListNode(e)&&t!==e})},B=function(e,t){var n=a.map(t,function(t){var n=e.dom.getParent(t,"li,dd,dt",F(e,t));return n||t});return P.unique(n)},L=function(e){var t=e.selection.getSelectedBlocks();return a.grep(B(e,t),function(e){return w.isListItemNode(e)})},F=function(e,t){var n=e.dom.getParents(t,"TD,TH");return n.length>0?n[0]:e.getBody()},H={getParentList:O,getSelectedSubLists:j,getSelectedListItems:L,getClosestListRootElm:F},$=tinymce.util.Tools.resolve("tinymce.Env"),U=s.DOM,z=function(e,t,n){var r,i,o,a=U.createFragment(),s=e.schema.getBlockElements();if(e.settings.forced_root_block&&(n=n||e.settings.forced_root_block),n&&(i=U.create(n),i.tagName===e.settings.forced_root_block&&U.setAttribs(i,e.settings.forced_root_block_attrs),w.isBlock(t.firstChild,s)||a.appendChild(i)),t)for(;r=t.firstChild;){var l=r.nodeName;o||"SPAN"===l&&"bookmark"===r.getAttribute("data-mce-type")||(o=!0),w.isBlock(r,s)?(a.appendChild(r),i=null):n?(i||(i=U.create(n),a.appendChild(i)),i.appendChild(r)):a.appendChild(r)}return e.settings.forced_root_block?o||$.ie&&!($.ie>10)||i.appendChild(U.create("br",{"data-mce-bogus":"1"})):a.appendChild(U.create("br")),a},W={createNewTextBlock:z},q=s.DOM,V=function(e,t,n,r){var i,o,s,l;for(s=q.select('span[data-mce-type="bookmark"]',t),r=r||W.createNewTextBlock(e,n),i=q.createRng(),i.setStartAfter(n),i.setEndAfter(t),o=i.extractContents(),l=o.firstChild;l;l=l.firstChild)if("LI"===l.nodeName&&e.dom.isEmpty(l)){q.remove(l);break}e.dom.isEmpty(o)||q.insertAfter(o,t),q.insertAfter(r,t),w.isEmpty(e.dom,n.parentNode)&&function(e){a.each(s,function(t){e.parentNode.insertBefore(t,n.parentNode)}),q.remove(e)}(n.parentNode),q.remove(n),w.isEmpty(e.dom,t)&&q.remove(t)},Y={splitList:V},G=s.DOM,K=function(e,t){w.isEmpty(e,t)&&G.remove(t)},X=function(e,t){var n,r,i=t.parentNode;return i?(n=i.parentNode,i===e.getBody()||("DD"===t.nodeName?(G.rename(t,"DT"),!0):w.isFirstChild(t)&&w.isLastChild(t)?("LI"===n.nodeName?(G.insertAfter(t,n),K(e.dom,n),G.remove(i)):w.isListNode(n)?G.remove(i,!0):(n.insertBefore(W.createNewTextBlock(e,t),i),G.remove(i)),!0):w.isFirstChild(t)?("LI"===n.nodeName?(G.insertAfter(t,n),t.appendChild(i),K(e.dom,n)):w.isListNode(n)?n.insertBefore(t,i):(n.insertBefore(W.createNewTextBlock(e,t),i),G.remove(t)),!0):w.isLastChild(t)?("LI"===n.nodeName?G.insertAfter(t,n):w.isListNode(n)?G.insertAfter(t,i):(G.insertAfter(W.createNewTextBlock(e,t),i),G.remove(t)),!0):("LI"===n.nodeName?(i=n,r=W.createNewTextBlock(e,t,"LI")):r=w.isListNode(n)?W.createNewTextBlock(e,t,"LI"):W.createNewTextBlock(e,t),Y.splitList(e,i,t,r),R.normalizeLists(e.dom,i.parentNode),!0))):(K(e.dom,t),!0)},J=function(e){var t=H.getSelectedListItems(e);if(t.length){var n=D.createBookmark(e.selection.getRng()),r=void 0,i=void 0,o=H.getClosestListRootElm(e,e.selection.getStart(!0));for(r=t.length;r--;)for(var a=t[r].parentNode;a&&a!==o;){for(i=t.length;i--;)if(t[i]===a){t.splice(r,1);break}a=a.parentNode}for(r=0;r<t.length&&(X(e,t[r])||0!==r);r++);return e.selection.setRng(D.resolveBookmark(n)),e.nodeChanged(),!0}},Q={outdent:X,outdentSelection:J},Z=function(e,t,n){var r=n["list-style-type"]?n["list-style-type"]:null;e.setStyle(t,"list-style-type",r)},ee=function(e,t){a.each(t,function(t,n){e.setAttribute(n,t)})},te=function(e,t,n){ee(t,n["list-attributes"]),a.each(e.select("li",t),function(e){ee(e,n["list-item-attributes"])})},ne=function(e,t,n){Z(e,t,n),te(e,t,n)},re=function(e,t,n){a.each(n,function(n){var r;return e.setStyle(t,(r={},r[n]="",r))})},ie=function(e,t,n,r){var i,o;for(i=t[n?"startContainer":"endContainer"],o=t[n?"startOffset":"endOffset"],1===i.nodeType&&(i=i.childNodes[Math.min(o,i.childNodes.length-1)]||i),!n&&w.isBr(i.nextSibling)&&(i=i.nextSibling);i.parentNode!==r;){if(w.isTextBlock(e,i))return i;if(/^(TD|TH)$/.test(i.parentNode.nodeName))return i;i=i.parentNode}return i},oe=function(e,t,n){for(var r,i=[],s=e.dom,l=ie(e,t,!0,n),c=ie(e,t,!1,n),u=[],d=l;d&&(u.push(d),d!==c);d=d.nextSibling);return a.each(u,function(t){if(w.isTextBlock(e,t))return i.push(t),void(r=null);if(s.isBlock(t)||w.isBr(t))return w.isBr(t)&&s.remove(t),void(r=null);var a=t.nextSibling;if(o.isBookmarkNode(t)&&(w.isTextBlock(e,a)||!a&&t.parentNode===n))return void(r=null);r||(r=s.create("p"),t.parentNode.insertBefore(r,t),i.push(r)),r.appendChild(t)}),i},ae=function(e,t,n){var r=e.getStyle(t,"list-style-type"),i=n?n["list-style-type"]:"";return i=null===i?"":i,r===i},se=function(e,t,n){void 0===n&&(n={});var r,i=e.selection.getRng(!0),o="LI",s=H.getClosestListRootElm(e,e.selection.getStart(!0)),l=e.dom;"false"!==l.getContentEditable(e.selection.getNode())&&(t=t.toUpperCase(),"DL"===t&&(o="DT"),r=D.createBookmark(i),a.each(oe(e,i,s),function(r){var i,a;a=r.previousSibling,a&&w.isListNode(a)&&a.nodeName===t&&ae(l,a,n)?(i=a,r=l.rename(r,o),a.appendChild(r)):(i=l.create(t),r.parentNode.insertBefore(i,r),i.appendChild(r),r=l.rename(r,o)),re(l,r,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),ne(l,i,n),he(e.dom,i)}),e.selection.setRng(D.resolveBookmark(r)))},le=function(e){var t=D.createBookmark(e.selection.getRng(!0)),n=H.getClosestListRootElm(e,e.selection.getStart(!0)),r=H.getSelectedListItems(e),i=a.grep(r,function(t){return e.dom.isEmpty(t)});r=a.grep(r,function(t){return!e.dom.isEmpty(t)}),a.each(i,function(t){if(w.isEmpty(e.dom,t))return void Q.outdent(e,t)}),a.each(r,function(t){var r,i;if(t.parentNode!==e.getBody()){for(r=t;r&&r!==n;r=r.parentNode)w.isListNode(r)&&(i=r);Y.splitList(e,i,t),R.normalizeLists(e.dom,i.parentNode)}}),e.selection.setRng(D.resolveBookmark(t))},ce=function(e,t){return e&&t&&w.isListNode(e)&&e.nodeName===t.nodeName},ue=function(e,t,n){return e.getStyle(t,"list-style-type",!0)===e.getStyle(n,"list-style-type",!0)},de=function(e,t){return e.className===t.className},fe=function(e,t,n){return ce(t,n)&&ue(e,t,n)&&de(t,n)},he=function(e,t){var n,r;if(n=t.nextSibling,fe(e,t,n)){for(;r=n.firstChild;)t.appendChild(r);e.remove(n)}if(n=t.previousSibling,fe(e,t,n)){for(;r=n.lastChild;)t.insertBefore(r,t.firstChild);e.remove(n)}},pe=function(e,t,n,r){if(t.nodeName!==n){var i=e.rename(t,n);ne(e,i,r)}else ne(e,t,r)},ge=function(e,t,n,r,i){if(t.nodeName!==r||me(i)){var o=D.createBookmark(e.selection.getRng(!0));a.each([t].concat(n),function(t){pe(e.dom,t,r,i)}),e.selection.setRng(D.resolveBookmark(o))}else le(e)},me=function(e){return"list-style-type"in e},ve=function(e,t,n,r){if(t!==e.getBody())if(t)if(t.nodeName!==n||me(r)){var i=D.createBookmark(e.selection.getRng(!0));ne(e.dom,t,r),he(e.dom,e.dom.rename(t,n)),e.selection.setRng(D.resolveBookmark(i))}else le(e);else se(e,n,r)},be=function(e,t,n){var r=H.getParentList(e),i=H.getSelectedSubLists(e);n=n||{},r&&i.length>0?ge(e,r,i,t,n):ve(e,r,t,n)},ye={toggleList:be,removeList:le,mergeWithAdjacentLists:he},we=function(e,t,i,o){var a,s,l=t.startContainer,c=t.startOffset;if(3===l.nodeType&&(i?c<l.data.length:c>0))return l;for(a=e.schema.getNonEmptyElements(),1===l.nodeType&&(l=n.getNode(l,c)),s=new r(l,o),i&&w.isBogusBr(e.dom,l)&&s.next();l=s[i?"next":"prev2"]();){if("LI"===l.nodeName&&!l.hasChildNodes())return l;if(a[l.nodeName])return l;if(3===l.nodeType&&l.data.length>0)return l}},_e=function(e,t){var n=t.childNodes;return 1===n.length&&!w.isListNode(n[0])&&e.isBlock(n[0])},xe=function(e,t){_e(e,t)&&e.remove(t.firstChild,!0)},Ce=function(e,t,n){var r,i;if(i=_e(e,n)?n.firstChild:n,xe(e,t),!w.isEmpty(e,t,!0))for(;r=t.firstChild;)i.appendChild(r)},ke=function(e,t,n){var r,i,o=t.parentNode;w.isChildOfBody(e,t)&&w.isChildOfBody(e,n)&&(w.isListNode(n.lastChild)&&(i=n.lastChild),o===n.lastChild&&w.isBr(o.previousSibling)&&e.remove(o.previousSibling),r=n.lastChild,r&&w.isBr(r)&&t.hasChildNodes()&&e.remove(r),w.isEmpty(e,n,!0)&&e.$(n).empty(),Ce(e,t,n),i&&n.appendChild(i),e.remove(t),w.isEmpty(e,o)&&o!==e.getRoot()&&e.remove(o))},Te=function(e,t,n){e.dom.$(n).empty(),ke(e.dom,t,n),e.selection.setCursorLocation(n)},Se=function(e,t,n,r){var i=e.dom;if(i.isEmpty(r))Te(e,n,r);else{var o=D.createBookmark(t);ke(i,n,r),e.selection.setRng(D.resolveBookmark(o))}},De=function(e,t,n,r){var i=D.createBookmark(t);ke(e.dom,n,r);var o=D.resolveBookmark(i);e.selection.setRng(o)},Ee=function(e,t){var n,r,i,o=e.dom,a=e.selection,s=a.getStart(),l=H.getClosestListRootElm(e,s),c=o.getParent(a.getStart(),"LI",l);if(c){if((n=c.parentNode)===e.getBody()&&w.isEmpty(o,n))return!0;if(r=C.normalizeRange(a.getRng(!0)),(i=o.getParent(we(e,r,t,l),"LI",l))&&i!==c)return t?Se(e,r,i,c):De(e,r,c,i),!0;if(!i&&!t&&ye.removeList(e))return!0}return!1},Ne=function(e,t,n){var r=e.getParent(t.parentNode,e.isBlock,n);e.remove(t),r&&e.isEmpty(r)&&e.remove(r)},Ae=function(e,t){var n=e.dom,r=e.selection.getStart(),i=H.getClosestListRootElm(e,r),o=n.getParent(r,n.isBlock,i);if(o&&n.isEmpty(o)){var a=C.normalizeRange(e.selection.getRng(!0)),s=n.getParent(we(e,a,t,i),"LI",i);if(s)return e.undoManager.transact(function(){Ne(n,o,i),ye.mergeWithAdjacentLists(n,s.parentNode),e.selection.select(s,!0),e.selection.collapse(t)}),!0}return!1},Re=function(e,t){return Ee(e,t)||Ae(e,t)},Pe=function(e){var t=e.selection.getStart(),n=H.getClosestListRootElm(e,t);return!!(e.dom.getParent(t,"LI,DT,DD",n)||H.getSelectedListItems(e).length>0)&&(e.undoManager.transact(function(){e.execCommand("Delete"),R.normalizeLists(e.dom,e.getBody())}),!0)},Oe=function(e,t){return e.selection.isCollapsed()?Re(e,t):Pe(e)},Ie=function(e){e.on("keydown",function(t){t.keyCode===i.BACKSPACE?Oe(e,!1)&&t.preventDefault():t.keyCode===i.DELETE&&Oe(e,!0)&&t.preventDefault()})},Me={setup:Ie,backspaceDelete:Oe},je=function(e){return{backspaceDelete:function(t){Me.backspaceDelete(e,t)}}},Be={get:je},Le=s.DOM,Fe=function(e,t){var n;if(w.isListNode(e)){for(;n=e.firstChild;)t.appendChild(n);Le.remove(e)}},He=function(e){var t,n,r;return"DT"===e.nodeName?(Le.rename(e,"DD"),!0):(t=e.previousSibling)&&w.isListNode(t)?(t.appendChild(e),!0):t&&"LI"===t.nodeName&&w.isListNode(t.lastChild)?(t.lastChild.appendChild(e),Fe(e.lastChild,t.lastChild),!0):(t=e.nextSibling)&&w.isListNode(t)?(t.insertBefore(e,t.firstChild),!0):!(!(t=e.previousSibling)||"LI"!==t.nodeName)&&(n=Le.create(e.parentNode.nodeName),r=Le.getStyle(e.parentNode,"listStyleType"),r&&Le.setStyle(n,"listStyleType",r),t.appendChild(n),n.appendChild(e),
Fe(e.lastChild,n),!0)},$e=function(e){var t=H.getSelectedListItems(e);if(t.length){for(var n=D.createBookmark(e.selection.getRng(!0)),r=0;r<t.length&&(He(t[r])||0!==r);r++);return e.selection.setRng(D.resolveBookmark(n)),e.nodeChanged(),!0}},Ue={indentSelection:$e},ze=function(e,t){return function(){var n=e.dom.getParent(e.selection.getStart(),"UL,OL,DL");return n&&n.nodeName===t}},We=function(e){e.on("BeforeExecCommand",function(t){var n,r=t.command.toLowerCase();if("indent"===r?Ue.indentSelection(e)&&(n=!0):"outdent"===r&&Q.outdentSelection(e)&&(n=!0),n)return e.fire("ExecCommand",{command:t.command}),t.preventDefault(),!0}),e.addCommand("InsertUnorderedList",function(t,n){ye.toggleList(e,"UL",n)}),e.addCommand("InsertOrderedList",function(t,n){ye.toggleList(e,"OL",n)}),e.addCommand("InsertDefinitionList",function(t,n){ye.toggleList(e,"DL",n)}),e.addQueryStateHandler("InsertUnorderedList",ze(e,"UL")),e.addQueryStateHandler("InsertOrderedList",ze(e,"OL")),e.addQueryStateHandler("InsertDefinitionList",ze(e,"DL"))},qe={register:We},Ve=function(e){return e.getParam("lists_indent_on_tab",!0)},Ye={shouldIndentOnTab:Ve},Ge=function(e){e.on("keydown",function(t){t.keyCode!==i.TAB||i.metaKeyPressed(t)||e.dom.getParent(e.selection.getStart(),"LI,DT,DD")&&(t.preventDefault(),t.shiftKey?Q.outdentSelection(e):Ue.indentSelection(e))})},Ke=function(e){Ye.shouldIndentOnTab(e)&&Ge(e),Me.setup(e)},Xe={setup:Ke},Je=function(e,t){for(var n=0;n<e.length;n++){if(t(e[n]))return n}return-1},Qe=function(e,t){return function(n){var r=n.control;e.on("NodeChange",function(e){var n=Je(e.parents,w.isTableCellNode),i=-1!==n?e.parents.slice(0,n):e.parents,o=a.grep(i,w.isListNode);r.active(o.length>0&&o[0].nodeName===t)})}},Ze=function(e){return function(t){var n=t.control;e.on("nodechange",function(){var t=H.getSelectedListItems(e),r=t.length>0&&w.isFirstChild(t[0]);n.disabled(r)})}},et=function(e){(function(e,t){var n=e.settings.plugins?e.settings.plugins:"";return-1!==a.inArray(n.split(/[ ,]/),t)})(e,"advlist")||(e.addButton("numlist",{active:!1,title:"Numbered list",cmd:"InsertOrderedList",onPostRender:Qe(e,"OL")}),e.addButton("bullist",{active:!1,title:"Bullet list",cmd:"InsertUnorderedList",onPostRender:Qe(e,"UL")})),e.addButton("indent",{icon:"indent",title:"Increase indent",cmd:"Indent",onPostRender:Ze(e)})},tt={register:et};t.add("lists",function(e){return Xe.setup(e),tt.register(e),qe.register(e),Be.get(e)})}()}(),function(){!function(){"use strict";function e(){}var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.Env"),r=tinymce.util.Tools.resolve("tinymce.util.Tools"),i=function(e){return e.getParam("media_scripts")},o=function(e){return e.getParam("audio_template_callback")},a=function(e){return e.getParam("video_template_callback")},s=function(e){return e.getParam("media_live_embeds",!0)},l=function(e){return e.getParam("media_filter_html",!0)},c=function(e){return e.getParam("media_url_resolver")},u=function(e){return e.getParam("media_alt_source",!0)},d=function(e){return e.getParam("media_poster",!0)},f=function(e){return e.getParam("media_dimensions",!0)},h={getScripts:i,getAudioTemplateCallback:o,getVideoTemplateCallback:a,hasLiveEmbeds:s,shouldFilterHtml:l,getUrlResolver:c,hasAltSource:u,hasPoster:d,hasDimensions:f},p=tinymce.util.Tools.resolve("tinymce.html.SaxParser"),g=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),m=function(e,t){if(e)for(var n=0;n<e.length;n++)if(-1!==t.indexOf(e[n].filter))return e[n]},v={getVideoScriptMatch:m},b=function(e){return e.replace(/px$/,"")},y=function(e){return/^[0-9.]+$/.test(e)?e+"px":e},w=function(e){return function(t){return t?b(t.style[e]):""}},_=function(e){return function(t,n){t&&(t.style[e]=y(n))}},x={getMaxWidth:w("maxWidth"),getMaxHeight:w("maxHeight"),setMaxWidth:_("maxWidth"),setMaxHeight:_("maxHeight")},C=g.DOM,k=function(e){return C.getAttrib(e,"data-ephox-embed-iri")},T=function(e){var t=C.createFragment(e);return""!==k(t.firstChild)},S=function(e,t){var n={};return p({validate:!1,allow_conditional_comments:!0,special:"script,noscript",start:function(t,i){if(n.source1||"param"!==t||(n.source1=i.map.movie),"iframe"!==t&&"object"!==t&&"embed"!==t&&"video"!==t&&"audio"!==t||(n.type||(n.type=t),n=r.extend(i.map,n)),"script"===t){var o=v.getVideoScriptMatch(e,i.map.src);if(!o)return;n={type:"script",source1:i.map.src,width:o.width,height:o.height}}"source"===t&&(n.source1?n.source2||(n.source2=i.map.src):n.source1=i.map.src),"img"!==t||n.poster||(n.poster=i.map.src)}}).parse(t),n.source1=n.source1||n.src||n.data,n.source2=n.source2||"",n.poster=n.poster||"",n},D=function(e){var t=C.createFragment(e),n=t.firstChild;return{type:"ephox-embed-iri",source1:k(n),source2:"",poster:"",width:x.getMaxWidth(n),height:x.getMaxHeight(n)}},E=function(e,t){return T(t)?D(t):S(e,t)},N={htmlToData:E},A=tinymce.util.Tools.resolve("tinymce.util.Promise"),R=function(e){var t={mp3:"audio/mpeg",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"},n=e.toLowerCase().split(".").pop(),r=t[n];return r||""},P={guess:R},O=tinymce.util.Tools.resolve("tinymce.html.Writer"),I=tinymce.util.Tools.resolve("tinymce.html.Schema"),M=g.DOM,j=function(e,t){var n,r,i,o;for(n in t)if(i=""+t[n],e.map[n])for(r=e.length;r--;)o=e[r],o.name===n&&(i?(e.map[n]=i,o.value=i):(delete e.map[n],e.splice(r,1)));else i&&(e.push({name:n,value:i}),e.map[n]=i)},B=function(e){var t=O();return p(t).parse(e),t.getContent()},L=function(e,t,n){var r,i=O(),o=0;return p({validate:!1,allow_conditional_comments:!0,special:"script,noscript",comment:function(e){i.comment(e)},cdata:function(e){i.cdata(e)},text:function(e,t){i.text(e,t)},start:function(e,a,s){switch(e){case"video":case"object":case"embed":case"img":case"iframe":void 0!==t.height&&void 0!==t.width&&j(a,{width:t.width,height:t.height})}if(n)switch(e){case"video":j(a,{poster:t.poster,src:""}),t.source2&&j(a,{src:""});break;case"iframe":j(a,{src:t.source1});break;case"source":if(++o<=2&&(j(a,{src:t["source"+o],type:t["source"+o+"mime"]}),!t["source"+o]))return;break;case"img":if(!t.poster)return;r=!0}i.start(e,a,s)},end:function(e){if("video"===e&&n)for(var a=1;a<=2;a++)if(t["source"+a]){var s=[];s.map={},o<a&&(j(s,{src:t["source"+a],type:t["source"+a+"mime"]}),i.start("source",s,!0))}if(t.poster&&"object"===e&&n&&!r){var l=[];l.map={},j(l,{src:t.poster,width:t.width,height:t.height}),i.start("img",l,!0)}i.end(e)}},I({})).parse(e),i.getContent()},F=function(e){var t=M.createFragment(e);return""!==M.getAttrib(t.firstChild,"data-ephox-embed-iri")},H=function(e,t){var n=M.createFragment(e),r=n.firstChild;return x.setMaxWidth(r,t.width),x.setMaxHeight(r,t.height),B(r.outerHTML)},$=function(e,t,n){return F(e)?H(e,t):L(e,t,n)},U={updateHtml:$},z=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'//maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"//www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"//www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],W=function(e,t){for(var n=e.regex.exec(t),r=e.url,i=0;i<n.length;i++)!function(e){r=r.replace("$"+e,function(){return n[e]?n[e]:""})}(i);return r.replace(/\?$/,"")},q=function(e){var t=z.filter(function(t){return t.regex.test(e)});return t.length>0?r.extend({},t[0],{url:W(t[0],e)}):null},V=function(e){var t=e.allowFullscreen?' allowFullscreen="1"':"";return'<iframe src="'+e.source1+'" width="'+e.width+'" height="'+e.height+'"'+t+"></iframe>"},Y=function(e){var t='<object data="'+e.source1+'" width="'+e.width+'" height="'+e.height+'" type="application/x-shockwave-flash">';return e.poster&&(t+='<img src="'+e.poster+'" width="'+e.width+'" height="'+e.height+'" />'),t+="</object>"},G=function(e,t){return t?t(e):'<audio controls="controls" src="'+e.source1+'">'+(e.source2?'\n<source src="'+e.source2+'"'+(e.source2mime?' type="'+e.source2mime+'"':"")+" />\n":"")+"</audio>"},K=function(e,t){return t?t(e):'<video width="'+e.width+'" height="'+e.height+'"'+(e.poster?' poster="'+e.poster+'"':"")+' controls="controls">\n<source src="'+e.source1+'"'+(e.source1mime?' type="'+e.source1mime+'"':"")+" />\n"+(e.source2?'<source src="'+e.source2+'"'+(e.source2mime?' type="'+e.source2mime+'"':"")+" />\n":"")+"</video>"},X=function(e){return'<script src="'+e.source1+'"><\/script>'},J=function(e,t){var n=r.extend({},t);if(!n.source1&&(r.extend(n,N.htmlToData(h.getScripts(e),n.embed)),!n.source1))return"";n.source2||(n.source2=""),n.poster||(n.poster=""),n.source1=e.convertURL(n.source1,"source"),n.source2=e.convertURL(n.source2,"source"),n.source1mime=P.guess(n.source1),n.source2mime=P.guess(n.source2),n.poster=e.convertURL(n.poster,"poster");var i=q(n.source1);if(i&&(n.source1=i.url,n.type=i.type,n.allowFullscreen=i.allowFullscreen,n.width=n.width||i.w,n.height=n.height||i.h),n.embed)return U.updateHtml(n.embed,n,!0);var o=v.getVideoScriptMatch(h.getScripts(e),n.source1);o&&(n.type="script",n.width=o.width,n.height=o.height);var a=h.getAudioTemplateCallback(e),s=h.getVideoTemplateCallback(e);return n.width=n.width||300,n.height=n.height||150,r.each(n,function(t,r){n[r]=e.dom.encode(t)}),"iframe"===n.type?V(n):"application/x-shockwave-flash"===n.source1mime?Y(n):-1!==n.source1mime.indexOf("audio")?G(n,a):"script"===n.type?X(n):K(n,s)},Q={dataToHtml:J},Z={},ee=function(e,t,n){return new A(function(r,i){var o=function(n){return n.html&&(Z[e.source1]=n),r({url:e.source1,html:n.html?n.html:t(e)})};Z[e.source1]?o(Z[e.source1]):n({url:e.source1},o,i)})},te=function(e,t){return new A(function(n){n({html:t(e),url:e.source1})})},ne=function(e){return function(t){return Q.dataToHtml(e,t)}},re=function(e,t){var n=h.getUrlResolver(e);return n?ee(t,ne(e),n):te(t,ne(e))},ie=function(e){return Z.hasOwnProperty(e)},oe={getEmbedHtml:re,isCached:ie},ae=function(e,t){e.state.set("oldVal",e.value()),t.state.set("oldVal",t.value())},se=function(e,t){var n=e.find("#width")[0],r=e.find("#height")[0],i=e.find("#constrain")[0];n&&r&&i&&t(n,r,i.checked())},le=function(e,t,n){var r=e.state.get("oldVal"),i=t.state.get("oldVal"),o=e.value(),a=t.value();n&&r&&i&&o&&a&&(o!==r?(a=Math.round(o/r*a),isNaN(a)||t.value(a)):(o=Math.round(a/i*o),isNaN(o)||e.value(o))),ae(e,t)},ce=function(e){se(e,ae)},ue=function(e){se(e,le)},de=function(e){var t=function(){e(function(e){ue(e)})};return{type:"container",label:"Dimensions",layout:"flex",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:5,size:5,onchange:t,ariaLabel:"Width"},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:5,size:5,onchange:t,ariaLabel:"Height"},{name:"constrain",type:"checkbox",checked:!0,text:"Constrain proportions"}]}},fe={createUi:de,syncSize:ce,updateSize:ue},he=n.ie&&n.ie<=8?"onChange":"onInput",pe=function(e){return function(t){var n=t&&t.msg?"Media embed handler error: "+t.msg:"Media embed handler threw unknown error.";e.notificationManager.open({type:"error",text:n})}},ge=function(e){var t=e.selection.getNode(),n=t.getAttribute("data-ephox-embed-iri");return n?{source1:n,"data-ephox-embed-iri":n,width:x.getMaxWidth(t),height:x.getMaxHeight(t)}:t.getAttribute("data-mce-object")?N.htmlToData(h.getScripts(e),e.serializer.serialize(t,{selection:!0})):{}},me=function(e){var t=e.selection.getNode();if(t.getAttribute("data-mce-object")||t.getAttribute("data-ephox-embed-iri"))return e.selection.getContent()},ve=function(e,t){return function(n){var i=n.html,o=e.find("#embed")[0],a=r.extend(N.htmlToData(h.getScripts(t),i),{source1:n.url});e.fromJSON(a),o&&(o.value(i),fe.updateSize(e))}},be=function(e,t){var n,r,i=e.dom.select("img[data-mce-object]");for(n=0;n<t.length;n++)for(r=i.length-1;r>=0;r--)t[n]===i[r]&&i.splice(r,1);e.selection.select(i[0])},ye=function(e,t){var n=e.dom.select("img[data-mce-object]");e.insertContent(t),be(e,n),e.nodeChanged()},we=function(e,t){var n=e.toJSON();n.embed=U.updateHtml(n.embed,n),n.embed&&oe.isCached(n.source1)?ye(t,n.embed):oe.getEmbedHtml(t,n).then(function(e){ye(t,e.html)}).catch(pe(t))},_e=function(e,t){r.each(t,function(t,n){e.find("#"+n).value(t)})},xe=function(e){var t,n,i=[{name:"source1",type:"filepicker",filetype:"media",size:40,autofocus:!0,label:"Source",onpaste:function(){setTimeout(function(){oe.getEmbedHtml(e,t.toJSON()).then(ve(t,e)).catch(pe(e))},1)},onchange:function(n){oe.getEmbedHtml(e,t.toJSON()).then(ve(t,e)).catch(pe(e)),_e(t,n.meta)},onbeforecall:function(e){e.meta=t.toJSON()}}],o=[],a=function(e){e(t),n=t.toJSON(),t.find("#embed").value(U.updateHtml(n.embed,n))};if(h.hasAltSource(e)&&o.push({name:"source2",type:"filepicker",filetype:"media",size:40,label:"Alternative source"}),h.hasPoster(e)&&o.push({name:"poster",type:"filepicker",filetype:"image",size:40,label:"Poster"}),h.hasDimensions(e)){var s=fe.createUi(a);i.push(s)}n=ge(e);var l={id:"mcemediasource",type:"textbox",flex:1,name:"embed",value:me(e),multiline:!0,rows:5,label:"Source"},c=function(){n=r.extend({},N.htmlToData(h.getScripts(e),this.value())),this.parent().parent().fromJSON(n)};l[he]=c;var u=[{title:"General",type:"form",items:i},{title:"Embed",type:"container",layout:"flex",direction:"column",align:"stretch",padding:10,spacing:10,items:[{type:"label",text:"Paste your embed code below:",forId:"mcemediasource"},l]}];o.length>0&&u.push({title:"Advanced",type:"form",items:o}),t=e.windowManager.open({title:"Insert/edit media",data:n,bodyType:"tabpanel",body:u,onSubmit:function(){fe.updateSize(t),we(t,e)}}),fe.syncSize(t)},Ce={showDialog:xe},ke=function(e){return{showDialog:function(){Ce.showDialog(e)}}},Te={get:ke},Se=function(e){var t=function(){Ce.showDialog(e)};e.addCommand("mceMedia",t)},De={register:Se},Ee=tinymce.util.Tools.resolve("tinymce.html.Node"),Ne=function(e,t){if(!1===h.shouldFilterHtml(e))return t;var n,r=O();return p({validate:!1,allow_conditional_comments:!1,special:"script,noscript",comment:function(e){r.comment(e)},cdata:function(e){r.cdata(e)},text:function(e,t){r.text(e,t)},start:function(t,i,o){if(n=!0,"script"!==t&&"noscript"!==t){for(var a=0;a<i.length;a++){if(0===i[a].name.indexOf("on"))return;"style"===i[a].name&&(i[a].value=e.dom.serializeStyle(e.dom.parseStyle(i[a].value),t))}r.start(t,i,o),n=!1}},end:function(e){n||r.end(e)}},I({})).parse(t),r.getContent()},Ae={sanitize:Ne},Re=function(e,t){var r,i=t.name;return r=new Ee("img",1),r.shortEnded=!0,Oe(e,t,r),r.attr({width:t.attr("width")||"300",height:t.attr("height")||("audio"===i?"30":"150"),style:t.attr("style"),src:n.transparentSrc,"data-mce-object":i,class:"mce-object mce-object-"+i}),r},Pe=function(e,t){var n,r,i,o=t.name;return n=new Ee("span",1),n.attr({contentEditable:"false",style:t.attr("style"),"data-mce-object":o,class:"mce-preview-object mce-object-"+o}),Oe(e,t,n),r=new Ee(o,1),r.attr({src:t.attr("src"),allowfullscreen:t.attr("allowfullscreen"),style:t.attr("style"),class:t.attr("class"),width:t.attr("width"),height:t.attr("height"),frameborder:"0"}),i=new Ee("span",1),i.attr("class","mce-shim"),n.append(r),n.append(i),n},Oe=function(e,t,n){var r,i,o,a,s;for(o=t.attributes,a=o.length;a--;)r=o[a].name,i=o[a].value,"width"!==r&&"height"!==r&&"style"!==r&&("data"!==r&&"src"!==r||(i=e.convertURL(i,r)),n.attr("data-mce-p-"+r,i));(s=t.firstChild&&t.firstChild.value)&&(n.attr("data-mce-html",escape(Ae.sanitize(e,s))),n.firstChild=null)},Ie=function(e){for(;e=e.parent;)if(e.attr("data-ephox-embed-iri"))return!0;return!1},Me=function(e){return function(t){for(var r,i,o=t.length;o--;)r=t[o],r.parent&&(r.parent.attr("data-mce-object")||("script"!==r.name||(i=v.getVideoScriptMatch(h.getScripts(e),r.attr("src"))))&&(i&&(i.width&&r.attr("width",i.width.toString()),i.height&&r.attr("height",i.height.toString())),"iframe"===r.name&&h.hasLiveEmbeds(e)&&n.ceFalse?Ie(r)||r.replace(Pe(e,r)):Ie(r)||r.replace(Re(e,r))))}},je={createPreviewIframeNode:Pe,createPlaceholderNode:Re,placeHolderConverter:Me},Be=function(e){e.on("preInit",function(){var t=e.schema.getSpecialElements();r.each("video audio iframe object".split(" "),function(e){t[e]=new RegExp("</"+e+"[^>]*>","gi")});var n=e.schema.getBoolAttrs();r.each("webkitallowfullscreen mozallowfullscreen allowfullscreen".split(" "),function(e){n[e]={}}),e.parser.addNodeFilter("iframe,video,audio,object,embed,script",je.placeHolderConverter(e)),e.serializer.addAttributeFilter("data-mce-object",function(t,n){for(var r,i,o,a,s,l,c,u,d=t.length;d--;)if(r=t[d],r.parent){for(c=r.attr(n),i=new Ee(c,1),"audio"!==c&&"script"!==c&&(u=r.attr("class"),u&&-1!==u.indexOf("mce-preview-object")?i.attr({width:r.firstChild.attr("width"),height:r.firstChild.attr("height")}):i.attr({width:r.attr("width"),height:r.attr("height")})),i.attr({style:r.attr("style")}),a=r.attributes,o=a.length;o--;){var f=a[o].name;0===f.indexOf("data-mce-p-")&&i.attr(f.substr(11),a[o].value)}"script"===c&&i.attr("type","text/javascript"),s=r.attr("data-mce-html"),s&&(l=new Ee("#text",3),l.raw=!0,l.value=Ae.sanitize(e,unescape(s)),i.append(l)),r.replace(i)}})}),e.on("setContent",function(){e.$("span.mce-preview-object").each(function(t,n){var r=e.$(n);0===r.find("span.mce-shim",n).length&&r.append('<span class="mce-shim"></span>')})})},Le={setup:Be},Fe=function(e){e.on("ResolveName",function(e){var t;1===e.target.nodeType&&(t=e.target.getAttribute("data-mce-object"))&&(e.name=t)})},He={setup:Fe},$e=function(e){e.on("click keyup",function(){var t=e.selection.getNode();t&&e.dom.hasClass(t,"mce-preview-object")&&e.dom.getAttrib(t,"data-mce-selected")&&t.setAttribute("data-mce-selected","2")}),e.on("ObjectSelected",function(e){var t=e.target.getAttribute("data-mce-object");"audio"!==t&&"script"!==t||e.preventDefault()}),e.on("objectResized",function(e){var t,n=e.target;n.getAttribute("data-mce-object")&&(t=n.getAttribute("data-mce-html"))&&(t=unescape(t),n.setAttribute("data-mce-html",escape(U.updateHtml(t,{width:e.width,height:e.height}))))})},Ue={setup:$e},ze=function(e){e.addButton("media",{tooltip:"Insert/edit media",cmd:"mceMedia",stateSelector:["img[data-mce-object]","span[data-mce-object]","div[data-ephox-embed-iri]"]}),e.addMenuItem("media",{icon:"media",text:"Media",cmd:"mceMedia",context:"insert",prependToContext:!0})},We={register:ze};t.add("media",function(e){return De.register(e),We.register(e),He.setup(e),Le.setup(e),Ue.setup(e),Te.get(e)})}()}(),function(){!function(){"use strict";function e(){}var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(e,t){for(var n="",r=0;r<t;r++)n+=e;return n},r=function(e){return!!e.plugins.visualchars&&e.plugins.visualchars.isEnabled()},i=function(e,t){var i=r(e)?'<span class="mce-nbsp">&nbsp;</span>':"&nbsp;";e.insertContent(n(i,t)),e.dom.setAttrib(e.dom.select("span.mce-nbsp"),"data-mce-bogus","1")},o={insertNbsp:i},a=function(e){e.addCommand("mceNonBreaking",function(){o.insertNbsp(e,1)})},s={register:a},l=tinymce.util.Tools.resolve("tinymce.util.VK"),c=function(e){var t=e.getParam("nonbreaking_force_tab",0);return"boolean"==typeof t?!0===t?3:0:t},u={getKeyboardSpaces:c},d=function(e){var t=u.getKeyboardSpaces(e);t>0&&e.on("keydown",function(n){if(n.keyCode===l.TAB&&!n.isDefaultPrevented()){if(n.shiftKey)return;n.preventDefault(),n.stopImmediatePropagation(),o.insertNbsp(e,t)}})},f={setup:d},h=function(e){e.addButton("nonbreaking",{title:"Nonbreaking space",cmd:"mceNonBreaking"}),e.addMenuItem("nonbreaking",{icon:"nonbreaking",text:"Nonbreaking space",cmd:"mceNonBreaking",context:"insert"})},p={register:h};t.add("nonbreaking",function(e){s.register(e),p.register(e),f.setup(e)})}()}(),function(){!function(){"use strict";function e(){}var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.util.Tools"),r=function(e){return e.getParam("noneditable_noneditable_class","mceNonEditable")},i=function(e){return e.getParam("noneditable_editable_class","mceEditable")},o=function(e){var t=e.getParam("noneditable_regexp",[]);return t&&t.constructor===RegExp?[t]:t},a={getNonEditableClass:r,getEditableClass:i,getNonEditableRegExps:o},s=function(e){return function(t){return-1!==(" "+t.attr("class")+" ").indexOf(e)}},l=function(e,t,n){return function(r){var i=arguments,o=i[i.length-2],a=o>0?t.charAt(o-1):"";if('"'===a)return r;if(">"===a){var s=t.lastIndexOf("<",o);if(-1!==s){if(-1!==t.substring(s,o).indexOf('contenteditable="false"'))return r}}return'<span class="'+n+'" data-mce-content="'+e.dom.encode(i[0])+'">'+e.dom.encode("string"==typeof i[1]?i[1]:i[0])+"</span>"}},c=function(e,t,n){var r=t.length,i=n.content;if("raw"!==n.format){for(;r--;)i=i.replace(t[r],l(e,i,a.getNonEditableClass(e)));n.content=i}},u=function(e){var t,r;t=" "+n.trim(a.getEditableClass(e))+" ",r=" "+n.trim(a.getNonEditableClass(e))+" ";var i=s(t),o=s(r),l=a.getNonEditableRegExps(e);e.on("PreInit",function(){l.length>0&&e.on("BeforeSetContent",function(t){c(e,l,t)}),e.parser.addAttributeFilter("class",function(e){for(var t,n=e.length;n--;)t=e[n],i(t)?t.attr("contenteditable","true"):o(t)&&t.attr("contenteditable","false")}),e.serializer.addAttributeFilter("contenteditable",function(e){for(var t,n=e.length;n--;)t=e[n],(i(t)||o(t))&&(l.length>0&&t.attr("data-mce-content")?(t.name="#text",t.type=3,t.raw=!0,t.value=t.attr("data-mce-content")):t.attr("contenteditable",null))})})},d={setup:u};t.add("noneditable",function(e){d.setup(e)})}()}(),function(){!function(){"use strict";function e(){}var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.Env"),r=function(e){return e.getParam("pagebreak_separator","\x3c!-- pagebreak --\x3e")},i=function(e){return e.getParam("pagebreak_split_block",!1)},o={getSeparatorHtml:r,shouldSplitBlock:i},a=function(){return"mce-pagebreak"},s=function(){return'<img src="'+n.transparentSrc+'" class="mce-pagebreak" data-mce-resize="false" data-mce-placeholder />'},l=function(e){var t=o.getSeparatorHtml(e),n=new RegExp(t.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,function(e){return"\\"+e}),"gi");e.on("BeforeSetContent",function(e){e.content=e.content.replace(n,s())}),e.on("PreInit",function(){e.serializer.addNodeFilter("img",function(n){for(var r,i,a=n.length;a--;)if(r=n[a],(i=r.attr("class"))&&-1!==i.indexOf("mce-pagebreak")){var s=r.parent;if(e.schema.getBlockElements()[s.name]&&o.shouldSplitBlock(e)){s.type=3,s.value=t,s.raw=!0,r.remove();continue}r.type=3,r.value=t,r.raw=!0}})})},c={setup:l,getPlaceholderHtml:s,getPageBreakClass:a},u=function(e){e.addCommand("mcePageBreak",function(){e.settings.pagebreak_split_block?e.insertContent("<p>"+c.getPlaceholderHtml()+"</p>"):e.insertContent(c.getPlaceholderHtml())})},d={register:u},f=function(e){e.on("ResolveName",function(t){"IMG"===t.target.nodeName&&e.dom.hasClass(t.target,c.getPageBreakClass())&&(t.name="pagebreak")})},h={setup:f},p=function(e){e.addButton("pagebreak",{title:"Page break",cmd:"mcePageBreak"}),e.addMenuItem("pagebreak",{text:"Page break",icon:"pagebreak",cmd:"mcePageBreak",context:"insert"})},g={register:p};t.add("pagebreak",function(e){d.register(e),g.register(e),c.setup(e),h.setup(e)})}()}(),function(){!function(){"use strict";function e(e,t){return X.each(t,function(t){e=t.constructor===RegExp?e.replace(t,""):e.replace(t[0],t[1])}),e}function t(t){function n(e){var t=e.name,r=e;if("br"===t)return void(o+="\n");if(a[t]&&(o+=" "),s[t])return void(o+=" ");if(3===e.type&&(o+=e.value),!e.shortEnded&&(e=e.firstChild))do{n(e)}while(e=e.next);l[t]&&r.next&&(o+="\n","p"===t&&(o+="\n"))}var r=fe(),i=ue({},r),o="",a=r.getShortEndedElements(),s=X.makeMap("script noscript style textarea video audio iframe object"," "),l=r.getBlockElements();return t=e(t,[/<!\[[^\]]+\]>/g]),n(i.parse(t)),o}function n(t){function n(e,t,n){return t||n?"":" "}return t=e(t,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,n],/<br class="Apple-interchange-newline">/g,/<br>$/i])}function r(e){var t=0;return function(){return e+t++}}function i(e){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i.test(e)||/class="OutlineElement/.test(e)||/id="?docs\-internal\-guid\-/.test(e)}function o(e){var t,n;return n=[/^[IVXLMCD]{1,2}\.[ \u00a0]/,/^[ivxlmcd]{1,2}\.[ \u00a0]/,/^[a-z]{1,2}[\.\)][ \u00a0]/,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/],e=e.replace(/^[\u00a0 ]+/,""),X.each(n,function(n){if(n.test(e))return t=!0,!1}),t}function a(e){return/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(e)}function s(e){function t(e){var n="";if(3===e.type)return e.value;if(e=e.firstChild)do{n+=t(e)}while(e=e.next);return n}function n(e,t){if(3===e.type&&t.test(e.value))return e.value=e.value.replace(t,""),!1;if(e=e.firstChild)do{if(!n(e,t))return!1}while(e=e.next);return!0}function r(e){if(e._listIgnore)return void e.remove();if(e=e.firstChild)do{r(e)}while(e=e.next)}function i(e,t,i){var o=e._listLevel||c;o!==c&&(o<c?s&&(s=s.parent.parent):(l=s,s=null)),s&&s.name===t?s.append(e):(l=l||s,s=new de(t,1),i>1&&s.attr("start",""+i),e.wrap(s)),e.name="li",o>c&&l&&l.lastChild.append(s),c=o,r(e),n(e,/^\u00a0+/),n(e,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/),n(e,/^\u00a0+/)}for(var s,l,c=1,u=[],d=e.firstChild;void 0!==d&&null!==d;)if(u.push(d),null!==(d=d.walk()))for(;void 0!==d&&d.parent!==e;)d=d.walk();for(var f=0;f<u.length;f++)if(e=u[f],"p"===e.name&&e.firstChild){var h=t(e);if(a(h)){i(e,"ul");continue}if(o(h)){var p=/([0-9]+)\./.exec(h),g=1;p&&(g=parseInt(p[1],10)),i(e,"ol",g);continue}if(e._listLevel){i(e,"ul",1);continue}s=null}else l=s,s=null}function l(e,t,n,r){var i,o={},a=e.dom.parseStyle(r);return X.each(a,function(a,s){switch(s){case"mso-list":i=/\w+ \w+([0-9]+)/i.exec(r),i&&(n._listLevel=parseInt(i[1],10)),/Ignore/i.test(a)&&n.firstChild&&(n._listIgnore=!0,n.firstChild._listIgnore=!0);break;case"horiz-align":s="text-align";break;case"vert-align":s="vertical-align";break;case"font-color":case"mso-foreground":s="color";break;case"mso-background":case"mso-highlight":s="background";break;case"font-weight":case"font-style":return void("normal"!==a&&(o[s]=a));case"mso-element":if(/^(comment|comment-list)$/i.test(a))return void n.remove()}if(0===s.indexOf("mso-comment"))return void n.remove();0!==s.indexOf("mso-")&&("all"===$.getRetainStyleProps(e)||t&&t[s])&&(o[s]=a)}),/(bold)/i.test(o["font-weight"])&&(delete o["font-weight"],n.wrap(new de("b",1))),/(italic)/i.test(o["font-style"])&&(delete o["font-style"],n.wrap(new de("i",1))),(o=e.dom.serializeStyle(o,n.name))||null}function c(e,t){e.on("PastePreProcess",function(n){n.content=t(e,n.content,n.internal,n.wordContent)})}function u(e,t){e.on("PastePostProcess",function(n){t(e,n.node)})}function d(e,t){if(!be.isWordContent(t))return t;var n=[];X.each(e.schema.getBlockElements(),function(e,t){n.push(t)});var r=new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+n.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g");return t=ge.filter(t,[[r,"$1"]]),t=ge.filter(t,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]])}function f(e,t,n,r){if(r||n)return t;var i,o=$.getWebkitStyles(e);if(!1===$.shouldRemoveWebKitStyles(e)||"all"===o)return t;if(o&&(i=o.split(/[, ]/)),i){var a=e.dom,s=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,function(e,t,n,r){var o=a.parseStyle(a.decode(n)),l={};if("none"===i)return t+r;for(var c=0;c<i.length;c++){var u=o[i[c]],d=a.getStyle(s,i[c],!0);/color/.test(i[c])&&(u=a.toHex(u),d=a.toHex(d)),d!==u&&(l[i[c]]=u)}return l=a.serializeStyle(l,"span"),l?t+' style="'+l+'"'+r:t+r})}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,function(e,t,n,r){return t+' style="'+n+'"'+r})}function h(e,t){e.$("a",t).find("font,u").each(function(t,n){e.dom.remove(n,!0)})}function p(){}var g=function(e){var t=e,n=function(){return t};return{get:n,set:function(e){t=e},clone:function(){return g(n())}}},m=tinymce.util.Tools.resolve("tinymce.PluginManager"),v=function(e){return!(!/(^|[ ,])powerpaste([, ]|$)/.test(e.settings.plugins)||!m.get("powerpaste"))&&(void 0!==window.console&&window.console.log&&window.console.log("PowerPaste is incompatible with Paste plugin! Remove 'paste' from the 'plugins' option."),!0)},b={hasProPlugin:v},y=function(e,t){return{clipboard:e,quirks:t}},w={get:y},_=function(e,t,n,r){return e.fire("PastePreProcess",{content:t,internal:n,wordContent:r})},x=function(e,t,n,r){return e.fire("PastePostProcess",{node:t,internal:n,wordContent:r})},C=function(e,t){return e.fire("PastePlainTextToggle",{state:t})},k=function(e,t){return e.fire("paste",{ieFake:t})},T={firePastePreProcess:_,firePastePostProcess:x,firePastePlainTextToggle:C,firePaste:k},S=function(e){return e.getParam("paste_plaintext_inform",!0)},D=function(e){return e.getParam("paste_block_drop",!1)},E=function(e){return e.getParam("paste_data_images",!1)},N=function(e){return e.getParam("paste_filter_drop",!0)},A=function(e){return e.getParam("paste_preprocess")},R=function(e){return e.getParam("paste_postprocess")},P=function(e){return e.getParam("paste_webkit_styles")},O=function(e){return e.getParam("paste_remove_styles_if_webkit",!0)},I=function(e){return e.getParam("paste_merge_formats",!0)},M=function(e){return e.getParam("smart_paste",!0)},j=function(e){return e.getParam("paste_as_text",!1)},B=function(e){return e.getParam("paste_retain_style_properties")},L=function(e){return e.getParam("paste_word_valid_elements","-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody")},F=function(e){return e.getParam("paste_convert_word_fake_lists",!0)},H=function(e){return e.getParam("paste_enable_default_filters",!0)},$={shouldPlainTextInform:S,shouldBlockDrop:D,shouldPasteDataImages:E,shouldFilterDrop:N,getPreProcess:A,getPostProcess:R,getWebkitStyles:P,shouldRemoveWebKitStyles:O,shouldMergeFormats:I,isSmartPasteEnabled:M,isPasteAsTextEnabled:j,getRetainStyleProps:B,getWordValidElements:L,shouldConvertWordFakeLists:F,shouldUseDefaultFilters:H},U=function(e,t){return!1===t.get()&&$.shouldPlainTextInform(e)},z=function(e,t){e.notificationManager.open({text:e.translate(t),type:"info"})},W=function(e,t,n){"text"===t.pasteFormat.get()?(t.pasteFormat.set("html"),T.firePastePlainTextToggle(e,!1)):(t.pasteFormat.set("text"),T.firePastePlainTextToggle(e,!0),U(e,n)&&(z(e,"Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off."),n.set(!0))),e.focus()},q={togglePlainTextPaste:W},V=function(e,t,n){e.addCommand("mceTogglePlainTextPaste",function(){q.togglePlainTextPaste(e,t,n)}),e.addCommand("mceInsertClipboardContent",function(e,n){n.content&&t.pasteHtml(n.content,n.internal),n.text&&t.pasteText(n.text)})},Y={register:V},G=tinymce.util.Tools.resolve("tinymce.Env"),K=tinymce.util.Tools.resolve("tinymce.util.Delay"),X=tinymce.util.Tools.resolve("tinymce.util.Tools"),J=tinymce.util.Tools.resolve("tinymce.util.VK"),Q="\x3c!-- x-tinymce/html --\x3e",Z=function(e){return Q+e
},ee=function(e){return e.replace(Q,"")},te=function(e){return-1!==e.indexOf(Q)},ne={mark:Z,unmark:ee,isMarked:te,internalHtmlMime:function(){return"x-tinymce/html"}},re=tinymce.util.Tools.resolve("tinymce.html.Entities"),ie=function(e){return!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e)},oe=function(e){return e.replace(/\r?\n/g,"<br>")},ae=function(e,t){var n,r=[],i="<"+e;if("object"==typeof t){for(n in t)t.hasOwnProperty(n)&&r.push(n+'="'+re.encodeAllRaw(t[n])+'"');r.length&&(i+=" "+r.join(" "))}return i+">"},se=function(e,t,n){var r=e.split(/\n\n/),i=ae(t,n),o="</"+t+">",a=X.map(r,function(e){return e.split(/\n/).join("<br />")}),s=function(e){return i+e+o};return 1===a.length?a[0]:X.map(a,s).join("")},le=function(e,t,n){return t?se(e,t,n):oe(e)},ce={isPlainText:ie,convert:le,toBRs:oe,toBlockElements:se},ue=tinymce.util.Tools.resolve("tinymce.html.DomParser"),de=tinymce.util.Tools.resolve("tinymce.html.Node"),fe=tinymce.util.Tools.resolve("tinymce.html.Schema"),he=tinymce.util.Tools.resolve("tinymce.html.Serializer"),pe=function(){return-1!==navigator.userAgent.indexOf(" Edge/")},ge={filter:e,innerText:t,trimHtml:n,createIdGenerator:r,isMsEdge:pe},me=function(e,t){var n,r;n=$.getRetainStyleProps(e),n&&(r=X.makeMap(n.split(/[, ]/))),t=ge.filter(t,[/<br class="?Apple-interchange-newline"?>/gi,/<b[^>]+id="?docs-internal-[^>]*>/gi,/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi,""],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(e,t){return t.length>0?t.replace(/./," ").slice(Math.floor(t.length/2)).split("").join(""):""}]]);var i=$.getWordValidElements(e),o=fe({valid_elements:i,valid_children:"-li[p]"});X.each(o.elements,function(e){e.attributes.class||(e.attributes.class={},e.attributesOrder.push("class")),e.attributes.style||(e.attributes.style={},e.attributesOrder.push("style"))});var a=ue({},o);a.addAttributeFilter("style",function(t){for(var n,i=t.length;i--;)n=t[i],n.attr("style",l(e,r,n,n.attr("style"))),"span"===n.name&&n.parent&&!n.attributes.length&&n.unwrap()}),a.addAttributeFilter("class",function(e){for(var t,n,r=e.length;r--;)t=e[r],n=t.attr("class"),/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(n)&&t.remove(),t.attr("class",null)}),a.addNodeFilter("del",function(e){for(var t=e.length;t--;)e[t].remove()}),a.addNodeFilter("a",function(e){for(var t,n,r,i=e.length;i--;)if(t=e[i],n=t.attr("href"),r=t.attr("name"),n&&-1!==n.indexOf("#_msocom_"))t.remove();else if(n&&0===n.indexOf("file://")&&(n=n.split("#")[1])&&(n="#"+n),n||r){if(r&&!/^_?(?:toc|edn|ftn)/i.test(r)){t.unwrap();continue}t.attr({href:n,name:r})}else t.unwrap()});var c=a.parse(t);return $.shouldConvertWordFakeLists(e)&&s(c),t=he({validate:e.settings.validate},o).serialize(c)},ve=function(e,t){return $.shouldUseDefaultFilters(e)?me(e,t):t},be={preProcess:ve,isWordContent:i},ye=function(e,t){return{content:e,cancelled:t}},we=function(e,t,n,r){var i=e.dom.create("div",{style:"display:none"},t),o=T.firePastePostProcess(e,i,n,r);return ye(o.node.innerHTML,o.isDefaultPrevented())},_e=function(e,t,n,r){var i=T.firePastePreProcess(e,t,n,r);return e.hasEventListeners("PastePostProcess")&&!i.isDefaultPrevented()?we(e,i.content,n,r):ye(i.content,i.isDefaultPrevented())},xe=function(e,t,n){var r=be.isWordContent(t),i=r?be.preProcess(e,t):t;return _e(e,i,n,r)},Ce={process:xe},ke=function(e,t){return e.insertContent(t,{merge:$.shouldMergeFormats(e),paste:!0}),!0},Te=function(e){return/^https?:\/\/[\w\?\-\/+=.&%@~#]+$/i.test(e)},Se=function(e){return Te(e)&&/.(gif|jpe?g|png)$/.test(e)},De=function(e,t,n){return e.undoManager.extra(function(){n(e,t)},function(){e.insertContent('<img src="'+t+'">')}),!0},Ee=function(e,t,n){return e.undoManager.extra(function(){n(e,t)},function(){e.execCommand("mceInsertLink",!1,t)}),!0},Ne=function(e,t,n){return!(!1!==e.selection.isCollapsed()||!Te(t))&&Ee(e,t,n)},Ae=function(e,t,n){return!!Se(t)&&De(e,t,n)},Re=function(e,t){X.each([Ne,Ae,ke],function(n){return!0!==n(e,t,ke)})},Pe=function(e,t){!1===$.isSmartPasteEnabled(e)?ke(e,t):Re(e,t)},Oe={isImageUrl:Se,isAbsoluteUrl:Te,insertContent:Pe},Ie=function(e,t,n){var r=n||ne.isMarked(t),i=Ce.process(e,ne.unmark(t),r);!1===i.cancelled&&Oe.insertContent(e,i.content)},Me=function(e,t){t=e.dom.encode(t).replace(/\r\n/g,"\n"),t=ce.convert(t,e.settings.forced_root_block,e.settings.forced_root_block_attrs),Ie(e,t,!1)},je=function(e){var t={};if(e){if(e.getData){var n=e.getData("Text");n&&n.length>0&&-1===n.indexOf("data:text/mce-internal,")&&(t["text/plain"]=n)}if(e.types)for(var r=0;r<e.types.length;r++){var i=e.types[r];try{t[i]=e.getData(i)}catch(e){t[i]=""}}}return t},Be=function(e,t){var n=je(t.clipboardData||e.getDoc().dataTransfer);return ge.isMsEdge()?X.extend(n,{"text/html":""}):n},Le=function(e,t){return t in e&&e[t].length>0},Fe=function(e){return Le(e,"text/html")||Le(e,"text/plain")},He=function(e){var t;return t=e.indexOf(","),-1!==t?e.substr(t+1):null},$e=function(e,t){return!e.images_dataimg_filter||e.images_dataimg_filter(t)},Ue=function(e,t){var n=t.match(/([\s\S]+?)\.(?:jpeg|jpg|png|gif)$/i);return n?e.dom.encode(n[1]):null},ze=ge.createIdGenerator("mceclip"),We=function(e,t,n,r){t&&(e.selection.setRng(t),t=null);var i=n.result,o=He(i),a=ze(),s=e.settings.images_reuse_filename&&r.name?Ue(e,r.name):a,l=new Image;if(l.src=i,$e(e.settings,l)){var c=e.editorUpload.blobCache,u=void 0,d=void 0;d=c.findFirst(function(e){return e.base64()===o}),d?u=d:(u=c.create(a,r,o,s),c.add(u)),Ie(e,'<img src="'+u.blobUri()+'">',!1)}else Ie(e,'<img src="'+i+'">',!1)},qe=function(e){return"paste"===e.type},Ve=function(e,t,n){function r(r){var i,o,a,s=!1;if(r)for(i=0;i<r.length;i++)if(o=r[i],/^image\/(jpeg|png|gif|bmp)$/.test(o.type)){var l=o.getAsFile?o.getAsFile():o;a=new window.FileReader,a.onload=We.bind(null,e,n,a,l),a.readAsDataURL(l),t.preventDefault(),s=!0}return s}var i=qe(t)?t.clipboardData:t.dataTransfer;if(e.settings.paste_data_images&&i)return r(i.items)||r(i.files)},Ye=function(e){var t=e.clipboardData;return-1!==navigator.userAgent.indexOf("Android")&&t&&t.items&&0===t.items.length},Ge=function(e){return J.metaKeyPressed(e)&&86===e.keyCode||e.shiftKey&&45===e.keyCode},Ke=function(e,t,n){function r(n,r,i,o){var a,s;if(Le(n,"text/html")?a=n["text/html"]:(a=t.getHtml(),o=o||ne.isMarked(a),t.isDefaultContent(a)&&(i=!0)),a=ge.trimHtml(a),t.remove(),s=!1===o&&ce.isPlainText(a),a.length&&!s||(i=!0),i&&(a=Le(n,"text/plain")&&s?n["text/plain"]:ge.innerText(a)),t.isDefaultContent(a))return void(r||e.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents."));i?Me(e,a):Ie(e,a,o)}var i,o=0;e.on("keydown",function(n){function r(e){Ge(e)&&!e.isDefaultPrevented()&&t.remove()}if(Ge(n)&&!n.isDefaultPrevented()){if((i=n.shiftKey&&86===n.keyCode)&&G.webkit&&-1!==navigator.userAgent.indexOf("Version/"))return;if(n.stopImmediatePropagation(),o=(new Date).getTime(),G.ie&&i)return n.preventDefault(),void T.firePaste(e,!0);t.remove(),t.create(),e.once("keyup",r),e.once("paste",function(){e.off("keyup",r)})}});var a=function(){return t.getLastRng()||e.selection.getRng()};e.on("paste",function(s){var l=(new Date).getTime(),c=Be(e,s),u=(new Date).getTime()-l,d=(new Date).getTime()-o-u<1e3,f="text"===n.get()||i,h=Le(c,ne.internalHtmlMime());return i=!1,s.isDefaultPrevented()||Ye(s)?void t.remove():!Fe(c)&&Ve(e,s,a())?void t.remove():(d||s.preventDefault(),!G.ie||d&&!s.ieFake||Le(c,"text/html")||(t.create(),e.dom.bind(t.getEl(),"paste",function(e){e.stopPropagation()}),e.getDoc().execCommand("Paste",!1,null),c["text/html"]=t.getHtml()),void(Le(c,"text/html")?(s.preventDefault(),h||(h=ne.isMarked(c["text/html"])),r(c,d,f,h)):K.setEditorTimeout(e,function(){r(c,d,f,h)},0)))})},Xe=function(e,t,n){Ke(e,t,n);var r;e.parser.addNodeFilter("img",function(t,n,i){var o=function(e){e.attr("data-mce-object")||r===G.transparentSrc||e.remove()};if(!e.settings.paste_data_images&&function(e){return e.data&&!0===e.data.paste}(i))for(var a=t.length;a--;)(r=t[a].attributes.map.src)&&(!function(e){return 0===e.indexOf("webkit-fake-url")}(r)?!e.settings.allow_html_data_urls&&function(e){return 0===e.indexOf("data:")}(r)&&o(t[a]):o(t[a]))})},Je=function(e){return G.ie&&e.inline?document.body:e.getBody()},Qe=function(e){return Je(e)!==e.getBody()},Ze=function(e,t,n){Qe(e)&&e.dom.bind(t,"paste keyup",function(t){st(e,n)||e.fire("paste")})},et=function(e,t,n){var r,i=e.dom,o=e.getBody();t.set(e.selection.getRng()),r=e.dom.add(Je(e),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},n),(G.ie||G.gecko)&&i.setStyle(r,"left","rtl"===i.getStyle(o,"direction",!0)?65535:-65535),i.bind(r,"beforedeactivate focusin focusout",function(e){e.stopPropagation()}),Ze(e,r,n),r.focus(),e.selection.select(r,!0)},tt=function(e,t){if(nt(e)){for(var n=void 0,r=t.get();n=e.dom.get("mcepastebin");)e.dom.remove(n),e.dom.unbind(n);r&&e.selection.setRng(r)}t.set(null)},nt=function(e){return e.dom.get("mcepastebin")},rt=function(e){var t,n,r,i,o,a=function(t,n){t.appendChild(n),e.dom.remove(n,!0)};for(n=X.grep(Je(e).childNodes,function(e){return"mcepastebin"===e.id}),t=n.shift(),X.each(n,function(e){a(t,e)}),i=e.dom.select("div[id=mcepastebin]",t),r=i.length-1;r>=0;r--)o=e.dom.create("div"),t.insertBefore(o,i[r]),a(o,i[r]);return t?t.innerHTML:""},it=function(e){return e.get()},ot=function(e,t){return t===e},at=function(e){return e&&"mcepastebin"===e.id},st=function(e,t){var n=nt(e);return at(n)&&ot(t,n.innerHTML)},lt=function(e){var t=g(null);return{create:function(){return et(e,t,"%MCEPASTEBIN%")},remove:function(){return tt(e,t)},getEl:function(){return nt(e)},getHtml:function(){return rt(e)},getLastRng:function(){return it(t)},isDefault:function(){return st(e,"%MCEPASTEBIN%")},isDefaultContent:function(e){return ot("%MCEPASTEBIN%",e)}}},ct=function(e,t){var n=lt(e);return e.on("preInit",function(){return Xe(e,n,t)}),{pasteFormat:t,pasteHtml:function(t,n){return Ie(e,t,n)},pasteText:function(t){return Me(e,t)},pasteImageData:function(t,n){return Ve(e,t,n)},getDataTransferItems:je,hasHtmlOrText:Fe,hasContentType:Le}},ut=function(){},dt=function(e){return!1===G.iOS&&void 0!==e&&"function"==typeof e.setData&&!0!==ge.isMsEdge()},ft=function(e,t,n){if(!dt(e))return!1;try{return e.clearData(),e.setData("text/html",t),e.setData("text/plain",n),e.setData(ne.internalHtmlMime(),t),!0}catch(e){return!1}},ht=function(e,t,n,r){ft(e.clipboardData,t.html,t.text)?(e.preventDefault(),r()):n(t.html,r)},pt=function(e){return function(t,n){var r=ne.mark(t),i=e.dom.create("div",{contenteditable:"false","data-mce-bogus":"all"}),o=e.dom.create("div",{contenteditable:"true"},r);e.dom.setStyles(i,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),i.appendChild(o),e.dom.add(e.getBody(),i);var a=e.selection.getRng();o.focus();var s=e.dom.createRng();s.selectNodeContents(o),e.selection.setRng(s),setTimeout(function(){e.selection.setRng(a),i.parentNode.removeChild(i),n()},0)}},gt=function(e){return{html:e.selection.getContent({contextual:!0}),text:e.selection.getContent({format:"text"})}},mt=function(e){return function(t){!1===e.selection.isCollapsed()&&ht(t,gt(e),pt(e),function(){setTimeout(function(){e.execCommand("Delete")},0)})}},vt=function(e){return function(t){!1===e.selection.isCollapsed()&&ht(t,gt(e),pt(e),ut)}},bt=function(e){e.on("cut",mt(e)),e.on("copy",vt(e))},yt={register:bt},wt=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),_t=function(e,t){return wt.getCaretRangeFromPoint(t.clientX,t.clientY,e.getDoc())},xt=function(e){var t=e["text/plain"];return!!t&&0===t.indexOf("file://")},Ct=function(e,t){e.focus(),e.selection.setRng(t)},kt=function(e,t,n){$.shouldBlockDrop(e)&&e.on("dragend dragover draggesture dragdrop drop drag",function(e){e.preventDefault(),e.stopPropagation()}),$.shouldPasteDataImages(e)||e.on("drop",function(e){var t=e.dataTransfer;t&&t.files&&t.files.length>0&&e.preventDefault()}),e.on("drop",function(r){var i,o;if(o=_t(e,r),!r.isDefaultPrevented()&&!n.get()){i=t.getDataTransferItems(r.dataTransfer);var a=t.hasContentType(i,ne.internalHtmlMime());if((t.hasHtmlOrText(i)&&!xt(i)||!t.pasteImageData(r,o))&&o&&$.shouldFilterDrop(e)){var s=i["mce-internal"]||i["text/html"]||i["text/plain"];s&&(r.preventDefault(),K.setEditorTimeout(e,function(){e.undoManager.transact(function(){i["mce-internal"]&&e.execCommand("Delete"),Ct(e,o),s=ge.trimHtml(s),i["text/html"]?t.pasteHtml(s,a):t.pasteText(s)})}))}}}),e.on("dragstart",function(e){n.set(!0)}),e.on("dragover dragend",function(t){$.shouldPasteDataImages(e)&&!1===n.get()&&(t.preventDefault(),Ct(e,_t(e,t))),"dragend"===t.type&&n.set(!1)})},Tt={setup:kt},St=function(e){var t=e.plugins.paste,n=$.getPreProcess(e);n&&e.on("PastePreProcess",function(e){n.call(t,t,e)});var r=$.getPostProcess(e);r&&e.on("PastePostProcess",function(e){r.call(t,t,e)})},Dt={setup:St},Et=function(e){G.webkit&&c(e,f),G.ie&&(c(e,d),u(e,h))},Nt={setup:Et},At=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=new Array(arguments.length-1),i=1;i<arguments.length;i++)r[i-1]=arguments[i];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var i=new Array(arguments.length),o=0;o<i.length;o++)i[o]=arguments[o];var a=r.concat(i);return e.apply(null,a)}},Rt=function(e,t,n){var r=n.control;r.active("text"===t.pasteFormat.get()),e.on("PastePlainTextToggle",function(e){r.active(e.state)})},Pt=function(e,t){var n=At(Rt,e,t);e.addButton("pastetext",{active:!1,icon:"pastetext",tooltip:"Paste as text",cmd:"mceTogglePlainTextPaste",onPostRender:n}),e.addMenuItem("pastetext",{text:"Paste as text",selectable:!0,active:t.pasteFormat,cmd:"mceTogglePlainTextPaste",onPostRender:n})},Ot={register:Pt};m.add("paste",function(e){if(!1===b.hasProPlugin(e)){var t=g(!1),n=g(!1),r=g($.isPasteAsTextEnabled(e)?"text":"html"),i=ct(e,r),o=Nt.setup(e);return Ot.register(e,i),Y.register(e,i,t),Dt.setup(e),yt.register(e),Tt.setup(e,i,n),w.get(i,o)}})}()}(),function(){!function(){"use strict";function e(){}var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.Env"),r=function(e){return parseInt(e.getParam("plugin_preview_width","650"),10)},i=function(e){return parseInt(e.getParam("plugin_preview_height","500"),10)},o=function(e){return e.getParam("content_style","")},a={getPreviewDialogWidth:r,getPreviewDialogHeight:i,getContentStyle:o},s=tinymce.util.Tools.resolve("tinymce.util.Tools"),l=function(e){var t="",n=e.dom.encode,r=a.getContentStyle(e);t+='<base href="'+n(e.documentBaseURI.getURI())+'">',r&&(t+='<style type="text/css">'+r+"</style>"),s.each(e.contentCSS,function(r){t+='<link type="text/css" rel="stylesheet" href="'+n(e.documentBaseURI.toAbsolute(r))+'">'});var i=e.settings.body_id||"tinymce";-1!==i.indexOf("=")&&(i=e.getParam("body_id","","hash"),i=i[e.id]||i);var o=e.settings.body_class||"";-1!==o.indexOf("=")&&(o=e.getParam("body_class","","hash"),o=o[e.id]||"");var l=e.settings.directionality?' dir="'+e.settings.directionality+'"':"";return"<!DOCTYPE html><html><head>"+t+'</head><body id="'+n(i)+'" class="mce-content-body '+n(o)+'"'+n(l)+">"+e.getContent()+'<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A") {e.preventDefault();}}}, false);<\/script> </body></html>'},c=function(e,t,n){var r=l(e);if(n)t.src="data:text/html;charset=utf-8,"+encodeURIComponent(r);else{var i=t.contentWindow.document;i.open(),i.write(r),i.close()}},u={getPreviewHtml:l,injectIframeContent:c},d=function(e){var t=!n.ie,r='<iframe src="" frameborder="0"'+(t?' sandbox="allow-scripts"':"")+"></iframe>",i=a.getPreviewDialogWidth(e),o=a.getPreviewDialogHeight(e);e.windowManager.open({title:"Preview",width:i,height:o,html:r,buttons:{text:"Close",onclick:function(e){e.control.parent().parent().close()}},onPostRender:function(n){var r=n.control.getEl("body").firstChild;u.injectIframeContent(e,r,t)}})},f={open:d},h=function(e){e.addCommand("mcePreview",function(){f.open(e)})},p={register:h},g=function(e){e.addButton("preview",{title:"Preview",cmd:"mcePreview"}),e.addMenuItem("preview",{text:"Preview",cmd:"mcePreview",context:"view"})},m={register:g};t.add("preview",function(e){p.register(e),m.register(e)})}()}(),function(){!function(){"use strict";function e(){}var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(e){e.addCommand("mcePrint",function(){e.getWin().print()})},r={register:n},i=function(e){e.addButton("print",{title:"Print",cmd:"mcePrint"}),e.addMenuItem("print",{text:"Print",cmd:"mcePrint",icon:"print"})},o={register:i};t.add("print",function(e){r.register(e),o.register(e),e.addShortcut("Meta+P","","mcePrint")})}()}(),function(){!function(){"use strict";function e(){}var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),r=tinymce.util.Tools.resolve("tinymce.util.Tools"),i=function(e){return e.getParam("save_enablewhendirty",!0)},o=function(e){return!!e.getParam("save_onsavecallback")},a=function(e){return!!e.getParam("save_oncancelcallback")},s={enableWhenDirty:i,hasOnSaveCallback:o,hasOnCancelCallback:a},l=function(e,t){e.notificationManager.open({text:e.translate(t),type:"error"})},c=function(e){var t;if(t=n.DOM.getParent(e.id,"form"),!s.enableWhenDirty(e)||e.isDirty()){if(e.save(),s.hasOnSaveCallback(e))return e.execCallback("save_onsavecallback",e),void e.nodeChanged();t?(e.setDirty(!1),t.onsubmit&&!t.onsubmit()||("function"==typeof t.submit?t.submit():l(e,"Error: Form submit field collision.")),e.nodeChanged()):l(e,"Error: No form element found.")}},u=function(e){var t=r.trim(e.startContent);if(s.hasOnCancelCallback(e))return void e.execCallback("save_oncancelcallback",e);e.setContent(t),e.undoManager.clear(),e.nodeChanged()},d={save:c,cancel:u},f=function(e){e.addCommand("mceSave",function(){d.save(e)}),e.addCommand("mceCancel",function(){d.cancel(e)})},h={register:f},p=function(e){return function(t){var n=t.control;e.on("nodeChange dirty",function(){n.disabled(s.enableWhenDirty(e)&&!e.isDirty())})}},g=function(e){e.addButton("save",{icon:"save",text:"Save",cmd:"mceSave",disabled:!0,onPostRender:p(e)}),e.addButton("cancel",{text:"Cancel",icon:!1,cmd:"mceCancel",disabled:!0,onPostRender:p(e)}),e.addShortcut("Meta+S","","mceSave")},m={register:g};t.add("save",function(e){m.register(e),h.register(e)})}()}(),function(){!function(){"use strict";function e(e){return e&&1===e.nodeType&&"false"===e.contentEditable}function t(t,n,r,i,o){function a(e,t){if(t=t||0,!e[0])throw new Error("findAndReplaceDOMText cannot handle zero-length matches");var n=e.index;if(t>0){var r=e[t];if(!r)throw new Error("Invalid capture group");n+=e[0].indexOf(r),e[0]=r}return[n,n+e[0].length,[e[0]]]}function s(t){var n;if(3===t.nodeType)return t.data;if(f[t.nodeName]&&!d[t.nodeName])return"";if(n="",e(t))return"\n";if((d[t.nodeName]||h[t.nodeName])&&(n+="\n"),t=t.firstChild)do{n+=s(t)}while(t=t.nextSibling);return n}var l,c,u,d,f,h,p=[],g=0;if(u=n.ownerDocument,d=o.getBlockElements(),f=o.getWhiteSpaceElements(),h=o.getShortEndedElements(),c=s(n)){if(t.global)for(;l=t.exec(c);)p.push(a(l,i));else l=c.match(t),p.push(a(l,i));return p.length&&(g=p.length,function(t,n,r){var i,o,a,s,l=[],c=0,u=t,p=n.shift(),g=0;e:for(;;){if((d[u.nodeName]||h[u.nodeName]||e(u))&&c++,3===u.nodeType&&(!o&&u.length+c>=p[1]?(o=u,s=p[1]-c):i&&l.push(u),!i&&u.length+c>p[0]&&(i=u,a=p[0]-c),c+=u.length),i&&o){if(u=r({startNode:i,startNodeIndex:a,endNode:o,endNodeIndex:s,innerNodes:l,match:p[2],matchIndex:g}),c-=o.length-s,i=null,o=null,l=[],p=n.shift(),g++,!p)break}else if(f[u.nodeName]&&!d[u.nodeName]||!u.firstChild){if(u.nextSibling){u=u.nextSibling;continue}}else if(!e(u)){u=u.firstChild;continue}for(;;){if(u.nextSibling){u=u.nextSibling;break}if(u.parentNode===t)break e;u=u.parentNode}}}(n,p,function(e){var t;if("function"!=typeof e){var n=e.nodeType?e:u.createElement(e);t=function(e,t){var r=n.cloneNode(!1);return r.setAttribute("data-mce-index",t),e&&r.appendChild(u.createTextNode(e)),r}}else t=e;return function(e){var n,r,i,o=e.startNode,a=e.endNode,s=e.matchIndex;if(o===a){var l=o;i=l.parentNode,e.startNodeIndex>0&&(n=u.createTextNode(l.data.substring(0,e.startNodeIndex)),i.insertBefore(n,l));var c=t(e.match[0],s);return i.insertBefore(c,l),e.endNodeIndex<l.length&&(r=u.createTextNode(l.data.substring(e.endNodeIndex)),i.insertBefore(r,l)),l.parentNode.removeChild(l),c}n=u.createTextNode(o.data.substring(0,e.startNodeIndex)),r=u.createTextNode(a.data.substring(e.endNodeIndex));for(var d=t(o.data.substring(e.startNodeIndex),s),f=[],h=0,p=e.innerNodes.length;h<p;++h){var g=e.innerNodes[h],m=t(g.data,s);g.parentNode.replaceChild(m,g),f.push(m)}var v=t(a.data.substring(0,e.endNodeIndex),s);return i=o.parentNode,i.insertBefore(n,o),i.insertBefore(d,o),i.removeChild(o),i=a.parentNode,i.insertBefore(v,a),i.insertBefore(r,a),i.removeChild(a),v}}(r))),g}}function n(){}var r=function(e){var t=e,n=function(){return t};return{get:n,set:function(e){t=e},clone:function(){return r(n())}}},i=tinymce.util.Tools.resolve("tinymce.PluginManager"),o=tinymce.util.Tools.resolve("tinymce.util.Tools"),a={findAndReplaceDOMText:t},s=function(e){var t=e.getAttribute("data-mce-index");return"number"==typeof t?""+t:t},l=function(e,t,n){var r,i;return i=e.dom.create("span",{"data-mce-bogus":1}),i.className="mce-match-marker",r=e.getBody(),b(e,t,!1),a.findAndReplaceDOMText(n,r,i,!1,e.schema)},c=function(e){var t=e.parentNode;e.firstChild&&t.insertBefore(e.firstChild,e),e.parentNode.removeChild(e)},u=function(e,t){var n,r=[];if(n=o.toArray(e.getBody().getElementsByTagName("span")),n.length)for(var i=0;i<n.length;i++){var a=s(n[i]);null!==a&&a.length&&(a===t.toString()&&r.push(n[i]))}return r},d=function(e,t,n){var r=t.get(),i=e.dom;n=!1!==n,n?r++:r--,i.removeClass(u(e,t.get()),"mce-match-marker-selected");var o=u(e,r);return o.length?(i.addClass(u(e,r),"mce-match-marker-selected"),e.selection.scrollIntoView(o[0]),r):-1},f=function(e,t){var n=t.parentNode;e.remove(t),e.isEmpty(n)&&e.remove(n)},h=function(e,t,n,r,i){n=n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),n=n.replace(/\s/g,"\\s"),n=i?"\\b"+n+"\\b":n;var o=l(e,t,new RegExp(n,r?"g":"gi"));return o&&(t.set(-1),t.set(d(e,t,!0))),o},p=function(e,t){var n=d(e,t,!0);-1!==n&&t.set(n)},g=function(e,t){var n=d(e,t,!1);-1!==n&&t.set(n)},m=function(e){var t=s(e);return null!==t&&t.length>0},v=function(e,t,n,r,i){var a,l,u,d,h,v,b=t.get();for(r=!1!==r,u=e.getBody(),l=o.grep(o.toArray(u.getElementsByTagName("span")),m),a=0;a<l.length;a++){var _=s(l[a]);if(d=h=parseInt(_,10),i||d===t.get()){for(n.length?(l[a].firstChild.nodeValue=n,c(l[a])):f(e.dom,l[a]);l[++a];){if((d=parseInt(s(l[a]),10))!==h){a--;break}f(e.dom,l[a])}r&&b--}else h>t.get()&&l[a].setAttribute("data-mce-index",h-1)}return t.set(b),r?(v=y(e,t),p(e,t)):(v=w(e,t),g(e,t)),!i&&v},b=function(e,t,n){var r,i,a,l;for(i=o.toArray(e.getBody().getElementsByTagName("span")),r=0;r<i.length;r++){var u=s(i[r]);null!==u&&u.length&&(u===t.get().toString()&&(a||(a=i[r].firstChild),l=i[r].firstChild),c(i[r]))}if(a&&l){var d=e.dom.createRng();return d.setStart(a,0),d.setEnd(l,l.data.length),!1!==n&&e.selection.setRng(d),d}},y=function(e,t){return u(e,t.get()+1).length>0},w=function(e,t){return u(e,t.get()-1).length>0},_={done:b,find:h,next:p,prev:g,replace:v,hasNext:y,hasPrev:w},x=function(e,t){return{done:function(n){return _.done(e,t,n)},find:function(n,r,i){return _.find(e,t,n,r,i)},next:function(){return _.next(e,t)},prev:function(){return _.prev(e,t)},replace:function(n,r,i){return _.replace(e,t,n,r,i)}}},C={get:x},k=function(e,t){function n(){s.statusbar.find("#next").disabled(!1===_.hasNext(e,t)),s.statusbar.find("#prev").disabled(!1===_.hasPrev(e,t))}function r(){e.windowManager.alert("Could not find the specified string.",function(){s.find("#find")[0].focus()})}var i,a={};e.undoManager.add(),i=o.trim(e.selection.getContent({format:"text"}));var s=e.windowManager.open({layout:"flex",pack:"center",align:"center",onClose:function(){e.focus(),_.done(e,t),e.undoManager.add()},onSubmit:function(i){var o,l,c,u;return i.preventDefault(),l=s.find("#case").checked(),u=s.find("#words").checked(),c=s.find("#find").value(),c.length?a.text===c&&a.caseState===l&&a.wholeWord===u?_.hasNext(e,t)?(_.next(e,t),void n()):void r():(o=_.find(e,t,c,l,u),o||r(),s.statusbar.items().slice(1).disabled(0===o),n(),void(a={text:c,caseState:l,wholeWord:u})):(_.done(e,t,!1),void s.statusbar.items().slice(1).disabled(!0))},buttons:[{text:"Find",subtype:"primary",onclick:function(){s.submit()}},{text:"Replace",disabled:!0,onclick:function(){_.replace(e,t,s.find("#replace").value())||(s.statusbar.items().slice(1).disabled(!0),t.set(-1),a={})}},{text:"Replace all",disabled:!0,onclick:function(){_.replace(e,t,s.find("#replace").value(),!0,!0),s.statusbar.items().slice(1).disabled(!0),a={}}},{type:"spacer",flex:1},{text:"Prev",name:"prev",disabled:!0,onclick:function(){_.prev(e,t),n()}},{text:"Next",name:"next",disabled:!0,onclick:function(){_.next(e,t),n()}}],title:"Find and replace",items:{type:"form",padding:20,labelGap:30,spacing:10,items:[{type:"textbox",name:"find",size:40,label:"Find",value:i},{type:"textbox",name:"replace",size:40,label:"Replace with"},{type:"checkbox",name:"case",text:"Match case",label:" "},{type:"checkbox",name:"words",text:"Whole words",label:" "}]}})},T={open:k},S=function(e,t){e.addCommand("SearchReplace",function(){T.open(e,t)})},D={register:S},E=function(e,t){return function(){T.open(e,t)}},N=function(e,t){e.addMenuItem("searchreplace",{text:"Find and replace",shortcut:"Meta+F",onclick:E(e,t),separator:"before",context:"edit"}),e.addButton("searchreplace",{tooltip:"Find and replace",onclick:E(e,t)}),e.shortcuts.add("Meta+F","",E(e,t))},A={register:N};i.add("searchreplace",function(e){var t=r(-1);return D.register(e,t),A.register(e,t),C.get(e,t)})}()}(),function(){!function(){"use strict";function e(e){return e&&1===e.nodeType&&"false"===e.contentEditable}function t(){}var n,r=function(e){var t=e,n=function(){return t};return{get:n,set:function(e){t=e},clone:function(){return r(n())}}},i=tinymce.util.Tools.resolve("tinymce.PluginManager"),o=function(e){return!(!/(^|[ ,])tinymcespellchecker([, ]|$)/.test(e.settings.plugins)||!i.get("tinymcespellchecker"))&&(void 0!==window.console&&window.console.log&&window.console.log("Spell Checker Pro is incompatible with Spell Checker plugin! Remove 'spellchecker' from the 'plugins' option."),!0)},a={hasProPlugin:o},s=function(e){return e.getParam("spellchecker_languages","English=en,Danish=da,Dutch=nl,Finnish=fi,French=fr_FR,German=de,Italian=it,Polish=pl,Portuguese=pt_BR,Spanish=es,Swedish=sv")},l=function(e){var t=e.getParam("language","en");return e.getParam("spellchecker_language",t)},c=function(e){return e.getParam("spellchecker_rpc_url")},u=function(e){return e.getParam("spellchecker_callback")},d=function(e){var t=new RegExp('[^\\s!"#$%&()*+,-./:;<=>?@[\\]^_{|}`]+',"g");return e.getParam("spellchecker_wordchar_pattern",t)},f={getLanguages:s,getLanguage:l,getRpcUrl:c,getSpellcheckerCallback:u,getSpellcheckerWordcharPattern:d},h=tinymce.util.Tools.resolve("tinymce.util.Tools"),p=tinymce.util.Tools.resolve("tinymce.util.URI"),g=tinymce.util.Tools.resolve("tinymce.util.XHR"),m=function(e){return e.fire("SpellcheckStart")},v=function(e){return e.fire("SpellcheckEnd")},b={fireSpellcheckStart:m,fireSpellcheckEnd:v},y=function(t,n){function r(e,t){if(!e[0])throw new Error("findAndReplaceDOMText cannot handle zero-length matches");return{start:e.index,end:e.index+e[0].length,text:e[0],data:t}}function i(t){var n;if(3===t.nodeType)return t.data;if(T[t.nodeName]&&!k[t.nodeName])return"";if(e(t))return"\n";if(n="",(k[t.nodeName]||S[t.nodeName])&&(n+="\n"),t=t.firstChild)do{n+=i(t)}while(t=t.nextSibling);return n}function o(t,n,r){var i,o,a,s,l,c=[],u=0,d=t,f=0;n=n.slice(0),n.sort(function(e,t){return e.start-t.start}),l=n.shift();e:for(;;){if((k[d.nodeName]||S[d.nodeName]||e(d))&&u++,3===d.nodeType&&(!o&&d.length+u>=l.end?(o=d,s=l.end-u):i&&c.push(d),!i&&d.length+u>l.start&&(i=d,a=l.start-u),u+=d.length),i&&o){if(d=r({startNode:i,startNodeIndex:a,endNode:o,endNodeIndex:s,innerNodes:c,match:l.text,matchIndex:f}),u-=o.length-s,i=null,o=null,c=[],l=n.shift(),f++,!l)break}else if(T[d.nodeName]&&!k[d.nodeName]||!d.firstChild){if(d.nextSibling){d=d.nextSibling;continue}}else if(!e(d)){d=d.firstChild;continue}for(;;){if(d.nextSibling){d=d.nextSibling;break}if(d.parentNode===t)break e;d=d.parentNode}}}function a(e){function t(t,n){var r=D[n];r.stencil||(r.stencil=e(r));var i=r.stencil.cloneNode(!1);return i.setAttribute("data-mce-index",n),t&&i.appendChild(E.doc.createTextNode(t)),i}return function(e){var n,r,i,o=e.startNode,a=e.endNode,s=e.matchIndex,l=E.doc;if(o===a){var c=o;i=c.parentNode,e.startNodeIndex>0&&(n=l.createTextNode(c.data.substring(0,e.startNodeIndex)),i.insertBefore(n,c));var u=t(e.match,s);return i.insertBefore(u,c),e.endNodeIndex<c.length&&(r=l.createTextNode(c.data.substring(e.endNodeIndex)),i.insertBefore(r,c)),c.parentNode.removeChild(c),u}n=l.createTextNode(o.data.substring(0,e.startNodeIndex)),r=l.createTextNode(a.data.substring(e.endNodeIndex));for(var d=t(o.data.substring(e.startNodeIndex),s),f=[],h=0,p=e.innerNodes.length;h<p;++h){var g=e.innerNodes[h],m=t(g.data,s);g.parentNode.replaceChild(m,g),f.push(m)}var v=t(a.data.substring(0,e.endNodeIndex),s);return i=o.parentNode,i.insertBefore(n,o),i.insertBefore(d,o),i.removeChild(o),i=a.parentNode,i.insertBefore(v,a),i.insertBefore(r,a),i.removeChild(a),v}}function s(e){e.parentNode.insertBefore(e.firstChild,e),e.parentNode.removeChild(e)}function l(e){return-1!==e.className.indexOf("mce-spellchecker-word")}function c(e){var n=t.getElementsByTagName("*"),r=[];e="number"==typeof e?""+e:null;for(var i=0;i<n.length;i++){var o=n[i],a=o.getAttribute("data-mce-index");null!==a&&a.length&&l(o)&&(a!==e&&null!==e||r.push(o))}return r}function u(e){for(var t=D.length;t--;)if(D[t]===e)return t;return-1}function d(e){var t=[];return f(function(n,r){e(n,r)&&t.push(n)}),D=t,this}function f(e){for(var t=0,n=D.length;t<n&&!1!==e(D[t],t);t++);return this}function h(e){return D.length&&o(t,D,a(e)),this}function p(e,t){if(C&&e.global)for(;x=e.exec(C);)D.push(r(x,t));return this}function g(e){var t,n=c(e?u(e):null);for(t=n.length;t--;)s(n[t]);return this}function m(e){return D[e.getAttribute("data-mce-index")]}function v(e){return c(u(e))[0]}function b(e,t,n){return D.push({start:e,end:e+t,text:C.substr(e,t),data:n}),this}function y(e){var t=c(u(e)),r=n.dom.createRng();return r.setStartBefore(t[0]),r.setEndAfter(t[t.length-1]),r}function w(e,t){var r=y(e);return r.deleteContents(),t.length>0&&r.insertNode(n.dom.doc.createTextNode(t)),r}function _(){return D.splice(0,D.length),g(),this}var x,C,k,T,S,D=[],E=n.dom;return k=n.schema.getBlockElements(),T=n.schema.getWhiteSpaceElements(),S=n.schema.getShortEndedElements(),C=i(t),{text:C,matches:D,each:f,filter:d,reset:_,matchFromElement:m,elementFromMatch:v,find:p,add:b,wrap:h,unwrap:g,replace:w,rangeFromMatch:y,indexOf:u}},w=function(e,t){if(!t.get()){var n=y(e.getBody(),e);t.set(n)}return t.get()},_=function(e){for(var t in e)return!1;return!0},x=function(e,t,n){return function(r,i,o,a){var s={method:r,lang:n.get()},l="";s["addToDictionary"===r?"word":"text"]=i,h.each(s,function(e,t){l&&(l+="&"),l+=t+"="+encodeURIComponent(e)}),g.send({url:new p(t).toAbsolute(f.getRpcUrl(e)),type:"post",content_type:"application/x-www-form-urlencoded",data:l,success:function(t){if(t=JSON.parse(t))t.error?a(t.error):o(t);else{var n=e.translate("Server response wasn't proper JSON.");a(n)}},error:function(){
var t=e.translate("The spelling service was not found: (")+f.getRpcUrl(e)+e.translate(")");a(t)}})}},C=function(e,t,n,r,i,o,a){var s=f.getSpellcheckerCallback(e);(s||x(e,t,n)).call(e.plugins.spellchecker,r,i,o,a)},k=function(e,t,n,r,i,o){if(!E(e,n,r)){var a=function(t){e.notificationManager.open({text:t,type:"error"}),e.setProgressState(!1),E(e,n,r)},s=function(t){R(e,n,r,i,t)};e.setProgressState(!0),C(e,t,o,"spellcheck",w(e,r).text,s,a),e.focus()}},T=function(e,t,n){e.dom.select("span.mce-spellchecker-word").length||E(e,t,n)},S=function(e,t,n,r,i,o,a){e.setProgressState(!0),C(e,t,i,"addToDictionary",o,function(){e.setProgressState(!1),e.dom.remove(a,!0),T(e,n,r)},function(t){e.notificationManager.open({text:t,type:"error"}),e.setProgressState(!1)})},D=function(e,t,n,r,i,o){e.selection.collapse(),o?h.each(e.dom.select("span.mce-spellchecker-word"),function(t){t.getAttribute("data-mce-word")===r&&e.dom.remove(t,!0)}):e.dom.remove(i,!0),T(e,t,n)},E=function(e,t,n){if(w(e,n).reset(),n.set(null),t.get())return t.set(!1),b.fireSpellcheckEnd(e),!0},N=function(e){var t=e.getAttribute("data-mce-index");return"number"==typeof t?""+t:t},A=function(e,t){var n,r=[];if(n=h.toArray(e.getBody().getElementsByTagName("span")),n.length)for(var i=0;i<n.length;i++){var o=N(n[i]);null!==o&&o.length&&(o===t.toString()&&r.push(n[i]))}return r},R=function(e,t,n,r,i){var o,a;if("string"!=typeof i&&i.words?(a=!!i.dictionary,o=i.words):o=i,e.setProgressState(!1),_(o)){var s=e.translate("No misspellings found.");return e.notificationManager.open({text:s,type:"info"}),void t.set(!1)}r.set({suggestions:o,hasDictionarySupport:a}),w(e,n).find(f.getSpellcheckerWordcharPattern(e)).filter(function(e){return!!o[e.text]}).wrap(function(t){return e.dom.create("span",{class:"mce-spellchecker-word","data-mce-bogus":1,"data-mce-word":t.text})}),t.set(!0),b.fireSpellcheckStart(e)},P={spellcheck:k,checkIfFinished:T,addToDictionary:S,ignoreWord:D,findSpansByIndex:A,getElmIndex:N,markErrors:R},O=function(e,t,n,r,i,o){var a=function(){return i.get()},s=function(){return f.getSpellcheckerWordcharPattern(e)},l=function(i){P.markErrors(e,t,r,n,i)};return{getTextMatcher:function(){return r.get()},getWordCharPattern:s,markErrors:l,getLanguage:a}},I={get:O},M=function(e,t,n,r,i,o){e.addCommand("mceSpellCheck",function(){P.spellcheck(e,t,n,r,i,o)})},j={register:M},B=function(e,t){var n=[];return h.each(t,function(e){n.push({selectable:!0,text:e.name,data:e.value})}),n},L=function(e,t){return function(e){var n=t.get();e.control.items().each(function(e){e.active(e.settings.data===n)})}},F=function(e){return h.map(f.getLanguages(e).split(","),function(e){return e=e.split("="),{name:e[0],value:e[1]}})},H=function(e,t,n,r,i,o){var a=B(0,F(e)),s=function(){P.spellcheck(e,t,n,r,o,i)},l={tooltip:"Spellcheck",onclick:s,onPostRender:function(t){var r=t.control;e.on("SpellcheckStart SpellcheckEnd",function(){r.active(n.get())})}};a.length>1&&(l.type="splitbutton",l.menu=a,l.onshow=L(0,i),l.onselect=function(e){i.set(e.control.settings.data)}),e.addButton("spellchecker",l),e.addMenuItem("spellchecker",{text:"Spellcheck",context:"tools",onclick:s,selectable:!0,onPostRender:function(){var t=this;t.active(n.get()),e.on("SpellcheckStart SpellcheckEnd",function(){t.active(n.get())})}})},$={register:H},U=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),z=tinymce.util.Tools.resolve("tinymce.ui.Factory"),W=function(e,t,r,i,o,a,s,l){var c=[],u=r.get().suggestions[s];h.each(u,function(t){c.push({text:t,onclick:function(){e.insertContent(e.dom.encode(t)),e.dom.remove(l),P.checkIfFinished(e,i,o)}})}),c.push({text:"-"}),r.get().hasDictionarySupport&&c.push({text:"Add to Dictionary",onclick:function(){P.addToDictionary(e,t,i,o,a,s,l)}}),c.push.apply(c,[{text:"Ignore",onclick:function(){P.ignoreWord(e,i,o,s,l)}},{text:"Ignore all",onclick:function(){P.ignoreWord(e,i,o,s,l,!0)}}]),n=z.create("menu",{items:c,context:"contextmenu",onautohide:function(e){-1!==e.target.className.indexOf("spellchecker")&&e.preventDefault()},onhide:function(){n.remove(),n=null}}),n.renderTo(document.body);var d=U.DOM.getPos(e.getContentAreaContainer()),f=e.dom.getPos(l[0]),p=e.dom.getRoot();"BODY"===p.nodeName?(f.x-=p.ownerDocument.documentElement.scrollLeft||p.scrollLeft,f.y-=p.ownerDocument.documentElement.scrollTop||p.scrollTop):(f.x-=p.scrollLeft,f.y-=p.scrollTop),d.x+=f.x,d.y+=f.y,n.moveTo(d.x,d.y+l[0].offsetHeight)},q=function(e,t,n,r,i,o){e.on("click",function(a){var s=a.target;if("mce-spellchecker-word"===s.className){a.preventDefault();var l=P.findSpansByIndex(e,P.getElmIndex(s));if(l.length>0){var c=e.dom.createRng();c.setStartBefore(l[0]),c.setEndAfter(l[l.length-1]),e.selection.setRng(c),W(e,t,n,r,i,o,s.getAttribute("data-mce-word"),l)}}})},V={setup:q};i.add("spellchecker",function(e,t){if(!1===a.hasProPlugin(e)){var n=r(!1),i=r(f.getLanguage(e)),o=r(null),s=r(null);return $.register(e,t,n,o,i,s),V.setup(e,t,s,n,o,i),j.register(e,t,n,o,s,i),I.get(e,n,s,o,i,t)}})}()}(),function(){!function(){"use strict";function e(){}var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),r=tinymce.util.Tools.resolve("tinymce.EditorManager"),i=tinymce.util.Tools.resolve("tinymce.Env"),o=tinymce.util.Tools.resolve("tinymce.util.Delay"),a=tinymce.util.Tools.resolve("tinymce.util.Tools"),s=tinymce.util.Tools.resolve("tinymce.util.VK"),l=function(e){return e.getParam("tabfocus_elements",":prev,:next")},c=function(e){return e.getParam("tab_focus",l(e))},u={getTabFocus:c},d=n.DOM,f=function(e){e.keyCode!==s.TAB||e.ctrlKey||e.altKey||e.metaKey||e.preventDefault()},h=function(e){function t(t){function n(n){function i(e){return"BODY"===e.nodeName||"hidden"!==e.type&&"none"!==e.style.display&&"hidden"!==e.style.visibility&&i(e.parentNode)}function o(e){return/INPUT|TEXTAREA|BUTTON/.test(e.tagName)&&r.get(t.id)&&-1!==e.tabIndex&&i(e)}if(c=d.select(":input:enabled,*[tabindex]:not(iframe)"),a.each(c,function(t,n){if(t.id===e.id)return l=n,!1}),n>0){for(h=l+1;h<c.length;h++)if(o(c[h]))return c[h]}else for(h=l-1;h>=0;h--)if(o(c[h]))return c[h];return null}var l,c,f,h;if(!(t.keyCode!==s.TAB||t.ctrlKey||t.altKey||t.metaKey||t.isDefaultPrevented())&&(f=a.explode(u.getTabFocus(e)),1===f.length&&(f[1]=f[0],f[0]=":prev"),c=t.shiftKey?":prev"===f[0]?n(-1):d.get(f[0]):":next"===f[1]?n(1):d.get(f[1]))){var p=r.get(c.id||c.name);c.id&&p?p.focus():o.setTimeout(function(){i.webkit||window.focus(),c.focus()},10),t.preventDefault()}}e.on("init",function(){e.inline&&d.setAttrib(e.getBody(),"tabIndex",null),e.on("keyup",f),i.gecko?e.on("keypress keydown",t):e.on("keydown",t)})},p={setup:h};t.add("tabfocus",function(e){p.setup(e)})}()}(),function(){!function(){"use strict";function e(e,t,n){var r=e.isiOS()&&!0===/ipad/i.test(n),i=e.isiOS()&&!r,o=e.isAndroid()&&3===e.version.major,a=e.isAndroid()&&4===e.version.major,s=r||o||a&&!0===/mobile/i.test(n),l=e.isiOS()||e.isAndroid(),c=l&&!s,u=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n);return{isiPad:S(r),isiPhone:S(i),isTablet:S(s),isPhone:S(c),isTouch:S(l),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:S(u)}}function t(e,t,n,r,i){return e(n,r)?H.some(n):V(i)&&i(n)?H.none():t(n,r,i)}function n(){var e=function(e){return We.fromDom(e.dom().cloneNode(!1))},t=function(e){return!!Rn.isElement(e)&&("body"===Rn.name(e)||K(po,Rn.name(e)))},n=function(e){return!!Rn.isElement(e)&&K(["br","img","hr","input"],Rn.name(e))},r=function(e,t){return e.dom().compareDocumentPosition(t.dom())},i=function(e,t){var n=Un.clone(e);Un.setAll(t,n)};return{up:S({selector:br.ancestor,closest:br.closest,predicate:dr.ancestor,all:yn.parents}),down:S({selector:ir.descendants,predicate:Qn.descendants}),styles:S({get:si.get,getRaw:si.getRaw,set:si.set,remove:si.remove}),attrs:S({get:Un.get,set:Un.set,remove:Un.remove,copyTo:i}),insert:S({before:pi.before,after:pi.after,afterAll:yi.after,append:pi.append,appendAll:yi.append,prepend:pi.prepend,wrap:pi.wrap}),remove:S({unwrap:Ci.unwrap,remove:Ci.remove}),create:S({nu:We.fromTag,clone:e,text:We.fromText}),query:S({comparePosition:r,prevSibling:yn.prevSibling,nextSibling:yn.nextSibling}),property:S({children:yn.children,name:Rn.name,parent:yn.parent,isText:Rn.isText,isComment:Rn.isComment,isElement:Rn.isElement,getText:Ui.get,setText:Ui.set,isBoundary:t,isEmptyTag:n}),eq:Jt.eq,is:Jt.is}}function r(e,t){var n=function(t,n){if(!Y(n)&&!n.match(/^[0-9]+$/))throw e+".set accepts only positive integer values. Value was "+n;var r=t.dom();Wr.isSupported(r)&&(r.style[e]=n+"px")},r=function(n){var r=t(n);if(r<=0||null===r){var i=si.get(n,e);return parseFloat(i)||0}return r},i=r,o=function(e,t){return ne(t,function(t,n){var r=si.get(e,n),i=void 0===r?0:parseInt(r,10);return isNaN(i)?t:t+i},0)};return{set:n,get:r,getOuter:i,aggregate:o,max:function(e,t,n){var r=o(e,n);return t>r?t-r:0}}}function i(e){var t=function(t){return e(t).isRtl()?al.rtl:al.ltr},n=function(e,n){return t(n).delta(e,n)},r=function(e,n){return t(n).positions(e,n)};return{delta:n,edge:function(e){return t(e).edge(e)},positions:r}}function o(e,t,n){var r=n||!1,i=function(){t(),r=!0},o=function(){e(),r=!1};return{on:i,off:o,toggle:function(){(r?o:i)()},isOn:function(){return r}}}function a(e){return e.control.rootControl.find("#style")[0].getEl().isEqualNode(document.activeElement)}function s(e,t,n,r){function i(e,n,r){(1===t.length||r)&&a.setAttrib(e,n,r)}function o(e,n,r){(1===t.length||r)&&a.setStyle(e,n,r)}var a=e.dom;$f(e)&&wh.syncAdvancedStyleFields(e,r);var s=r.control.rootControl.toJSON();e.undoManager.transact(function(){sh.each(t,function(t){i(t,"scope",s.scope),i(t,"style",s.style),i(t,"class",s.class),o(t,"height",kf(s.height)),s.type!==t.parentNode.nodeName.toLowerCase()&&Dh(e.dom,t,s.type),s.align!==n.align&&(hh.unApplyAlign(e,t),hh.applyAlign(e,t,s.align))}),e.focus()})}function l(e,t,n,r){if("TD"===t.tagName||"TH"===t.tagName)e.setStyle(t,n,r);else if(t.children)for(var i=0;i<t.children.length;i++)l(e,t.children[i],n,r)}function c(e){var t=ve.apply(null,e),n=[];return{bind:function(e){if(void 0===e)throw"Event bind error: undefined handler";n.push(e)},unbind:function(e){n=ee(n,function(t){return t!==e})},trigger:function(){var e=t.apply(null,arguments);Q(n,function(t){t(e)})}}}function u(e){var t=Wl({layerClass:hp.resolve("blocker")},e),n=We.fromTag("div");return Un.set(n,"role","presentation"),si.setAll(n,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),Wc.add(n,hp.resolve("blocker")),Wc.add(n,t.layerClass),{element:function(){return n},destroy:function(){Ci.remove(n)}}}function d(){var e=H.none(),t=function(){e=H.none()},n=function(t,n){var r=e.map(function(e){return t.compare(e,n)});return e=H.some(n),r},r=function(e,t){t.extract(e).each(function(e){n(t,e).each(function(e){i.trigger.move(e)})})},i=sp.create({move:c(["info"])});return{onEvent:r,reset:t,events:i.registry}}function f(e){return{onEvent:function(e,t){},reset:k}}function h(){var e=f(),t=d(),n=e,r=function(){n.reset(),n=t},i=function(){n.reset(),n=e},o=function(e,t){n.onEvent(e,t)};return{on:r,off:i,isOn:function(){return n===t},onEvent:o,events:t.events}}function p(){var e=sp.create({drag:c(["xDelta","yDelta"])});return{mutate:function(t,n){e.trigger.drag(t,n)},events:e.registry}}function g(){var e=sp.create({drag:c(["xDelta","yDelta","target"])}),t=H.none(),n=p();return n.events.drag.bind(function(n){t.each(function(t){e.trigger.drag(n.xDelta(),n.yDelta(),t)})}),{assign:function(e){t=H.some(e)},get:function(){return t},mutate:n.mutate,events:e.registry}}function m(e,t,n){var r=g(),i=Ip.transform(r,{}),o=H.none(),a=function(e,t){return H.from(Un.get(e,t))};r.events.drag.bind(function(e){a(e.target(),"data-row").each(function(t){var n=dd.getInt(e.target(),"top");si.set(e.target(),"top",n+e.yDelta()+"px")}),a(e.target(),"data-column").each(function(t){var n=dd.getInt(e.target(),"left");si.set(e.target(),"left",n+e.xDelta()+"px")})});var s=function(e,t){return dd.getInt(e,t)-parseInt(Un.get(e,"data-initial-"+t),10)};i.events.stop.bind(function(){r.get().each(function(r){o.each(function(i){a(r,"data-row").each(function(e){var t=s(r,"top");Un.remove(r,"data-initial-top"),m.trigger.adjustHeight(i,t,parseInt(e,10))}),a(r,"data-column").each(function(e){var t=s(r,"left");Un.remove(r,"data-initial-left"),m.trigger.adjustWidth(i,t,parseInt(e,10))}),ou.refresh(e,i,n,t)})})});var l=function(t,n){m.trigger.startAdjust(),r.assign(t),Un.set(t,"data-initial-"+n,parseInt(si.get(t,n),10)),Wc.add(t,Up),si.set(t,"opacity","0.2"),i.go(e.parent())},u=kp.bind(e.parent(),"mousedown",function(e){ou.isRowBar(e.target())&&l(e.target(),"top"),ou.isColBar(e.target())&&l(e.target(),"left")}),d=function(t){return Jt.eq(t,e.view())},f=kp.bind(e.view(),"mouseover",function(r){"table"===Rn.name(r.target())||$p.closest(r.target(),"table",d)?(o="table"===Rn.name(r.target())?H.some(r.target()):br.ancestor(r.target(),"table",d),o.each(function(r){ou.refresh(e,r,n,t)})):Vn.inBody(r.target())&&ou.destroy(e)}),h=function(){u.unbind(),f.unbind(),i.destroy(),ou.destroy(e)},p=function(r){ou.refresh(e,r,n,t)},m=sp.create({adjustHeight:c(["table","delta","row"]),adjustWidth:c(["table","delta","column"]),startAdjust:c([])});return{destroy:h,refresh:p,on:i.on,off:i.off,hideBars:E(ou.hide,e),showBars:E(ou.show,e),events:m.registry}}function v(e,t){var n=ol.height,r=m(e,t,n),i=sp.create({beforeResize:c(["table"]),afterResize:c(["table"]),startDrag:c([])});return r.events.adjustHeight.bind(function(e){i.trigger.beforeResize(e.table());var t=n.delta(e.delta(),e.table());Hd.adjustHeight(e.table(),t,e.row(),n),i.trigger.afterResize(e.table())}),r.events.startAdjust.bind(function(e){i.trigger.startDrag()}),r.events.adjustWidth.bind(function(e){i.trigger.beforeResize(e.table());var n=t.delta(e.delta(),e.table());Hd.adjustWidth(e.table(),n,e.column(),t),i.trigger.afterResize(e.table())}),{on:r.on,off:r.off,hideBars:r.hideBars,showBars:r.showBars,destroy:r.destroy,events:i.registry}}function b(e){var t=function(t,n){return We.fromPoint(We.fromDom(e.document),t,n)},n=function(e){return e.dom().getBoundingClientRect()},r=function(t,n,r,i){var o=hg.exact(t,n,r,i);return zm.getFirstRect(e,o).map(function(e){return ge(e,R)})},i=function(){return zm.get(e).map(function(t){return lv.convertToRange(e,t)})},o=function(t){var n=hg.relative(t.start(),t.finish());return lv.convertToRange(e,n)},a=function(t,n){return zm.getAtPoint(e,t,n).map(function(e){return{start:S(sg.on(e.start(),e.soffset())),finish:S(sg.on(e.finish(),e.foffset()))}})},s=function(){zm.clear(e)},l=function(t){zm.setToElement(e,t)};return{elementFromPoint:t,getRect:n,getRangedRect:r,getSelection:i,fromSitus:o,situsFromPoint:a,clearSelection:s,setSelection:function(t){zm.setExact(e,t.start(),t.soffset(),t.finish(),t.foffset())},setRelativeSelection:function(t,n){zm.setRelative(e,t,n)},selectContents:l,getInnerHeight:function(){return e.innerHeight},getScrollY:function(){return yv.get(We.fromDom(e.document)).top()},scrollBy:function(t,n){yv.by(t,n,We.fromDom(e.document))}}}function y(e,t,n,r){var i=H.none(),o=function(){i=H.none()};return{mousedown:function(e){r.clear(t),i=Ny(e.target(),n)},mouseover:function(o){i.each(function(i){r.clear(t),Ny(o.target(),n).each(function(o){ba.identify(i,o,n).each(function(n){var a=n.boxes().getOr([]);(a.length>1||1===a.length&&!Jt.eq(i,o))&&(r.selectRange(t,a,n.start(),n.finish()),e.selectContents(o))})})})},mouseup:function(){i.each(o)}}}function w(e,t){var n=ke(["mousedown","mouseover","mouseup","keyup","keydown"],[]),r=H.none(),i=Xy.byAttr(Ca);e.on("init",function(o){var a=e.getWin(),s=yf(e),l=xf(e),c=function(){var t=e.selection,n=We.fromDom(t.getStart()),r=We.fromDom(t.getEnd());qo.sharedOne(Pr.table,[n,r]).fold(function(){i.clear(s)},k)},u=Iy.mouse(a,s,l,i),d=Iy.keyboard(a,s,l,i),f=function(e){return!0===e.raw().shiftKey},h=function(t,n){f(t)&&(n.kill()&&t.kill(),n.selection().each(function(t){var n=hg.relative(t.start(),t.finish()),r=Ug.asLtrRange(a,n);e.selection.setRng(r)}))},p=function(t){var n=v(t);if(n.raw().shiftKey&&ov.isNavigation(n.raw().which)){var r=e.selection.getRng(),i=We.fromDom(r.startContainer),o=We.fromDom(r.endContainer);d.keyup(n,i,r.startOffset,o,r.endOffset).each(function(e){h(n,e)})}},g=function(n){var r=v(n);t().each(function(e){e.hideBars()});var i=e.selection.getRng(),o=We.fromDom(e.selection.getStart()),a=We.fromDom(i.startContainer),s=We.fromDom(i.endContainer),l=Pf.directionAt(o).isRtl()?ov.rtl:ov.ltr;d.keydown(r,a,i.startOffset,s,i.endOffset,l).each(function(e){h(r,e)}),t().each(function(e){e.showBars()})},m=function(e){return e.hasOwnProperty("x")&&e.hasOwnProperty("y")},v=function(e){var t=We.fromDom(e.target),n=function(){e.stopPropagation()},r=function(){e.preventDefault()},i=T(r,n);return{target:S(t),x:S(m(e)?e.x:null),y:S(m(e)?e.y:null),stop:n,prevent:r,kill:i,raw:S(e)}},b=function(e){return 0===e.button},y=function(e){return void 0===e.buttons||0!=(1&e.buttons)},w=function(e){b(e)&&Jy(e)&&u.mousedown(v(e))},_=function(e){y(e)&&Jy(e)&&u.mouseover(v(e))},x=function(e){b(e)&&Jy(e)&&u.mouseup(v(e))};e.on("mousedown",w),e.on("mouseover",_),e.on("mouseup",x),e.on("keyup",p),e.on("keydown",g),e.on("nodechange",c),r=H.some(n({mousedown:w,mouseover:_,mouseup:x,keyup:p,keydown:g}))});var o=function(){r.each(function(e){})};return{clear:i.clear,destroy:o}}function _(e){var t=Yp(e),n=w(e,t.lazyResize),r=ih(e,t.lazyWire),i=Qy(e),o=cl(H.none());return tp.registerCommands(e,r,n,i,o),Ua.registerEvents(e,i,r,n),iw.addMenuItems(e,i),nw.addButtons(e),nw.addToolbars(e),e.on("PreInit",function(){e.serializer.addTempAttr(Ca.firstSelected()),e.serializer.addTempAttr(Ca.lastSelected())}),Ff(e)&&e.on("keydown",function(n){Qm.handle(n,e,r,t.lazyWire)}),e.on("remove",function(){t.destroy(),n.destroy()}),sw(e,o)}function x(){}var C=tinymce.util.Tools.resolve("tinymce.PluginManager"),k=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},T=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e(t.apply(null,arguments))}},S=function(e){return function(){return e}},D=function(e){return e},E=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=new Array(arguments.length-1),i=1;i<arguments.length;i++)r[i-1]=arguments[i];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var i=new Array(arguments.length),o=0;o<i.length;o++)i[o]=arguments[o];var a=r.concat(i);return e.apply(null,a)}},N=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return!e.apply(null,arguments)}},A=function(e){return function(){throw new Error(e)}},R=function(e){return e()},P=S(!1),O=S(!0),I=P,M=O,j=function(){return B},B=function(){var e=function(e){return e.isNone()},t=function(e){return e()},n=function(e){return e},r=function(){},i=function(){return null},o=function(){},a={fold:function(e,t){return e()},is:I,isSome:I,isNone:M,getOr:n,getOrThunk:t,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:i,getOrUndefined:o,or:n,orThunk:t,map:j,ap:j,each:r,bind:j,flatten:j,exists:I,forall:M,filter:j,equals:e,equals_:e,toArray:function(){return[]},toString:S("none()")};return Object.freeze&&Object.freeze(a),a}(),L=function(e){var t=function(){return e},n=function(){return o},r=function(t){return L(t(e))},i=function(t){return t(e)},o={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:M,isNone:I,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:r,ap:function(t){return t.fold(j,function(t){return L(t(e))})},each:function(t){t(e)},bind:i,flatten:t,exists:i,forall:i,filter:function(t){return t(e)?o:B},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(I,function(t){return n(e,t)})},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return o},F=function(e){return null===e||void 0===e?B:L(e)},H={some:L,none:j,from:F},$=function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&Array.prototype.isPrototypeOf(e)?"array":"object"===t&&String.prototype.isPrototypeOf(e)?"string":t},U=function(e){return function(t){return $(t)===e}},z=U("string"),W=U("array"),q=U("boolean"),V=U("function"),Y=U("number"),G=function(){var e=Array.prototype.indexOf,t=function(t,n){return e.call(t,n)},n=function(e,t){return oe(e,t)};return void 0===e?n:t}(),K=function(e,t){return G(e,t)>-1},X=function(e,t){return ie(e,t).isSome()},J=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;i++){var o=e[i];r[i]=t(o,i,e)}return r},Q=function(e,t){for(var n=0,r=e.length;n<r;n++){t(e[n],n,e)}},Z=function(e,t){for(var n=e.length-1;n>=0;n--){t(e[n],n,e)}},ee=function(e,t){for(var n=[],r=0,i=e.length;r<i;r++){var o=e[r];t(o,r,e)&&n.push(o)}return n},te=function(e,t,n){return Z(e,function(e){n=t(n,e)}),n},ne=function(e,t,n){return Q(e,function(e){n=t(n,e)}),n},re=function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];if(t(i,n,e))return H.some(i)}return H.none()},ie=function(e,t){for(var n=0,r=e.length;n<r;n++){if(t(e[n],n,e))return H.some(n)}return H.none()},oe=function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return n;return-1},ae=Array.prototype.push,se=function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!Array.prototype.isPrototypeOf(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);ae.apply(t,e[n])}return t},le=function(e,t){var n=J(e,t);return se(n)},ce=function(e,t){for(var n=0,r=e.length;n<r;++n){if(!0!==t(e[n],n,e))return!1}return!0},ue=Array.prototype.slice,de=function(e){var t=ue.call(e,0);return t.reverse(),t},fe=function(e){return 0===e.length?H.none():H.some(e[e.length-1])},he=(V(Array.from)&&Array.from,Object.keys),pe=function(e,t){for(var n=he(e),r=0,i=n.length;r<i;r++){var o=n[r];t(e[o],o,e)}},ge=function(e,t){return me(e,function(e,n,r){return{k:n,v:t(e,n,r)}})},me=function(e,t){var n={};return pe(e,function(r,i){var o=t(r,i,e);n[o.k]=o.v}),n},ve=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(e.length!==t.length)throw new Error('Wrong number of arguments to struct. Expected "['+e.length+']", got '+t.length+" arguments");var r={};return Q(e,function(e,n){r[e]=S(t[n])}),r}},be=function(e){return e.slice(0).sort()},ye=function(e,t){throw new Error("All required keys ("+be(e).join(", ")+") were not specified. Specified keys were: "+be(t).join(", ")+".")},we=function(e){throw new Error("Unsupported keys for object: "+be(e).join(", "))},_e=function(e,t){if(!W(t))throw new Error("The "+e+" fields must be an array. Was: "+t+".");Q(t,function(t){if(!z(t))throw new Error("The value "+t+" in the "+e+" fields was not a string.")})},xe=function(e,t){throw new Error("All values need to be of type: "+t+". Keys ("+be(e).join(", ")+") were not.")},Ce=function(e){var t=be(e);re(t,function(e,n){return n<t.length-1&&e===t[n+1]}).each(function(e){throw new Error("The field: "+e+" occurs more than once in the combined fields: ["+t.join(", ")+"].")})},ke=function(e,t){var n=e.concat(t);if(0===n.length)throw new Error("You must specify at least one required or optional field.");return _e("required",e),_e("optional",t),Ce(n),function(r){var i=he(r);ce(e,function(e){return K(i,e)})||ye(e,i);var o=ee(i,function(e){return!K(n,e)});o.length>0&&we(o);var a={};return Q(e,function(e){a[e]=S(r[e])}),Q(t,function(e){a[e]=S(Object.prototype.hasOwnProperty.call(r,e)?H.some(r[e]):H.none())}),a}},Te=ve("width","height"),Se=ve("rows","columns"),De=ve("row","column"),Ee=ve("x","y"),Ne=ve("element","rowspan","colspan"),Ae=ve("element","rowspan","colspan","isNew"),Re=ve("element","rowspan","colspan","row","column"),Pe=ve("element","cells","section"),Oe=ve("element","isNew"),Ie=ve("element","cells","section","isNew"),Me=ve("cells","section"),je=ve("details","section"),Be=ve("startRow","startCol","finishRow","finishCol"),Le={dimensions:Te,grid:Se,address:De,coords:Ee,extended:Re,detail:Ne,detailnew:Ae,rowdata:Pe,elementnew:Oe,rowdatanew:Ie,rowcells:Me,rowdetails:je,bounds:Be},Fe=function(e,t){var n=t||document,r=n.createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1)throw"HTML must have a single root node";return Ue(r.childNodes[0])},He=function(e,t){var n=t||document,r=n.createElement(e);return Ue(r)},$e=function(e,t){var n=t||document,r=n.createTextNode(e);return Ue(r)},Ue=function(e){if(null===e||void 0===e)throw new Error("Node cannot be null or undefined");return{dom:S(e)}},ze=function(e,t,n){var r=e.dom();return H.from(r.elementFromPoint(t,n)).map(Ue)},We={fromHtml:Fe,fromTag:He,fromText:$e,fromDom:Ue,fromPoint:ze},qe={ATTRIBUTE:Node.ATTRIBUTE_NODE,CDATA_SECTION:Node.CDATA_SECTION_NODE,COMMENT:Node.COMMENT_NODE,DOCUMENT:Node.DOCUMENT_NODE,DOCUMENT_TYPE:Node.DOCUMENT_TYPE_NODE,DOCUMENT_FRAGMENT:Node.DOCUMENT_FRAGMENT_NODE,ELEMENT:Node.ELEMENT_NODE,TEXT:Node.TEXT_NODE,PROCESSING_INSTRUCTION:Node.PROCESSING_INSTRUCTION_NODE,ENTITY_REFERENCE:Node.ENTITY_REFERENCE_NODE,ENTITY:Node.ENTITY_NODE,NOTATION:Node.NOTATION_NODE},Ve=qe.ELEMENT,Ye=qe.DOCUMENT,Ge=function(e,t){var n=e.dom();if(n.nodeType!==Ve)return!1;if(void 0!==n.matches)return n.matches(t);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(t);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(t);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},Ke=function(e){return e.nodeType!==Ve&&e.nodeType!==Ye||0===e.childElementCount},Xe=function(e,t){var n=void 0===t?document:t.dom();return Ke(n)?[]:J(n.querySelectorAll(e),We.fromDom)},Je=function(e,t){var n=void 0===t?document:t.dom();return Ke(n)?H.none():H.from(n.querySelector(e)).map(We.fromDom)},Qe={all:Xe,is:Ge,one:Je},Ze=function(e,t){var n=[],r=function(e){return n.push(e),t(e)},i=t(e);do{i=i.bind(r)}while(i.isSome());return n},et={toArray:Ze},tt="undefined"!=typeof window?window:Function("return this;")(),nt=function(e,t){for(var n=void 0!==t&&null!==t?t:tt,r=0;r<e.length&&void 0!==n&&null!==n;++r)n=n[e[r]];return n},rt=function(e,t){var n=e.split(".");return nt(n,t)},it=function(e,t){return rt(e,t)},ot=function(e,t){var n=it(e,t);if(void 0===n||null===n)throw e+" not available on this browser";return n},at={getOrDie:ot},st=function(){return at.getOrDie("Node")},lt=function(e,t,n){return 0!=(e.compareDocumentPosition(t)&n)},ct=function(e,t){return lt(e,t,st().DOCUMENT_POSITION_PRECEDING)},ut=function(e,t){return lt(e,t,st().DOCUMENT_POSITION_CONTAINED_BY)},dt={documentPositionPreceding:ct,documentPositionContainedBy:ut},ft=function(e){var t,n=!1;return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return n||(n=!0,t=e.apply(null,r)),t}},ht=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}},pt=function(e,t){var n=ht(e,t);if(!n)return{major:0,minor:0};var r=function(e){return Number(t.replace(n,"$"+e))};return vt(r(1),r(2))},gt=function(e,t){var n=String(t).toLowerCase();return 0===e.length?mt():pt(e,n)},mt=function(){return vt(0,0)},vt=function(e,t){return{major:e,minor:t}},bt={nu:vt,detect:gt,unknown:mt},yt=function(e,t){return function(){return t===e}},wt=function(){return _t({current:void 0,version:bt.unknown()})},_t=function(e){var t=e.current;return{current:t,version:e.version,isEdge:yt("Edge",t),isChrome:yt("Chrome",t),isIE:yt("IE",t),isOpera:yt("Opera",t),isFirefox:yt("Firefox",t),isSafari:yt("Safari",t)}},xt={unknown:wt,nu:_t,edge:S("Edge"),chrome:S("Chrome"),ie:S("IE"),opera:S("Opera"),firefox:S("Firefox"),safari:S("Safari")},Ct=function(e,t){return function(){return t===e}},kt=function(){return Tt({current:void 0,version:bt.unknown()})},Tt=function(e){var t=e.current;return{current:t,version:e.version,isWindows:Ct("Windows",t),isiOS:Ct("iOS",t),isAndroid:Ct("Android",t),isOSX:Ct("OSX",t),isLinux:Ct("Linux",t),isSolaris:Ct("Solaris",t),isFreeBSD:Ct("FreeBSD",t)}},St={unknown:kt,nu:Tt,windows:S("Windows"),ios:S("iOS"),android:S("Android"),linux:S("Linux"),osx:S("OSX"),solaris:S("Solaris"),freebsd:S("FreeBSD")},Dt=function(e,t){var n=String(t).toLowerCase();return re(e,function(e){return e.search(n)})},Et=function(e,t){return Dt(e,t).map(function(e){var n=bt.detect(e.versionRegexes,t);return{current:e.name,version:n}})},Nt=function(e,t){return Dt(e,t).map(function(e){var n=bt.detect(e.versionRegexes,t);return{current:e.name,version:n}})},At={detectBrowser:Et,detectOs:Nt},Rt=function(e,t,n){return""===t||!(e.length<t.length)&&e.substr(n,n+t.length)===t},Pt=function(e,t){return-1!==e.indexOf(t)},Ot=function(e,t){return Rt(e,t,e.length-t.length)},It=function(e){return e.replace(/^\s+|\s+$/g,"")},Mt=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,jt=function(e){return function(t){return Pt(t,e)}},Bt=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return Pt(e,"edge/")&&Pt(e,"chrome")&&Pt(e,"safari")&&Pt(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Mt],search:function(e){return Pt(e,"chrome")&&!Pt(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return Pt(e,"msie")||Pt(e,"trident")}},{name:"Opera",versionRegexes:[Mt,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:jt("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:jt("firefox")},{name:"Safari",versionRegexes:[Mt,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(Pt(e,"safari")||Pt(e,"mobile/"))&&Pt(e,"applewebkit")}}],Lt=[{name:"Windows",search:jt("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return Pt(e,"iphone")||Pt(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:jt("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:jt("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:jt("linux"),versionRegexes:[]},{name:"Solaris",search:jt("sunos"),versionRegexes:[]},{name:"FreeBSD",search:jt("freebsd"),versionRegexes:[]}],Ft={browsers:S(Bt),oses:S(Lt)},Ht=function(t){var n=Ft.browsers(),r=Ft.oses(),i=At.detectBrowser(n,t).fold(xt.unknown,xt.nu),o=At.detectOs(r,t).fold(St.unknown,St.nu);return{browser:i,os:o,deviceType:e(o,i,t)}},$t={detect:Ht},Ut=ft(function(){var e=navigator.userAgent;return $t.detect(e)}),zt={detect:Ut},Wt=function(e,t){return e.dom()===t.dom()},qt=function(e,t){return e.dom().isEqualNode(t.dom())},Vt=function(e,t){return X(t,E(Wt,e))},Yt=function(e,t){var n=e.dom(),r=t.dom();return n!==r&&n.contains(r)},Gt=function(e,t){return dt.documentPositionContainedBy(e.dom(),t.dom())},Kt=zt.detect().browser,Xt=Kt.isIE()?Gt:Yt,Jt={eq:Wt,isEqualNode:qt,member:Vt,contains:Xt,is:Qe.is},Qt=function(e){return We.fromDom(e.dom().ownerDocument)},Zt=function(e){return We.fromDom(e.dom().ownerDocument.documentElement)},en=function(e){var t=e.dom(),n=t.ownerDocument.defaultView;return We.fromDom(n)},tn=function(e){var t=e.dom();return H.from(t.parentNode).map(We.fromDom)},nn=function(e){return tn(e).bind(function(t){var n=dn(t);return ie(n,function(t){return Jt.eq(e,t)})})},rn=function(e,t){for(var n=V(t)?t:S(!1),r=e.dom(),i=[];null!==r.parentNode&&void 0!==r.parentNode;){var o=r.parentNode,a=We.fromDom(o);if(i.push(a),!0===n(a))break;r=o}return i},on=function(e){var t=function(t){return ee(t,function(t){return!Jt.eq(e,t)})};return tn(e).map(dn).map(t).getOr([])},an=function(e){var t=e.dom();return H.from(t.offsetParent).map(We.fromDom)},sn=function(e){var t=e.dom();return H.from(t.previousSibling).map(We.fromDom)},ln=function(e){var t=e.dom();return H.from(t.nextSibling).map(We.fromDom)},cn=function(e){return de(et.toArray(e,sn))},un=function(e){return et.toArray(e,ln)},dn=function(e){var t=e.dom();return J(t.childNodes,We.fromDom)},fn=function(e,t){var n=e.dom().childNodes;return H.from(n[t]).map(We.fromDom)},hn=function(e){return fn(e,0)},pn=function(e){
return fn(e,e.dom().childNodes.length-1)},gn=function(e){return e.dom().childNodes.length},mn=function(e){return e.dom().hasChildNodes()},vn=ve("element","offset"),bn=function(e,t){var n=dn(e);return n.length>0&&t<n.length?vn(n[t],0):vn(e,t)},yn={owner:Qt,defaultView:en,documentElement:Zt,parent:tn,findIndex:nn,parents:rn,siblings:on,prevSibling:sn,offsetParent:an,prevSiblings:cn,nextSibling:ln,nextSiblings:un,children:dn,child:fn,firstChild:hn,lastChild:pn,childNodesCount:gn,hasChildNodes:mn,leaf:bn},wn=function(e,t){return _n(e,t,S(!0))},_n=function(e,t,n){return le(yn.children(e),function(e){return Qe.is(e,t)?n(e)?[e]:[]:_n(e,t,n)})},xn={firstLayer:wn,filterFirstLayer:_n},Cn=function(e){return e.dom().nodeName.toLowerCase()},kn=function(e){return e.dom().nodeType},Tn=function(e){return e.dom().nodeValue},Sn=function(e){return function(t){return kn(t)===e}},Dn=function(e){return kn(e)===qe.COMMENT||"#comment"===Cn(e)},En=Sn(qe.ELEMENT),Nn=Sn(qe.TEXT),An=Sn(qe.DOCUMENT),Rn={name:Cn,type:kn,value:Tn,isElement:En,isText:Nn,isDocument:An,isComment:Dn},Pn=function(e,t,n){if(!(z(n)||q(n)||Y(n)))throw new Error("Attribute value was not simple");e.setAttribute(t,n+"")},On=function(e,t,n){Pn(e.dom(),t,n)},In=function(e,t){var n=e.dom();pe(t,function(e,t){Pn(n,t,e)})},Mn=function(e,t){var n=e.dom().getAttribute(t);return null===n?void 0:n},jn=function(e,t){var n=e.dom();return!(!n||!n.hasAttribute)&&n.hasAttribute(t)},Bn=function(e,t){e.dom().removeAttribute(t)},Ln=function(e){var t=e.dom().attributes;return void 0===t||null===t||0===t.length},Fn=function(e){return ne(e.dom().attributes,function(e,t){return e[t.name]=t.value,e},{})},Hn=function(e,t,n){jn(e,n)&&!jn(t,n)&&On(t,n,Mn(e,n))},$n=function(e,t,n){Rn.isElement(e)&&Rn.isElement(t)&&Q(n,function(n){Hn(e,t,n)})},Un={clone:Fn,set:On,setAll:In,get:Mn,has:jn,remove:Bn,hasNone:Ln,transfer:$n},zn=function(e){var t=Rn.isText(e)?e.dom().parentNode:e.dom();return void 0!==t&&null!==t&&t.ownerDocument.body.contains(t)},Wn=ft(function(){return qn(We.fromDom(document))}),qn=function(e){var t=e.dom().body;if(null===t||void 0===t)throw"Body is not available yet";return We.fromDom(t)},Vn={body:Wn,getBody:qn,inBody:zn},Yn=function(e){return Jn(Vn.body(),e)},Gn=function(e,t,n){return ee(yn.parents(e,n),t)},Kn=function(e,t){return ee(yn.siblings(e),t)},Xn=function(e,t){return ee(yn.children(e),t)},Jn=function(e,t){var n=[];return Q(yn.children(e),function(e){t(e)&&(n=n.concat([e])),n=n.concat(Jn(e,t))}),n},Qn={all:Yn,ancestors:Gn,siblings:Kn,children:Xn,descendants:Jn},Zn=function(e){return Qe.all(e)},er=function(e,t,n){return Qn.ancestors(e,function(e){return Qe.is(e,t)},n)},tr=function(e,t){return Qn.siblings(e,function(e){return Qe.is(e,t)})},nr=function(e,t){return Qn.children(e,function(e){return Qe.is(e,t)})},rr=function(e,t){return Qe.all(t,e)},ir={all:Zn,ancestors:er,siblings:tr,children:nr,descendants:rr},or=function(e){return ur(Vn.body(),e)},ar=function(e,t,n){for(var r=e.dom(),i=V(n)?n:S(!1);r.parentNode;){r=r.parentNode;var o=We.fromDom(r);if(t(o))return H.some(o);if(i(o))break}return H.none()},sr=function(e,n,r){return t(function(e){return n(e)},ar,e,n,r)},lr=function(e,t){var n=e.dom();return n.parentNode?cr(We.fromDom(n.parentNode),function(n){return!Jt.eq(e,n)&&t(n)}):H.none()},cr=function(e,t){return re(e.dom().childNodes,T(t,We.fromDom)).map(We.fromDom)},ur=function(e,t){var n=function(e){for(var r=0;r<e.childNodes.length;r++){if(t(We.fromDom(e.childNodes[r])))return H.some(We.fromDom(e.childNodes[r]));var i=n(e.childNodes[r]);if(i.isSome())return i}return H.none()};return n(e.dom())},dr={first:or,ancestor:ar,closest:sr,sibling:lr,child:cr,descendant:ur},fr=function(e){return Qe.one(e)},hr=function(e,t,n){return dr.ancestor(e,function(e){return Qe.is(e,t)},n)},pr=function(e,t){return dr.sibling(e,function(e){return Qe.is(e,t)})},gr=function(e,t){return dr.child(e,function(e){return Qe.is(e,t)})},mr=function(e,t){return Qe.one(t,e)},vr=function(e,n,r){return t(Qe.is,hr,e,n,r)},br={first:fr,ancestor:hr,sibling:pr,child:gr,descendant:mr,closest:vr},yr=function(e,t,n){var r=void 0!==n?n:S(!1);if(r(t))return H.none();if(K(e,Rn.name(t)))return H.some(t);var i=function(e){return Qe.is(e,"table")||r(e)};return br.ancestor(t,e.join(","),i)},wr=function(e,t){return yr(["td","th"],e,t)},_r=function(e){return xn.firstLayer(e,"th,td")},xr=function(e,t){return yr(["caption","tr","tbody","tfoot","thead"],e,t)},Cr=function(e,t){return yn.parent(t).map(function(t){return ir.children(t,e)})},kr=E(Cr,"th,td"),Tr=E(Cr,"tr"),Sr=function(e){return br.descendant(e,"th,td")},Dr=function(e,t){return br.closest(e,"table",t)},Er=function(e,t){return yr(["tr"],e,t)},Nr=function(e){return xn.firstLayer(e,"tr")},Ar=function(e,t){return parseInt(Un.get(e,t),10)},Rr=function(e,t,n){var r=Ar(e,t),i=Ar(e,n);return Le.grid(r,i)},Pr={cell:wr,firstCell:Sr,cells:_r,neighbourCells:kr,table:Dr,row:Er,rows:Nr,notCell:xr,neighbourRows:Tr,attr:Ar,grid:Rr},Or=function(e){var t=Pr.rows(e);return J(t,function(e){var t=e,n=yn.parent(t),r=n.map(function(e){var t=Rn.name(e);return"tfoot"===t||"thead"===t||"tbody"===t?t:"tbody"}).getOr("tbody"),i=J(Pr.cells(e),function(e){var t=Un.has(e,"rowspan")?parseInt(Un.get(e,"rowspan"),10):1,n=Un.has(e,"colspan")?parseInt(Un.get(e,"colspan"),10):1;return Le.detail(e,t,n)});return Le.rowdata(t,i,r)})},Ir=function(e,t){return J(e,function(e){var n=J(Pr.cells(e),function(e){var t=Un.has(e,"rowspan")?parseInt(Un.get(e,"rowspan"),10):1,n=Un.has(e,"colspan")?parseInt(Un.get(e,"colspan"),10):1;return Le.detail(e,t,n)});return Le.rowdata(e,n,t.section())})},Mr={fromTable:Or,fromPastedRows:Ir},jr=function(e,t){return e+","+t},Br=function(e,t,n){var r=e.access()[jr(t,n)];return void 0!==r?H.some(r):H.none()},Lr=function(e,t,n){var r=Fr(e,function(e){return n(t,e.element())});return r.length>0?H.some(r[0]):H.none()},Fr=function(e,t){var n=le(e.all(),function(e){return e.cells()});return ee(n,t)},Hr=function(e){var t={},n=[],r=e.length,i=0;Q(e,function(e,r){var o=[];Q(e.cells(),function(e,n){for(var a=0;void 0!==t[jr(r,a)];)a++;for(var s=Le.extended(e.element(),e.rowspan(),e.colspan(),r,a),l=0;l<e.colspan();l++)for(var c=0;c<e.rowspan();c++){var u=r+c,d=a+l,f=jr(u,d);t[f]=s,i=Math.max(i,d+1)}o.push(s)}),n.push(Le.rowdata(e.element(),o,e.section()))});var o=Le.grid(r,i);return{grid:S(o),access:S(t),all:S(n)}},$r=function(e){var t=J(e.all(),function(e){return e.cells()});return se(t)},Ur={generate:Hr,getAt:Br,findItem:Lr,filterItems:Fr,justCells:$r},zr=function(e){return void 0!==e.style},Wr={isSupported:zr},qr=function(e,t,n){if(!z(n))throw new Error("CSS value must be a string: "+n);Wr.isSupported(e)&&e.style.setProperty(t,n)},Vr=function(e,t){Wr.isSupported(e)&&e.style.removeProperty(t)},Yr=function(e,t,n){var r=e.dom();qr(r,t,n)},Gr=function(e,t){var n=e.dom();pe(t,function(e,t){qr(n,t,e)})},Kr=function(e,t){var n=e.dom();pe(t,function(e,t){e.fold(function(){Vr(n,t)},function(e){qr(n,t,e)})})},Xr=function(e,t){var n=e.dom(),r=window.getComputedStyle(n),i=r.getPropertyValue(t),o=""!==i||Vn.inBody(e)?i:Jr(n,t);return null===o?void 0:o},Jr=function(e,t){return Wr.isSupported(e)?e.style.getPropertyValue(t):""},Qr=function(e,t){var n=e.dom(),r=Jr(n,t);return H.from(r).filter(function(e){return e.length>0})},Zr=function(e){var t={},n=e.dom();if(Wr.isSupported(n))for(var r=0;r<n.style.length;r++){var i=n.style.item(r);t[i]=n.style[i]}return t},ei=function(e,t,n){var r=We.fromTag(e);return Yr(r,t,n),Qr(r,t).isSome()},ti=function(e,t){var n=e.dom();Vr(n,t),Un.has(e,"style")&&""===It(Un.get(e,"style"))&&Un.remove(e,"style")},ni=function(e,t){var n=Un.get(e,"style"),r=t(e);return(void 0===n?Un.remove:Un.set)(e,"style",n),r},ri=function(e,t){var n=e.dom(),r=t.dom();Wr.isSupported(n)&&Wr.isSupported(r)&&(r.style.cssText=n.style.cssText)},ii=function(e){return e.dom().offsetWidth},oi=function(e,t,n){Qr(e,n).each(function(e){Qr(t,n).isNone()&&Yr(t,n,e)})},ai=function(e,t,n){Rn.isElement(e)&&Rn.isElement(t)&&Q(n,function(n){oi(e,t,n)})},si={copy:ri,set:Yr,preserve:ni,setAll:Gr,setOptions:Kr,remove:ti,get:Xr,getRaw:Qr,getAllRaw:Zr,isValidValue:ei,reflow:ii,transfer:ai},li=function(e,t){yn.parent(e).each(function(n){n.dom().insertBefore(t.dom(),e.dom())})},ci=function(e,t){yn.nextSibling(e).fold(function(){yn.parent(e).each(function(e){di(e,t)})},function(e){li(e,t)})},ui=function(e,t){yn.firstChild(e).fold(function(){di(e,t)},function(n){e.dom().insertBefore(t.dom(),n.dom())})},di=function(e,t){e.dom().appendChild(t.dom())},fi=function(e,t,n){yn.child(e,n).fold(function(){di(e,t)},function(e){li(e,t)})},hi=function(e,t){li(e,t),di(t,e)},pi={before:li,after:ci,prepend:ui,append:di,appendAt:fi,wrap:hi},gi=function(e,t){Q(t,function(t){pi.before(e,t)})},mi=function(e,t){Q(t,function(n,r){var i=0===r?e:t[r-1];pi.after(i,n)})},vi=function(e,t){Q(t.slice().reverse(),function(t){pi.prepend(e,t)})},bi=function(e,t){Q(t,function(t){pi.append(e,t)})},yi={before:gi,after:mi,prepend:vi,append:bi},wi=function(e){e.dom().textContent="",Q(yn.children(e),function(e){_i(e)})},_i=function(e){var t=e.dom();null!==t.parentNode&&t.parentNode.removeChild(t)},xi=function(e){var t=yn.children(e);t.length>0&&yi.before(e,t),_i(e)},Ci={empty:wi,remove:_i,unwrap:xi},ki=ve("minRow","minCol","maxRow","maxCol"),Ti=function(e,t){var n=e.grid().columns(),r=e.grid().rows(),i=r,o=n,a=0,s=0;return pe(e.access(),function(e){if(t(e)){var n=e.row(),r=n+e.rowspan()-1,l=e.column(),c=l+e.colspan()-1;n<i?i=n:r>a&&(a=r),l<o?o=l:c>s&&(s=c)}}),ki(i,o,a,s)},Si=function(e,t,n){var r=e[n].element(),i=We.fromTag("td");pi.append(i,We.fromTag("br")),(t?pi.append:pi.prepend)(r,i)},Di=function(e,t,n,r){for(var i=t.grid().columns(),o=t.grid().rows(),a=0;a<o;a++)for(var s=!1,l=0;l<i;l++)if(!(a<n.minRow()||a>n.maxRow()||l<n.minCol()||l>n.maxCol())){var c=Ur.getAt(t,a,l).filter(r).isNone();c?Si(e,s,a):s=!0}},Ei=function(e,t){var n=ee(xn.firstLayer(e,"tr"),function(e){return 0===e.dom().childElementCount});Q(n,Ci.remove),t.minCol()!==t.maxCol()&&t.minRow()!==t.maxRow()||Q(xn.firstLayer(e,"th,td"),function(e){Un.remove(e,"rowspan"),Un.remove(e,"colspan")}),Un.remove(e,"width"),Un.remove(e,"height"),si.remove(e,"width"),si.remove(e,"height")},Ni=function(e,t){var n=function(e){return Qe.is(e.element(),t)},r=Mr.fromTable(e),i=Ur.generate(r),o=Ti(i,n),a="th:not("+t+"),td:not("+t+")",s=xn.filterFirstLayer(e,"th,td",function(e){return Qe.is(e,a)});return Q(s,Ci.remove),Di(r,i,o,n),Ei(e,o),e},Ai={extract:Ni},Ri=function(e,t){return We.fromDom(e.dom().cloneNode(t))},Pi=function(e){return Ri(e,!1)},Oi=function(e){return Ri(e,!0)},Ii=function(e,t){var n=We.fromTag(t),r=Un.clone(e);return Un.setAll(n,r),n},Mi=function(e,t){var n=Ii(e,t),r=yn.children(Oi(e));return yi.append(n,r),n},ji=function(e,t){var n=Ii(e,t);pi.before(e,n);var r=yn.children(e);return yi.append(n,r),Ci.remove(e),n},Bi={shallow:Pi,shallowAs:Ii,deep:Oi,copy:Mi,mutate:ji},Li=function(e,t){var n=function(n){if(!e(n))throw new Error("Can only get "+t+" value of a "+t+" node");return a(n).getOr("")},r=function(e){try{return i(e)}catch(e){return H.none()}},i=function(t){return e(t)?H.from(t.dom().nodeValue):H.none()},o=zt.detect().browser,a=o.isIE()&&10===o.version.major?r:i;return{get:n,getOption:a,set:function(n,r){if(!e(n))throw new Error("Can only set raw "+t+" value of a "+t+" node");n.dom().nodeValue=r}}}(Rn.isText,"text"),Fi=function(e){return Li.get(e)},Hi=function(e){return Li.getOption(e)},$i=function(e,t){Li.set(e,t)},Ui={get:Fi,getOption:Hi,set:$i},zi=function(e){return"img"===Rn.name(e)?1:Ui.getOption(e).fold(function(){return yn.children(e).length},function(e){return e.length})},Wi=function(e,t){return zi(e)===t},qi=function(e,t){return 0===t},Vi=function(e){return Ui.getOption(e).filter(function(e){return 0!==e.trim().length||e.indexOf("")>-1}).isSome()},Yi=["img","br"],Gi=function(e){return Vi(e)||K(Yi,Rn.name(e))},Ki={getEnd:zi,isEnd:Wi,isStart:qi,isCursorPosition:Gi},Xi=function(e){return dr.descendant(e,Ki.isCursorPosition)},Ji=function(e){return Qi(e,Ki.isCursorPosition)},Qi=function(e,t){var n=function(e){for(var r=yn.children(e),i=r.length-1;i>=0;i--){var o=r[i];if(t(o))return H.some(o);var a=n(o);if(a.isSome())return a}return H.none()};return n(e)},Zi={first:Xi,last:Ji},eo=function(){var e=We.fromTag("td");return pi.append(e,We.fromTag("br")),e},to=function(e,t,n){var r=Bi.copy(e,t);return pe(n,function(e,t){null===e?Un.remove(r,t):Un.set(r,t,e)}),r},no=function(e){return e},ro=function(e){return function(){return We.fromTag("tr",e.dom())}},io=function(e,t,n){return Zi.first(e).map(function(r){var i=n.join(","),o=ir.ancestors(r,i,function(t){return Jt.eq(t,e)});return te(o,function(e,t){var n=Bi.shallow(t);return Un.remove(n,"contenteditable"),pi.append(e,n),n},t)}).getOr(t)},oo=function(e,t,n){var r=function(t){var r=yn.owner(t.element()),i=We.fromTag(Rn.name(t.element()),r.dom()),o=n.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),a=o.length>0?io(t.element(),i,o):i;return pi.append(a,We.fromTag("br")),si.copy(t.element(),i),si.remove(i,"height"),1!==t.colspan()&&si.remove(t.element(),"width"),e(t.element(),i),i};return{row:ro(t),cell:r,replace:to,gap:eo}},ao=function(e){return{row:ro(e),cell:eo,replace:no,gap:eo}},so={cellOperations:oo,paste:ao},lo=function(e,t){var n=t||document,r=n.createElement("div");return r.innerHTML=e,yn.children(We.fromDom(r))},co=function(e,t){return J(e,function(e){return We.fromTag(e,t)})},uo=function(e,t){return J(e,function(e){return We.fromText(e,t)})},fo=function(e){return J(e,We.fromDom)},ho={fromHtml:lo,fromTags:co,fromText:uo,fromDom:fo},po=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],go=ve("left","right"),mo=function(e,t,n){var r=e.property().children(t);return ie(r,E(e.eq,n)).map(function(e){return{before:S(r.slice(0,e)),after:S(r.slice(e+1))}})},vo=function(e,t,n){return mo(e,t,n).map(function(n){var r=e.create().clone(t);return e.insert().appendAll(r,n.after()),e.insert().after(t,r),go(t,r)})},bo=function(e,t,n){return mo(e,t,n).map(function(r){var i=e.create().clone(t);return e.insert().appendAll(i,r.before().concat([n])),e.insert().appendAll(t,r.after()),e.insert().before(t,i),go(i,t)})},yo=function(e,t,n,r){var i=ve("first","second","splits"),o=function(t,a,s){var l=i(t,H.none(),s);return n(t)?i(t,a,s):e.property().parent(t).bind(function(i){return r(e,i,t).map(function(e){var t=[{first:e.left,second:e.right}],r=n(i)?i:e.left();return o(r,H.some(e.right()),s.concat(t))}).getOr(l)})};return o(t,H.none(),[])},wo={breakToLeft:bo,breakToRight:vo,breakPath:yo},_o=function(e,t,n,r){return r(e,t,n[0],n.slice(1))},xo=function(e,t,n){return n.length>0?_o(e,t,n,Co):H.none()},Co=function(e,t,n,r){var i=t(e,n);return te(r,function(n,r){var i=t(e,r);return ko(e,n,i)},i)},ko=function(e,t,n){return t.bind(function(t){return n.filter(E(e.eq,t))})},To={oneAll:xo},So=function(e,t){return E(e.eq,t)},Do=function(e,t,n,r){var i=e.property().children(t);if(e.eq(t,n[0]))return H.some([n[0]]);if(e.eq(t,r[0]))return H.some([r[0]]);var o=function(n){var r=de(n),o=ie(r,So(e,t)).getOr(-1),a=o<r.length-1?r[o+1]:r[o];return ie(i,So(e,a))},a=o(n),s=o(r);return a.bind(function(e){return s.map(function(t){var n=Math.min(e,t),r=Math.max(e,t);return i.slice(n,r+1)})})},Eo=function(e,t,n,r){var i=void 0!==r?r:S(!1),o=[t].concat(e.up().all(t)),a=[n].concat(e.up().all(n)),s=function(e){return ie(e,i).fold(function(){return e},function(t){return e.slice(0,t+1)})},l=s(o),c=s(a),u=re(l,function(t){return X(c,So(e,t))});return{firstpath:S(l),secondpath:S(c),shared:S(u)}},No=function(e,t,n){var r=Eo(e,t,n);return r.shared().bind(function(t){return Do(e,t,r.firstpath(),r.secondpath())})},Ao={subset:No,ancestors:Eo},Ro=function(e,t,n){return To.oneAll(e,t,n)},Po=function(e,t,n){return Ao.subset(e,t,n)},Oo=function(e,t,n,r){return Ao.ancestors(e,t,n,r)},Io=function(e,t,n){return wo.breakToLeft(e,t,n)},Mo=function(e,t,n){return wo.breakToRight(e,t,n)},jo=function(e,t,n,r){return wo.breakPath(e,t,n,r)},Bo={sharedOne:Ro,subset:Po,ancestors:Oo,breakToLeft:Io,breakToRight:Mo,breakPath:jo},Lo=n(),Fo=function(e,t){return Bo.sharedOne(Lo,function(t,n){return e(n)},t)},Ho=function(e,t){return Bo.subset(Lo,e,t)},$o=function(e,t,n){return Bo.ancestors(Lo,e,t,n)},Uo=function(e,t){return Bo.breakToLeft(Lo,e,t)},zo=function(e,t){return Bo.breakToRight(Lo,e,t)},Wo=function(e,t,n){return Bo.breakPath(Lo,e,t,function(e,t,r){return n(t,r)})},qo={sharedOne:Fo,subset:Ho,ancestors:$o,breakToLeft:Uo,breakToRight:zo,breakPath:Wo},Vo=function(e,t){var n=t.column(),r=t.column()+t.colspan()-1,i=t.row(),o=t.row()+t.rowspan()-1;return n<=e.finishCol()&&r>=e.startCol()&&i<=e.finishRow()&&o>=e.startRow()},Yo=function(e,t){return t.column()>=e.startCol()&&t.column()+t.colspan()-1<=e.finishCol()&&t.row()>=e.startRow()&&t.row()+t.rowspan()-1<=e.finishRow()},Go=function(e,t){for(var n=!0,r=E(Yo,t),i=t.startRow();i<=t.finishRow();i++)for(var o=t.startCol();o<=t.finishCol();o++)n=n&&Ur.getAt(e,i,o).exists(r);return n?H.some(t):H.none()},Ko={inSelection:Vo,isWithin:Yo,isRectangular:Go},Xo=function(e,t){return Le.bounds(Math.min(e.row(),t.row()),Math.min(e.column(),t.column()),Math.max(e.row()+e.rowspan()-1,t.row()+t.rowspan()-1),Math.max(e.column()+e.colspan()-1,t.column()+t.colspan()-1))},Jo=function(e,t,n){var r=Ur.findItem(e,t,Jt.eq),i=Ur.findItem(e,n,Jt.eq);return r.bind(function(e){return i.map(function(t){return Xo(e,t)})})},Qo=function(e,t,n){return Jo(e,t,n).bind(function(t){return Ko.isRectangular(e,t)})},Zo={getAnyBox:Jo,getBox:Qo},ea=function(e,t,n,r){return Ur.findItem(e,t,Jt.eq).bind(function(t){var i=n>0?t.row()+t.rowspan()-1:t.row(),o=r>0?t.column()+t.colspan()-1:t.column();return Ur.getAt(e,i+n,o+r).map(function(e){return e.element()})})},ta=function(e,t,n){return Zo.getAnyBox(e,t,n).map(function(t){var n=Ur.filterItems(e,E(Ko.inSelection,t));return J(n,function(e){return e.element()})})},na=function(e,t){var n=function(e,t){return Jt.contains(t,e)};return Ur.findItem(e,t,n).bind(function(e){return e.element()})},ra={moveBy:ea,intercepts:ta,parentCell:na},ia=function(e,t,n){return Pr.table(e).bind(function(r){var i=la(r);return ra.moveBy(i,e,t,n)})},oa=function(e,t,n){var r=la(e);return ra.intercepts(r,t,n)},aa=function(e,t,n,r,i){var o=la(e),a=Jt.eq(e,n)?t:ra.parentCell(o,t),s=Jt.eq(e,i)?r:ra.parentCell(o,r);return ra.intercepts(o,a,s)},sa=function(e,t,n){var r=la(e);return Zo.getBox(r,t,n)},la=function(e){var t=Mr.fromTable(e);return Ur.generate(t)},ca={moveBy:ia,intercepts:oa,nestedIntercepts:aa,getBox:sa},ua=function(e,t){return br.ancestor(e,"table")},da=ke(["boxes","start","finish"],[]),fa=function(e,t,n){var r=function(e){return function(t){return n(t)||Jt.eq(t,e)}};return Jt.eq(e,t)?H.some(da({boxes:H.some([e]),start:e,finish:t})):ua(e).bind(function(i){return ua(t).bind(function(o){if(Jt.eq(i,o))return H.some(da({boxes:ca.intercepts(i,e,t),start:e,finish:t}));if(Jt.contains(i,o)){var a=ir.ancestors(t,"td,th",r(i)),s=a.length>0?a[a.length-1]:t;return H.some(da({boxes:ca.nestedIntercepts(i,e,i,t,o),start:e,finish:s}))}if(Jt.contains(o,i)){var a=ir.ancestors(e,"td,th",r(o)),l=a.length>0?a[a.length-1]:e;return H.some(da({boxes:ca.nestedIntercepts(o,e,i,t,o),start:e,finish:l}))}return qo.ancestors(e,t).shared().bind(function(a){return br.closest(a,"table",n).bind(function(n){var a=ir.ancestors(t,"td,th",r(n)),s=a.length>0?a[a.length-1]:t,l=ir.ancestors(e,"td,th",r(n)),c=l.length>0?l[l.length-1]:e;return H.some(da({boxes:ca.nestedIntercepts(n,e,i,t,o),start:c,finish:s}))})})})})},ha=function(e,t){var n=ir.descendants(e,t);return n.length>0?H.some(n):H.none()},pa=function(e,t){return re(e,function(e){return Qe.is(e,t)})},ga=function(e,t,n){return br.descendant(e,t).bind(function(t){return br.descendant(e,n).bind(function(e){return qo.sharedOne(ua,[t,e]).map(function(n){return{first:S(t),last:S(e),table:S(n)}})})})},ma=function(e,t){return br.ancestor(e,"table").bind(function(n){return br.descendant(n,t).bind(function(t){return fa(t,e).bind(function(e){return e.boxes().map(function(t){return{boxes:S(t),start:S(e.start()),finish:S(e.finish())}})})})})},va=function(e,t,n,r,i){return pa(e,i).bind(function(e){return ca.moveBy(e,t,n).bind(function(e){return ma(e,r)})})},ba={identify:fa,retrieve:ha,shiftSelection:va,getEdges:ga},ya=function(e,t){return ba.retrieve(e,t)},wa=function(e,t,n){return ba.getEdges(e,t,n).bind(function(t){var n=function(t){return Jt.eq(e,t)},r=br.ancestor(t.first(),"thead,tfoot,tbody,table",n),i=br.ancestor(t.last(),"thead,tfoot,tbody,table",n);return r.bind(function(e){return i.bind(function(n){return Jt.eq(e,n)?ca.getBox(t.table(),t.first(),t.last()):H.none()})})})},_a={retrieve:ya,retrieveBox:wa},xa="data-mce-selected",Ca={selected:S(xa),selectedSelector:S("td[data-mce-selected],th[data-mce-selected]"),attributeSelector:S("[data-mce-selected]"),firstSelected:S("data-mce-first-selected"),firstSelectedSelector:S("td[data-mce-first-selected],th[data-mce-first-selected]"),lastSelected:S("data-mce-last-selected"),lastSelectedSelector:S("td[data-mce-last-selected],th[data-mce-last-selected]")},ka=function(e){if(!W(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");var t=[],n={};return Q(e,function(r,i){var o=he(r);if(1!==o.length)throw new Error("one and only one name per case");var a=o[0],s=r[a];if(void 0!==n[a])throw new Error("duplicate key detected:"+a);if("cata"===a)throw new Error("cannot have a case named cata (sorry)");if(!W(s))throw new Error("case arguments must be an array");t.push(a),n[a]=function(){var n=arguments.length;if(n!==s.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+s.length+" ("+s+"), got "+n);for(var r=new Array(n),o=0;o<r.length;o++)r[o]=arguments[o];var l=function(e){var n=he(e);if(t.length!==n.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+n.join(","));if(!ce(t,function(e){return K(n,e)}))throw new Error("Not all branches were specified when using match. Specified: "+n.join(", ")+"\nRequired: "+t.join(", "));return e[a].apply(null,r)};return{fold:function(){if(arguments.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+arguments.length);return arguments[i].apply(null,r)},match:l,log:function(e){}}}}),n},Ta={generate:ka},Sa=Ta.generate([{none:[]},{multiple:["elements"]},{single:["selection"]}]),Da=function(e,t,n,r){return e.fold(t,n,r)},Ea={cata:Da,none:Sa.none,multiple:Sa.multiple,single:Sa.single},Na=function(e,t){return Ea.cata(t.get(),S([]),D,S([e]))},Aa=function(e,t){var n=function(e){return Un.has(e,"rowspan")&&parseInt(Un.get(e,"rowspan"),10)>1||Un.has(e,"colspan")&&parseInt(Un.get(e,"colspan"),10)>1},r=Na(e,t);return r.length>0&&ce(r,n)?H.some(r):H.none()},Ra=function(e,t){return Ea.cata(t.get(),H.none,function(t,n){return 0===t.length?H.none():_a.retrieveBox(e,Ca.firstSelectedSelector(),Ca.lastSelectedSelector()).bind(function(e){return t.length>1?H.some({bounds:S(e),cells:S(t)}):H.none()})},H.none)},Pa={mergable:Ra,unmergable:Aa,selection:Na},Oa=function(e){return{element:S(e),mergable:H.none,unmergable:H.none,selection:S([e])}},Ia=function(e,t,n){return{element:S(n),mergable:S(Pa.mergable(t,e)),unmergable:S(Pa.unmergable(n,e)),selection:S(Pa.selection(n,e))}},Ma=function(e){return Oa(e)},ja=ve("element","clipboard","generators"),Ba=function(e,t,n,r,i){return{element:S(n),mergable:H.none,unmergable:H.none,selection:S(Pa.selection(n,e)),clipboard:S(r),generators:S(i)}},La={noMenu:Oa,forMenu:Ia,notCell:Ma,paste:ja,pasteRows:Ba},Fa=function(e){return Pr.table(e[0]).map(Bi.deep).map(function(e){return[Ai.extract(e,Ca.attributeSelector())]})},Ha=function(e,t){return e.selection.serializer.serialize(t.dom(),{})},$a=function(e,t,n,r){e.on("BeforeGetContent",function(n){var r=function(t){n.preventDefault(),Fa(t).each(function(t){n.content=J(t,function(t){return Ha(e,t)}).join("")})};!0===n.selection&&Ea.cata(t.get(),k,r,k)}),e.on("BeforeSetContent",function(t){if(!0===t.selection&&!0===t.paste){H.from(e.dom.getParent(e.selection.getStart(),"th,td")).each(function(i){var o=We.fromDom(i);Pr.table(o).bind(function(i){var a=ee(ho.fromHtml(t.content),function(e){return"meta"!==Rn.name(e)});if(1===a.length&&"table"===Rn.name(a[0])){t.preventDefault();var s=We.fromDom(e.getDoc()),l=so.paste(s),c=La.paste(o,a[0],l);n.pasteCells(i,c).each(function(t){e.selection.setRng(t),e.focus(),r.clear(i)})}})})}})},Ua={registerEvents:$a},za=r("height",function(e){var t=e.dom();return Vn.inBody(e)?t.getBoundingClientRect().height:t.offsetHeight}),Wa=function(e,t){za.set(e,t)},qa=function(e){return za.get(e)},Va=function(e){return za.getOuter(e)},Ya=function(e,t){var n=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],r=za.max(e,t,n);si.set(e,"max-height",r+"px")},Ga={set:Wa,get:qa,getOuter:Va,setMax:Ya},Ka=r("width",function(e){return e.dom().offsetWidth}),Xa=function(e,t){Ka.set(e,t)},Ja=function(e){return Ka.get(e)},Qa=function(e){return Ka.getOuter(e)},Za=function(e,t){var n=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],r=Ka.max(e,t,n);si.set(e,"max-width",r+"px")},es={set:Xa,get:Ja,getOuter:Qa,setMax:Za},ts=zt.detect(),ns=function(){return ts.browser.isIE()||ts.browser.isEdge()},rs=function(e,t){var n=parseFloat(e);return isNaN(n)?t:n},is=function(e,t,n){return rs(si.get(e,t),n)},os=function(e){var t=is(e,"padding-top",0),n=is(e,"padding-bottom",0),r=is(e,"border-top-width",0),i=is(e,"border-bottom-width",0),o=e.dom().getBoundingClientRect().height,a=si.get(e,"box-sizing"),s=r+i;return"border-box"===a?o:o-t-n-s},as=function(e){return is(e,"width",es.get(e))},ss=function(e){return ns()?os(e):is(e,"height",Ga.get(e))},ls={getWidth:as,getHeight:ss},cs=/(\d+(\.\d+)?)(\w|%)*/,us=/(\d+(\.\d+)?)%/,ds=/(\d+(\.\d+)?)px|em/,fs=function(e,t){si.set(e,"width",t+"px")},hs=function(e,t){si.set(e,"width",t+"%")},ps=function(e,t){si.set(e,"height",t+"px")},gs=function(e){return si.getRaw(e,"height").getOrThunk(function(){return ls.getHeight(e)+"px"})},ms=function(e,t,n,r){var i=Pr.table(e).map(function(e){var r=n(e);return Math.floor(t/100*r)}).getOr(t);return r(e,i),i},vs=function(e,t,n,r){var i=parseInt(e,10);return Ot(e,"%")&&"table"!==Rn.name(t)?ms(t,i,n,r):i},bs=function(e){var t=gs(e);return t?vs(t,e,Ga.get,ps):Ga.get(e)},ys=function(e,t,n){return n(e)/ws(e,t)},ws=function(e,t){return Un.has(e,t)?parseInt(Un.get(e,t),10):1},_s=function(e){return si.getRaw(e,"width").fold(function(){return H.from(Un.get(e,"width"))},function(e){return H.some(e)})},xs=function(e,t){return e/t.pixelWidth()*100},Cs=function(e,t,n){if(us.test(t)){var r=us.exec(t);return parseFloat(r[1])}var i=es.get(e);return xs(i,n)},ks=function(e,t){return _s(e).fold(function(){var n=es.get(e);return xs(n,t)},function(n){return Cs(e,n,t)})},Ts=function(e,t){return e/100*t.pixelWidth()},Ss=function(e,t,n){if(ds.test(t)){var r=ds.exec(t);return parseInt(r[1],10)}if(us.test(t)){var i=us.exec(t),o=parseFloat(i[1]);return Ts(o,n)}return es.get(e)},Ds=function(e,t){return _s(e).fold(function(){return es.get(e)},function(n){return Ss(e,n,t)})},Es=function(e){return ys(e,"rowspan",bs)},Ns=function(e){return _s(e).bind(function(e){if(cs.test(e)){var t=cs.exec(e);return H.some({width:S(t[1]),unit:S(t[3])})}return H.none()})},As=function(e,t,n){si.set(e,"width",t+n)},Rs={percentageBasedSizeRegex:S(us),pixelBasedSizeRegex:S(ds),setPixelWidth:fs,setPercentageWidth:hs,setHeight:ps,getPixelWidth:Ds,getPercentageWidth:ks,getGenericWidth:Ns,setGenericWidth:As,getHeight:Es,getRawWidth:_s},Ps=function(e,t){Rs.getGenericWidth(e).each(function(n){var r=n.width()/2;Rs.setGenericWidth(e,r,n.unit()),Rs.setGenericWidth(t,r,n.unit())})},Os={halve:Ps},Is=function(e,t){var n=t||We.fromDom(document.documentElement);return dr.ancestor(e,E(Jt.eq,n)).isSome()},Ms=function(e){var t=e.dom();return t===t.window&&e instanceof Window?e:Rn.isDocument(e)?t.defaultView||t.parentWindow:null},js={attached:Is,windowOf:Ms},Bs=function(e,t){var n=function(n,r){return Bs(e+n,t+r)};return{left:S(e),top:S(t),translate:n}},Ls=Bs,Fs=function(e){var t=e.getBoundingClientRect();return Ls(t.left,t.top)},Hs=function(e,t){return void 0!==e?e:void 0!==t?t:0},$s=function(e){var t=e.dom().ownerDocument,n=t.body,r=js.windowOf(We.fromDom(t)),i=t.documentElement,o=Hs(r.pageYOffset,i.scrollTop),a=Hs(r.pageXOffset,i.scrollLeft),s=Hs(i.clientTop,n.clientTop),l=Hs(i.clientLeft,n.clientLeft);return zs(e).translate(a-l,o-s)},Us=function(e){var t=e.dom();return Ls(t.offsetLeft,t.offsetTop)},zs=function(e){var t=e.dom(),n=t.ownerDocument,r=n.body,i=We.fromDom(n.documentElement);return r===t?Ls(r.offsetLeft,r.offsetTop):js.attached(e,i)?Fs(t):Ls(0,0)},Ws={absolute:$s,relative:Us,viewport:zs},qs=ve("row","y"),Vs=ve("col","x"),Ys=function(e){return Ws.absolute(e).left()+es.getOuter(e)},Gs=function(e){return Ws.absolute(e).left()},Ks=function(e,t){return Vs(e,Gs(t))},Xs=function(e,t){return Vs(e,Ys(t))},Js=function(e){return Ws.absolute(e).top()},Qs=function(e,t){return qs(e,Js(t))},Zs=function(e,t){return qs(e,Js(t)+Ga.getOuter(t))},el=function(e,t,n){if(0===n.length)return[];var r=J(n.slice(1),function(t,n){return t.map(function(t){return e(n,t)})}),i=n[n.length-1].map(function(e){return t(n.length-1,e)});return r.concat([i])},tl=function(e,t){return-e},nl={delta:D,positions:E(el,Qs,Zs),edge:Js},rl={delta:D,edge:Gs,positions:E(el,Ks,Xs)},il={delta:tl,edge:Ys,positions:E(el,Xs,Ks)},ol={height:nl,rtl:il,ltr:rl},al={ltr:ol.ltr,rtl:ol.rtl},sl=function(e){var t=Mr.fromTable(e);return Ur.generate(t).grid()},ll={getGridSize:sl},cl=function(e){var t=e,n=function(){return t};return{get:n,set:function(e){t=e},clone:function(){return cl(n())}}},ul=function(e,t){return dl(e,t,{validate:V,label:"function"})},dl=function(e,t,n){if(0===t.length)throw new Error("You must specify at least one required field.");return _e("required",t),Ce(t),function(r){var i=he(r);ce(t,function(e){return K(i,e)})||ye(t,i),e(t,i);var o=ee(t,function(e){return!n.validate(r[e],e)});return o.length>0&&xe(o,n.label),r}},fl=function(e,t){var n=ee(t,function(t){return!K(e,t)});n.length>0&&we(n)},hl=function(e){return ul(fl,e)},pl=function(e){var t=Un.has(e,"colspan")?parseInt(Un.get(e,"colspan"),10):1,n=Un.has(e,"rowspan")?parseInt(Un.get(e,"rowspan"),10):1;return{element:S(e),colspan:S(t),rowspan:S(n)}},gl=function(e,t){bl(e);var n=cl(H.none()),r=void 0!==t?t:pl,i=function(t){return e.cell(t)},o=function(e){var t=r(e);return i(t)},a=function(e){var t=o(e);return n.get().isNone()&&n.set(H.some(t)),s=H.some({item:e,replacement:t}),t},s=H.none();return{getOrInit:function(e,t){return s.fold(function(){return a(e)},function(n){return t(e,n.item)?n.replacement:a(e)})},cursor:n.get}},ml=function(e,t){return function(n){var r=cl(H.none());bl(n);var i=[],o=function(e,t){return re(i,function(n){return t(n.item,e)})},a=function(o){var a=n.replace(o,t,{scope:e});return i.push({item:o,sub:a}),r.get().isNone()&&r.set(H.some(a)),a};return{replaceOrInit:function(e,t){return o(e,t).fold(function(){return a(e)},function(n){return t(e,n.item)?n.sub:a(e)})},cursor:r.get}}},vl=function(e){bl(e);var t=cl(H.none());return{combine:function(n){return t.get().isNone()&&t.set(H.some(n)),function(){var t=e.cell({element:S(n),colspan:S(1),rowspan:S(1)});return si.remove(t,"width"),si.remove(n,"width"),t}},cursor:t.get}},bl=hl(["cell","row","replace","gap"]),yl={modification:gl,transform:ml,merging:vl},wl=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],_l=function(e,t){var n=e.property().name(t);return K(["ol","ul"],n)},xl=function(e,t){
var n=e.property().name(t);return K(wl,n)},Cl=function(e,t){var n=e.property().name(t);return K(["address","pre","p","h1","h2","h3","h4","h5","h6"],n)},kl=function(e,t){var n=e.property().name(t);return K(["h1","h2","h3","h4","h5","h6"],n)},Tl=function(e,t){return K(["div","li","td","th","blockquote","body","caption"],e.property().name(t))},Sl=function(e,t){return K(["br","img","hr","input"],e.property().name(t))},Dl=function(e,t){return"iframe"===e.property().name(t)},El=function(e,t){return!(xl(e,t)||Sl(e,t))&&"li"!==e.property().name(t)},Nl={isBlock:xl,isList:_l,isFormatting:Cl,isHeading:kl,isContainer:Tl,isEmptyTag:Sl,isFrame:Dl,isInline:El},Al=n(),Rl=function(e){return Nl.isBlock(Al,e)},Pl=function(e){return Nl.isList(Al,e)},Ol=function(e){return Nl.isFormatting(Al,e)},Il=function(e){return Nl.isHeading(Al,e)},Ml=function(e){return Nl.isContainer(Al,e)},jl=function(e){return Nl.isEmptyTag(Al,e)},Bl=function(e){return Nl.isFrame(Al,e)},Ll=function(e){return Nl.isInline(Al,e)},Fl={isBlock:Rl,isList:Pl,isFormatting:Ol,isHeading:Il,isContainer:Ml,isEmptyTag:jl,isFrame:Bl,isInline:Ll},Hl=function(e){var t=function(e){return"br"===Rn.name(e)},n=function(e){return ce(e,function(e){return t(e)||Rn.isText(e)&&0===Ui.get(e).trim().length})},r=function(e){return"li"===Rn.name(e)||dr.ancestor(e,Fl.isList).isSome()},i=function(e){return yn.nextSibling(e).map(function(e){return!!Fl.isBlock(e)||(Fl.isEmptyTag(e)?"img"!==Rn.name(e):void 0)}).getOr(!1)},o=function(e){return Zi.last(e).bind(function(n){var o=i(n);return yn.parent(n).map(function(i){return!0===o||r(i)||t(n)||Fl.isBlock(i)&&!Jt.eq(e,i)?[]:[We.fromTag("br")]})}).getOr([])},a=function(){var t=le(e,function(e){var t=yn.children(e);return n(t)?[]:t.concat(o(e))});return 0===t.length?[We.fromTag("br")]:t}();Ci.empty(e[0]),yi.append(e[0],a)},$l={merge:Hl},Ul=Object.prototype.hasOwnProperty,zl=function(e,t){return t},Wl=function(e){return function(){for(var t=new Array(arguments.length),n=0;n<t.length;n++)t[n]=arguments[n];if(0===t.length)throw new Error("Can't merge zero objects");for(var r={},i=0;i<t.length;i++){var o=t[i];for(var a in o)Ul.call(o,a)&&(r[a]=e(r[a],o[a]))}return r}}(zl),ql=function(e){for(var t=[],n=function(e){t.push(e)},r=0;r<e.length;r++)e[r].each(n);return t},Vl=function(e,t){for(var n=0;n<e.length;n++){var r=t(e[n],n);if(r.isSome())return r}return H.none()},Yl=function(e,t,n){var r=e.cells(),i=r.slice(0,t),o=r.slice(t),a=i.concat([n]).concat(o);return Kl(e,a)},Gl=function(e,t,n){e.cells()[t]=n},Kl=function(e,t){return Le.rowcells(t,e.section())},Xl=function(e,t){var n=e.cells(),r=J(n,t);return Le.rowcells(r,e.section())},Jl=function(e,t){return e.cells()[t]},Ql=function(e,t){return Jl(e,t).element()},Zl=function(e){return e.cells().length},ec={addCell:Yl,setCells:Kl,mutateCell:Gl,getCell:Jl,getCellElement:Ql,mapCells:Xl,cellLength:Zl},tc=function(e,t){return J(e,function(e){return ec.getCell(e,t)})},nc=function(e,t){return e[t]},rc=function(e,t){if(0===e.length)return 0;var n=e[0];return ie(e,function(e){return!t(n.element(),e.element())}).fold(function(){return e.length},function(e){return e})},ic=function(e,t,n,r){var i=nc(e,t).cells().slice(n),o=rc(i,r),a=tc(e,n).slice(t),s=rc(a,r);return{colspan:S(o),rowspan:S(s)}},oc={subgrid:ic},ac=function(e,t){var n=J(e,function(e,t){return J(e.cells(),function(e,t){return!1})}),r=function(e,t,r,i){for(var o=e;o<e+r;o++)for(var a=t;a<t+i;a++)n[o][a]=!0};return J(e,function(i,o){var a=le(i.cells(),function(i,a){if(!1===n[o][a]){var s=oc.subgrid(e,o,a,t);return r(o,a,s.rowspan(),s.colspan()),[Le.detailnew(i.element(),s.rowspan(),s.colspan(),i.isNew())]}return[]});return Le.rowdetails(a,i.section())})},sc=function(e,t,n){for(var r=[],i=0;i<e.grid().rows();i++){for(var o=[],a=0;a<e.grid().columns();a++){var s=Ur.getAt(e,i,a).map(function(e){return Le.elementnew(e.element(),n)}).getOrThunk(function(){return Le.elementnew(t.gap(),!0)});o.push(s)}var l=Le.rowcells(o,e.all()[i].section());r.push(l)}return r},lc={toDetails:ac,toGrid:sc},cc=function(e,t,n,r){n===r?Un.remove(e,t):Un.set(e,t,n)},uc=function(e,t){var n=[],r=[],i=function(t,i){var o=br.child(e,i).getOrThunk(function(){var t=We.fromTag(i,yn.owner(e).dom());return pi.append(e,t),t});Ci.empty(o);var a=J(t,function(e){e.isNew()&&n.push(e.element());var t=e.element();return Ci.empty(t),Q(e.cells(),function(e){e.isNew()&&r.push(e.element()),cc(e.element(),"colspan",e.colspan(),1),cc(e.element(),"rowspan",e.rowspan(),1),pi.append(t,e.element())}),t});yi.append(o,a)},o=function(t){br.child(e,t).each(Ci.remove)},a=function(e,t){e.length>0?i(e,t):o(t)},s=[],l=[],c=[];return Q(t,function(e){switch(e.section()){case"thead":s.push(e);break;case"tbody":l.push(e);break;case"tfoot":c.push(e)}}),a(s,"thead"),a(l,"tbody"),a(c,"tfoot"),{newRows:S(n),newCells:S(r)}},dc=function(e){return J(e,function(e){var t=Bi.shallow(e.element());return Q(e.cells(),function(e){var n=Bi.deep(e.element());cc(n,"colspan",e.colspan(),1),cc(n,"rowspan",e.rowspan(),1),pi.append(t,n)}),t})},fc={render:uc,copy:dc},hc=function(e,t){for(var n=[],r=0;r<e;r++)n.push(t(r));return n},pc=function(e,t){for(var n=[],r=e;r<t;r++)n.push(r);return n},gc=function(e,t){var n=[];return Q(e,function(r,i){i<e.length-1&&!t(r,e[i+1])?n.push(r):i===e.length-1&&n.push(r)}),n},mc=function(e,t){if(t<0||t>=e.length-1)return H.none();var n=e[t].fold(function(){var n=de(e.slice(0,t));return Vl(n,function(e,t){return e.map(function(e){return{value:e,delta:t+1}})})},function(e){return H.some({value:e,delta:0})}),r=e[t+1].fold(function(){var n=e.slice(t+1);return Vl(n,function(e,t){return e.map(function(e){return{value:e,delta:t+1}})})},function(e){return H.some({value:e,delta:1})});return n.bind(function(e){return r.map(function(t){var n=t.delta+e.delta;return Math.abs(t.value-e.value)/n})})},vc={repeat:hc,range:pc,unique:gc,deduce:mc},bc=function(e){var t=e.grid(),n=vc.range(0,t.columns()),r=vc.range(0,t.rows());return J(n,function(t){return yc(function(){return le(r,function(n){return Ur.getAt(e,n,t).filter(function(e){return e.column()===t}).fold(S([]),function(e){return[e]})})},function(e){return 1===e.colspan()},function(){return Ur.getAt(e,0,t)})})},yc=function(e,t,n){var r=e();return re(r,t).orThunk(function(){return H.from(r[0]).orThunk(n)}).map(function(e){return e.element()})},wc=function(e){var t=e.grid(),n=vc.range(0,t.rows()),r=vc.range(0,t.columns());return J(n,function(t){return yc(function(){return le(r,function(n){return Ur.getAt(e,t,n).filter(function(e){return e.row()===t}).fold(S([]),function(e){return[e]})})},function(e){return 1===e.rowspan()},function(){return Ur.getAt(e,t,0)})})},_c={columns:bc,rows:wc},xc=function(e,t,n,r,i){var o=We.fromTag("div");return si.setAll(o,{position:"absolute",left:t-r/2+"px",top:n+"px",height:i+"px",width:r+"px"}),Un.setAll(o,{"data-column":e,role:"presentation"}),o},Cc=function(e,t,n,r,i){var o=We.fromTag("div");return si.setAll(o,{position:"absolute",left:t+"px",top:n-i/2+"px",height:i+"px",width:r+"px"}),Un.setAll(o,{"data-row":e,role:"presentation"}),o},kc={col:xc,row:Cc},Tc=function(e){var t=e.replace(/\./g,"-");return{resolve:function(e){return t+"-"+e}}},Sc=Tc("ephox-snooker"),Dc={resolve:Sc.resolve},Ec=function(e,t){var n=Un.get(e,t);return void 0===n||""===n?[]:n.split(" ")},Nc=function(e,t,n){var r=Ec(e,t),i=r.concat([n]);return Un.set(e,t,i.join(" ")),!0},Ac=function(e,t,n){var r=ee(Ec(e,t),function(e){return e!==n});return r.length>0?Un.set(e,t,r.join(" ")):Un.remove(e,t),!1},Rc={read:Ec,add:Nc,remove:Ac},Pc=function(e){return void 0!==e.dom().classList},Oc=function(e){return Rc.read(e,"class")},Ic=function(e,t){return Rc.add(e,"class",t)},Mc=function(e,t){return Rc.remove(e,"class",t)},jc=function(e,t){return K(Oc(e),t)?Mc(e,t):Ic(e,t)},Bc={get:Oc,add:Ic,remove:Mc,toggle:jc,supports:Pc},Lc=function(e,t){Bc.supports(e)?e.dom().classList.add(t):Bc.add(e,t)},Fc=function(e){0===(Bc.supports(e)?e.dom().classList:Bc.get(e)).length&&Un.remove(e,"class")},Hc=function(e,t){if(Bc.supports(e)){e.dom().classList.remove(t)}else Bc.remove(e,t);Fc(e)},$c=function(e,t){return Bc.supports(e)?e.dom().classList.toggle(t):Bc.toggle(e,t)},Uc=function(e,t){var n=Bc.supports(e),r=e.dom().classList;return o(function(){n?r.remove(t):Bc.remove(e,t)},function(){n?r.add(t):Bc.add(e,t)},zc(e,t))},zc=function(e,t){return Bc.supports(e)&&e.dom().classList.contains(t)},Wc={add:Lc,remove:Hc,toggle:$c,toggler:Uc,has:zc},qc=Dc.resolve("resizer-bar"),Vc=Dc.resolve("resizer-rows"),Yc=Dc.resolve("resizer-cols"),Gc=function(e){var t=ir.descendants(e.parent(),"."+qc);Q(t,Ci.remove)},Kc=function(e,t,n){var r=e.origin();Q(t,function(t,i){t.each(function(t){var i=n(r,t);Wc.add(i,qc),pi.append(e.parent(),i)})})},Xc=function(e,t,n,r){Kc(e,t,function(e,t){var i=kc.col(t.col(),t.x()-e.left(),n.top()-e.top(),7,r);return Wc.add(i,Yc),i})},Jc=function(e,t,n,r){Kc(e,t,function(e,t){var i=kc.row(t.row(),n.left()-e.left(),t.y()-e.top(),r,7);return Wc.add(i,Vc),i})},Qc=function(e,t,n,r,i,o){var a=Ws.absolute(t),s=n.length>0?i.positions(n,t):[];Jc(e,s,a,es.getOuter(t));var l=r.length>0?o.positions(r,t):[];Xc(e,l,a,Ga.getOuter(t))},Zc=function(e,t,n,r){Gc(e);var i=Mr.fromTable(t),o=Ur.generate(i),a=_c.rows(o),s=_c.columns(o);Qc(e,t,a,s,n,r)},eu=function(e,t){var n=ir.descendants(e.parent(),"."+qc);Q(n,t)},tu=function(e){eu(e,function(e){si.set(e,"display","none")})},nu=function(e){eu(e,function(e){si.set(e,"display","block")})},ru=function(e){return Wc.has(e,Vc)},iu=function(e){return Wc.has(e,Yc)},ou={refresh:Zc,hide:tu,show:nu,destroy:Gc,isRowBar:ru,isColBar:iu},au=function(e,t){return lc.toGrid(e,t,!1)},su=function(e,t){var n=function(e){return Vl(e,function(e){return yn.parent(e.element()).map(function(e){var t=yn.parent(e).isNone();return Le.elementnew(e,t)})}).getOrThunk(function(){return Le.elementnew(t.row(),!0)})};return J(e,function(e){var t=n(e.details());return Le.rowdatanew(t.element(),e.details(),e.section(),t.isNew())})},lu=function(e,t){var n=lc.toDetails(e,Jt.eq);return su(n,t)},cu=function(e,t){var n=se(J(e.all(),function(e){return e.cells()}));return re(n,function(e){return Jt.eq(t,e.element())})},uu=function(e,t,n,r,i){return function(o,a,s,l,c){var u=Mr.fromTable(a),d=Ur.generate(u);return t(d,s).map(function(t){var n=au(d,l),r=e(n,t,Jt.eq,i(l)),o=lu(r.grid(),l);return{grid:S(o),cursor:r.cursor}}).fold(function(){return H.none()},function(e){var t=fc.render(a,e.grid());return n(a,e.grid(),c),r(a),ou.refresh(o,a,ol.height,c),H.some({cursor:e.cursor,newRows:t.newRows,newCells:t.newCells})})}},du=function(e,t){return Pr.cell(t.element()).bind(function(t){return cu(e,t)})},fu=function(e,t){return Pr.cell(t.element()).bind(function(n){return cu(e,n).map(function(e){return Wl(e,{generators:t.generators,clipboard:t.clipboard})})})},hu=function(e,t){var n=J(t.selection(),function(t){return Pr.cell(t).bind(function(t){return cu(e,t)})}),r=ql(n);return r.length>0?H.some(Wl({cells:r},{generators:t.generators,clipboard:t.clipboard})):H.none()},pu=function(e,t){return t.mergable()},gu=function(e,t){return t.unmergable()},mu=function(e,t){var n=J(t.selection(),function(t){return Pr.cell(t).bind(function(t){return cu(e,t)})}),r=ql(n);return r.length>0?H.some(r):H.none()},vu={run:uu,toDetailList:lu,onCell:du,onCells:mu,onPaste:fu,onPasteRows:hu,onMergable:pu,onUnmergable:gu},bu=function(e){var t=function(t){return e===t},n=function(t){return bu(e)},r=function(t){return bu(e)},i=function(t){return bu(t(e))},o=function(t){t(e)},a=function(t){return t(e)},s=function(t,n){return n(e)},l=function(t){return t(e)},c=function(t){return t(e)},u=function(){return H.some(e)};return{is:t,isValue:O,isError:P,getOr:S(e),getOrThunk:S(e),getOrDie:S(e),or:n,orThunk:r,fold:s,map:i,each:o,bind:a,exists:l,forall:c,toOption:u}},yu=function(e){var t=function(e){return e()},n=function(){return A(String(e))()},r=function(e){return e},i=function(e){return e()},o=function(t){return yu(e)},a=function(t){return yu(e)};return{is:P,isValue:P,isError:O,getOr:D,getOrThunk:t,getOrDie:n,or:r,orThunk:i,fold:function(t,n){return t(e)},map:o,each:k,bind:a,exists:P,forall:O,toOption:H.none}},wu={value:bu,error:yu},_u=function(e,t,n){if(e.row()>=t.length||e.column()>ec.cellLength(t[0]))return wu.error("invalid start address out of table bounds, row: "+e.row()+", column: "+e.column());var r=t.slice(e.row()),i=r[0].cells().slice(e.column()),o=ec.cellLength(n[0]),a=n.length;return wu.value({rowDelta:S(r.length-a),colDelta:S(i.length-o)})},xu=function(e,t){var n=ec.cellLength(e[0]),r=ec.cellLength(t[0]);return{rowDelta:S(0),colDelta:S(n-r)}},Cu=function(e,t){return J(e,function(){return Le.elementnew(t.cell(),!0)})},ku=function(e,t,n){return e.concat(vc.repeat(t,function(t){return ec.setCells(e[e.length-1],Cu(e[e.length-1].cells(),n))}))},Tu=function(e,t,n){return J(e,function(e){return ec.setCells(e,e.cells().concat(Cu(vc.range(0,t),n)))})},Su=function(e,t,n){var r=t.colDelta()<0?Tu:D;return(t.rowDelta()<0?ku:D)(r(e,Math.abs(t.colDelta()),n),Math.abs(t.rowDelta()),n)},Du={measure:_u,measureWidth:xu,tailor:Su},Eu=function(e,t,n,r){if(0===e.length)return e;for(var i=t.startRow();i<=t.finishRow();i++)for(var o=t.startCol();o<=t.finishCol();o++)ec.mutateCell(e[i],o,Le.elementnew(r(),!1));return e},Nu=function(e,t,n,r){for(var i=!0,o=0;o<e.length;o++)for(var a=0;a<ec.cellLength(e[0]);a++){var s=ec.getCellElement(e[o],a),l=n(s,t);!0===l&&!1===i?ec.mutateCell(e[o],a,Le.elementnew(r(),!0)):!0===l&&(i=!1)}return e},Au=function(e,t){return ne(e,function(e,n){return X(e,function(e){return t(e.element(),n.element())})?e:e.concat([n])},[])},Ru=function(e,t,n,r){if(t>0&&t<e.length){var i=e[t-1].cells(),o=Au(i,n);Q(o,function(i){for(var o=H.none(),a=t;a<e.length;a++)for(var s=0;s<ec.cellLength(e[0]);s++){var l=e[a].cells()[s],c=n(l.element(),i.element());c&&(o.isNone()&&(o=H.some(r())),o.each(function(t){ec.mutateCell(e[a],s,Le.elementnew(t,!0))}))}})}return e},Pu={merge:Eu,unmerge:Nu,splitRows:Ru},Ou=function(e,t,n,r){var i=ec.getCell(e[t],n),o=E(r,i.element()),a=e[t];return e.length>1&&ec.cellLength(a)>1&&(n>0&&o(ec.getCellElement(a,n-1))||n<a.length-1&&o(ec.getCellElement(a,n+1))||t>0&&o(ec.getCellElement(e[t-1],n))||t<e.length-1&&o(ec.getCellElement(e[t+1],n)))},Iu=function(e,t,n,r,i){for(var o=e.row(),a=e.column(),s=n.length,l=ec.cellLength(n[0]),c=o+s,u=a+l,d=o;d<c;d++)for(var f=a;f<u;f++){Ou(t,d,f,i)&&Pu.unmerge(t,ec.getCellElement(t[d],f),i,r.cell);var h=ec.getCellElement(n[d-o],f-a),p=r.replace(h);ec.mutateCell(t[d],f,Le.elementnew(p,!0))}return t},Mu=function(e,t,n,r,i){return Du.measure(e,t,n).map(function(o){var a=Du.tailor(t,o,r);return Iu(e,a,n,r,i)})},ju=function(e,t,n,r,i){Pu.splitRows(t,e,i,r.cell);var o=Du.measureWidth(n,t),a=Du.tailor(n,o,r),s=Du.measureWidth(t,a),l=Du.tailor(t,s,r);return l.slice(0,e).concat(a).concat(l.slice(e,l.length))},Bu={merge:Mu,insert:ju},Lu=function(e,t,n,r,i){var o=e.slice(0,t),a=e.slice(t),s=ec.mapCells(e[n],function(n,o){return t>0&&t<e.length&&r(ec.getCellElement(e[t-1],o),ec.getCellElement(e[t],o))?ec.getCell(e[t],o):Le.elementnew(i(n.element(),r),!0)});return o.concat([s]).concat(a)},Fu=function(e,t,n,r,i){return J(e,function(e){var o=t>0&&t<ec.cellLength(e)&&r(ec.getCellElement(e,t-1),ec.getCellElement(e,t)),a=o?ec.getCell(e,t):Le.elementnew(i(ec.getCellElement(e,n),r),!0);return ec.addCell(e,t,a)})},Hu=function(e,t,n,r,i){var o=n+1;return J(e,function(e,a){var s=a===t,l=s?Le.elementnew(i(ec.getCellElement(e,n),r),!0):ec.getCell(e,n);return ec.addCell(e,o,l)})},$u=function(e,t,n,r,i){var o=t+1,a=e.slice(0,o),s=e.slice(o),l=ec.mapCells(e[t],function(e,t){return t===n?Le.elementnew(i(e.element(),r),!0):e});return a.concat([l]).concat(s)},Uu=function(e,t,n){var r=J(e,function(e){var r=e.cells().slice(0,t).concat(e.cells().slice(n+1));return Le.rowcells(r,e.section())});return ee(r,function(e){return e.cells().length>0})},zu=function(e,t,n){return e.slice(0,t).concat(e.slice(n+1))},Wu={insertRowAt:Lu,insertColumnAt:Fu,splitCellIntoColumns:Hu,splitCellIntoRows:$u,deleteRowsAt:zu,deleteColumnsAt:Uu},qu=function(e,t,n,r){var i=function(e){return X(t,function(t){return n(e.element(),t.element())})};return J(e,function(e){return ec.mapCells(e,function(e){return i(e)?Le.elementnew(r(e.element(),n),!0):e})})},Vu=function(e,t,n,r){return void 0!==ec.getCellElement(e[t],n)&&t>0&&r(ec.getCellElement(e[t-1],n),ec.getCellElement(e[t],n))},Yu=function(e,t,n){return t>0&&n(ec.getCellElement(e,t-1),ec.getCellElement(e,t))},Gu=function(e,t,n,r){var i=le(e,function(r,i){return Vu(e,i,t,n)||Yu(r,t,n)?[]:[ec.getCell(r,t)]});return qu(e,i,n,r)},Ku=function(e,t,n,r){var i=e[t],o=le(i.cells(),function(r,o){return Vu(e,t,o,n)||Yu(i,o,n)?[]:[r]});return qu(e,o,n,r)},Xu={replaceColumn:Gu,replaceRow:Ku},Ju=function(){return nd(function(e,t,n,r,i){return e()})},Qu=function(e){return nd(function(t,n,r,i,o){return n(e)})},Zu=function(e,t){return nd(function(n,r,i,o,a){return i(e,t)})},ed=function(e,t,n){return nd(function(r,i,o,a,s){return a(e,t,n)})},td=function(e,t){return nd(function(n,r,i,o,a){return a(e,t)})},nd=function(e){return{fold:e}},rd={none:Ju,only:Qu,left:Zu,middle:ed,right:td},id=function(e,t){return 0===e.length?rd.none():1===e.length?rd.only(0):0===t?rd.left(0,1):t===e.length-1?rd.right(t-1,t):t>0&&t<e.length-1?rd.middle(t-1,t,t+1):rd.none()},od=function(e,t,n,r){var i=e.slice(0),o=id(e,t),a=function(e){return J(e,S(0))},s=S(a(i)),l=function(e){return r.singleColumnWidth(i[e],n)},c=function(e,t){if(n>=0){var o=Math.max(r.minCellWidth(),i[t]-n);return a(i.slice(0,e)).concat([n,o-i[t]]).concat(a(i.slice(t+1)))}var s=Math.max(r.minCellWidth(),i[e]+n),l=i[e]-s;return a(i.slice(0,e)).concat([s-i[e],l]).concat(a(i.slice(t+1)))},u=c,d=function(e,t,n){return c(t,n)},f=function(e,t){if(n>=0)return a(i.slice(0,t)).concat([n]);var o=Math.max(r.minCellWidth(),i[t]+n);return a(i.slice(0,t)).concat([o-i[t]])};return o.fold(s,l,u,d,f)},ad={determine:od},sd=function(e,t){return Un.has(e,t)&&parseInt(Un.get(e,t),10)>1},ld=function(e){return sd(e,"colspan")},cd=function(e){return sd(e,"rowspan")},ud=function(e,t){return parseInt(si.get(e,t),10)},dd={hasColspan:ld,hasRowspan:cd,minWidth:S(10),minHeight:S(10),getInt:ud},fd=function(e,t,n){return si.getRaw(e,t).fold(function(){return n(e)+"px"},function(e){return e})},hd=function(e){return fd(e,"width",Rs.getPixelWidth)},pd=function(e){return fd(e,"height",Rs.getHeight)},gd=function(e,t,n,r,i){var o=_c.columns(e),a=J(o,function(e){return e.map(t.edge)});return J(o,function(e,t){return e.filter(N(dd.hasColspan)).fold(function(){var e=vc.deduce(a,t);return r(e)},function(e){return n(e,i)})})},md=function(e){return e.map(function(e){return e+"px"}).getOr("")},vd=function(e,t){return gd(e,t,hd,md)},bd=function(e,t,n){return gd(e,t,Rs.getPercentageWidth,function(e){return e.fold(function(){return n.minCellWidth()},function(e){return e/n.pixelWidth()*100})},n)},yd=function(e,t,n){return gd(e,t,Rs.getPixelWidth,function(e){return e.getOrThunk(n.minCellWidth)},n)},wd=function(e,t,n,r){var i=_c.rows(e),o=J(i,function(e){return e.map(t.edge)});return J(i,function(e,t){return e.filter(N(dd.hasRowspan)).fold(function(){var e=vc.deduce(o,t);return r(e)},function(e){return n(e)})})},_d=function(e,t){return wd(e,t,Rs.getHeight,function(e){return e.getOrThunk(dd.minHeight)})},xd=function(e,t){return wd(e,t,pd,md)},Cd={getRawWidths:vd,getPixelWidths:yd,getPercentageWidths:bd,getPixelHeights:_d,getRawHeights:xd},kd=function(e,t,n){for(var r=0,i=e;i<t;i++)r+=void 0!==n[i]?n[i]:0;return r},Td=function(e,t){var n=Ur.justCells(e);return J(n,function(e){var n=kd(e.column(),e.column()+e.colspan(),t);return{element:e.element,width:S(n),colspan:e.colspan}})},Sd=function(e,t){var n=Ur.justCells(e);return J(n,function(e){var n=kd(e.row(),e.row()+e.rowspan(),t);return{element:e.element,height:S(n),rowspan:e.rowspan}})},Dd=function(e,t){return J(e.all(),function(e,n){return{element:e.element,height:S(t[n])}})},Ed={recalculateWidth:Td,recalculateHeight:Sd,matchRowHeight:Dd},Nd=function(e,t){var n=parseFloat(e),r=es.get(t),i=function(e){return e/r*100},o=function(e,t){return[100-e]},a=function(){return dd.minWidth()/r*100},s=function(e,t,r){var i=n+r;Rs.setPercentageWidth(e,i)};return{width:S(n),pixelWidth:S(r),getWidths:Cd.getPercentageWidths,getCellDelta:i,singleColumnWidth:o,minCellWidth:a,setElementWidth:Rs.setPercentageWidth,setTableWidth:s}},Ad=function(e){var t=parseInt(e,10),n=D,r=function(e,t){return[Math.max(dd.minWidth(),e+t)-e]},i=function(e,t,n){var r=te(t,function(e,t){return e+t},0);Rs.setPixelWidth(e,r)};return{width:S(t),pixelWidth:S(t),getWidths:Cd.getPixelWidths,getCellDelta:n,singleColumnWidth:r,minCellWidth:dd.minWidth,setElementWidth:Rs.setPixelWidth,setTableWidth:i}},Rd=function(e,t){if(Rs.percentageBasedSizeRegex().test(t)){var n=Rs.percentageBasedSizeRegex().exec(t);return Nd(n[1],e)}if(Rs.pixelBasedSizeRegex().test(t)){var r=Rs.pixelBasedSizeRegex().exec(t);return Ad(r[1])}var i=es.get(e);return Ad(i)},Pd=function(e){return Rs.getRawWidth(e).fold(function(){var t=es.get(e);return Ad(t)},function(t){return Rd(e,t)})},Od={getTableSize:Pd},Id=function(e){return Ur.generate(e)},Md=function(e){return te(e,function(e,t){return e+t},0)},jd=function(e){var t=Mr.fromTable(e);return Id(t)},Bd=function(e,t,n,r){var i=Od.getTableSize(e),o=i.getCellDelta(t),a=jd(e),s=i.getWidths(a,r,i),l=ad.determine(s,n,o,i),c=J(l,function(e,t){return e+s[t]}),u=Ed.recalculateWidth(a,c);Q(u,function(e){i.setElementWidth(e.element(),e.width())}),n===a.grid().columns()-1&&i.setTableWidth(e,c,o)},Ld=function(e,t,n,r){var i=jd(e),o=Cd.getPixelHeights(i,r),a=J(o,function(e,r){return n===r?Math.max(t+e,dd.minHeight()):e}),s=Ed.recalculateHeight(i,a),l=Ed.matchRowHeight(i,a);Q(l,function(e){Rs.setHeight(e.element(),e.height())}),Q(s,function(e){Rs.setHeight(e.element(),e.height())});var c=Md(a);Rs.setHeight(e,c)},Fd=function(e,t,n){var r=Od.getTableSize(e),i=Id(t),o=r.getWidths(i,n,r),a=Ed.recalculateWidth(i,o);Q(a,function(e){r.setElementWidth(e.element(),e.width())});var s=te(o,function(e,t){return t+e},0);a.length>0&&r.setElementWidth(e,s)},Hd={adjustWidth:Bd,adjustHeight:Ld,adjustWidthTo:Fd},$d=function(e){0===Pr.cells(e).length&&Ci.remove(e)},Ud=ve("grid","cursor"),zd=function(e,t,n){return Wd(e,t,n).orThunk(function(){return Wd(e,0,0)})},Wd=function(e,t,n){return H.from(e[t]).bind(function(e){return H.from(e.cells()[n]).bind(function(e){return H.from(e.element())})})},qd=function(e,t,n){return Ud(e,Wd(e,t,n))},Vd=function(e){return ne(e,function(e,t){return X(e,function(e){return e.row()===t.row()})?e:e.concat([t])},[]).sort(function(e,t){return e.row()-t.row()})},Yd=function(e){return ne(e,function(e,t){return X(e,function(e){return e.column()===t.column()})?e:e.concat([t])},[]).sort(function(e,t){return e.column()-t.column()})},Gd=function(e,t,n,r){var i=t.row(),o=t.row(),a=Wu.insertRowAt(e,o,i,n,r.getOrInit);return qd(a,o,t.column())},Kd=function(e,t,n,r){var i=t[0].row(),o=t[0].row(),a=Vd(t),s=ne(a,function(e,t){return Wu.insertRowAt(e,o,i,n,r.getOrInit)},e);return qd(s,o,t[0].column())},Xd=function(e,t,n,r){var i=t.row(),o=t.row()+t.rowspan(),a=Wu.insertRowAt(e,o,i,n,r.getOrInit);return qd(a,o,t.column())},Jd=function(e,t,n,r){var i=Vd(t),o=i[i.length-1].row(),a=i[i.length-1].row()+i[i.length-1].rowspan(),s=ne(i,function(e,t){return Wu.insertRowAt(e,a,o,n,r.getOrInit)},e);return qd(s,a,t[0].column())},Qd=function(e,t,n,r){var i=t.column(),o=t.column(),a=Wu.insertColumnAt(e,o,i,n,r.getOrInit);return qd(a,t.row(),o)},Zd=function(e,t,n,r){var i=Yd(t),o=i[0].column(),a=i[0].column(),s=ne(i,function(e,t){return Wu.insertColumnAt(e,a,o,n,r.getOrInit)},e);return qd(s,t[0].row(),a)},ef=function(e,t,n,r){var i=t.column(),o=t.column()+t.colspan(),a=Wu.insertColumnAt(e,o,i,n,r.getOrInit);return qd(a,t.row(),o)},tf=function(e,t,n,r){var i=t[t.length-1].column(),o=t[t.length-1].column()+t[t.length-1].colspan(),a=Yd(t),s=ne(a,function(e,t){return Wu.insertColumnAt(e,o,i,n,r.getOrInit)},e);return qd(s,t[0].row(),o)},nf=function(e,t,n,r){var i=Xu.replaceRow(e,t.row(),n,r.replaceOrInit);return qd(i,t.row(),t.column())},rf=function(e,t,n,r){var i=Xu.replaceColumn(e,t.column(),n,r.replaceOrInit);return qd(i,t.row(),t.column())},of=function(e,t,n,r){var i=Xu.replaceRow(e,t.row(),n,r.replaceOrInit);return qd(i,t.row(),t.column())},af=function(e,t,n,r){var i=Xu.replaceColumn(e,t.column(),n,r.replaceOrInit);return qd(i,t.row(),t.column())},sf=function(e,t,n,r){var i=Wu.splitCellIntoColumns(e,t.row(),t.column(),n,r.getOrInit);return qd(i,t.row(),t.column())},lf=function(e,t,n,r){var i=Wu.splitCellIntoRows(e,t.row(),t.column(),n,r.getOrInit);return qd(i,t.row(),t.column())},cf=function(e,t,n,r){var i=Yd(t),o=Wu.deleteColumnsAt(e,i[0].column(),i[i.length-1].column()),a=zd(o,t[0].row(),t[0].column());return Ud(o,a)},uf=function(e,t,n,r){var i=Vd(t),o=Wu.deleteRowsAt(e,i[0].row(),i[i.length-1].row()),a=zd(o,t[0].row(),t[0].column());return Ud(o,a)},df=function(e,t,n,r){var i=t.cells();$l.merge(i);var o=Pu.merge(e,t.bounds(),n,S(i[0]));return Ud(o,H.from(i[0]))},ff=function(e,t,n,r){var i=te(t,function(e,t){return Pu.unmerge(e,t,n,r.combine(t))},e);return Ud(i,H.from(t[0]))},hf=function(e,t,n,r){var i=function(e,t){var n=Mr.fromTable(e),r=Ur.generate(n);return lc.toGrid(r,t,!0)}(t.clipboard(),t.generators()),o=Le.address(t.row(),t.column());return Bu.merge(o,e,i,t.generators(),n).fold(function(){return Ud(e,H.some(t.element()))},function(e){var n=zd(e,t.row(),t.column());return Ud(e,n)})},pf=function(e,t,n){var r=Mr.fromPastedRows(e,n),i=Ur.generate(r);return lc.toGrid(i,t,!0)},gf=function(e,t,n,r){var i=e[t.cells[0].row()],o=t.cells[0].row(),a=pf(t.clipboard(),t.generators(),i),s=Bu.insert(o,e,a,t.generators(),n),l=zd(s,t.cells[0].row(),t.cells[0].column());return Ud(s,l)},mf=function(e,t,n,r){var i=e[t.cells[0].row()],o=t.cells[t.cells.length-1].row()+t.cells[t.cells.length-1].rowspan(),a=pf(t.clipboard(),t.generators(),i),s=Bu.insert(o,e,a,t.generators(),n),l=zd(s,t.cells[0].row(),t.cells[0].column());return Ud(s,l)},vf=Hd.adjustWidthTo,bf={insertRowBefore:vu.run(Gd,vu.onCell,k,k,yl.modification),insertRowsBefore:vu.run(Kd,vu.onCells,k,k,yl.modification),insertRowAfter:vu.run(Xd,vu.onCell,k,k,yl.modification),insertRowsAfter:vu.run(Jd,vu.onCells,k,k,yl.modification),insertColumnBefore:vu.run(Qd,vu.onCell,vf,k,yl.modification),insertColumnsBefore:vu.run(Zd,vu.onCells,vf,k,yl.modification),insertColumnAfter:vu.run(ef,vu.onCell,vf,k,yl.modification),insertColumnsAfter:vu.run(tf,vu.onCells,vf,k,yl.modification),splitCellIntoColumns:vu.run(sf,vu.onCell,vf,k,yl.modification),splitCellIntoRows:vu.run(lf,vu.onCell,k,k,yl.modification),eraseColumns:vu.run(cf,vu.onCells,vf,$d,yl.modification),eraseRows:vu.run(uf,vu.onCells,k,$d,yl.modification),makeColumnHeader:vu.run(rf,vu.onCell,k,k,yl.transform("row","th")),unmakeColumnHeader:vu.run(af,vu.onCell,k,k,yl.transform(null,"td")),makeRowHeader:vu.run(nf,vu.onCell,k,k,yl.transform("col","th")),unmakeRowHeader:vu.run(of,vu.onCell,k,k,yl.transform(null,"td")),mergeCells:vu.run(df,vu.onMergable,k,k,yl.merging),unmergeCells:vu.run(ff,vu.onUnmergable,vf,k,yl.merging),pasteCells:vu.run(hf,vu.onPaste,vf,k,yl.modification),pasteRowsBefore:vu.run(gf,vu.onPasteRows,k,k,yl.modification),pasteRowsAfter:vu.run(mf,vu.onPasteRows,k,k,yl.modification)},yf=function(e){return We.fromDom(e.getBody())},wf=function(e){return e.getBoundingClientRect().width},_f=function(e){return e.getBoundingClientRect().height},xf=function(e){return function(t){return Jt.eq(t,yf(e))}},Cf=function(e){return e?e.replace(/px$/,""):""},kf=function(e){return/^[0-9]+$/.test(e)&&(e+="px"),e},Tf=function(e){var t=ir.descendants(e,"td[data-mce-style],th[data-mce-style]");Un.remove(e,"data-mce-style"),Q(t,function(e){Un.remove(e,"data-mce-style")})},Sf=function(e,t){return function(n){return"rtl"===Df(n)?t:e}},Df=function(e){return"rtl"===si.get(e,"direction")?"rtl":"ltr"},Ef={onDirection:Sf,getDirection:Df},Nf={isRtl:S(!1)},Af={isRtl:S(!0)},Rf=function(e){return"rtl"===Ef.getDirection(e)?Af:Nf},Pf={directionAt:Rf},Of=["tableprops","tabledelete","|","tableinsertrowbefore","tableinsertrowafter","tabledeleterow","|","tableinsertcolbefore","tableinsertcolafter","tabledeletecol"],If={"border-collapse":"collapse",width:"100%"},Mf={border:"1"},jf=function(e){return e.getParam("table_default_attributes",Mf,"object")},Bf=function(e){return e.getParam("table_default_styles",If,"object")},Lf=function(e){return e.getParam("table_resize_bars",!0,"boolean")},Ff=function(e){return e.getParam("table_tab_navigation",!0,"boolean")},Hf=function(e){return e.getParam("table_cell_advtab",!0,"boolean")},$f=function(e){return e.getParam("table_row_advtab",!0,"boolean")},Uf=function(e){return e.getParam("table_advtab",!0,"boolean")},zf=function(e){return e.getParam("table_appearance_options",!0,"boolean")},Wf=function(e){return e.getParam("table_grid",!0,"boolean")},qf=function(e){return e.getParam("table_style_by_css",!1,"boolean")},Vf=function(e){return e.getParam("table_cell_class_list",[],"array")},Yf=function(e){return e.getParam("table_row_class_list",[],"array")},Gf=function(e){return e.getParam("table_class_list",[],"array")},Kf=function(e){return e.getParam("color_picker_callback")},Xf=function(e){return!1===e.getParam("table_responsive_width")},Jf=function(e){var t=e.getParam("table_clone_elements");return z(t)?H.some(t.split(/[ ,]/)):Array.isArray(t)?H.some(t):H.none()},Qf=function(e){var t=e.getParam("object_resizing",!0);return"table"===t||t},Zf=function(e){var t=e.getParam("table_toolbar",Of);return""===t||!1===t?[]:z(t)?t.split(/[ ,]/):W(t)?t:[]},eh=function(e,t){return e.fire("newrow",{node:t})},th=function(e,t){return e.fire("newcell",{node:t})},nh=function(e,t,n,r){e.fire("ObjectResizeStart",{target:t,width:n,height:r})},rh=function(e,t,n,r){e.fire("ObjectResized",{target:t,width:n,height:r})},ih=function(e,t){var n=function(e){return"table"===Rn.name(yf(e))},r=function(t){var r=ll.getGridSize(t);return!1===n(e)||r.rows()>1},o=function(t){var r=ll.getGridSize(t);return!1===n(e)||r.columns()>1},a=Jf(e),s=function(t,n,r,o){return function(s,l){Tf(s);var c=o(),u=We.fromDom(e.getDoc()),d=i(Pf.directionAt),f=so.cellOperations(r,u,a);return n(s)?t(c,s,l,f,d).bind(function(t){return Q(t.newRows(),function(t){eh(e,t.dom())}),Q(t.newCells(),function(t){th(e,t.dom())}),t.cursor().map(function(t){var n=e.dom.createRng();return n.setStart(t.dom(),0),n.setEnd(t.dom(),0),n})}):H.none()}};return{deleteRow:s(bf.eraseRows,r,k,t),deleteColumn:s(bf.eraseColumns,o,k,t),insertRowsBefore:s(bf.insertRowsBefore,O,k,t),insertRowsAfter:s(bf.insertRowsAfter,O,k,t),insertColumnsBefore:s(bf.insertColumnsBefore,O,Os.halve,t),insertColumnsAfter:s(bf.insertColumnsAfter,O,Os.halve,t),mergeCells:s(bf.mergeCells,O,k,t),unmergeCells:s(bf.unmergeCells,O,k,t),pasteRowsBefore:s(bf.pasteRowsBefore,O,k,t),pasteRowsAfter:s(bf.pasteRowsAfter,O,k,t),pasteCells:s(bf.pasteCells,O,k,t)}},oh=function(e,t,n){var r=Mr.fromTable(e),i=Ur.generate(r);return vu.onCells(i,t).map(function(e){var t=lc.toGrid(i,n,!1),r=t.slice(e[0].row(),e[e.length-1].row()+e[e.length-1].rowspan()),o=vu.toDetailList(r,n);return fc.copy(o)})},ah={copyRows:oh},sh=tinymce.util.Tools.resolve("tinymce.util.Tools"),lh=function(e,t,n){var r,i=e.select("td,th",t);return r=function(t,r){for(var i=0;i<r.length;i++){var o=e.getStyle(r[i],n);if(void 0===t&&(t=o),t!==o)return""}return t}(r,i)},ch=function(e,t,n){n&&e.formatter.apply("align"+n,{},t)},uh=function(e,t,n){n&&e.formatter.apply("valign"+n,{},t)},dh=function(e,t){sh.each("left center right".split(" "),function(n){e.formatter.remove("align"+n,{},t)})},fh=function(e,t){sh.each("top middle bottom".split(" "),function(n){e.formatter.remove("valign"+n,{},t)})},hh={applyAlign:ch,applyVAlign:uh,unApplyAlign:dh,unApplyVAlign:fh,getTDTHOverallStyle:lh},ph=function(e,t,n){var r=function(e,n){return n=n||[],sh.each(e,function(e){var i={text:e.text||e.title};e.menu?i.menu=r(e.menu):(i.value=e.value,t&&t(i)),n.push(i)}),n};return r(e,n||[])},gh=function(e,t){
a(t)?vh(e,t):mh(e,t)},mh=function(e,t){var n=e.dom,r=t.control.rootControl,i=r.toJSON(),o=n.parseStyle(i.style);o["border-style"]=i.borderStyle,o["border-color"]=i.borderColor,o["background-color"]=i.backgroundColor,o.width=i.width?kf(i.width):"",o.height=i.height?kf(i.height):"",r.find("#style").value(n.serializeStyle(n.parseStyle(n.serializeStyle(o))))},vh=function(e,t){var n=e.dom,r=t.control.rootControl,i=r.toJSON(),o=n.parseStyle(i.style);r.find("#borderStyle").value(o["border-style"]||""),r.find("#borderColor").value(o["border-color"]||""),r.find("#backgroundColor").value(o["background-color"]||""),r.find("#width").value(o.width||""),r.find("#height").value(o.height||"")},bh=function(e,t){var n=e.parseStyle(e.getAttrib(t,"style")),r={};return n["border-style"]&&(r.borderStyle=n["border-style"]),n["border-color"]&&(r.borderColor=n["border-color"]),n["background-color"]&&(r.backgroundColor=n["background-color"]),r.style=e.serializeStyle(n),r},yh=function(e){var t=function(){var t=Kf(e);if(t)return function(n){return t.call(e,function(e){n.control.value(e).fire("change")},n.control.value())}};return{title:"Advanced",type:"form",defaults:{onchange:E(mh,e)},items:[{label:"Style",name:"style",type:"textbox",onchange:E(vh,e)},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border style",type:"listbox",name:"borderStyle",width:90,onselect:E(mh,e),values:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]},{label:"Border color",type:"colorbox",name:"borderColor",onaction:t()},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:t()}]}]}},wh={createStyleForm:yh,buildListItems:ph,updateStyleField:mh,extractAdvancedStyles:bh,updateAdvancedFields:vh,syncAdvancedStyleFields:gh},_h=function(e,t){delete e.dataset.mceStyle,e.style.cssText+=";"+t},xh=function(e,t){var n=e.dom,r={width:n.getStyle(t,"width")||n.getAttrib(t,"width"),height:n.getStyle(t,"height")||n.getAttrib(t,"height"),scope:n.getAttrib(t,"scope"),class:n.getAttrib(t,"class"),type:t.nodeName.toLowerCase(),style:"",align:"",valign:""};return sh.each("left center right".split(" "),function(n){e.formatter.matchNode(t,"align"+n)&&(r.align=n)}),sh.each("top middle bottom".split(" "),function(n){e.formatter.matchNode(t,"valign"+n)&&(r.valign=n)}),Hf(e)&&sh.extend(r,wh.extractAdvancedStyles(n,t)),r},Ch=function(e,t,n){function r(e,n,r){(1===t.length||r)&&a.setAttrib(e,n,r)}function i(e,n,r){(1===t.length||r)&&a.setStyle(e,n,r)}var o,a=e.dom;Hf(e)&&wh.syncAdvancedStyleFields(e,n),o=n.control.rootControl.toJSON(),e.undoManager.transact(function(){sh.each(t,function(n){r(n,"scope",o.scope),1===t.length?r(n,"style",o.style):_h(n,o.style),r(n,"class",o.class),i(n,"width",kf(o.width)),i(n,"height",kf(o.height)),o.type&&n.nodeName.toLowerCase()!==o.type&&(n=a.rename(n,o.type)),1===t.length&&(hh.unApplyAlign(e,n),hh.unApplyVAlign(e,n)),o.align&&hh.applyAlign(e,n,o.align),o.valign&&hh.applyVAlign(e,n,o.valign)}),e.focus()})},kh=function(e){var t,n,r,i=[];if(i=e.dom.select("td[data-mce-selected],th[data-mce-selected]"),t=e.dom.getParent(e.selection.getStart(),"td,th"),!i.length&&t&&i.push(t),t=t||i[0]){n=i.length>1?{width:"",height:"",scope:"",class:"",align:"",valign:"",style:"",type:t.nodeName.toLowerCase()}:xh(e,t),Vf(e).length>0&&(r={name:"class",type:"listbox",label:"Class",values:wh.buildListItems(Vf(e),function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({block:"td",classes:[t.value]})})})});var o={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width",onchange:E(wh.updateStyleField,e)},{label:"Height",name:"height",onchange:E(wh.updateStyleField,e)},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},r]};Hf(e)?e.windowManager.open({title:"Cell properties",bodyType:"tabpanel",data:n,body:[{title:"General",type:"form",items:o},wh.createStyleForm(e)],onsubmit:E(Ch,e,i)}):e.windowManager.open({title:"Cell properties",data:n,body:o,onsubmit:E(Ch,e,i)})}},Th={open:kh},Sh=function(e,t){var n=e.dom,r={height:n.getStyle(t,"height")||n.getAttrib(t,"height"),scope:n.getAttrib(t,"scope"),class:n.getAttrib(t,"class"),align:"",style:"",type:t.parentNode.nodeName.toLowerCase()};return sh.each("left center right".split(" "),function(n){e.formatter.matchNode(t,"align"+n)&&(r.align=n)}),$f(e)&&sh.extend(r,wh.extractAdvancedStyles(n,t)),r},Dh=function(e,t,n){var r=e.getParent(t,"table"),i=t.parentNode,o=e.select(n,r)[0];o||(o=e.create(n),r.firstChild?"CAPTION"===r.firstChild.nodeName?e.insertAfter(o,r.firstChild):r.insertBefore(o,r.firstChild):r.appendChild(o)),o.appendChild(t),i.hasChildNodes()||e.remove(i)},Eh=function(e){var t,n,r,i,o,a,l=e.dom,c=[];t=l.getParent(e.selection.getStart(),"table"),n=l.getParent(e.selection.getStart(),"td,th"),sh.each(t.rows,function(e){sh.each(e.cells,function(t){if(l.getAttrib(t,"data-mce-selected")||t===n)return c.push(e),!1})}),(r=c[0])&&(o=c.length>1?{height:"",scope:"",style:"",class:"",align:"",type:r.parentNode.nodeName.toLowerCase()}:Sh(e,r),Yf(e).length>0&&(i={name:"class",type:"listbox",label:"Class",values:wh.buildListItems(Yf(e),function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({block:"tr",classes:[t.value]})})})}),a={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"Header",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},i]},$f(e)?e.windowManager.open({title:"Row properties",data:o,bodyType:"tabpanel",body:[{title:"General",type:"form",items:a},wh.createStyleForm(e)],onsubmit:E(s,e,c,o)}):e.windowManager.open({title:"Row properties",data:o,body:a,onsubmit:E(s,e,c,o)}))},Nh={open:Eh},Ah=tinymce.util.Tools.resolve("tinymce.Env"),Rh={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},percentages:!0},Ph=function(){return We.fromTag("table")},Oh=function(){return We.fromTag("tbody")},Ih=function(){return We.fromTag("tr")},Mh=function(){return We.fromTag("th")},jh=function(){return We.fromTag("td")},Bh=function(e,t,n,r,i){void 0===i&&(i=Rh);var o=Ph();si.setAll(o,i.styles),Un.setAll(o,i.attributes);var a=Oh();pi.append(o,a);for(var s=[],l=0;l<e;l++){for(var c=Ih(),u=0;u<t;u++){var d=l<n||u<r?Mh():jh();u<r&&Un.set(d,"scope","row"),l<n&&Un.set(d,"scope","col"),pi.append(d,We.fromTag("br")),i.percentages&&si.set(d,"width",100/t+"%"),pi.append(c,d)}s.push(c)}return yi.append(a,s),o},Lh=function(e){return e.dom().innerHTML},Fh=function(e,t){var n=yn.owner(e),r=n.dom(),i=We.fromDom(r.createDocumentFragment()),o=ho.fromHtml(t,r);yi.append(i,o),Ci.empty(e),pi.append(e,i)},Hh=function(e){var t=We.fromTag("div"),n=We.fromDom(e.dom().cloneNode(!0));return pi.append(t,n),Lh(t)},$h={get:Lh,set:Fh,getOuter:Hh},Uh=function(e,t){e.selection.select(t.dom(),!0),e.selection.collapse(!0)},zh=function(e,t){br.descendant(t,"td,th").each(E(Uh,e))},Wh=function(e,t){Q(ir.descendants(t,"tr"),function(t){eh(e,t.dom()),Q(ir.descendants(t,"th,td"),function(t){th(e,t.dom())})})},qh=function(e){return z(e)&&-1!==e.indexOf("%")},Vh=function(e,t,n){var r=Bf(e),i={styles:r,attributes:jf(e),percentages:qh(r.width)&&!Xf(e)},o=Bh(n,t,0,0,i);Un.set(o,"data-mce-id","__mce");var a=$h.getOuter(o);return e.insertContent(a),br.descendant(yf(e),'table[data-mce-id="__mce"]').map(function(t){return Xf(e)&&si.set(t,"width",si.get(t,"width")),Un.remove(t,"data-mce-id"),Wh(e,t),zh(e,t),t.dom()}).getOr(null)},Yh={insert:Vh},Gh=function(e,t){var n=e.dom,r={width:n.getStyle(t,"width")||n.getAttrib(t,"width"),height:n.getStyle(t,"height")||n.getAttrib(t,"height"),cellspacing:n.getStyle(t,"border-spacing")||n.getAttrib(t,"cellspacing"),cellpadding:n.getAttrib(t,"data-mce-cell-padding")||n.getAttrib(t,"cellpadding")||hh.getTDTHOverallStyle(e.dom,t,"padding"),border:n.getAttrib(t,"data-mce-border")||n.getAttrib(t,"border")||hh.getTDTHOverallStyle(e.dom,t,"border"),borderColor:n.getAttrib(t,"data-mce-border-color"),caption:!!n.select("caption",t)[0],class:n.getAttrib(t,"class")};return sh.each("left center right".split(" "),function(n){e.formatter.matchNode(t,"align"+n)&&(r.align=n)}),Uf(e)&&sh.extend(r,wh.extractAdvancedStyles(n,t)),r},Kh=function(e,t,n){var r=e.dom,i={},o={};if(i.class=n.class,o.height=kf(n.height),r.getAttrib(t,"width")&&!qf(e)?i.width=Cf(n.width):o.width=kf(n.width),qf(e)?(o["border-width"]=kf(n.border),o["border-spacing"]=kf(n.cellspacing),sh.extend(i,{"data-mce-border-color":n.borderColor,"data-mce-cell-padding":n.cellpadding,"data-mce-border":n.border})):sh.extend(i,{border:n.border,cellpadding:n.cellpadding,cellspacing:n.cellspacing}),qf(e)&&t.children)for(var a=0;a<t.children.length;a++)l(r,t.children[a],{"border-width":kf(n.border),"border-color":n.borderColor,padding:kf(n.cellpadding)});n.style?sh.extend(o,r.parseStyle(n.style)):o=sh.extend({},r.parseStyle(r.getAttrib(t,"style")),o),i.style=r.serializeStyle(o),r.setAttribs(t,i)},Xh=function(e,t,n){var r,i,o=e.dom;Uf(e)&&wh.syncAdvancedStyleFields(e,n),i=n.control.rootControl.toJSON(),!1===i.class&&delete i.class,e.undoManager.transact(function(){t||(t=Yh.insert(e,i.cols||1,i.rows||1)),Kh(e,t,i),r=o.select("caption",t)[0],r&&!i.caption&&o.remove(r),!r&&i.caption&&(r=o.create("caption"),r.innerHTML=Ah.ie?"":'<br data-mce-bogus="1"/>',t.insertBefore(r,t.firstChild)),hh.unApplyAlign(e,t),i.align&&hh.applyAlign(e,t,i.align),e.focus(),e.addVisual()})},Jh=function(e,t){var n,r,i,o,a,s=e.dom,l={};!0===t?(n=s.getParent(e.selection.getStart(),"table"))&&(l=Gh(e,n)):(r={label:"Cols",name:"cols"},i={label:"Rows",name:"rows"}),Gf(e).length>0&&(l.class&&(l.class=l.class.replace(/\s*mce\-item\-table\s*/g,"")),o={name:"class",type:"listbox",label:"Class",values:wh.buildListItems(Gf(e),function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({block:"table",classes:[t.value]})})})}),a={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:zf(e)?[r,i,{label:"Width",name:"width",onchange:E(wh.updateStyleField,e)},{label:"Height",name:"height",onchange:E(wh.updateStyleField,e)},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]:[r,i,{label:"Width",name:"width",onchange:E(wh.updateStyleField,e)},{label:"Height",name:"height",onchange:E(wh.updateStyleField,e)}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},o]},Uf(e)?e.windowManager.open({title:"Table properties",data:l,bodyType:"tabpanel",body:[{title:"General",type:"form",items:a},wh.createStyleForm(e)],onsubmit:E(Xh,e,n)}):e.windowManager.open({title:"Table properties",data:l,body:a,onsubmit:E(Xh,e,n)})},Qh={open:Jh},Zh=sh.each,ep=function(e,t,n,r,i){var o=xf(e),a=function(){var t=We.fromDom(e.dom.getParent(e.selection.getStart(),"th,td"));Pr.table(t,o).filter(N(o)).each(function(t){var n=We.fromText("");pi.after(t,n),Ci.remove(t);var r=e.dom.createRng();r.setStart(n.dom(),0),r.setEnd(n.dom(),0),e.selection.setRng(r)})},s=function(){return We.fromDom(e.dom.getParent(e.selection.getStart(),"th,td"))},l=function(e){return Pr.table(e,o)},c=function(e){return{width:wf(e.dom()),height:wf(e.dom())}},u=function(e,t,n){var r=c(n);t.width===r.width&&t.height===r.height||(nh(e,n.dom(),t.width,t.height),rh(e,n.dom(),r.width,r.height))},d=function(t){var i=s();l(i).each(function(o){var a=La.forMenu(r,o,i),s=c(o);t(o,a).each(function(t){u(e,s,o),e.selection.setRng(t),e.focus(),n.clear(o),Tf(o)})})},f=function(t){var n=s();return l(n).bind(function(t){var i=We.fromDom(e.getDoc()),o=La.forMenu(r,t,n),a=so.cellOperations(k,i,H.none());return ah.copyRows(t,o,a)})},h=function(t){i.get().each(function(i){var o=J(i,function(e){return Bi.deep(e)}),a=s();l(a).bind(function(i){var s=We.fromDom(e.getDoc()),l=so.paste(s),c=La.pasteRows(r,i,a,o,l);t(i,c).each(function(t){e.selection.setRng(t),e.focus(),n.clear(i)})})})};Zh({mceTableSplitCells:function(){d(t.unmergeCells)},mceTableMergeCells:function(){d(t.mergeCells)},mceTableInsertRowBefore:function(){d(t.insertRowsBefore)},mceTableInsertRowAfter:function(){d(t.insertRowsAfter)},mceTableInsertColBefore:function(){d(t.insertColumnsBefore)},mceTableInsertColAfter:function(){d(t.insertColumnsAfter)},mceTableDeleteCol:function(){d(t.deleteColumn)},mceTableDeleteRow:function(){d(t.deleteRow)},mceTableCutRow:function(e){i.set(f()),d(t.deleteRow)},mceTableCopyRow:function(e){i.set(f())},mceTablePasteRowBefore:function(e){h(t.pasteRowsBefore)},mceTablePasteRowAfter:function(e){h(t.pasteRowsAfter)},mceTableDelete:a},function(t,n){e.addCommand(n,t)}),Zh({mceInsertTable:E(Qh.open,e),mceTableProps:E(Qh.open,e,!0),mceTableRowProps:E(Nh.open,e),mceTableCellProps:E(Th.open,e)},function(t,n){e.addCommand(n,function(e,n){t(n)})})},tp={registerCommands:ep},np=function(e){var t=H.from(e.dom().documentElement).map(We.fromDom).getOr(e);return{parent:S(t),view:S(e),origin:S(Ls(0,0))}},rp=function(e,t){var n=E(Ws.absolute,t);return{parent:S(t),view:S(e),origin:n}},ip=function(e,t){return{parent:S(t),view:S(e),origin:S(Ls(0,0))}},op={only:np,detached:rp,body:ip},ap=function(e){return{registry:ge(e,function(e){return{bind:e.bind,unbind:e.unbind}}),trigger:ge(e,function(e){return e.trigger})}},sp={create:ap},lp=hl(["compare","extract","mutate","sink"]),cp=hl(["element","start","stop","destroy"]),up=hl(["forceDrop","drop","move","delayDrop"]),dp={mode:lp,sink:cp,api:up},fp=Tc("ephox-dragster"),hp={resolve:fp.resolve},pp=function(e,t,n,r,i,o,a){return{target:S(e),x:S(t),y:S(n),stop:r,prevent:i,kill:o,raw:S(a)}},gp=function(e,t){return function(n){if(e(n)){var r=We.fromDom(n.target),i=function(){n.stopPropagation()},o=function(){n.preventDefault()},a=T(o,i),s=pp(r,n.clientX,n.clientY,i,o,a,n);t(s)}}},mp=function(e,t,n,r,i){var o=gp(n,r);return e.dom().addEventListener(t,o,i),{unbind:E(yp,e,t,o,i)}},vp=function(e,t,n,r){return mp(e,t,n,r,!1)},bp=function(e,t,n,r){return mp(e,t,n,r,!0)},yp=function(e,t,n,r){e.dom().removeEventListener(t,n,r)},wp={bind:vp,capture:bp},_p=S(!0),xp=function(e,t,n){return wp.bind(e,t,_p,n)},Cp=function(e,t,n){return wp.capture(e,t,_p,n)},kp={bind:xp,capture:Cp},Tp=function(e,t){return Ls(t.left()-e.left(),t.top()-e.top())},Sp=function(e){return H.some(Ls(e.x(),e.y()))},Dp=function(e,t){e.mutate(t.left(),t.top())},Ep=function(e,t){var n=u(t),r=kp.bind(n.element(),"mousedown",e.forceDrop),i=kp.bind(n.element(),"mouseup",e.drop),o=kp.bind(n.element(),"mousemove",e.move),a=kp.bind(n.element(),"mouseout",e.delayDrop),s=function(){n.destroy(),i.unbind(),o.unbind(),a.unbind(),r.unbind()},l=function(e){pi.append(e,n.element())},c=function(){Ci.remove(n.element())};return dp.sink({element:n.element,start:l,stop:c,destroy:s})},Np=dp.mode({compare:Tp,extract:Sp,sink:Ep,mutate:Dp}),Ap=function(e,t){var n=null;return{cancel:function(){null!==n&&(clearTimeout(n),n=null)},throttle:function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];null!==n&&clearTimeout(n),n=setTimeout(function(){e.apply(null,r),n=null},t)}}},Rp=function(e,t,n){var r=!1,i=sp.create({start:c([]),stop:c([])}),o=h(),a=function(){g.stop(),o.isOn()&&(o.off(),i.trigger.stop())},s=Ap(a,200),l=function(e){g.start(e),o.on(),i.trigger.start()},u=function(e,n){s.cancel(),o.onEvent(e,t)};o.events.move.bind(function(n){t.mutate(e,n.info())});var d=function(){r=!0},f=function(){r=!1},p=function(e){return function(){var t=Array.prototype.slice.call(arguments,0);if(r)return e.apply(null,t)}},g=t.sink(dp.api({forceDrop:a,drop:p(a),move:p(u),delayDrop:p(s.throttle)}),n),m=function(){g.destroy()};return{element:g.element,go:l,on:d,off:f,destroy:m,events:i.registry}},Pp={setup:Rp},Op=function(e,t){var n=void 0!==t?t:{},r=void 0!==n.mode?n.mode:Np;return Pp.setup(e,r,t)},Ip={transform:Op},Mp=function(e){return br.first(e).isSome()},jp=function(e,t,n){return br.ancestor(e,t,n).isSome()},Bp=function(e,t){return br.sibling(e,t).isSome()},Lp=function(e,t){return br.child(e,t).isSome()},Fp=function(e,t){return br.descendant(e,t).isSome()},Hp=function(e,t,n){return br.closest(e,t,n).isSome()},$p={any:Mp,ancestor:jp,sibling:Bp,child:Lp,descendant:Fp,closest:Hp},Up=Dc.resolve("resizer-bar-dragging"),zp=function(){var e=We.fromTag("div");return si.setAll(e,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),pi.append(Vn.body(),e),e},Wp=function(e,t){return e.inline?op.body(yf(e),zp()):op.only(We.fromDom(e.getDoc()))},qp=function(e,t){e.inline&&Ci.remove(t.parent())},Vp={get:Wp,remove:qp},Yp=function(e){var t,n,r=H.none(),o=H.none(),a=H.none(),s=/(\d+(\.\d+)?)%/,l=function(e){return"TABLE"===e.nodeName},c=function(t){return e.dom.getStyle(t,"width")||e.dom.getAttrib(t,"width")},u=function(){return o},d=function(){return a.getOr(op.only(We.fromDom(e.getBody())))},f=function(){o.each(function(e){e.destroy()}),a.each(function(t){Vp.remove(e,t)})};return e.on("init",function(){var t=i(Pf.directionAt),n=Vp.get(e);if(a=H.some(n),Qf(e)&&Lf(e)){var s=v(n,t);s.on(),s.events.startDrag.bind(function(t){r=H.some(e.selection.getRng())}),s.events.beforeResize.bind(function(t){var n=t.table().dom();nh(e,n,wf(n),_f(n))}),s.events.afterResize.bind(function(t){var n=t.table(),i=n.dom();Tf(n),r.each(function(t){e.selection.setRng(t),e.focus()}),rh(e,i,wf(i),_f(i)),e.undoManager.add()}),o=H.some(s)}}),e.on("ObjectResizeStart",function(e){var r=e.target;l(r)&&(t=e.width,n=c(r))}),e.on("ObjectResized",function(r){var i=r.target;if(l(i)){var o=i;if(s.test(n)){var a=parseFloat(s.exec(n)[1]),c=r.width*a/t;e.dom.setStyle(o,"width",c+"%")}else{var u=[];sh.each(o.rows,function(t){sh.each(t.cells,function(t){var n=e.dom.getStyle(t,"width",!0);u.push({cell:t,width:n})})}),sh.each(u,function(t){e.dom.setStyle(t.cell,"width",t.width),e.dom.setAttrib(t.cell,"width",null)})}}}),{lazyResize:u,lazyWire:d,destroy:f}},Gp=function(e){return Qp(function(t,n,r,i){return t(e)})},Kp=function(e){return Qp(function(t,n,r,i){return n(e)})},Xp=function(e,t){return Qp(function(n,r,i,o){return i(e,t)})},Jp=function(e){return Qp(function(t,n,r,i){return i(e)})},Qp=function(e){return{fold:e}},Zp={none:Gp,first:Kp,middle:Xp,last:Jp},eg=function(e,t){return Pr.table(e,t).bind(function(t){var n=Pr.cells(t);return ie(n,function(t){return Jt.eq(e,t)}).map(function(e){return{index:S(e),all:S(n)}})})},tg=function(e,t){return eg(e,t).fold(function(){return Zp.none(e)},function(t){return t.index()+1<t.all().length?Zp.middle(e,t.all()[t.index()+1]):Zp.last(e)})},ng=function(e,t){return eg(e,t).fold(function(){return Zp.none()},function(t){return t.index()-1>=0?Zp.middle(e,t.all()[t.index()-1]):Zp.first(e)})},rg={next:tg,prev:ng},ig=Ta.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),og=function(e,t,n,r){return e.fold(t,n,r)},ag=function(e){return e.fold(D,D,D)},sg={before:ig.before,on:ig.on,after:ig.after,cata:og,getStart:ag},lg=Ta.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),cg=ve("start","soffset","finish","foffset"),ug=function(e){return lg.exact(e.start(),e.soffset(),e.finish(),e.foffset())},dg=function(e){return e.match({domRange:function(e){return We.fromDom(e.startContainer)},relative:function(e,t){return sg.getStart(e)},exact:function(e,t,n,r){return e}})},fg=function(e){var t=dg(e);return yn.defaultView(t)},hg={domRange:lg.domRange,relative:lg.relative,exact:lg.exact,exactFromRange:ug,range:cg,getWin:fg},pg=function(e,t,n,r){var i=yn.owner(e),o=i.dom().createRange();return o.setStart(e.dom(),t),o.setEnd(n.dom(),r),o},gg=function(e,t,n,r){var i=pg(e,t,n,r);return We.fromDom(i.commonAncestorContainer)},mg=function(e,t,n,r){var i=pg(e,t,n,r),o=Jt.eq(e,n)&&t===r;return i.collapsed&&!o},vg={after:mg,commonAncestorContainer:gg},bg=function(e,t){var n=t||document,r=n.createDocumentFragment();return Q(e,function(e){r.appendChild(e.dom())}),We.fromDom(r)},yg={fromElements:bg},wg=function(e,t){var n=e.document.createRange();return _g(n,t),n},_g=function(e,t){e.selectNodeContents(t.dom())},xg=function(e,t){return t.compareBoundaryPoints(e.END_TO_START,e)<1&&t.compareBoundaryPoints(e.START_TO_END,e)>-1},Cg=function(e){return e.document.createRange()},kg=function(e,t){t.fold(function(t){e.setStartBefore(t.dom())},function(t,n){e.setStart(t.dom(),n)},function(t){e.setStartAfter(t.dom())})},Tg=function(e,t){t.fold(function(t){e.setEndBefore(t.dom())},function(t,n){e.setEnd(t.dom(),n)},function(t){e.setEndAfter(t.dom())})},Sg=function(e,t){Ng(e),e.insertNode(t.dom())},Dg=function(e,t,n){var r=e.document.createRange();return kg(r,t),Tg(r,n),r},Eg=function(e,t,n,r,i){var o=e.document.createRange();return o.setStart(t.dom(),n),o.setEnd(r.dom(),i),o},Ng=function(e){e.deleteContents()},Ag=function(e){var t=e.cloneContents();return We.fromDom(t)},Rg=function(e){return{left:S(e.left),top:S(e.top),right:S(e.right),bottom:S(e.bottom),width:S(e.width),height:S(e.height)}},Pg=function(e){var t=e.getClientRects(),n=t.length>0?t[0]:e.getBoundingClientRect();return n.width>0||n.height>0?H.some(n).map(Rg):H.none()},Og=function(e){var t=e.getBoundingClientRect();return t.width>0||t.height>0?H.some(t).map(Rg):H.none()},Ig=function(e){return e.toString()},Mg={create:Cg,replaceWith:Sg,selectNodeContents:wg,selectNodeContentsUsing:_g,relativeToNative:Dg,exactToNative:Eg,deleteContents:Ng,cloneFragment:Ag,getFirstRect:Pg,getBounds:Og,isWithin:xg,toString:Ig},jg=Ta.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Bg=function(e,t,n){return t(We.fromDom(n.startContainer),n.startOffset,We.fromDom(n.endContainer),n.endOffset)},Lg=function(e,t){return t.match({domRange:function(e){return{ltr:S(e),rtl:H.none}},relative:function(t,n){return{ltr:ft(function(){return Mg.relativeToNative(e,t,n)}),rtl:ft(function(){return H.some(Mg.relativeToNative(e,n,t))})}},exact:function(t,n,r,i){return{ltr:ft(function(){return Mg.exactToNative(e,t,n,r,i)}),rtl:ft(function(){return H.some(Mg.exactToNative(e,r,i,t,n))})}}})},Fg=function(e,t){var n=t.ltr();if(n.collapsed){return t.rtl().filter(function(e){return!1===e.collapsed}).map(function(e){return jg.rtl(We.fromDom(e.endContainer),e.endOffset,We.fromDom(e.startContainer),e.startOffset)}).getOrThunk(function(){return Bg(0,jg.ltr,n)})}return Bg(0,jg.ltr,n)},Hg=function(e,t){var n=Lg(e,t);return Fg(0,n)},$g=function(e,t){return Hg(e,t).match({ltr:function(t,n,r,i){var o=e.document.createRange();return o.setStart(t.dom(),n),o.setEnd(r.dom(),i),o},rtl:function(t,n,r,i){var o=e.document.createRange();return o.setStart(r.dom(),i),o.setEnd(t.dom(),n),o}})},Ug={ltr:jg.ltr,rtl:jg.rtl,diagnose:Hg,asLtrRange:$g},zg=function(e,t,n,r,i){if(0===i)return 0;if(t===r)return i-1;for(var o=r,a=1;a<i;a++){var s=e(a),l=Math.abs(t-s.left);if(n<=s.bottom){if(n<s.top||l>o)return a-1;o=l}}return 0},Wg=function(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom},qg={inRect:Wg,searchForPoint:zg},Vg=function(e,t,n,r,i){var o=function(n){var r=e.dom().createRange();return r.setStart(t.dom(),n),r.collapse(!0),r},a=function(e){return o(e).getBoundingClientRect()},s=Ui.get(t).length,l=qg.searchForPoint(a,n,r,i.right,s);return o(l)},Yg=function(e,t,n,r){var i=e.dom().createRange();i.selectNode(t.dom());var o=i.getClientRects();return Vl(o,function(e){return qg.inRect(e,n,r)?H.some(e):H.none()}).map(function(i){return Vg(e,t,n,r,i)})},Gg={locate:Yg},Kg=function(e,t,n,r){var i=e.dom().createRange(),o=yn.children(t);return Vl(o,function(t){return i.selectNode(t.dom()),qg.inRect(i.getBoundingClientRect(),n,r)?Xg(e,t,n,r):H.none()})},Xg=function(e,t,n,r){return(Rn.isText(t)?Gg.locate:Kg)(e,t,n,r)},Jg=function(e,t,n,r){var i=e.dom().createRange();i.selectNode(t.dom());var o=i.getBoundingClientRect(),a=Math.max(o.left,Math.min(o.right,n)),s=Math.max(o.top,Math.min(o.bottom,r));return Xg(e,t,a,s)},Qg={locate:Jg},Zg=function(e,t){return t-e.left<e.right-t},em=function(e,t,n){var r=e.dom().createRange();return r.selectNode(t.dom()),r.collapse(n),r},tm=function(e,t,n){var r=e.dom().createRange();r.selectNode(t.dom());var i=r.getBoundingClientRect(),o=Zg(i,n);return(!0===o?Zi.first:Zi.last)(t).map(function(t){return em(e,t,o)})},nm=function(e,t,n){var r=t.dom().getBoundingClientRect(),i=Zg(r,n);return H.some(em(e,t,i))},rm=function(e,t,n){return(0===yn.children(t).length?nm:tm)(e,t,n)},im={search:rm},om=function(e,t,n){return H.from(e.dom().caretPositionFromPoint(t,n)).bind(function(t){if(null===t.offsetNode)return H.none();var n=e.dom().createRange();return n.setStart(t.offsetNode,t.offset),n.collapse(),H.some(n)})},am=function(e,t,n){return H.from(e.dom().caretRangeFromPoint(t,n))},sm=function(e,t,n,r){var i=e.dom().createRange();i.selectNode(t.dom());var o=i.getBoundingClientRect(),a=Math.max(o.left,Math.min(o.right,n)),s=Math.max(o.top,Math.min(o.bottom,r));return Qg.locate(e,t,a,s)},lm=function(e,t,n){return We.fromPoint(e,t,n).bind(function(r){var i=function(){return im.search(e,r,t)};return 0===yn.children(r).length?i():sm(e,r,t,n).orThunk(i)})},cm=document.caretPositionFromPoint?om:document.caretRangeFromPoint?am:lm,um=function(e,t,n){var r=We.fromDom(e.document);return cm(r,t,n).map(function(e){return hg.range(We.fromDom(e.startContainer),e.startOffset,We.fromDom(e.endContainer),e.endOffset)})},dm={fromPoint:um},fm=function(e,t,n,r){var i=Mg.create(e),o=Qe.is(t,r)?[t]:[],a=o.concat(ir.descendants(t,r));return ee(a,function(e){return Mg.selectNodeContentsUsing(i,e),Mg.isWithin(n,i)})},hm=function(e,t,n){var r=Ug.asLtrRange(e,t),i=We.fromDom(r.commonAncestorContainer);return Rn.isElement(i)?fm(e,i,r,n):[]},pm={find:hm},gm=function(e,t){var n=Rn.name(e);return"input"===n?sg.after(e):K(["br","img"],n)?0===t?sg.before(e):sg.after(e):sg.on(e,t)},mm=function(e,t){var n=e.fold(sg.before,gm,sg.after),r=t.fold(sg.before,gm,sg.after);return hg.relative(n,r)},vm=function(e,t,n,r){var i=gm(e,t),o=gm(n,r);return hg.relative(i,o)},bm=function(e){return e.match({domRange:function(e){var t=We.fromDom(e.startContainer),n=We.fromDom(e.endContainer);return vm(t,e.startOffset,n,e.endOffset)},relative:mm,exact:vm})},ym={beforeSpecial:gm,preprocess:bm,preprocessRelative:mm,preprocessExact:vm},wm=function(e,t){H.from(e.getSelection()).each(function(e){e.removeAllRanges(),e.addRange(t)})},_m=function(e,t,n,r,i){var o=Mg.exactToNative(e,t,n,r,i);wm(e,o)},xm=function(e,t,n){return pm.find(e,t,n)},Cm=function(e,t,n,r,i,o){t.collapse(n.dom(),r),t.extend(i.dom(),o)},km=function(e,t){return Ug.diagnose(e,t).match({ltr:function(t,n,r,i){_m(e,t,n,r,i)},rtl:function(t,n,r,i){var o=e.getSelection();if(o.setBaseAndExtent)o.setBaseAndExtent(t.dom(),n,r.dom(),i);else if(o.extend)try{Cm(0,o,t,n,r,i)}catch(o){_m(e,r,i,t,n)}else _m(e,r,i,t,n)}})},Tm=function(e,t,n,r,i){var o=ym.preprocessExact(t,n,r,i);km(e,o)},Sm=function(e,t,n){var r=ym.preprocessRelative(t,n);km(e,r)},Dm=function(e){var t=hg.getWin(e).dom(),n=function(e,n,r,i){return Mg.exactToNative(t,e,n,r,i)},r=ym.preprocess(e);return Ug.diagnose(t,r).match({ltr:n,rtl:n})},Em=function(e){if(e.rangeCount>0){var t=e.getRangeAt(0),n=e.getRangeAt(e.rangeCount-1);return H.some(hg.range(We.fromDom(t.startContainer),t.startOffset,We.fromDom(n.endContainer),n.endOffset))}return H.none()},Nm=function(e){var t=We.fromDom(e.anchorNode),n=We.fromDom(e.focusNode);return vg.after(t,e.anchorOffset,n,e.focusOffset)?H.some(hg.range(We.fromDom(e.anchorNode),e.anchorOffset,We.fromDom(e.focusNode),e.focusOffset)):Em(e)},Am=function(e,t){var n=Mg.selectNodeContents(e,t);wm(e,n)},Rm=function(e,t){var n=Mg.selectNodeContents(e,t);return hg.range(We.fromDom(n.startContainer),n.startOffset,We.fromDom(n.endContainer),n.endOffset)},Pm=function(e){return H.from(e.getSelection()).filter(function(e){return e.rangeCount>0}).bind(Nm)},Om=function(e){return Pm(e).map(function(e){return hg.exact(e.start(),e.soffset(),e.finish(),e.foffset())})},Im=function(e,t){var n=Ug.asLtrRange(e,t);return Mg.getFirstRect(n)},Mm=function(e,t){var n=Ug.asLtrRange(e,t);return Mg.getBounds(n)},jm=function(e,t,n){return dm.fromPoint(e,t,n)},Bm=function(e,t){var n=Ug.asLtrRange(e,t);return Mg.toString(n)},Lm=function(e){e.getSelection().removeAllRanges()},Fm=function(e,t){var n=Ug.asLtrRange(e,t);return Mg.cloneFragment(n)},Hm=function(e,t,n){var r=Ug.asLtrRange(e,t),i=yg.fromElements(n,e.document);Mg.replaceWith(r,i)},$m=function(e,t){var n=Ug.asLtrRange(e,t);Mg.deleteContents(n)},Um=function(e,t,n,r){return Jt.eq(e,n)&&t===r},zm={setExact:Tm,getExact:Pm,get:Om,setRelative:Sm,toNative:Dm,setToElement:Am,clear:Lm,clone:Fm,replace:Hm,deleteAt:$m,forElement:Rm,getFirstRect:Im,getBounds:Mm,getAtPoint:jm,findWithin:xm,getAsString:Bm,isCollapsed:Um},Wm=tinymce.util.Tools.resolve("tinymce.util.VK"),qm=function(e,t,n,r){return Km(e,t,rg.next(n),r)},Vm=function(e,t,n,r){return Km(e,t,rg.prev(n),r)},Ym=function(e,t){var n=hg.exact(t,0,t,0);return zm.toNative(n)},Gm=function(e,t){var n=ir.descendants(t,"tr");return fe(n).bind(function(e){return br.descendant(e,"td,th").map(function(e){return Ym(0,e)})})},Km=function(e,t,n,r,i){return n.fold(H.none,H.none,function(e,t){return Zi.first(t).map(function(e){return Ym(0,e)})},function(n){return Pr.table(n,t).bind(function(t){var i=La.noMenu(n);return e.undoManager.transact(function(){r.insertRowsAfter(t,i)}),Gm(0,t)})})},Xm=["table","li","dl"],Jm=function(e,t,n,r){if(e.keyCode===Wm.TAB){var i=yf(t),o=function(e){var t=Rn.name(e);return Jt.eq(e,i)||K(Xm,t)},a=t.selection.getRng();if(a.collapsed){var s=We.fromDom(a.startContainer);Pr.cell(s,o).each(function(i){e.preventDefault(),(e.shiftKey?Vm:qm)(t,o,i,n,r).each(function(e){t.selection.setRng(e)})})}}},Qm={handle:Jm},Zm=ve("selection","kill"),ev={response:Zm},tv=function(e){return function(t){return t===e}},nv=tv(38),rv=tv(40),iv=function(e){return e>=37&&e<=40},ov={ltr:{isBackward:tv(37),isForward:tv(39)},rtl:{isBackward:tv(39),isForward:tv(37)},isUp:nv,isDown:rv,isNavigation:iv},av=function(e,t){var n=Ug.asLtrRange(e,t);return{start:S(We.fromDom(n.startContainer)),soffset:S(n.startOffset),finish:S(We.fromDom(n.endContainer)),foffset:S(n.endOffset)}},sv=function(e,t,n,r){return{start:S(sg.on(e,t)),finish:S(sg.on(n,r))}},lv={convertToRange:av,makeSitus:sv},cv=zt.detect().browser.isSafari(),uv=function(e){var t=void 0!==e?e.dom():document,n=t.body.scrollLeft||t.documentElement.scrollLeft,r=t.body.scrollTop||t.documentElement.scrollTop;return Ls(n,r)},dv=function(e,t,n){
(void 0!==n?n.dom():document).defaultView.scrollTo(e,t)},fv=function(e,t,n){(void 0!==n?n.dom():document).defaultView.scrollBy(e,t)},hv=function(e,t){var n=Ws.absolute(t),r=We.fromDom(e.document);dv(n.left(),n.top(),r)},pv=function(e,t){var n=uv(e);t();var r=uv(e);n.top()===r.top()&&n.left()===r.left()||dv(n.left(),n.top(),e)},gv=function(e){var t=H.none(),n=function(){t=H.some(uv(e))},r=function(){t.each(function(t){dv(t.left(),t.top(),e)})};return n(),{save:n,restore:r}},mv=function(e,t){cv&&V(e.dom().scrollIntoViewIfNeeded)?e.dom().scrollIntoViewIfNeeded(!1):e.dom().scrollIntoView(t)},vv=function(e,t){var n=t.dom().getBoundingClientRect(),r=e.dom().getBoundingClientRect();r.top<n.top?mv(e,!0):r.bottom>n.bottom&&mv(e,!1)},bv=function(){var e=We.fromHtml('<div style="width: 100px; height: 100px; overflow: scroll; position: absolute; top: -9999px;"></div>');pi.after(Vn.body(),e);var t=e.dom().offsetWidth-e.dom().clientWidth;return Ci.remove(e),t},yv={get:uv,to:dv,by:fv,preserve:pv,capture:gv,intoView:mv,intoViewIfNeeded:vv,setToElement:hv,scrollBarWidth:bv},wv=function(e,t,n,r,i,o,a){return Jt.eq(n,i)&&r===o?H.none():br.closest(n,"td,th",t).bind(function(n){return br.closest(i,"td,th",t).bind(function(r){return _v(e,t,n,r,a)})})},_v=function(e,t,n,r,i){return Jt.eq(n,r)?H.none():ba.identify(n,r,t).bind(function(t){var r=t.boxes().getOr([]);return r.length>0?(i(e,r,t.start(),t.finish()),H.some(ev.response(H.some(lv.makeSitus(n,0,n,Ki.getEnd(n))),!0))):H.none()})},xv=function(e,t,n,r,i){var o=function(e){return i.clear(n),i.selectRange(n,e.boxes(),e.start(),e.finish()),e.boxes()};return ba.shiftSelection(r,e,t,i.firstSelectedSelector(),i.lastSelectedSelector()).map(o)},Cv={sync:wv,detect:_v,update:xv},kv=ke(["left","top","right","bottom"],[]),Tv=function(e,t){return kv({left:e.left(),top:e.top()+t,right:e.right(),bottom:e.bottom()+t})},Sv=function(e,t){return kv({left:e.left(),top:e.top()-t,right:e.right(),bottom:e.bottom()-t})},Dv=function(e,t){var n=e.bottom()-e.top();return kv({left:e.left(),top:t-n,right:e.right(),bottom:t})},Ev=function(e,t){var n=e.bottom()-e.top();return kv({left:e.left(),top:t,right:e.right(),bottom:t+n})},Nv=function(e,t,n){return kv({left:e.left()+t,top:e.top()+n,right:e.right()+t,bottom:e.bottom()+n})},Av=function(e){return e.top()},Rv=function(e){return e.bottom()},Pv=function(e){return"("+e.left()+", "+e.top()+") -> ("+e.right()+", "+e.bottom()+")"},Ov={nu:kv,moveUp:Sv,moveDown:Tv,moveBottomTo:Dv,moveTopTo:Ev,getTop:Av,getBottom:Rv,translate:Nv,toString:Pv},Iv=function(e,t,n){return n>=0&&n<Ki.getEnd(t)?e.getRangedRect(t,n,t,n+1):n>0?e.getRangedRect(t,n-1,t,n):H.none()},Mv=function(e){return Ov.nu({left:e.left,top:e.top,right:e.right,bottom:e.bottom})},jv=function(e,t){return H.some(e.getRect(t))},Bv=function(e,t,n){return Rn.isElement(t)?jv(e,t).map(Mv):Rn.isText(t)?Iv(e,t,n).map(Mv):H.none()},Lv=function(e,t){return Rn.isElement(t)?jv(e,t).map(Mv):Rn.isText(t)?e.getRangedRect(t,0,t,Ki.getEnd(t)).map(Mv):H.none()},Fv={getBoxAt:Bv,getEntireBox:Lv},Hv=ve("item","mode"),$v=function(e,t,n,r){var i=void 0!==r?r:Uv;return e.property().parent(t).map(function(e){return Hv(e,i)})},Uv=function(e,t,n,r){var i=void 0!==r?r:zv;return n.sibling(e,t).map(function(e){return Hv(e,i)})},zv=function(e,t,n,r){var i=void 0!==r?r:zv,o=e.property().children(t);return n.first(o).map(function(e){return Hv(e,i)})},Wv=[{current:$v,next:Uv,fallback:H.none()},{current:Uv,next:zv,fallback:H.some($v)},{current:zv,next:zv,fallback:H.some(Uv)}],qv=function(e,t,n,r,i){var i=void 0!==i?i:Wv;return re(i,function(e){return e.current===n}).bind(function(n){return n.current(e,t,r,n.next).orThunk(function(){return n.fallback.bind(function(n){return qv(e,t,n,r)})})})},Vv={backtrack:$v,sidestep:Uv,advance:zv,go:qv},Yv=function(){return{sibling:function(e,t){return e.query().prevSibling(t)},first:function(e){return e.length>0?H.some(e[e.length-1]):H.none()}}},Gv=function(){return{sibling:function(e,t){return e.query().nextSibling(t)},first:function(e){return e.length>0?H.some(e[0]):H.none()}}},Kv={left:Yv,right:Gv},Xv=function(e,t,n,r,i,o){return Vv.go(e,t,r,i).bind(function(t){return o(t.item())?H.none():n(t.item())?H.some(t.item()):Xv(e,t.item(),n,t.mode(),i,o)})},Jv=function(e,t,n,r){return Xv(e,t,n,Vv.sidestep,Kv.left(),r)},Qv=function(e,t,n,r){return Xv(e,t,n,Vv.sidestep,Kv.right(),r)},Zv={left:Jv,right:Qv},eb=function(e,t){return 0===e.property().children(t).length},tb=function(e,t,n){return rb(e,t,E(eb,e),n)},nb=function(e,t,n){return ib(e,t,E(eb,e),n)},rb=function(e,t,n,r){return Zv.left(e,t,n,r)},ib=function(e,t,n,r){return Zv.right(e,t,n,r)},ob=function(){return{left:Kv.left,right:Kv.right}},ab=function(e,t,n,r,i){return Vv.go(e,t,n,r,i)},sb={before:tb,after:nb,seekLeft:rb,seekRight:ib,walkers:ob,walk:ab,backtrack:Vv.backtrack,sidestep:Vv.sidestep,advance:Vv.advance},lb=n(),cb=function(e,t,n){return sb.gather(lb,e,t,n)},ub=function(e,t){return sb.before(lb,e,t)},db=function(e,t){return sb.after(lb,e,t)},fb=function(e,t,n){return sb.seekLeft(lb,e,t,n)},hb=function(e,t,n){return sb.seekRight(lb,e,t,n)},pb=function(){return sb.walkers()},gb=function(e,t,n,r){return sb.walk(lb,e,t,n,r)},mb={gather:cb,before:ub,after:db,seekLeft:fb,seekRight:hb,walkers:pb,walk:gb},vb=Ta.generate([{none:[]},{retry:["caret"]}]),bb=function(e,t){return e.left()<t.left()||Math.abs(t.right()-e.left())<1||e.left()>t.right()},yb=function(e,t,n){return dr.closest(t,Fl.isBlock).fold(S(!1),function(t){return Fv.getEntireBox(e,t).exists(function(e){return bb(n,e)})})},wb=function(e,t,n,r,i){var o=Ov.moveDown(i,5);return Math.abs(n.bottom()-r.bottom())<1?vb.retry(o):n.top()>i.bottom()?vb.retry(o):n.top()===i.bottom()?vb.retry(Ov.moveDown(i,1)):yb(e,t,i)?vb.retry(Ov.translate(o,5,0)):vb.none()},_b=function(e,t,n,r,i){var o=Ov.moveUp(i,5);return Math.abs(n.top()-r.top())<1?vb.retry(o):n.bottom()<i.top()?vb.retry(o):n.bottom()===i.top()?vb.retry(Ov.moveUp(i,1)):yb(e,t,i)?vb.retry(Ov.translate(o,5,0)):vb.none()},xb={point:Ov.getTop,adjuster:_b,move:Ov.moveUp,gather:mb.before},Cb={point:Ov.getBottom,adjuster:wb,move:Ov.moveDown,gather:mb.after},kb=function(e,t,n){return e.elementFromPoint(t,n).filter(function(e){return"table"===Rn.name(e)}).isSome()},Tb=function(e,t,n,r,i){return Sb(e,t,n,t.move(r,5),i)},Sb=function(e,t,n,r,i){return 0===i?H.some(r):kb(e,r.left(),t.point(r))?Tb(e,t,n,r,i-1):e.situsFromPoint(r.left(),t.point(r)).bind(function(o){return o.start().fold(H.none,function(o,a){return Fv.getEntireBox(e,o,a).bind(function(a){return t.adjuster(e,o,a,n,r).fold(H.none,function(r){return Sb(e,t,n,r,i-1)})}).orThunk(function(){return H.some(r)})},H.none)})},Db=function(e,t){return e.situsFromPoint(t.left(),t.bottom()+5)},Eb=function(e,t){return e.situsFromPoint(t.left(),t.top()-5)},Nb=function(e,t,n){return e.point(t)>n.getInnerHeight()?H.some(e.point(t)-n.getInnerHeight()):e.point(t)<0?H.some(-e.point(t)):H.none()},Ab=function(e,t,n){var r=e.move(n,5),i=Sb(t,e,n,r,100).getOr(r);return Nb(e,i,t).fold(function(){return t.situsFromPoint(i.left(),e.point(i))},function(n){return t.scrollBy(0,n),t.situsFromPoint(i.left(),e.point(i)-n)})},Rb={tryUp:E(Ab,xb),tryDown:E(Ab,Cb),ieTryUp:Eb,ieTryDown:Db,getJumpSize:S(5)},Pb=Ta.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),Ob=function(e,t,n){var r=e.getRect(t),i=e.getRect(n);return i.right>r.left&&i.left<r.right},Ib=function(e,t,n,r,i,o,a){return br.closest(r,"td,th",a).bind(function(n){return br.closest(t,"td,th",a).map(function(t){return Jt.eq(n,t)?Jt.eq(r,n)&&Ki.getEnd(n)===i?o(t):Pb.none("in same cell"):qo.sharedOne(Mb,[n,t]).fold(function(){return Ob(e,t,n)?Pb.success():o(t)},function(e){return o(t)})})}).getOr(Pb.none("default"))},Mb=function(e){return br.closest(e,"tr")},jb=function(e,t,n,r,i){return e.fold(t,n,r,i)},Bb={verify:Ib,cata:jb,adt:Pb},Lb=ve("element","offset"),Fb=ve("element","deltaOffset"),Hb=ve("element","start","finish"),$b=ve("begin","end"),Ub=ve("element","text"),zb={point:Lb,delta:Fb,range:Hb,points:$b,text:Ub},Wb=ve("ancestor","descendants","element","index"),qb=ve("parent","children","element","index"),Vb=function(e,t){return dr.closest(e,function(e){return yn.parent(e).exists(function(e){return Jt.eq(e,t)})})},Yb=function(e){return yn.parent(e).bind(function(t){var n=yn.children(t);return Gb(n,e).map(function(r){return qb(t,n,e,r)})})},Gb=function(e,t){return ie(e,E(Jt.eq,t))},Kb=function(e,t){return yn.parent(e).bind(function(n){var r=ir.children(n,t);return Gb(r,e).map(function(t){return qb(n,r,e,t)})})},Xb=function(e,t,n){return br.closest(e,t).bind(function(t){var r=ir.descendants(t,n);return Gb(r,e).map(function(n){return Wb(t,r,e,n)})})},Jb={childOf:Vb,indexOf:Gb,indexInParent:Yb,selectorsInParent:Kb,descendantsInAncestor:Xb},Qb=function(e){return"br"===Rn.name(e)},Zb=function(e,t,n){return t(e,n).bind(function(e){return Rn.isText(e)&&0===Ui.get(e).trim().length?Zb(e,t,n):H.some(e)})},ey=function(e,t,n){return n.traverse(t).orThunk(function(){return Zb(t,n.gather,e)}).map(n.relative)},ty=function(e,t){return yn.child(e,t).filter(Qb).orThunk(function(){return yn.child(e,t-1).filter(Qb)})},ny=function(e,t,n,r){return ty(t,n).bind(function(t){return r.traverse(t).fold(function(){return Zb(t,r.gather,e).map(r.relative)},function(e){return Jb.indexInParent(e).map(function(e){return sg.on(e.parent(),e.index())})})})},ry=function(e,t,n,r){return(Qb(t)?ey(e,t,r):ny(e,t,n,r)).map(function(e){return{start:S(e),finish:S(e)}})},iy=function(e){return Bb.cata(e,function(e){return H.none()},function(){return H.none()},function(e){return H.some(zb.point(e,0))},function(e){return H.some(zb.point(e,Ki.getEnd(e)))})},oy={tryBr:ry,process:iy},ay=zt.detect(),sy=function(e,t,n){return e.getSelection().bind(function(r){return oy.tryBr(t,r.finish(),r.foffset(),n).fold(function(){return H.some(zb.point(r.finish(),r.foffset()))},function(i){var o=e.fromSitus(i),a=Bb.verify(e,r.finish(),r.foffset(),o.finish(),o.foffset(),n.failure,t);return oy.process(a)})})},ly=function(e,t,n,r,i,o){return 0===o?H.none():dy(e,t,n,r,i).bind(function(a){var s=e.fromSitus(a),l=Bb.verify(e,n,r,s.finish(),s.foffset(),i.failure,t);return Bb.cata(l,function(){return H.none()},function(){return H.some(a)},function(a){return Jt.eq(n,a)&&0===r?cy(e,n,r,Ov.moveUp,i):ly(e,t,a,0,i,o-1)},function(a){return Jt.eq(n,a)&&r===Ki.getEnd(a)?cy(e,n,r,Ov.moveDown,i):ly(e,t,a,Ki.getEnd(a),i,o-1)})})},cy=function(e,t,n,r,i){return Fv.getBoxAt(e,t,n).bind(function(t){return uy(e,i,r(t,Rb.getJumpSize()))})},uy=function(e,t,n){return ay.browser.isChrome()||ay.browser.isSafari()||ay.browser.isFirefox()||ay.browser.isEdge()?t.otherRetry(e,n):ay.browser.isIE()?t.ieRetry(e,n):H.none()},dy=function(e,t,n,r,i){return Fv.getBoxAt(e,n,r).bind(function(t){return uy(e,i,t)})},fy=function(e,t,n){return sy(e,t,n).bind(function(r){return ly(e,t,r.element(),r.offset(),n,20).map(e.fromSitus)})},hy={handle:fy},py=function(e){return dr.first(e).isSome()},gy=function(e,t,n){return dr.ancestor(e,t,n).isSome()},my=function(e,t,n){return dr.closest(e,t,n).isSome()},vy=function(e,t){return dr.sibling(e,t).isSome()},by=function(e,t){return dr.child(e,t).isSome()},yy=function(e,t){return dr.descendant(e,t).isSome()},wy={any:py,ancestor:gy,closest:my,sibling:vy,child:by,descendant:yy},_y=zt.detect(),xy=function(e,t){return wy.ancestor(e,function(e){return yn.parent(e).exists(function(e){return Jt.eq(e,t)})})},Cy=function(e,t,n,r,i){return br.closest(r,"td,th",t).bind(function(r){return br.closest(r,"table",t).bind(function(o){return xy(i,o)?hy.handle(e,t,n).bind(function(e){return br.closest(e.finish(),"td,th",t).map(function(t){return{start:S(r),finish:S(t),range:S(e)}})}):H.none()})})},ky=function(e,t,n,r,i,o){return _y.browser.isIE()?H.none():o(r,t).orThunk(function(){return Cy(e,t,n,r,i).map(function(e){var t=e.range();return ev.response(H.some(lv.makeSitus(t.start(),t.soffset(),t.finish(),t.foffset())),!0)})})},Ty=function(e,t){return br.closest(e,"tr",t).bind(function(e){return br.closest(e,"table",t).bind(function(n){var r=ir.descendants(n,"tr");return Jt.eq(e,r[0])?mb.seekLeft(n,function(e){return Zi.last(e).isSome()},t).map(function(e){var t=Ki.getEnd(e);return ev.response(H.some(lv.makeSitus(e,t,e,t)),!0)}):H.none()})})},Sy=function(e,t){return br.closest(e,"tr",t).bind(function(e){return br.closest(e,"table",t).bind(function(n){var r=ir.descendants(n,"tr");return Jt.eq(e,r[r.length-1])?mb.seekRight(n,function(e){return Zi.first(e).isSome()},t).map(function(e){return ev.response(H.some(lv.makeSitus(e,0,e,0)),!0)}):H.none()})})},Dy=function(e,t,n,r,i,o,a){return Cy(e,n,r,i,o).bind(function(e){return Cv.detect(t,n,e.start(),e.finish(),a)})},Ey={navigate:ky,select:Dy,firstUpCheck:Ty,lastDownCheck:Sy},Ny=function(e,t){return br.closest(e,"td,th",t)},Ay={down:{traverse:yn.nextSibling,gather:mb.after,relative:sg.before,otherRetry:Rb.tryDown,ieRetry:Rb.ieTryDown,failure:Bb.adt.failedDown},up:{traverse:yn.prevSibling,gather:mb.before,relative:sg.before,otherRetry:Rb.tryUp,ieRetry:Rb.ieTryUp,failure:Bb.adt.failedUp}},Ry=ve("rows","cols"),Py=function(e,t,n,r){var i=b(e),o=y(i,t,n,r);return{mousedown:o.mousedown,mouseover:o.mouseover,mouseup:o.mouseup}},Oy=function(e,t,n,r){var i=b(e),o=function(){return r.clear(t),H.none()};return{keydown:function(e,a,s,l,c,u){var d=e.raw().which,f=!0===e.raw().shiftKey;return ba.retrieve(t,r.selectedSelector()).fold(function(){return ov.isDown(d)&&f?E(Ey.select,i,t,n,Ay.down,l,a,r.selectRange):ov.isUp(d)&&f?E(Ey.select,i,t,n,Ay.up,l,a,r.selectRange):ov.isDown(d)?E(Ey.navigate,i,n,Ay.down,l,a,Ey.lastDownCheck):ov.isUp(d)?E(Ey.navigate,i,n,Ay.up,l,a,Ey.firstUpCheck):H.none},function(e){var n=function(n){return function(){return Vl(n,function(n){return Cv.update(n.rows(),n.cols(),t,e,r)}).fold(function(){return ba.getEdges(t,r.firstSelectedSelector(),r.lastSelectedSelector()).map(function(e){var n=ov.isDown(d)||u.isForward(d)?sg.after:sg.before;return i.setRelativeSelection(sg.on(e.first(),0),n(e.table())),r.clear(t),ev.response(H.none(),!0)})},function(e){return H.some(ev.response(H.none(),!0))})}};return ov.isDown(d)&&f?n([Ry(1,0)]):ov.isUp(d)&&f?n([Ry(-1,0)]):u.isBackward(d)&&f?n([Ry(0,-1),Ry(-1,0)]):u.isForward(d)&&f?n([Ry(0,1),Ry(1,0)]):ov.isNavigation(d)&&!1===f?o:H.none})()},keyup:function(e,i,o,a,s){return ba.retrieve(t,r.selectedSelector()).fold(function(){var l=e.raw().which;return 0==(!0===e.raw().shiftKey)?H.none():ov.isNavigation(l)?Cv.sync(t,n,i,o,a,s,r.selectRange):H.none()},H.none)}}},Iy={mouse:Py,keyboard:Oy},My=function(e,t){Q(t,function(t){Wc.add(e,t)})},jy=function(e,t){Q(t,function(t){Wc.remove(e,t)})},By=function(e,t){Q(t,function(t){Wc.toggle(e,t)})},Ly=function(e,t){return ce(t,function(t){return Wc.has(e,t)})},Fy=function(e,t){return X(t,function(t){return Wc.has(e,t)})},Hy=function(e){for(var t=e.dom().classList,n=new Array(t.length),r=0;r<t.length;r++)n[r]=t.item(r);return n},$y=function(e){return Bc.supports(e)?Hy(e):Bc.get(e)},Uy={add:My,remove:jy,toggle:By,hasAll:Ly,hasAny:Fy,get:$y},zy=function(e){return function(t){Wc.add(t,e)}},Wy=function(e){return function(t){Wc.remove(t,e)}},qy=function(e){return function(t){Uy.remove(t,e)}},Vy=function(e){return function(t){return Wc.has(t,e)}},Yy={addClass:zy,removeClass:Wy,removeClasses:qy,hasClass:Vy},Gy=function(e){var t=Yy.addClass(e.selected()),n=Yy.removeClasses([e.selected(),e.lastSelected(),e.firstSelected()]),r=function(t){var r=ir.descendants(t,e.selectedSelector());Q(r,n)};return{clear:r,selectRange:function(n,i,o,a){r(n),Q(i,t),Wc.add(o,e.firstSelected()),Wc.add(a,e.lastSelected())},selectedSelector:e.selectedSelector,firstSelectedSelector:e.firstSelectedSelector,lastSelectedSelector:e.lastSelectedSelector}},Ky=function(e){var t=function(t){Un.remove(t,e.selected()),Un.remove(t,e.firstSelected()),Un.remove(t,e.lastSelected())},n=function(t){Un.set(t,e.selected(),"1")},r=function(n){var r=ir.descendants(n,e.selectedSelector());Q(r,t)};return{clear:r,selectRange:function(t,i,o,a){r(t),Q(i,n),Un.set(o,e.firstSelected(),"1"),Un.set(a,e.lastSelected(),"1")},selectedSelector:e.selectedSelector,firstSelectedSelector:e.firstSelectedSelector,lastSelectedSelector:e.lastSelectedSelector}},Xy={byClass:Gy,byAttr:Ky},Jy=function(e){return!1===Wc.has(We.fromDom(e.target),"ephox-snooker-resizer-bar")},Qy=function(e){return{get:function(){var t=yf(e);return _a.retrieve(t,Ca.selectedSelector()).fold(function(){return void 0===e.selection.getStart()?Ea.none():Ea.single(e.selection)},function(e){return Ea.multiple(e)})}}},Zy=sh.each,ew=function(e){function t(t){return function(){e.execCommand(t)}}var n=[];Zy("inserttable tableprops deletetable | cell row column".split(" "),function(t){"|"===t?n.push({text:"-"}):n.push(e.menuItems[t])}),e.addButton("table",{type:"menubutton",title:"Table",menu:n}),e.addButton("tableprops",{title:"Table properties",onclick:t("mceTableProps"),icon:"table"}),e.addButton("tabledelete",{title:"Delete table",onclick:t("mceTableDelete")}),e.addButton("tablecellprops",{title:"Cell properties",onclick:t("mceTableCellProps")}),e.addButton("tablemergecells",{title:"Merge cells",onclick:t("mceTableMergeCells")}),e.addButton("tablesplitcells",{title:"Split cell",onclick:t("mceTableSplitCells")}),e.addButton("tableinsertrowbefore",{title:"Insert row before",onclick:t("mceTableInsertRowBefore")}),e.addButton("tableinsertrowafter",{title:"Insert row after",onclick:t("mceTableInsertRowAfter")}),e.addButton("tabledeleterow",{title:"Delete row",onclick:t("mceTableDeleteRow")}),e.addButton("tablerowprops",{title:"Row properties",onclick:t("mceTableRowProps")}),e.addButton("tablecutrow",{title:"Cut row",onclick:t("mceTableCutRow")}),e.addButton("tablecopyrow",{title:"Copy row",onclick:t("mceTableCopyRow")}),e.addButton("tablepasterowbefore",{title:"Paste row before",onclick:t("mceTablePasteRowBefore")}),e.addButton("tablepasterowafter",{title:"Paste row after",onclick:t("mceTablePasteRowAfter")}),e.addButton("tableinsertcolbefore",{title:"Insert column before",onclick:t("mceTableInsertColBefore")}),e.addButton("tableinsertcolafter",{title:"Insert column after",onclick:t("mceTableInsertColAfter")}),e.addButton("tabledeletecol",{title:"Delete column",onclick:t("mceTableDeleteCol")})},tw=function(e){var t=function(t){return e.dom.is(t,"table")&&e.getBody().contains(t)},n=Zf(e);n.length>0&&e.addContextToolbar(t,n.join(" "))},nw={addButtons:ew,addToolbars:tw},rw=function(e,t){function n(t){return function(){e.execCommand(t)}}var r=H.none(),i=[],o=[],a=[],s=[],l=function(e){e.disabled(!0)},c=function(e){e.disabled(!1)},u=function(){var e=this;i.push(e),r.fold(function(){l(e)},function(t){c(e)})},d=function(){var e=this;o.push(e),r.fold(function(){l(e)},function(t){c(e)})},f=function(){var e=this;a.push(e),r.fold(function(){l(e)},function(t){e.disabled(t.mergable().isNone())})},h=function(){var e=this;s.push(e),r.fold(function(){l(e)},function(t){e.disabled(t.unmergable().isNone())})},p=function(){r.fold(function(){Q(i,l),Q(o,l),Q(a,l),Q(s,l)},function(e){Q(i,c),Q(o,c),Q(a,function(t){t.disabled(e.mergable().isNone())}),Q(s,function(t){t.disabled(e.unmergable().isNone())})})};e.on("init",function(){e.on("nodechange",function(n){var i=H.from(e.dom.getParent(e.selection.getStart(),"th,td"));r=i.bind(function(e){var n=We.fromDom(e);return Pr.table(n).map(function(e){return La.forMenu(t,e,n)})}),p()})});var g=function(e,t,n,r){var i,o,a,s,l,c=r.getEl().getElementsByTagName("table")[0],u=r.isRtl()||"tl-tr"===r.parent().rel;for(c.nextSibling.innerHTML=t+1+" x "+(n+1),u&&(t=9-t),o=0;o<10;o++)for(i=0;i<10;i++)s=c.rows[o].childNodes[i].firstChild,l=(u?i>=t:i<=t)&&o<=n,e.dom.toggleClass(s,"mce-active",l),l&&(a=s);return a.parentNode},m=!1===Wf(e)?{text:"Table",icon:"table",context:"table",onclick:n("mceInsertTable")}:{text:"Table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(t){t.aria&&(this.parent().hideAll(),t.stopImmediatePropagation(),e.execCommand("mceInsertTable"))},onshow:function(){g(e,0,0,this.menu.items()[0])},onhide:function(){var t=this.menu.items()[0].getEl().getElementsByTagName("a");e.dom.removeClass(t,"mce-active"),e.dom.addClass(t[0],"mce-active")},menu:[{type:"container",html:function(){var e="";e='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">';for(var t=0;t<10;t++){e+="<tr>";for(var n=0;n<10;n++)e+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*t+n)+'" href="#" data-mce-x="'+n+'" data-mce-y="'+t+'"></a></td>';e+="</tr>"}return e+="</table>",e+='<div class="mce-text-center" role="presentation">1 x 1</div>'}(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(t){var n,r,i=t.target;"A"===i.tagName.toUpperCase()&&(n=parseInt(i.getAttribute("data-mce-x"),10),r=parseInt(i.getAttribute("data-mce-y"),10),(this.isRtl()||"tl-tr"===this.parent().rel)&&(n=9-n),n===this.lastX&&r===this.lastY||(g(e,n,r,t.control),this.lastX=n,this.lastY=r))},onclick:function(t){var n=this;"A"===t.target.tagName.toUpperCase()&&(t.preventDefault(),t.stopPropagation(),n.parent().cancel(),e.undoManager.transact(function(){Yh.insert(e,n.lastX+1,n.lastY+1)}),e.addVisual())}}]},v={text:"Table properties",context:"table",onPostRender:u,onclick:n("mceTableProps")},b={text:"Delete table",context:"table",onPostRender:u,cmd:"mceTableDelete"},y={text:"Row",context:"table",menu:[{text:"Insert row before",onclick:n("mceTableInsertRowBefore"),onPostRender:d},{text:"Insert row after",onclick:n("mceTableInsertRowAfter"),onPostRender:d},{text:"Delete row",onclick:n("mceTableDeleteRow"),onPostRender:d},{text:"Row properties",onclick:n("mceTableRowProps"),onPostRender:d},{text:"-"},{text:"Cut row",onclick:n("mceTableCutRow"),onPostRender:d},{text:"Copy row",onclick:n("mceTableCopyRow"),onPostRender:d},{text:"Paste row before",onclick:n("mceTablePasteRowBefore"),onPostRender:d},{text:"Paste row after",onclick:n("mceTablePasteRowAfter"),onPostRender:d}]},w={text:"Column",context:"table",menu:[{text:"Insert column before",onclick:n("mceTableInsertColBefore"),onPostRender:d},{text:"Insert column after",onclick:n("mceTableInsertColAfter"),onPostRender:d},{text:"Delete column",onclick:n("mceTableDeleteCol"),onPostRender:d}]},_={separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:n("mceTableCellProps"),onPostRender:d},{text:"Merge cells",onclick:n("mceTableMergeCells"),onPostRender:f},{text:"Split cell",onclick:n("mceTableSplitCells"),onPostRender:h}]};e.addMenuItem("inserttable",m),e.addMenuItem("tableprops",v),e.addMenuItem("deletetable",b),e.addMenuItem("row",y),e.addMenuItem("column",w),e.addMenuItem("cell",_)},iw={addMenuItems:rw},ow=function(e){return e.get().fold(function(){},function(e){return J(e,function(e){return e.dom()})})},aw=function(e,t){var n=J(e,We.fromDom);t.set(H.from(n))},sw=function(e,t){return{insertTable:function(t,n){return Yh.insert(e,t,n)},setClipboardRows:function(e){return aw(e,t)},getClipboardRows:function(){return ow(t)}}};C.add("table",_)}()}(),function(){!function(){"use strict";function e(){}var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=new Array(arguments.length-1),i=1;i<arguments.length;i++)r[i-1]=arguments[i];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var i=new Array(arguments.length),o=0;o<i.length;o++)i[o]=arguments[o];var a=r.concat(i);return e.apply(null,a)}},r=tinymce.util.Tools.resolve("tinymce.util.Tools"),i=tinymce.util.Tools.resolve("tinymce.util.XHR"),o=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),a=function(e){return e.getParam("template_cdate_classes","cdate")},s=function(e){return e.getParam("template_mdate_classes","mdate")},l=function(e){return e.getParam("template_selected_content_classes","selcontent")},c=function(e){return e.getParam("template_preview_replace_values")},u=function(e){return e.getParam("template_replace_values")},d=function(e){return e.templates},f=function(e){return e.getParam("template_cdate_format",e.getLang("template.cdate_format"))},h=function(e){return e.getParam("template_mdate_format",e.getLang("template.mdate_format"))},p=function(e){return e.getParam("template_popup_width",600)},g=function(e){return Math.min(o.DOM.getViewPort().h,e.getParam("template_popup_height",500))},m={getCreationDateClasses:a,getModificationDateClasses:s,getSelectedContentClasses:l,getPreviewReplaceValues:c,getTemplateReplaceValues:u,getTemplates:d,getCdateFormat:f,getMdateFormat:h,getDialogWidth:p,getDialogHeight:g},v=function(e,t){if(e=""+e,e.length<t)for(var n=0;n<t-e.length;n++)e="0"+e;return e},b=function(e,t,n){var r="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),i="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),o="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),a="January February March April May June July August September October November December".split(" ");return n=n||new Date,t=t.replace("%D","%m/%d/%Y"),t=t.replace("%r","%I:%M:%S %p"),t=t.replace("%Y",""+n.getFullYear()),t=t.replace("%y",""+n.getYear()),t=t.replace("%m",v(n.getMonth()+1,2)),t=t.replace("%d",v(n.getDate(),2)),t=t.replace("%H",""+v(n.getHours(),2)),t=t.replace("%M",""+v(n.getMinutes(),2)),t=t.replace("%S",""+v(n.getSeconds(),2)),t=t.replace("%I",""+((n.getHours()+11)%12+1)),t=t.replace("%p",n.getHours()<12?"AM":"PM"),t=t.replace("%B",""+e.translate(a[n.getMonth()])),t=t.replace("%b",""+e.translate(o[n.getMonth()])),t=t.replace("%A",""+e.translate(i[n.getDay()])),t=t.replace("%a",""+e.translate(r[n.getDay()])),t=t.replace("%%","%")},y={getDateTime:b},w=function(e,t){return function(){var n=m.getTemplates(e);if("function"==typeof n)return void n(t);"string"==typeof n?i.send({url:n,success:function(e){t(JSON.parse(e))}}):t(n)}},_=function(e,t,n){return r.each(n,function(e,n){"function"==typeof e&&(e=e(n)),t=t.replace(new RegExp("\\{\\$"+n+"\\}","g"),e)}),t},x=function(e,t){var n=e.dom,i=m.getTemplateReplaceValues(e);r.each(n.select("*",t),function(e){r.each(i,function(t,r){n.hasClass(e,r)&&"function"==typeof i[r]&&i[r](e)})})},C=function(e,t){return new RegExp("\\b"+t+"\\b","g").test(e.className)},k=function(e,t,n){var i,o,a=e.dom,s=e.selection.getContent();n=_(0,n,m.getTemplateReplaceValues(e)),i=a.create("div",null,n),o=a.select(".mceTmpl",i),o&&o.length>0&&(i=a.create("div",null),i.appendChild(o[0].cloneNode(!0))),r.each(a.select("*",i),function(t){C(t,m.getCreationDateClasses(e).replace(/\s+/g,"|"))&&(t.innerHTML=y.getDateTime(e,m.getCdateFormat(e))),C(t,m.getModificationDateClasses(e).replace(/\s+/g,"|"))&&(t.innerHTML=y.getDateTime(e,m.getMdateFormat(e))),C(t,m.getSelectedContentClasses(e).replace(/\s+/g,"|"))&&(t.innerHTML=s)}),x(e,i),e.execCommand("mceInsertContent",!1,i.innerHTML),e.addVisual()},T={createTemplateList:w,replaceTemplateValues:_,replaceVals:x,insertTemplate:k},S=function(e){e.addCommand("mceInsertTemplate",n(T.insertTemplate,e))},D={register:S},E=function(e){e.on("PreProcess",function(t){var n=e.dom,i=m.getMdateFormat(e);r.each(n.select("div",t.node),function(t){n.hasClass(t,"mceTmpl")&&(r.each(n.select("*",t),function(t){n.hasClass(t,e.getParam("template_mdate_classes","mdate").replace(/\s+/g,"|"))&&(t.innerHTML=y.getDateTime(e,i))}),T.replaceVals(e,t))})})},N={setup:E},A=function(e,t,n){if(-1===n.indexOf("<html>")){var i="";r.each(e.contentCSS,function(t){i+='<link type="text/css" rel="stylesheet" href="'+e.documentBaseURI.toAbsolute(t)+'">'});var o=e.settings.body_class||"";-1!==o.indexOf("=")&&(o=e.getParam("body_class","","hash"),o=o[e.id]||""),n="<!DOCTYPE html><html><head>"+i+'</head><body class="'+o+'">'+n+"</body></html>"}n=T.replaceTemplateValues(e,n,m.getPreviewReplaceValues(e));var a=t.find("iframe")[0].getEl().contentWindow.document;a.open(),a.write(n),a.close()},R=function(e,t){var n,o,a=[];if(!t||0===t.length){var s=e.translate("No templates defined.");return void e.notificationManager.open({text:s,type:"info"})}r.each(t,function(e){a.push({selected:!a.length,text:e.title,value:{url:e.url,content:e.content,description:e.description}})});var l=function(t){var r=t.control.value();r.url?i.send({url:r.url,success:function(t){o=t,A(e,n,o)}}):(o=r.content,A(e,n,o)),n.find("#description")[0].text(t.control.value().description)};n=e.windowManager.open({title:"Insert template",layout:"flex",direction:"column",align:"stretch",padding:15,spacing:10,items:[{type:"form",flex:0,padding:0,items:[{type:"container",label:"Templates",items:{type:"listbox",label:"Templates",name:"template",values:a,onselect:l}}]},{type:"label",name:"description",label:"Description",text:""},{type:"iframe",flex:1,border:1}],onsubmit:function(){T.insertTemplate(e,!1,o)},minWidth:m.getDialogWidth(e),minHeight:m.getDialogHeight(e)}),n.find("listbox")[0].fire("select")},P={open:R},O=function(e){return function(t){P.open(e,t)}},I=function(e){e.addButton("template",{title:"Insert template",onclick:T.createTemplateList(e.settings,O(e))}),e.addMenuItem("template",{text:"Template",onclick:T.createTemplateList(e.settings,O(e)),icon:"template",context:"insert"})},M={register:I};t.add("template",function(e){M.register(e),D.register(e),N.setup(e)})}()}(),function(){!function(){"use strict";function e(){}var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(e,t){var n;return e.dom.getParents(e.selection.getStart(),function(e){var r;(r=e.style["forecolor"===t?"color":"background-color"])&&(n=r)}),n},r=function(e){var t,n=[];for(t=0;t<e.length;t+=2)n.push({text:e[t+1],color:"#"+e[t]});return n},i=function(e,t,n){e.undoManager.transact(function(){e.focus(),e.formatter.apply(t,{value:n}),e.nodeChanged()})},o=function(e,t){e.undoManager.transact(function(){e.focus(),e.formatter.remove(t,{value:null},null,!0),e.nodeChanged()})},a={getCurrentColor:n,mapColors:r,applyFormat:i,removeFormat:o},s=function(e){e.addCommand("mceApplyTextcolor",function(t,n){a.applyFormat(e,t,n)}),e.addCommand("mceRemoveTextcolor",function(t){a.removeFormat(e,t)})},l={register:s},c=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),u=tinymce.util.Tools.resolve("tinymce.util.Tools"),d=["000000","Black","993300","Burnt orange","333300","Dark olive","003300","Dark green","003366","Dark azure","000080","Navy Blue","333399","Indigo","333333","Very dark gray","800000","Maroon","FF6600","Orange","808000","Olive","008000","Green","008080","Teal","0000FF","Blue","666699","Grayish blue","808080","Gray","FF0000","Red","FF9900","Amber","99CC00","Yellow green","339966","Sea green","33CCCC","Turquoise","3366FF","Royal blue","800080","Purple","999999","Medium gray","FF00FF","Magenta","FFCC00","Gold","FFFF00","Yellow","00FF00","Lime","00FFFF","Aqua","00CCFF","Sky blue","993366","Red violet","FFFFFF","White","FF99CC","Pink","FFCC99","Peach","FFFF99","Light yellow","CCFFCC","Pale green","CCFFFF","Pale cyan","99CCFF","Light sky blue","CC99FF","Plum"],f=function(e){return e.getParam("textcolor_map",d)},h=function(e){return e.getParam("forecolor_map",f(e))},p=function(e){return e.getParam("backcolor_map",f(e))},g=function(e){return e.getParam("textcolor_rows",5)},m=function(e){return e.getParam("textcolor_cols",8)},v=function(e){return e.getParam("forecolor_rows",g(e))},b=function(e){return e.getParam("backcolor_rows",g(e))},y=function(e){return e.getParam("forecolor_cols",m(e))},w=function(e){return e.getParam("backcolor_cols",m(e))},_=function(e){return e.getParam("color_picker_callback",null)},x=function(e){return"function"==typeof _(e)},C={getForeColorMap:h,getBackColorMap:p,getForeColorRows:v,getBackColorRows:b,getForeColorCols:y,getBackColorCols:w,getColorPickerCallback:_,hasColorPicker:x},k=tinymce.util.Tools.resolve("tinymce.util.I18n"),T=function(e,t,n,r){var i,o,s,l,u,d,f,h=0,p=c.DOM.uniqueId("mcearia"),g=function(e,t){var n="transparent"===e;return'<td class="mce-grid-cell'+(n?" mce-colorbtn-trans":"")+'"><div id="'+p+"-"+h+++'" data-mce-color="'+(e||"")+'" role="option" tabIndex="-1" style="'+(e?"background-color: "+e:"")+'" title="'+k.translate(t)+'">'+(n?"&#215;":"")+"</div></td>"}
;for(i=a.mapColors(n),i.push({text:k.translate("No color"),color:"transparent"}),s='<table class="mce-grid mce-grid-border mce-colorbutton-grid" role="list" cellspacing="0"><tbody>',l=i.length-1,d=0;d<t;d++){for(s+="<tr>",u=0;u<e;u++)f=d*e+u,f>l?s+="<td></td>":(o=i[f],s+=g(o.color,o.text));s+="</tr>"}if(r){for(s+='<tr><td colspan="'+e+'" class="mce-custom-color-btn"><div id="'+p+'-c" class="mce-widget mce-btn mce-btn-small mce-btn-flat" role="button" tabindex="-1" aria-labelledby="'+p+'-c" style="width: 100%"><button type="button" role="presentation" tabindex="-1">'+k.translate("Custom...")+"</button></div></td></tr>",s+="<tr>",u=0;u<e;u++)s+=g("","Custom color");s+="</tr>"}return s+="</tbody></table>"},S={getHtml:T},D=function(e,t){e.style.background=t,e.setAttribute("data-mce-color",t)},E=function(e){return function(t){var n=t.control;n._color?e.execCommand("mceApplyTextcolor",n.settings.format,n._color):e.execCommand("mceRemoveTextcolor",n.settings.format)}},N=function(e,t){return function(n){var r,i=this.parent(),o=a.getCurrentColor(e,i.settings.format),s=function(t){e.execCommand("mceApplyTextcolor",i.settings.format,t),i.hidePanel(),i.color(t)};if(c.DOM.getParent(n.target,".mce-custom-color-btn")){i.hidePanel();C.getColorPickerCallback(e).call(e,function(e){var n,r,o,a=i.panel.getEl().getElementsByTagName("table")[0];for(n=u.map(a.rows[a.rows.length-1].childNodes,function(e){return e.firstChild}),o=0;o<n.length&&(r=n[o],r.getAttribute("data-mce-color"));o++);if(o===t)for(o=0;o<t-1;o++)D(n[o],n[o+1].getAttribute("data-mce-color"));D(r,e),s(e)},o)}r=n.target.getAttribute("data-mce-color"),r?(this.lastId&&c.DOM.get(this.lastId).setAttribute("aria-selected","false"),n.target.setAttribute("aria-selected",!0),this.lastId=n.target.id,"transparent"===r?function(){e.execCommand("mceRemoveTextcolor",i.settings.format),i.hidePanel(),i.resetColor()}():s(r)):null!==r&&i.hidePanel()}},A=function(e,t){return function(){var n=t?C.getForeColorCols(e):C.getBackColorCols(e),r=t?C.getForeColorRows(e):C.getBackColorRows(e),i=t?C.getForeColorMap(e):C.getBackColorMap(e),o=C.hasColorPicker(e);return S.getHtml(n,r,i,o)}},R=function(e){e.addButton("forecolor",{type:"colorbutton",tooltip:"Text color",format:"forecolor",panel:{role:"application",ariaRemember:!0,html:A(e,!0),onclick:N(e,C.getForeColorCols(e))},onclick:E(e)}),e.addButton("backcolor",{type:"colorbutton",tooltip:"Background color",format:"hilitecolor",panel:{role:"application",ariaRemember:!0,html:A(e,!1),onclick:N(e,C.getBackColorCols(e))},onclick:E(e)})},P={register:R};t.add("textcolor",function(e){l.register(e),P.register(e)})}()}(),function(){!function(){"use strict";function e(e,t){var n,r;n=D.applyInlineFormatEnter(e,t),n&&(r=e.dom.createRng(),r.setStart(n,n.data.length),r.setEnd(n,n.data.length),e.selection.setRng(r)),D.applyBlockFormat(e,t)}function t(e,t){var n,r,i,o,a;(n=D.applyInlineFormatSpace(e,t))&&(a=e.dom,r=n.data.slice(-1),/[\u00a0 ]/.test(r)&&(n.deleteData(n.data.length-1,1),i=a.doc.createTextNode(r),a.insertAfter(i,n.parentNode),o=a.createRng(),o.setStart(i,1),o.setEnd(i,1),e.selection.setRng(o)))}function n(){}var r=function(e){var t=e,n=function(){return t};return{get:n,set:function(e){t=e},clone:function(){return r(n())}}},i=tinymce.util.Tools.resolve("tinymce.PluginManager"),o=function(e){return{setPatterns:function(t){e.set(t)},getPatterns:function(){return e.get()}}},a={get:o},s=[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"***",end:"***",format:["bold","italic"]},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}],l=function(e){return void 0!==e.textpattern_patterns?e.textpattern_patterns:s},c={getPatterns:l},u=tinymce.util.Tools.resolve("tinymce.util.Delay"),d=tinymce.util.Tools.resolve("tinymce.util.VK"),f=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),h=tinymce.util.Tools.resolve("tinymce.util.Tools"),p=function(e){return e.sort(function(e,t){return e.start.length>t.start.length?-1:e.start.length<t.start.length?1:0})},g=function(e,t){for(var n=0;n<e.length;n++)if(0===t.indexOf(e[n].start)&&(!e[n].end||t.lastIndexOf(e[n].end)===t.length-e[n].end.length))return e[n]},m=function(e,t,n,r){return t.substr(n-e.end.length-r,e.end.length)===e.end},v=function(e,t,n){return e-t-n.end.length-n.start.length>0},b=function(e,t,n,r){var i,o,a=p(e);for(o=0;o<a.length;o++)if(i=a[o],void 0!==i.end&&m(i,t,n,r)&&v(n,r,i))return i},y={findPattern:g,findEndPattern:b},w=function(e,t,n,r,i){return e=r>0?e.splitText(r):e,e.splitText(n-r+t.end.length),e.deleteData(0,t.start.length),e.deleteData(e.data.length-t.end.length,t.end.length),e},_=function(e,t,n){if(!1!==t.collapsed){var r=t.startContainer,i=r.data,o=!0===n?1:0;if(3===r.nodeType){var a=y.findEndPattern(e,i,t.startOffset,o);if(void 0!==a){var s=i.lastIndexOf(a.end,t.startOffset-o),l=i.lastIndexOf(a.start,s-a.end.length);if(s=i.indexOf(a.end,l+a.start.length),-1!==l){var c=document.createRange();c.setStart(r,l),c.setEnd(r,s+a.end.length);var u=y.findPattern(e,c.toString());if(!(void 0===a||u!==a||r.data.length<=a.start.length+a.end.length))return{pattern:a,startOffset:l,endOffset:s}}}}}},x=function(e,t,n,r){var i=h.isArray(n.pattern.format)?n.pattern.format:[n.pattern.format];if(0!==h.grep(i,function(t){var n=e.formatter.get(t);return n&&n[0].inline}).length)return e.undoManager.transact(function(){t=w(t,n.pattern,n.endOffset,n.startOffset),i.forEach(function(n){e.formatter.apply(n,{},t)})}),t},C=function(e,t,n){var r=e.selection.getRng(!0),i=_(t,r,n);if(i)return x(e,r.startContainer,i)},k=function(e,t){return C(e,t,!0)},T=function(e,t){return C(e,t,!1)},S=function(e,t){var n,r,i,o,a,s,l,c,u,d,p;if(n=e.selection,r=e.dom,n.isCollapsed()&&(l=r.getParent(n.getStart(),"p"))){for(u=new f(l,l);a=u.next();)if(3===a.nodeType){o=a;break}if(o){if(!(c=y.findPattern(t,o.data)))return;if(d=n.getRng(!0),i=d.startContainer,p=d.startOffset,o===i&&(p=Math.max(0,p-c.start.length)),h.trim(o.data).length===c.start.length)return;c.format&&(s=e.formatter.get(c.format))&&s[0].block&&(o.deleteData(0,c.start.length),e.formatter.apply(c.format,{},o),d.setStart(i,p),d.collapse(!0),n.setRng(d)),c.cmd&&e.undoManager.transact(function(){o.deleteData(0,c.start.length),e.execCommand(c.cmd)})}}},D={patternFromRng:_,applyInlineFormatSpace:k,applyInlineFormatEnter:T,applyBlockFormat:S},E=function(e,t,n){for(var r=0;r<e.length;r++)if(n(e[r],t))return!0},N=function(e,t){return E(e,t,function(e,t){return e===t.keyCode&&!1===d.modifierPressed(t)})},A=function(e,t){return E(e,t,function(e,t){return e.charCodeAt(0)===t.charCode})},R={handleEnter:e,handleInlineKey:t,checkCharCode:A,checkKeyCode:N},P=function(e,t){var n=[",",".",";",":","!","?"],r=[32];e.on("keydown",function(n){13!==n.keyCode||d.modifierPressed(n)||R.handleEnter(e,t.get())},!0),e.on("keyup",function(n){R.checkKeyCode(r,n)&&R.handleInlineKey(e,t.get())}),e.on("keypress",function(r){R.checkCharCode(n,r)&&u.setEditorTimeout(e,function(){R.handleInlineKey(e,t.get())})})},O={setup:P};i.add("textpattern",function(e){var t=r(c.getPatterns(e.settings));return O.setup(e,t),a.get(t)})}()}(),function(){!function(){"use strict";function e(){}var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),r=tinymce.util.Tools.resolve("tinymce.util.I18n"),i=tinymce.util.Tools.resolve("tinymce.util.Tools"),o=function(e){return e.getParam("toc_class","mce-toc")},a=function(e){var t=e.getParam("toc_header","h2");return/^h[1-6]$/.test(t)?t:"h2"},s=function(e){var t=parseInt(e.getParam("toc_depth","3"),10);return t>=1&&t<=9?t:3},l={getTocClass:o,getTocHeader:a,getTocDepth:s},c=function(e){var t=0;return function(){var n=(new Date).getTime().toString(32);return e+n+(t++).toString(32)}},u={create:c},d=u.create("mcetoc_"),f=function(e){var t,n=[];for(t=1;t<=e;t++)n.push("h"+t);return n.join(",")},h=function(e){return p(e).length>0},p=function(e){var t=l.getTocClass(e),n=l.getTocHeader(e),r=f(l.getTocDepth(e)),o=e.$(r);return o.length&&/^h[1-9]$/i.test(n)&&(o=o.filter(function(n,r){return!e.dom.hasClass(r.parentNode,t)})),i.map(o,function(t){return{id:t.id?t.id:d(),level:parseInt(t.nodeName.replace(/^H/i,""),10),title:e.$.text(t),element:t}})},g=function(e){var t,n=9;for(t=0;t<e.length;t++)if(e[t].level<n&&(n=e[t].level),1===n)return n;return n},m=function(e,t){var r="<"+e+' contenteditable="true">',i="</"+e+">";return r+n.DOM.encode(t)+i},v=function(e){var t=b(e);return'<div class="'+e.dom.encode(l.getTocClass(e))+'" contenteditable="false">'+t+"</div>"},b=function(e){var t,n,i,o,a="",s=p(e),c=g(s)-1;if(!s.length)return"";for(a+=m(l.getTocHeader(e),r.translate("Table of Contents")),t=0;t<s.length;t++){if(i=s[t],i.element.id=i.id,o=s[t+1]&&s[t+1].level,c===i.level)a+="<li>";else for(n=c;n<i.level;n++)a+="<ul><li>";if(a+='<a href="#'+i.id+'">'+i.title+"</a>",o!==i.level&&o)for(n=i.level;n>o;n--)a+="</li></ul><li>";else a+="</li>",o||(a+="</ul>");c=i.level}return a},y=function(e,t){return!t.length||e.dom.getParents(t[0],".mce-offscreen-selection").length>0},w=function(e){var t=l.getTocClass(e),n=e.$("."+t);y(e,n)?e.insertContent(v(e)):_(e)},_=function(e){var t=l.getTocClass(e),n=e.$("."+t);n.length&&e.undoManager.transact(function(){n.html(b(e))})},x={hasHeaders:h,insertToc:w,updateToc:_},C=function(e){e.addCommand("mceInsertToc",function(){x.insertToc(e)}),e.addCommand("mceUpdateToc",function(){x.updateToc(e)})},k={register:C},T=function(e){var t=e.$,n=l.getTocClass(e);e.on("PreProcess",function(e){var r=t("."+n,e.node);r.length&&(r.removeAttr("contentEditable"),r.find("[contenteditable]").removeAttr("contentEditable"))}),e.on("SetContent",function(){var e=t("."+n);e.length&&(e.attr("contentEditable",!1),e.children(":first-child").attr("contentEditable",!0))})},S={setup:T},D=function(e){return function(t){var n=t.control;e.on("LoadContent SetContent change",function(){n.disabled(e.readonly||!x.hasHeaders(e))})}},E=function(e){return function(t){return t&&e.dom.is(t,"."+l.getTocClass(e))&&e.getBody().contains(t)}},N=function(e){e.addButton("toc",{tooltip:"Table of Contents",cmd:"mceInsertToc",icon:"toc",onPostRender:D(e)}),e.addButton("tocupdate",{tooltip:"Update",cmd:"mceUpdateToc",icon:"reload"}),e.addMenuItem("toc",{text:"Table of Contents",context:"insert",cmd:"mceInsertToc",onPostRender:D(e)}),e.addContextToolbar(E(e),"tocupdate")},A={register:N};t.add("toc",function(e){k.register(e),A.register(e),S.setup(e)})}()}(),function(){!function(){"use strict";function e(){}var t=function(e){var n=e,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return t(r())}}},n=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=function(e,t){e.fire("VisualBlocks",{state:t})},i={fireVisualBlocks:r},o=function(e){return e.getParam("visualblocks_default_state",!1)},a=function(e){return e.settings.visualblocks_content_css},s={isEnabledByDefault:o,getContentCss:a},l=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),c=tinymce.util.Tools.resolve("tinymce.util.Tools"),u=l.DOM.uniqueId(),d=function(e,t){var n=c.toArray(e.getElementsByTagName("link"));if(0===c.grep(n,function(e){return e.id===u}).length){var r=l.DOM.create("link",{id:u,rel:"stylesheet",href:t});e.getElementsByTagName("head")[0].appendChild(r)}},f={load:d},h=function(e,t,n){var r=e.dom,o=s.getContentCss(e);f.load(e.getDoc(),o||t+"/css/visualblocks.css"),r.toggleClass(e.getBody(),"mce-visualblocks"),n.set(!n.get()),i.fireVisualBlocks(e,n.get())},p={toggleVisualBlocks:h},g=function(e,t,n){e.addCommand("mceVisualBlocks",function(){p.toggleVisualBlocks(e,t,n)})},m={register:g},v=function(e,t,n){e.on("PreviewFormats AfterPreviewFormats",function(t){n.get()&&e.dom.toggleClass(e.getBody(),"mce-visualblocks","afterpreviewformats"===t.type)}),e.on("init",function(){s.isEnabledByDefault(e)&&p.toggleVisualBlocks(e,t,n)}),e.on("remove",function(){e.dom.removeClass(e.getBody(),"mce-visualblocks")})},b={setup:v},y=function(e,t){return function(n){var r=n.control;r.active(t.get()),e.on("VisualBlocks",function(e){r.active(e.state)})}},w=function(e,t){e.addButton("visualblocks",{active:!1,title:"Show blocks",cmd:"mceVisualBlocks",onPostRender:y(e,t)}),e.addMenuItem("visualblocks",{text:"Show blocks",cmd:"mceVisualBlocks",onPostRender:y(e,t),selectable:!0,context:"view",prependToContext:!0})},_={register:w};n.add("visualblocks",function(e,n){var r=t(!1);m.register(e,n,r),_.register(e,r),b.setup(e,n,r)})}()}(),function(){!function(){"use strict";function e(){}var t=function(e){var n=e,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return t(r())}}},n=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=function(e){return{isEnabled:function(){return e.get()}}},i={get:r},o=function(e,t){return e.fire("VisualChars",{state:t})},a={fireVisualChars:o},s={"":"nbsp","":"shy"},l=function(e,t){var n,r="";for(n in e)r+=n;return new RegExp("["+r+"]",t?"g":"")},c=function(e){var t,n="";for(t in e)n&&(n+=","),n+="span.mce-"+e[t];return n},u={charMap:s,regExp:l(s),regExpGlobal:l(s,!0),selector:c(s),charMapToRegExp:l,charMapToSelector:c},d=function(e){return function(){return e}},f=d(!1),h=d(!0),p=f,g=h,m=function(){return v},v=function(){var e=function(e){return e.isNone()},t=function(e){return e()},n=function(e){return e},r=function(){},i=function(){return null},o=function(){},a={fold:function(e,t){return e()},is:p,isSome:p,isNone:g,getOr:n,getOrThunk:t,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:i,getOrUndefined:o,or:n,orThunk:t,map:m,ap:m,each:r,bind:m,flatten:m,exists:p,forall:g,filter:m,equals:e,equals_:e,toArray:function(){return[]},toString:d("none()")};return Object.freeze&&Object.freeze(a),a}(),b=function(e){var t=function(){return e},n=function(){return o},r=function(t){return b(t(e))},i=function(t){return t(e)},o={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:g,isNone:p,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:r,ap:function(t){return t.fold(m,function(t){return b(t(e))})},each:function(t){t(e)},bind:i,flatten:t,exists:i,forall:i,filter:function(t){return t(e)?o:v},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(p,function(t){return n(e,t)})},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return o},y=function(e){return null===e||void 0===e?v:b(e)},w={some:b,none:m,from:y},_=function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&Array.prototype.isPrototypeOf(e)?"array":"object"===t&&String.prototype.isPrototypeOf(e)?"string":t},x=function(e){return function(t){return _(t)===e}}("function"),C=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;i++){var o=e[i];r[i]=t(o,i,e)}return r},k=function(e,t){for(var n=0,r=e.length;n<r;n++){t(e[n],n,e)}},T=Array.prototype.slice,S=(x(Array.from)&&Array.from,function(e,t){var n=t||document,r=n.createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1)throw"HTML must have a single root node";return N(r.childNodes[0])}),D=function(e,t){var n=t||document,r=n.createElement(e);return N(r)},E=function(e,t){var n=t||document,r=n.createTextNode(e);return N(r)},N=function(e){if(null===e||void 0===e)throw new Error("Node cannot be null or undefined");return{dom:d(e)}},A=function(e,t,n){var r=e.dom();return w.from(r.elementFromPoint(t,n)).map(N)},R={fromHtml:S,fromTag:D,fromText:E,fromDom:N,fromPoint:A},P={ATTRIBUTE:Node.ATTRIBUTE_NODE,CDATA_SECTION:Node.CDATA_SECTION_NODE,COMMENT:Node.COMMENT_NODE,DOCUMENT:Node.DOCUMENT_NODE,DOCUMENT_TYPE:Node.DOCUMENT_TYPE_NODE,DOCUMENT_FRAGMENT:Node.DOCUMENT_FRAGMENT_NODE,ELEMENT:Node.ELEMENT_NODE,TEXT:Node.TEXT_NODE,PROCESSING_INSTRUCTION:Node.PROCESSING_INSTRUCTION_NODE,ENTITY_REFERENCE:Node.ENTITY_REFERENCE_NODE,ENTITY:Node.ENTITY_NODE,NOTATION:Node.NOTATION_NODE},O=function(e){return e.dom().nodeName.toLowerCase()},I=function(e){return e.dom().nodeType},M=function(e){return e.dom().nodeValue},j=function(e){return function(t){return I(t)===e}},B=function(e){return I(e)===P.COMMENT||"#comment"===O(e)},L=j(P.ELEMENT),F=j(P.TEXT),H=j(P.DOCUMENT),$={name:O,type:I,value:M,isElement:L,isText:F,isDocument:H,isComment:B},U=function(e){return'<span data-mce-bogus="1" class="mce-'+u.charMap[e]+'">'+e+"</span>"},z={wrapCharWithSpan:U},W=function(e){return $.isText(e)&&void 0!==$.value(e)&&u.regExp.test($.value(e))},q=function(e,t){var n=[],r=e.dom(),i=C(r.childNodes,R.fromDom);return k(i,function(e){t(e)&&(n=n.concat([e])),n=n.concat(q(e,t))}),n},V=function(e,t){for(;e.parentNode;){if(e.parentNode===t)return e;e=e.parentNode}},Y=function(e){return e.replace(u.regExpGlobal,z.wrapCharWithSpan)},G={isMatch:W,filterDescendants:q,findParentElm:V,replaceWithSpans:Y},K=function(e,t){var n,r,i=G.filterDescendants(R.fromDom(t),G.isMatch);k(i,function(t){var i=G.replaceWithSpans($.value(t));for(r=e.dom.create("div",null,i);n=r.lastChild;)e.dom.insertAfter(n,t.dom());e.dom.remove(t.dom())})},X=function(e,t){var n=e.dom.select(u.selector,t);k(n,function(t){e.dom.remove(t,1)})},J=function(e){var t=e.getBody(),n=e.selection.getBookmark(),r=G.findParentElm(e.selection.getNode(),t);r=void 0!==r?r:t,X(e,r),K(e,r),e.selection.moveToBookmark(n)},Q={show:K,hide:X,toggle:J},Z=function(e,t){var n,r=e.getBody(),i=e.selection;t.set(!t.get()),a.fireVisualChars(e,t.get()),n=i.getBookmark(),!0===t.get()?Q.show(e,r):Q.hide(e,r),i.moveToBookmark(n)},ee={toggleVisualChars:Z},te=function(e,t){e.addCommand("mceVisualChars",function(){ee.toggleVisualChars(e,t)})},ne={register:te},re=tinymce.util.Tools.resolve("tinymce.util.Delay"),ie=function(e,t){var n=re.debounce(function(){Q.toggle(e)},300);!1!==e.settings.forced_root_block&&e.on("keydown",function(r){!0===t.get()&&(13===r.keyCode?Q.toggle(e):n())})},oe={setup:ie},ae=function(e){return function(t){var n=t.control;e.on("VisualChars",function(e){n.active(e.state)})}},se=function(e){e.addButton("visualchars",{active:!1,title:"Show invisible characters",cmd:"mceVisualChars",onPostRender:ae(e)}),e.addMenuItem("visualchars",{text:"Show invisible characters",cmd:"mceVisualChars",onPostRender:ae(e),selectable:!0,context:"view",prependToContext:!0})};n.add("visualchars",function(e){var n=t(!1);return ne.register(e,n),se(e),oe.setup(e,n),i.get(n)})}()}(),function(){!function(){"use strict";function e(){}var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n={aletter:"[A-Za-z---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]",midnumlet:"[-'\\.]",midletter:"[:]",midnum:"[+*/,;;]",numeric:"[0-9---------------------------------]",cr:"\\r",lf:"\\n",newline:"[\v\f\u2028\u2029]",extend:"[------------------------------------------------------------------------------------------------------]",format:"[----\ufeff-]",katakana:"[-------]",extendnumlet:"[=_--<>]",punctuation:"[!-#%-*,-\\/:;?@\\[-\\]_{};----------------------------------------------]"},r={ALETTER:0,MIDNUMLET:1,MIDLETTER:2,MIDNUM:3,NUMERIC:4,CR:5,LF:6,NEWLINE:7,EXTEND:8,FORMAT:9,KATAKANA:10,EXTENDNUMLET:11,AT:12,OTHER:13},i=[new RegExp(n.aletter),new RegExp(n.midnumlet),new RegExp(n.midletter),new RegExp(n.midnum),new RegExp(n.numeric),new RegExp(n.cr),new RegExp(n.lf),new RegExp(n.newline),new RegExp(n.extend),new RegExp(n.format),new RegExp(n.katakana),new RegExp(n.extendnumlet),new RegExp("@")],o=new RegExp("^"+n.punctuation+"$"),a=/^\s+$/,s={characterIndices:r,SETS:i,EMPTY_STRING:"",PUNCTUATION:o,WHITESPACE:a},l=function(e,t,n){var r,i;if(!e)return 0;if(n=n||e,void 0!==e.length){for(r=0,i=e.length;r<i;r++)if(!1===t.call(n,e[r],r,e))return 0}else for(r in e)if(e.hasOwnProperty(r)&&!1===t.call(n,e[r],r,e))return 0;return 1},c=function(e,t){var n=[];return l(e,function(r,i){n.push(t(r,i,e))}),n},u={each:l,map:c},d=s.SETS,f=s.characterIndices.OTHER,h=function(e){var t,n,r=f,i=d.length;for(t=0;t<i;++t)if((n=d[t])&&n.test(e)){r=t;break}return r},p=function(e){var t={};return function(n){if(t[n])return t[n];var r=e(n);return t[n]=r,r}},g=function(e){var t=p(h);return u.map(e.split(""),t)},m={classify:g},v=s.characterIndices,b=function(e,t){var n,r,i=e[t],o=e[t+1];return!(t<0||t>e.length-1&&0!==t)&&((i!==v.ALETTER||o!==v.ALETTER)&&(r=e[t+2],(i!==v.ALETTER||o!==v.MIDLETTER&&o!==v.MIDNUMLET&&o!==v.AT||r!==v.ALETTER)&&(n=e[t-1],(i!==v.MIDLETTER&&i!==v.MIDNUMLET&&o!==v.AT||o!==v.ALETTER||n!==v.ALETTER)&&((i!==v.NUMERIC&&i!==v.ALETTER||o!==v.NUMERIC&&o!==v.ALETTER)&&((i!==v.MIDNUM&&i!==v.MIDNUMLET||o!==v.NUMERIC||n!==v.NUMERIC)&&((i!==v.NUMERIC||o!==v.MIDNUM&&o!==v.MIDNUMLET||r!==v.NUMERIC)&&(i!==v.EXTEND&&i!==v.FORMAT&&n!==v.EXTEND&&n!==v.FORMAT&&o!==v.EXTEND&&o!==v.FORMAT&&((i!==v.CR||o!==v.LF)&&(i===v.NEWLINE||i===v.CR||i===v.LF||(o===v.NEWLINE||o===v.CR||o===v.LF||(i!==v.KATAKANA||o!==v.KATAKANA)&&((o!==v.EXTENDNUMLET||i!==v.ALETTER&&i!==v.NUMERIC&&i!==v.KATAKANA&&i!==v.EXTENDNUMLET)&&((i!==v.EXTENDNUMLET||o!==v.ALETTER&&o!==v.NUMERIC&&o!==v.KATAKANA)&&i!==v.AT))))))))))))},y={isWordBoundary:b},w=s.EMPTY_STRING,_=s.WHITESPACE,x=s.PUNCTUATION,C=function(e){return"http"===e||"https"===e},k=function(e,t){var n;for(n=t;n<e.length;++n){var r=e.charAt(n);if(_.test(r))break}return n},T=function(e,t,n){var r=k(t,n+1),i=t.substring(n+1,r);return"://"===i.substr(0,3)?{word:e+i,index:r}:{word:e,index:n}},S=function(e,t){var n,r,i,o=0,a=m.classify(e),s=a.length,l=[],c=[];for(t||(t={}),t.ignoreCase&&(e=e.toLowerCase()),r=t.includePunctuation,i=t.includeWhitespace;o<s;++o)if(n=e.charAt(o),l.push(n),y.isWordBoundary(a,o)){if((l=l.join(w))&&(i||!_.test(l))&&(r||!x.test(l)))if(C(l)){var u=T(l,e,o);c.push(u.word),o=u.index}else c.push(l);l=[]}return c},D=function(e,t){return S(e.replace(/\ufeff/g,""),t)},E={getWords:D},N=function(e){return e.removed?"":e.getBody().innerText},A=function(e){return E.getWords(N(e)).length},R={getCount:A},P=function(e){return{getCount:function(){return R.getCount(e)}}},O={get:P},I=tinymce.util.Tools.resolve("tinymce.util.Delay"),M=tinymce.util.Tools.resolve("tinymce.util.I18n"),j=function(e){var t=function(e){return M.translate(["{0} words",R.getCount(e)])},n=function(){e.theme.panel.find("#wordcount").text(t(e))};e.on("init",function(){var r=e.theme.panel&&e.theme.panel.find("#statusbar")[0],i=I.debounce(n,300);r&&I.setEditorTimeout(e,function(){r.insert({type:"label",name:"wordcount",text:t(e),classes:"wordcount",disabled:e.settings.readonly},0),e.on("setcontent beforeaddundo undo redo keyup",i)},0)})},B={setup:j};t.add("wordcount",function(e){return B.setup(e),O.get(e)})}()}(),function(){!function(){"use strict";function e(e,t,n){var r,i,o,a,s,l,c,u,d,f;return d=Gt(),i=Wt.getPos(t,Pe.getUiContainer(e)),o=i.x,a=i.y,Vt(e)&&qt(document.body)&&(o-=d.x,a-=d.y),r=e.getEl(),f=Wt.getSize(r),s=f.width,l=f.height,f=Wt.getSize(t),c=f.width,u=f.height,n=(n||"").split(""),"b"===n[0]&&(a+=u),"r"===n[1]&&(o+=c),"c"===n[0]&&(a+=Math.round(u/2)),"c"===n[1]&&(o+=Math.round(c/2)),"b"===n[3]&&(a-=l),"r"===n[4]&&(o-=s),"c"===n[3]&&(a-=Math.round(l/2)),"c"===n[4]&&(o-=Math.round(s/2)),{x:o,y:a,w:s,h:l}}function t(){}function n(e){this.cls=[],this.cls._map={},this.onchange=e||t,this.prefix=""}function r(e){for(var t,n=[],r=e.length;r--;)t=e[r],t.__checked||(n.push(t),t.__checked=1);for(r=n.length;r--;)delete n[r].__checked;return n}function i(e){return e.nodeType>0}function o(e,t){var n,r;if(e===t)return!0;if(null===e||null===t)return e===t;if("object"!=typeof e||"object"!=typeof t)return e===t;if(j.isArray(t)){if(e.length!==t.length)return!1;for(n=e.length;n--;)if(!o(e[n],t[n]))return!1}if(i(e)||i(t))return e===t;r={};for(n in t){if(!o(e[n],t[n]))return!1;r[n]=!0}for(n in e)if(!r[n]&&!o(e[n],t[n]))return!1;return!0}function a(e){return e._eventDispatcher||(e._eventDispatcher=new Qt({scope:e,toggleEvent:function(t,n){n&&Qt.isNative(t)&&(e._nativeEvents||(e._nativeEvents={}),e._nativeEvents[t]=!0,e.state.get("rendered")&&s(e))}})),e._eventDispatcher}function s(e){function t(t){var n=e.getParentCtrl(t.target);n&&n.fire(t.type,t)}function n(){var e=l._lastHoverCtrl;e&&(e.fire("mouseleave",{target:e.getEl()}),e.parents().each(function(e){e.fire("mouseleave",{target:e.getEl()})}),l._lastHoverCtrl=null)}function r(t){var n,r,i,o=e.getParentCtrl(t.target),a=l._lastHoverCtrl,s=0;if(o!==a){if(l._lastHoverCtrl=o,r=o.parents().toArray().reverse(),r.push(o),a){for(i=a.parents().toArray().reverse(),i.push(a),s=0;s<i.length&&r[s]===i[s];s++);for(n=i.length-1;n>=s;n--)a=i[n],a.fire("mouseleave",{target:a.getEl()})}for(n=s;n<r.length;n++)o=r[n],o.fire("mouseenter",{target:o.getEl()})}}function i(t){t.preventDefault(),"mousewheel"===t.type?(t.deltaY=-.025*t.wheelDelta,t.wheelDeltaX&&(t.deltaX=-.025*t.wheelDeltaX)):(t.deltaX=0,t.deltaY=t.detail),t=e.fire("wheel",t)}var o,a,s,l,c,u;if(c=e._nativeEvents){for(s=e.parents().toArray(),s.unshift(e),o=0,a=s.length;!l&&o<a;o++)l=s[o]._eventsRoot;for(l||(l=s[s.length-1]||e),e._eventsRoot=l,a=o,o=0;o<a;o++)s[o]._eventsRoot=l;var d=l._delegates;d||(d=l._delegates={});for(u in c){if(!c)return!1;"wheel"!==u||yn?("mouseenter"===u||"mouseleave"===u?l._hasMouseEnter||(Ut(l.getEl()).on("mouseleave",n).on("mouseover",r),l._hasMouseEnter=1):d[u]||(Ut(l.getEl()).on(u,t),d[u]=!0),c[u]=!1):bn?Ut(e.getEl()).on("mousewheel",i):Ut(e.getEl()).on("DOMMouseScroll",i)}}}function l(e){function t(e){return e&&1===e.nodeType}function n(e){return e=e||y,t(e)?e.getAttribute("role"):null}function r(e){for(var t,r=e||y;r=r.parentNode;)if(t=n(r))return t}function i(e){var n=y;if(t(n))return n.getAttribute("aria-"+e)}function o(e){var t=e.tagName.toUpperCase();return"INPUT"===t||"TEXTAREA"===t||"SELECT"===t}function a(e){return!(!o(e)||e.hidden)||(!!Dn(e)||!!/^(button|menuitem|checkbox|tab|menuitemcheckbox|option|gridcell|slider)$/.test(n(e)))}function s(e){function t(e){if(1===e.nodeType&&"none"!==e.style.display&&!e.disabled){a(e)&&n.push(e);for(var r=0;r<e.childNodes.length;r++)t(e.childNodes[r])}}var n=[];return t(e||_.getEl()),n}function l(e){var t,n;e=e||w,n=e.parents().toArray(),n.unshift(e);for(var r=0;r<n.length&&(t=n[r],!t.settings.ariaRoot);r++);return t}function c(e){var t=l(e),n=s(t.getEl());t.settings.ariaRemember&&"lastAriaIndex"in t?u(t.lastAriaIndex,n):u(0,n)}function u(e,t){return e<0?e=t.length-1:e>=t.length&&(e=0),t[e]&&t[e].focus(),e}function d(e,t){var n=-1,r=l();t=t||s(r.getEl());for(var i=0;i<t.length;i++)t[i]===y&&(n=i);n+=e,r.lastAriaIndex=u(n,t)}function f(){"tablist"===r()?d(-1,s(y.parentNode)):w.parent().submenu?v():d(-1)}function h(){var e=n(),t=r();"tablist"===t?d(1,s(y.parentNode)):"menuitem"===e&&"menu"===t&&i("haspopup")?b():d(1)}function p(){d(-1)}function g(){var e=n(),t=r();"menuitem"===e&&"menubar"===t?b():"button"===e&&i("haspopup")?b({key:"down"}):d(1)}function m(e){if("tablist"===r()){var t=s(w.getEl("body"))[0];t&&t.focus()}else d(e.shiftKey?-1:1)}function v(){w.fire("cancel")}function b(e){e=e||{},w.fire("click",{target:y,aria:e})}var y,w,_=e.root;try{y=document.activeElement}catch(e){y=document.body}return w=_.getParentCtrl(y),_.on("keydown",function(e){function t(e,t){o(y)||Dn(y)||"slider"!==n(y)&&!1!==t(e)&&e.preventDefault()}if(!e.isDefaultPrevented())switch(e.keyCode){case 37:t(e,f);break;case 39:t(e,h);break;case 38:t(e,p);break;case 40:t(e,g);break;case 27:v();break;case 14:case 13:case 32:t(e,b);break;case 9:m(e),e.preventDefault()}}),_.on("focusin",function(e){y=e.target,w=e.control}),{focusFirst:c}}function c(e){var t,n,r,i,o,a,s,l,c=Math.max;return t=e.documentElement,n=e.body,r=c(t.scrollWidth,n.scrollWidth),i=c(t.clientWidth,n.clientWidth),o=c(t.offsetWidth,n.offsetWidth),a=c(t.scrollHeight,n.scrollHeight),s=c(t.clientHeight,n.clientHeight),l=c(t.offsetHeight,n.offsetHeight),{width:r<o?i:r,height:a<l?s:a}}function u(e){var t,n;if(e.changedTouches)for(t="screenX screenY pageX pageY clientX clientY".split(" "),n=0;n<t.length;n++)e[t[n]]=e.changedTouches[0][t[n]]}function d(e,t){var n,r,i,o,a,s,l,d=t.document||document;t=t||{};var f=d.getElementById(t.handle||e);i=function(e){var i,h,p=c(d);u(e),e.preventDefault(),r=e.button,i=f,s=e.screenX,l=e.screenY,h=window.getComputedStyle?window.getComputedStyle(i,null).getPropertyValue("cursor"):i.runtimeStyle.cursor,n=Ut("<div></div>").css({position:"absolute",top:0,left:0,width:p.width,height:p.height,zIndex:2147483647,opacity:1e-4,cursor:h}).appendTo(d.body),Ut(d).on("mousemove touchmove",a).on("mouseup touchend",o),t.start(e)},a=function(e){if(u(e),e.button!==r)return o(e);e.deltaX=e.screenX-s,e.deltaY=e.screenY-l,e.preventDefault(),t.drag(e)},o=function(e){u(e),Ut(d).off("mousemove touchmove",a).off("mouseup touchend",o),n.remove(),t.stop&&t.stop(e)},this.destroy=function(){Ut(f).off()},Ut(f).on("mousedown touchstart",i)}function f(e,t){for(;e;){if(e===t)return!0;e=e.parent()}}function h(e){for(var t=On.length;t--;){var n=On[t],r=n.getParentCtrl(e.target);if(n.settings.autohide){if(r&&(f(r,n)||n.parent()===r))continue;e=n.fire("autohide",{target:e.target}),e.isDefaultPrevented()||n.hide()}}}function p(){xn||(xn=function(e){2!==e.button&&h(e)},Ut(document).on("click touchstart",xn))}function g(){Cn||(Cn=function(){var e;for(e=On.length;e--;)v(On[e])},Ut(window).on("scroll",Cn))}function m(){if(!kn){var e=document.documentElement,t=e.clientWidth,n=e.clientHeight;kn=function(){document.all&&t===e.clientWidth&&n===e.clientHeight||(t=e.clientWidth,n=e.clientHeight,Mn.hideAll())},Ut(window).on("resize",kn)}}function v(e){function t(t,n){for(var r,i=0;i<On.length;i++)if(On[i]!==e)for(r=On[i].parent();r&&(r=r.parent());)r===e&&On[i].fixed(t).moveBy(0,n).repaint()}var n=Wt.getViewPort().y;e.settings.autofix&&(e.state.get("fixed")?e._autoFixY>n&&(e.fixed(!1).layoutRect({y:e._autoFixY}).repaint(),t(!1,e._autoFixY-n)):(e._autoFixY=e.layoutRect().y,e._autoFixY<n&&(e.fixed(!0).layoutRect({y:0}).repaint(),t(!0,n-e._autoFixY))))}function b(e,t){var n,r,i=Mn.zIndex||65535;if(e)In.push(t);else for(n=In.length;n--;)In[n]===t&&In.splice(n,1);if(In.length)for(n=0;n<In.length;n++)In[n].modal&&(i++,r=In[n]),In[n].getEl().style.zIndex=i,In[n].zIndex=i,i++;var o=Ut("#"+t.classPrefix+"modal-block",t.getContainerElm())[0];r?Ut(o).css("z-index",r.zIndex-1):o&&(o.parentNode.removeChild(o),Tn=!1),Mn.currentZIndex=i}function y(e){var t;for(t=On.length;t--;)On[t]===e&&On.splice(t,1);for(t=In.length;t--;)In[t]===e&&In.splice(t,1)}function w(e,t){var n,r,i=this,o=Sn.classPrefix;i.show=function(a,s){function l(){n&&(Ut(e).append('<div class="'+o+"throbber"+(t?" "+o+"throbber-inline":"")+'"></div>'),s&&s())}return i.hide(),n=!0,a?r=pe.setTimeout(l,a):l(),i},i.hide=function(){var t=e.lastChild
;return pe.clearTimeout(r),t&&-1!==t.className.indexOf("throbber")&&t.parentNode.removeChild(t),n=!1,i}}function _(e){var t=function(e){return e.inline?e.getElement():e.getContentAreaContainer()},n=function(){var n=t(e);return Wt.getSize(n).width},r=function(e){Qe(e,function(e){e.moveTo(0,0)})},i=function(n){if(n.length>0){var r=n.slice(0,1)[0],i=t(e);r.moveRel(i,"tc-tc"),Qe(n,function(e,t){t>0&&e.moveRel(n[t-1].getEl(),"bc-tc")})}},o=function(e){r(e),i(e)};return{open:function(e,t){var r=j.extend(e,{maxWidth:n()}),i=new Yn(r);return i.args=r,r.timeout>0&&(i.timer=setTimeout(function(){i.close(),t()},r.timeout)),i.on("close",function(){t()}),i.renderTo(),i},close:function(e){e.close()},reposition:o,getArgs:function(e){return e.args}}}function x(e){var t,n=Ut("meta[name=viewport]")[0];!1!==Ct.overrideViewPort&&(n||(n=document.createElement("meta"),n.setAttribute("name","viewport"),document.getElementsByTagName("head")[0].appendChild(n)),t=n.getAttribute("content"),t&&void 0!==Kn&&(Kn=t),n.setAttribute("content",e?"width=device-width,initial-scale=1.0,user-scalable=0,minimum-scale=1.0,maximum-scale=1.0":Kn))}function C(e,t){k()&&!1===t&&Ut([document.documentElement,document.body]).removeClass(e+"fullscreen")}function k(){for(var e=0;e<Gn.length;e++)if(Gn[e]._fullscreen)return!0;return!1}function T(e){return{open:function(e,t,n){var r;return e.title=e.title||" ",e.url=e.url||e.file,e.url&&(e.width=parseInt(e.width||320,10),e.height=parseInt(e.height||240,10)),e.body&&(e.items={defaults:e.defaults,type:e.bodyType||"form",items:e.body,data:e.data,callbacks:e.commands}),e.url||e.buttons||(e.buttons=[{text:"Ok",subtype:"primary",onclick:function(){r.find("form")[0].submit()}},{text:"Cancel",onclick:function(){r.close()}}]),r=new Xn(e),r.on("close",function(){n(r)}),e.data&&r.on("postRender",function(){this.find("*").each(function(t){var n=t.name();n in e.data&&t.value(e.data[n])})}),r.features=e||{},r.params=t||{},r=r.renderTo(document.body).reflow()},alert:function(e,t,n){var r;return r=Jn.alert(e,function(){t()}),r.on("close",function(){n(r)}),r},confirm:function(e,t,n){var r;return r=Jn.confirm(e,function(e){t(e)}),r.on("close",function(){n(r)}),r},close:function(e){e.close()},getParams:function(e){return e.params},setParams:function(e,t){e.params=t}}}function S(e,t,n){var r=e.isiOS()&&!0===/ipad/i.test(n),i=e.isiOS()&&!r,o=e.isAndroid()&&3===e.version.major,a=e.isAndroid()&&4===e.version.major,s=r||o||a&&!0===/mobile/i.test(n),l=e.isiOS()||e.isAndroid(),c=l&&!s,u=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n);return{isiPad:ve(r),isiPhone:ve(i),isTablet:ve(s),isPhone:ve(c),isTouch:ve(l),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:ve(u)}}function D(e,t,n,r,i){return e(n,r)?De.some(n):Ve(i)&&i(n)?De.none():t(n,r,i)}function E(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1}function N(e){var t="";if(e)for(var n=0;n<e.length;n++)t+='<option value="'+e[n]+'">'+e[n]+"</option>";return t}function A(e,t,n){return e<t&&(e=t),e>n&&(e=n),e}function R(e,t,n){e.setAttribute("aria-"+t,n)}function P(e,t){var n,r,i,o,a,s;"v"===e.settings.orientation?(o="top",i="height",r="h"):(o="left",i="width",r="w"),s=e.getEl("handle"),n=(e.layoutRect()[r]||100)-Wt.getSize(s)[i],a=n*((t-e._minValue)/(e._maxValue-e._minValue))+"px",s.style[o]=a,s.style.height=e.layoutRect().h+"px",R(s,"valuenow",t),R(s,"valuetext",""+e.settings.previewFilter(t)),R(s,"valuemin",e._minValue),R(s,"valuemax",e._maxValue)}function O(){}var I=tinymce.util.Tools.resolve("tinymce.ThemeManager"),M=tinymce.util.Tools.resolve("tinymce.EditorManager"),j=tinymce.util.Tools.resolve("tinymce.util.Tools"),B=function(e){return e.getParam("branding",!0,"boolean")},L=function(e){return!1!==F(e)},F=function(e){return e.getParam("menubar")},H=function(e){return e.getParam("statusbar",!0,"boolean")},$=function(e){return e.getParam("toolbar_items_size")},U=function(e){return e.getParam("readonly",!1,"boolean")},z=function(e){return e.getParam("fixed_toolbar_container")},W=function(e){return e.getParam("inline_toolbar_position_handler")},q=function(e){return e.getParam("menu")},V=function(e){return e.getParam("removed_menuitems","")},Y=function(e){return e.getParam("min_width",100,"number")},G=function(e){return e.getParam("min_height",100,"number")},K=function(e){return e.getParam("max_width",65535,"number")},X=function(e){return e.getParam("max_height",65535,"number")},J=function(e){return!1===e.settings.skin},Q=function(e){return e.getParam("inline",!1,"boolean")},Z=function(e){var t=e.getParam("resize","vertical");return!1===t?"none":"both"===t?"both":"vertical"},ee=function(e){var t=e.settings,n=t.skin,r=t.skin_url;if(!1!==n){var i=n||"lightgray";r=r?e.documentBaseURI.toAbsolute(r):M.baseURL+"/skins/"+i}return r},te=function(e,t){for(var n=[],r=1;r<10;r++){var i=e["toolbar"+r];if(!i)break;n.push(i)}var o=e.toolbar?[e.toolbar]:[t];return n.length>0?n:o},ne=function(e){var t=e.getParam("toolbar");return!1===t?[]:j.isArray(t)?j.grep(t,function(e){return e.length>0}):te(e.settings,"undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image")},re=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),ie=tinymce.util.Tools.resolve("tinymce.ui.Factory"),oe=tinymce.util.Tools.resolve("tinymce.util.I18n"),ae=function(e){return e.fire("SkinLoaded")},se=function(e){return e.fire("ResizeEditor")},le=function(e){return e.fire("BeforeRenderUI")},ce={fireSkinLoaded:ae,fireResizeEditor:se,fireBeforeRenderUI:le},ue=function(e,t){return function(){var n=e.find(t)[0];n&&n.focus(!0)}},de=function(e,t){e.shortcuts.add("Alt+F9","",ue(t,"menubar")),e.shortcuts.add("Alt+F10,F10","",ue(t,"toolbar")),e.shortcuts.add("Alt+F11","",ue(t,"elementpath")),t.on("cancel",function(){e.focus()})},fe={addKeys:de},he=tinymce.util.Tools.resolve("tinymce.geom.Rect"),pe=tinymce.util.Tools.resolve("tinymce.util.Delay"),ge=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},me=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e(t.apply(null,arguments))}},ve=function(e){return function(){return e}},be=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=new Array(arguments.length-1),i=1;i<arguments.length;i++)r[i-1]=arguments[i];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var i=new Array(arguments.length),o=0;o<i.length;o++)i[o]=arguments[o];var a=r.concat(i);return e.apply(null,a)}},ye=ve(!1),we=ve(!0),_e=ye,xe=we,Ce=function(){return ke},ke=function(){var e=function(e){return e.isNone()},t=function(e){return e()},n=function(e){return e},r=function(){},i=function(){return null},o=function(){},a={fold:function(e,t){return e()},is:_e,isSome:_e,isNone:xe,getOr:n,getOrThunk:t,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:i,getOrUndefined:o,or:n,orThunk:t,map:Ce,ap:Ce,each:r,bind:Ce,flatten:Ce,exists:_e,forall:xe,filter:Ce,equals:e,equals_:e,toArray:function(){return[]},toString:ve("none()")};return Object.freeze&&Object.freeze(a),a}(),Te=function(e){var t=function(){return e},n=function(){return o},r=function(t){return Te(t(e))},i=function(t){return t(e)},o={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:xe,isNone:_e,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:r,ap:function(t){return t.fold(Ce,function(t){return Te(t(e))})},each:function(t){t(e)},bind:i,flatten:t,exists:i,forall:i,filter:function(t){return t(e)?o:ke},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(_e,function(t){return n(e,t)})},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return o},Se=function(e){return null===e||void 0===e?ke:Te(e)},De={some:Te,none:Ce,from:Se},Ee=function(e){var t=Ae(e);if(t&&"static"!==re.DOM.getStyle(t,"position",!0)){var n=re.DOM.getPos(t),r=t.scrollLeft-n.x,i=t.scrollTop-n.y;return De.some({x:r,y:i})}return De.none()},Ne=function(e,t){var n=re.DOM.select(e.settings.ui_container)[0];t.getRoot().uiContainer=n},Ae=function(e){return e?e.getRoot().uiContainer:null},Re=function(e,t){return t.uiContainer=Ae(e)},Pe={getUiContainerDelta:Ee,setUiContainer:Ne,getUiContainer:Ae,inheritUiContainer:Re},Oe=function(e,t,n){var r,i=[];if(t)return j.each(t.split(/[ ,]/),function(t){var o,a=function(){var n=e.selection;t.settings.stateSelector&&n.selectorChanged(t.settings.stateSelector,function(e){t.active(e)},!0),t.settings.disabledStateSelector&&n.selectorChanged(t.settings.disabledStateSelector,function(e){t.disabled(e)})};"|"===t?r=null:(r||(r={type:"buttongroup",items:[]},i.push(r)),e.buttons[t]&&(o=t,t=e.buttons[o],"function"==typeof t&&(t=t()),t.type=t.type||"button",t.size=n,t=ie.create(t),r.items.push(t),e.initialized?a():e.on("init",a)))}),{type:"toolbar",layout:"flow",items:i}},Ie=function(e,t){var n=[],r=function(r){r&&n.push(Oe(e,r,t))};if(j.each(ne(e),function(e){r(e)}),n.length)return{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:n}},Me={createToolbar:Oe,createToolbars:Ie},je=re.DOM,Be=function(e){return{left:e.x,top:e.y,width:e.w,height:e.h,right:e.x+e.w,bottom:e.y+e.h}},Le=function(e){j.each(e.contextToolbars,function(e){e.panel&&e.panel.hide()})},Fe=function(e,t){e.moveTo(t.left,t.top)},He=function(e,t,n){t=t?t.substr(0,2):"",j.each({t:"down",b:"up"},function(r,i){e.classes.toggle("arrow-"+r,n(i,t.substr(0,1)))}),j.each({l:"left",r:"right"},function(r,i){e.classes.toggle("arrow-"+r,n(i,t.substr(1,1)))})},$e=function(e,t,n,r,i,o){return o=Be({x:t,y:n,w:o.w,h:o.h}),e&&(o=e({elementRect:Be(r),contentAreaRect:Be(i),panelRect:o})),o},Ue=function(e){var t,n=function(){return e.contextToolbars||[]},r=function(t){var n,r,i;return n=je.getPos(e.getContentAreaContainer()),r=e.dom.getRect(t),i=e.dom.getRoot(),"BODY"===i.nodeName&&(r.x-=i.ownerDocument.documentElement.scrollLeft||i.scrollLeft,r.y-=i.ownerDocument.documentElement.scrollTop||i.scrollTop),r.x+=n.x,r.y+=n.y,r},i=function(t,n){var i,o,a,s,l,c,u,d,f=W(e);if(!e.removed){if(!t||!t.toolbar.panel)return void Le(e);u=["bc-tc","tc-bc","tl-bl","bl-tl","tr-br","br-tr"],l=t.toolbar.panel,n&&l.show(),a=r(t.element),o=je.getRect(l.getEl()),s=je.getRect(e.getContentAreaContainer()||e.getBody());var h=Pe.getUiContainerDelta(l).getOr({x:0,y:0});if(a.x+=h.x,a.y+=h.y,o.x+=h.x,o.y+=h.y,s.x+=h.x,s.y+=h.y,d=25,"inline"!==je.getStyle(t.element,"display",!0)){var p=t.element.getBoundingClientRect();a.w=p.width,a.h=p.height}e.inline||(s.w=e.getDoc().documentElement.offsetWidth),e.selection.controlSelection.isResizable(t.element)&&a.w<d&&(a=he.inflate(a,0,8)),i=he.findBestRelativePosition(o,a,s,u),a=he.clamp(a,s),i?(c=he.relativePosition(o,a,i),Fe(l,$e(f,c.x,c.y,a,s,o))):(s.h+=o.h,a=he.intersect(s,a),a?(i=he.findBestRelativePosition(o,a,s,["bc-tc","bl-tl","br-tr"]),i?(c=he.relativePosition(o,a,i),Fe(l,$e(f,c.x,c.y,a,s,o))):Fe(l,$e(f,a.x,a.y,a,s,o))):l.hide()),He(l,i,function(e,t){return e===t})}},o=function(t){return function(){var n=function(){e.selection&&i(c(e.selection.getNode()),t)};pe.requestAnimationFrame(n)}},a=function(n){if(!t){var r=o(!0),i=Pe.getUiContainer(n);t=e.selection.getScrollContainer()||e.getWin(),je.bind(t,"scroll",r),je.bind(i,"scroll",r),e.on("remove",function(){je.unbind(t,"scroll",r),je.unbind(i,"scroll",r)})}},s=function(t){var n;if(t.toolbar.panel)return t.toolbar.panel.show(),void i(t);n=ie.create({type:"floatpanel",role:"dialog",classes:"tinymce tinymce-inline arrow",ariaLabel:"Inline toolbar",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!0,border:1,items:Me.createToolbar(e,t.toolbar.items),oncancel:function(){e.focus()}}),Pe.setUiContainer(e,n),a(n),t.toolbar.panel=n,n.renderTo().reflow(),i(t)},l=function(){j.each(n(),function(e){e.panel&&e.panel.hide()})},c=function(t){var r,i,o,a=n();for(o=e.$(t).parents().add(t),r=o.length-1;r>=0;r--)for(i=a.length-1;i>=0;i--)if(a[i].predicate(o[r]))return{toolbar:a[i],element:o[r]};return null};e.on("click keyup setContent ObjectResized",function(t){("setcontent"!==t.type||t.selection)&&pe.setEditorTimeout(e,function(){var t;t=c(e.selection.getNode()),t?(l(),s(t)):l()})}),e.on("blur hide contextmenu",l),e.on("ObjectResizeStart",function(){var t=c(e.selection.getNode());t&&t.toolbar.panel&&t.toolbar.panel.hide()}),e.on("ResizeEditor ResizeWindow",o(!0)),e.on("nodeChange",o(!1)),e.on("remove",function(){j.each(n(),function(e){e.panel&&e.panel.remove()}),e.contextToolbars={}}),e.shortcuts.add("ctrl+shift+e > ctrl+shift+p","",function(){var t=c(e.selection.getNode());t&&t.toolbar.panel&&t.toolbar.panel.items()[0].focus()})},ze={addContextualToolbars:Ue},We=function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&Array.prototype.isPrototypeOf(e)?"array":"object"===t&&String.prototype.isPrototypeOf(e)?"string":t},qe=function(e){return function(t){return We(t)===e}},Ve=qe("function"),Ye=qe("number"),Ge=function(){var e=Array.prototype.indexOf,t=function(t,n){return e.call(t,n)},n=function(e,t){return rt(e,t)};return void 0===e?n:t}(),Ke=function(e,t){var n=Ge(e,t);return-1===n?De.none():De.some(n)},Xe=function(e,t){return nt(e,t).isSome()},Je=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;i++){var o=e[i];r[i]=t(o,i,e)}return r},Qe=function(e,t){for(var n=0,r=e.length;n<r;n++){t(e[n],n,e)}},Ze=function(e,t){for(var n=[],r=0,i=e.length;r<i;r++){var o=e[r];t(o,r,e)&&n.push(o)}return n},et=function(e,t,n){return Qe(e,function(e){n=t(n,e)}),n},tt=function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];if(t(i,n,e))return De.some(i)}return De.none()},nt=function(e,t){for(var n=0,r=e.length;n<r;n++){if(t(e[n],n,e))return De.some(n)}return De.none()},rt=function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return n;return-1},it=Array.prototype.push,ot=function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!Array.prototype.isPrototypeOf(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);it.apply(t,e[n])}return t},at=Array.prototype.slice,st=function(e){var t=at.call(e,0);return t.reverse(),t},lt=(Ve(Array.from)&&Array.from,{file:{title:"File",items:"newdocument restoredraft | preview | print"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen"},insert:{title:"Insert",items:"image link media template codesample inserttable | charmap hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | blockformats align | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code"},table:{title:"Table"},help:{title:"Help"}}),ct=function(){return{name:"|",item:{text:"|"}}},ut=function(e,t){var n=t?{name:e,item:t}:null;return"|"===e?ct():n},dt=function(e,t){return nt(e,function(e){return e.name===t}).isSome()},ft=function(e){return e&&"|"===e.item.text},ht=function(e,t){var n=Ze(e,function(e){return!1===t.hasOwnProperty(e.name)}),r=Ze(n,function(e,t,n){return!ft(e)||!ft(n[t-1])});return Ze(r,function(e,t,n){return!ft(e)||t>0&&t<n.length-1})},pt=function(e,t,n,r){var i,o,a,s;return t?(o=t[r],s=!0):o=lt[r],o&&(i={text:o.title},a=[],j.each((o.items||"").split(/[ ,]/),function(t){var n=ut(t,e[t]);n&&a.push(n)}),s||j.each(e,function(e,t){e.context!==r||dt(a,t)||("before"===e.separator&&a.push(ct()),e.prependToContext?a.unshift(ut(t,e)):a.push(ut(t,e)),"after"===e.separator&&a.push(ct()))}),i.menu=Je(ht(a,n),function(e){return e.item}),!i.menu.length)?null:i},gt=function(e){var t,n=[],r=q(e);if(r)for(t in r)n.push(t);else for(t in lt)n.push(t);return n},mt=function(e){for(var t=[],n=gt(e),r=j.makeMap(V(e).split(/[ ,]/)),i=F(e),o="string"==typeof i?i.split(/[ ,]/):n,a=0;a<o.length;a++){var s=o[a],l=pt(e.menuItems,q(e),r,s);l&&t.push(l)}return t},vt={createMenuButtons:mt},bt=re.DOM,yt=function(e){return{width:e.clientWidth,height:e.clientHeight}},wt=function(e,t,n){var r,i,o,a;r=e.getContainer(),i=e.getContentAreaContainer().firstChild,o=yt(r),a=yt(i),null!==t&&(t=Math.max(Y(e),t),t=Math.min(K(e),t),bt.setStyle(r,"width",t+(o.width-a.width)),bt.setStyle(i,"width",t)),n=Math.max(G(e),n),n=Math.min(X(e),n),bt.setStyle(i,"height",n),ce.fireResizeEditor(e)},_t=function(e,t,n){var r=e.getContentAreaContainer();wt(e,r.clientWidth+t,r.clientHeight+n)},xt={resizeTo:wt,resizeBy:_t},Ct=tinymce.util.Tools.resolve("tinymce.Env"),kt=function(e){return{element:function(){return e}}},Tt=function(e,t,n){var r=e.settings[n];r&&r(kt(t.getEl("body")))},St=function(e,t,n){j.each(n,function(n){var r=t.items().filter("#"+n.name)[0];r&&r.visible()&&n.name!==e&&(Tt(n,r,"onhide"),r.visible(!1))})},Dt=function(e){e.items().each(function(e){e.active(!1)})},Et=function(e,t){return j.grep(e,function(e){return e.name===t})[0]},Nt=function(e,t,n){return function(r){var i=r.control,o=i.parents().filter("panel")[0],a=o.find("#"+t)[0],s=Et(n,t);St(t,o,n),Dt(i.parent()),a&&a.visible()?(Tt(s,a,"onhide"),a.hide(),i.active(!1)):(a?(a.show(),Tt(s,a,"onshow")):(a=ie.create({type:"container",name:t,layout:"stack",classes:"sidebar-panel",html:""}),o.prepend(a),Tt(s,a,"onrender"),Tt(s,a,"onshow")),i.active(!0)),ce.fireResizeEditor(e)}},At=function(){return!Ct.ie||Ct.ie>=11},Rt=function(e){return!(!At()||!e.sidebars)&&e.sidebars.length>0},Pt=function(e){return{type:"panel",name:"sidebar",layout:"stack",classes:"sidebar",items:[{type:"toolbar",layout:"stack",classes:"sidebar-toolbar",items:j.map(e.sidebars,function(t){var n=t.settings;return{type:"button",icon:n.icon,image:n.image,tooltip:n.tooltip,onclick:Nt(e,t.name,e.sidebars)}})}]}},Ot={hasSidebar:Rt,createSidebar:Pt},It=function(e){var t=function(){e._skinLoaded=!0,ce.fireSkinLoaded(e)};return function(){e.initialized?t():e.on("init",t)}},Mt={fireSkinLoaded:It},jt=re.DOM,Bt=function(e){return function(t){e.find("*").disabled("readonly"===t.mode)}},Lt=function(e){return{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",border:e,html:""}},Ft=function(e){return{type:"panel",layout:"stack",classes:"edit-aria-container",border:"1 0 0 0",items:[Lt("0"),Ot.createSidebar(e)]}},Ht=function(e,t,n){var r,i,o;if(!1===J(e)&&n.skinUiCss?jt.styleSheetLoader.load(n.skinUiCss,Mt.fireSkinLoaded(e)):Mt.fireSkinLoaded(e)(),r=t.panel=ie.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[{type:"container",classes:"top-part",items:[!1===L(e)?null:{type:"menubar",border:"0 0 1 0",items:vt.createMenuButtons(e)},Me.createToolbars(e,$(e))]},Ot.hasSidebar(e)?Ft(e):Lt("1 0 0 0")]}),Pe.setUiContainer(e,r),"none"!==Z(e)&&(i={type:"resizehandle",direction:Z(e),onResizeStart:function(){var t=e.getContentAreaContainer().firstChild;o={width:t.clientWidth,height:t.clientHeight}},onResize:function(t){"both"===Z(e)?xt.resizeTo(e,o.width+t.deltaX,o.height+t.deltaY):xt.resizeTo(e,null,o.height+t.deltaY)}}),H(e)){var a=oe.translate(["Powered by {0}",'<a href="https://www.tinymce.com/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce" rel="noopener" target="_blank" role="presentation" tabindex="-1">tinymce</a>']),s=B(e)?{type:"label",classes:"branding",html:" "+a}:null;r.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",ariaRoot:!0,items:[{type:"elementpath",editor:e},i,s]})}return ce.fireBeforeRenderUI(e),e.on("SwitchMode",Bt(r)),r.renderBefore(n.targetNode).reflow(),U(e)&&e.setMode("readonly"),n.width&&jt.setStyle(r.getEl(),"width",n.width),e.on("remove",function(){r.remove(),r=null}),fe.addKeys(e,r),ze.addContextualToolbars(e),{iframeContainer:r.find("#iframe")[0].getEl(),editorContainer:r.getEl()}},$t={render:Ht},Ut=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),zt=0,Wt={id:function(){return"mceu_"+zt++},create:function(e,t,n){var r=document.createElement(e);return re.DOM.setAttribs(r,t),"string"==typeof n?r.innerHTML=n:j.each(n,function(e){e.nodeType&&r.appendChild(e)}),r},createFragment:function(e){return re.DOM.createFragment(e)},getWindowSize:function(){return re.DOM.getViewPort()},getSize:function(e){var t,n;if(e.getBoundingClientRect){var r=e.getBoundingClientRect();t=Math.max(r.width||r.right-r.left,e.offsetWidth),n=Math.max(r.height||r.bottom-r.bottom,e.offsetHeight)}else t=e.offsetWidth,n=e.offsetHeight;return{width:t,height:n}},getPos:function(e,t){return re.DOM.getPos(e,t||Wt.getContainer())},getContainer:function(){return Ct.container?Ct.container:document.body},getViewPort:function(e){return re.DOM.getViewPort(e)},get:function(e){return document.getElementById(e)},addClass:function(e,t){return re.DOM.addClass(e,t)},removeClass:function(e,t){return re.DOM.removeClass(e,t)},hasClass:function(e,t){return re.DOM.hasClass(e,t)},toggleClass:function(e,t,n){return re.DOM.toggleClass(e,t,n)},css:function(e,t,n){return re.DOM.setStyle(e,t,n)},getRuntimeStyle:function(e,t){return re.DOM.getStyle(e,t,!0)},on:function(e,t,n,r){return re.DOM.bind(e,t,n,r)},off:function(e,t,n){return re.DOM.unbind(e,t,n)},fire:function(e,t,n){return re.DOM.fire(e,t,n)},innerHtml:function(e,t){re.DOM.setHTML(e,t)}},qt=function(e){return"static"===Wt.getRuntimeStyle(e,"position")},Vt=function(e){return e.state.get("fixed")},Yt=function(e){return{x:0,y:0,w:e.scrollWidth-1,h:e.scrollHeight-1}},Gt=function(){var e=window,t=Math.max(e.pageXOffset,document.body.scrollLeft,document.documentElement.scrollLeft),n=Math.max(e.pageYOffset,document.body.scrollTop,document.documentElement.scrollTop);return{x:t,y:n,w:t+(e.innerWidth||document.documentElement.clientWidth),h:n+(e.innerHeight||document.documentElement.clientHeight)}},Kt=function(e){var t=Pe.getUiContainer(e);return t&&!Vt(e)?Yt(t):Gt()},Xt={testMoveRel:function(t,n){for(var r=Kt(this),i=0;i<n.length;i++){var o=e(this,t,n[i]);if(Vt(this)){if(o.x>0&&o.x+o.w<r.w&&o.y>0&&o.y+o.h<r.h)return n[i]}else if(o.x>r.x&&o.x+o.w<r.w&&o.y>r.y&&o.y+o.h<r.h)return n[i]}return n[0]},moveRel:function(t,n){"string"!=typeof n&&(n=this.testMoveRel(t,n));var r=e(this,t,n);return this.moveTo(r.x,r.y)},moveBy:function(e,t){var n=this,r=n.layoutRect();return n.moveTo(r.x+e,r.y+t),n},moveTo:function(e,t){function n(e,t,n){return e<0?0:e+n>t?(e=t-n,e<0?0:e):e}var r=this;if(r.settings.constrainToViewport){var i=Kt(this),o=r.layoutRect();e=n(e,i.w,o.w),t=n(t,i.h,o.h)}var a=Pe.getUiContainer(r);return a&&qt(a)&&!Vt(r)&&(e-=a.scrollLeft,t-=a.scrollTop),a&&(e+=1,t+=1),r.state.get("rendered")?r.layoutRect({x:e,y:t}).repaint():(r.settings.x=e,r.settings.y=t),r.fire("move",{x:e,y:t}),r}},Jt=tinymce.util.Tools.resolve("tinymce.util.Class"),Qt=tinymce.util.Tools.resolve("tinymce.util.EventDispatcher"),Zt={parseBox:function(e){var t;if(e)return"number"==typeof e?(e=e||0,{top:e,left:e,bottom:e,right:e}):(e=e.split(" "),t=e.length,1===t?e[1]=e[2]=e[3]=e[0]:2===t?(e[2]=e[0],e[3]=e[1]):3===t&&(e[3]=e[1]),{top:parseInt(e[0],10)||0,right:parseInt(e[1],10)||0,bottom:parseInt(e[2],10)||0,left:parseInt(e[3],10)||0})},measureBox:function(e,t){function n(t){var n=e.ownerDocument.defaultView;if(n){var r=n.getComputedStyle(e,null);return r?(t=t.replace(/[A-Z]/g,function(e){return"-"+e}),r.getPropertyValue(t)):null}return e.currentStyle[t]}function r(e){var t=parseFloat(n(e));return isNaN(t)?0:t}return{top:r(t+"TopWidth"),right:r(t+"RightWidth"),bottom:r(t+"BottomWidth"),left:r(t+"LeftWidth")}}};j.extend(n.prototype,{add:function(e){return e&&!this.contains(e)&&(this.cls._map[e]=!0,this.cls.push(e),this._change()),this},remove:function(e){if(this.contains(e)){var t=void 0;for(t=0;t<this.cls.length&&this.cls[t]!==e;t++);this.cls.splice(t,1),delete this.cls._map[e],this._change()}return this},toggle:function(e,t){var n=this.contains(e);return n!==t&&(n?this.remove(e):this.add(e),this._change()),this},contains:function(e){return!!this.cls._map[e]},_change:function(){delete this.clsValue,this.onchange.call(this)}}),n.prototype.toString=function(){var e;if(this.clsValue)return this.clsValue;e="";for(var t=0;t<this.cls.length;t++)t>0&&(e+=" "),e+=this.prefix+this.cls[t];return e};var en,tn,nn,rn=/^([\w\\*]+)?(?:#([\w\-\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i,on=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,an=/^\s*|\s*$/g,sn=Jt.extend({init:function(e){function t(e){if(e)return e=e.toLowerCase(),function(t){return"*"===e||t.type===e}}function n(e){if(e)return function(t){return t._name===e}}function r(e){if(e)return e=e.split("."),function(t){for(var n=e.length;n--;)if(!t.classes.contains(e[n]))return!1;return!0}}function i(e,t,n){if(e)return function(r){var i=r[e]?r[e]():"";return t?"="===t?i===n:"*="===t?i.indexOf(n)>=0:"~="===t?(" "+i+" ").indexOf(" "+n+" ")>=0:"!="===t?i!==n:"^="===t?0===i.indexOf(n):"$="===t&&i.substr(i.length-n.length)===n:!!n}}function o(e){var t;if(e)return e=/(?:not\((.+)\))|(.+)/i.exec(e),e[1]?(t=s(e[1],[]),function(e){return!l(e,t)}):(e=e[2],function(t,n,r){return"first"===e?0===n:"last"===e?n===r-1:"even"===e?n%2==0:"odd"===e?n%2==1:!!t[e]&&t[e]()})}function a(e,a,s){function l(e){e&&a.push(e)}var c;return c=rn.exec(e.replace(an,"")),l(t(c[1])),l(n(c[2])),l(r(c[3])),l(i(c[4],c[5],c[6])),l(o(c[7])),a.pseudo=!!c[7],a.direct=s,a}function s(e,t){var n,r,i,o=[];do{if(on.exec(""),(r=on.exec(e))&&(e=r[3],o.push(r[1]),r[2])){n=r[3];break}}while(r);for(n&&s(n,t),e=[],i=0;i<o.length;i++)">"!==o[i]&&e.push(a(o[i],[],">"===o[i-1]));return t.push(e),t}var l=this.match;this._selectors=s(e,[])},match:function(e,t){var n,r,i,o,a,s,l,c,u,d,f,h,p;for(t=t||this._selectors,n=0,r=t.length;n<r;n++){for(a=t[n],o=a.length,p=e,h=0,i=o-1;i>=0;i--)for(c=a[i];p;){if(c.pseudo)for(f=p.parent().items(),u=d=f.length;u--&&f[u]!==p;);for(s=0,l=c.length;s<l;s++)if(!c[s](p,u,d)){s=l+1;break}if(s===l){h++;break}if(i===o-1)break;p=p.parent()}if(h===o)return!0}return!1},find:function(e){function t(e,n,r){var i,a,s,l,c,u=n[r];for(i=0,a=e.length;i<a;i++){for(c=e[i],s=0,l=u.length;s<l;s++)if(!u[s](c,i,a)){s=l+1;break}if(s===l)r===n.length-1?o.push(c):c.items&&t(c.items(),n,r+1);else if(u.direct)return;c.items&&t(c.items(),n,r)}}var n,i,o=[],a=this._selectors;if(e.items){for(n=0,i=a.length;n<i;n++)t(e.items(),a[n],0);i>1&&(o=r(o))}return en||(en=sn.Collection),new en(o)}}),ln=Array.prototype.push,cn=Array.prototype.slice;nn={length:0,init:function(e){e&&this.add(e)},add:function(e){var t=this;return j.isArray(e)?ln.apply(t,e):e instanceof tn?t.add(e.toArray()):ln.call(t,e),t},set:function(e){var t,n=this,r=n.length;for(n.length=0,n.add(e),t=n.length;t<r;t++)delete n[t];return n},filter:function(e){var t,n,r,i,o=this,a=[];for("string"==typeof e?(e=new sn(e),i=function(t){return e.match(t)}):i=e,t=0,n=o.length;t<n;t++)r=o[t],i(r)&&a.push(r);return new tn(a)},slice:function(){return new tn(cn.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},each:function(e){return j.each(this,e),this},toArray:function(){return j.toArray(this)},indexOf:function(e){for(var t=this,n=t.length;n--&&t[n]!==e;);return n},reverse:function(){return new tn(j.toArray(this).reverse())},hasClass:function(e){return!!this[0]&&this[0].classes.contains(e)},prop:function(e,t){var n,r=this;return void 0!==t?(r.each(function(n){n[e]&&n[e](t)}),r):(n=r[0],n&&n[e]?n[e]():void 0)},exec:function(e){var t=this,n=j.toArray(arguments).slice(1);return t.each(function(t){t[e]&&t[e].apply(t,n)}),t},remove:function(){for(var e=this.length;e--;)this[e].remove();return this},addClass:function(e){return this.each(function(t){t.classes.add(e)})},removeClass:function(e){return this.each(function(t){t.classes.remove(e)})}},j.each("fire on off show hide append prepend before after reflow".split(" "),function(e){nn[e]=function(){var t=j.toArray(arguments);return this.each(function(n){e in n&&n[e].apply(n,t)}),this}}),j.each("text name disabled active selected checked visible parent value data".split(" "),function(e){nn[e]=function(t){return this.prop(e,t)}}),tn=Jt.extend(nn),sn.Collection=tn;var un=tn,dn=function(e){this.create=e.create};dn.create=function(e,t){return new dn({create:function(n,r){var i,o=function(e){n.set(r,e.value)},a=function(n){e.set(t,n.value)};return n.on("change:"+r,a),e.on("change:"+t,o),i=n._bindings,i||(i=n._bindings=[],n.on("destroy",function(){for(var e=i.length;e--;)i[e]()})),i.push(function(){e.off("change:"+t,o)}),e.get(t)}})};var fn,hn,pn=tinymce.util.Tools.resolve("tinymce.util.Observable"),gn=Jt.extend({Mixins:[pn],init:function(e){var t,n;e=e||{};for(t in e)(n=e[t])instanceof dn&&(e[t]=n.create(this,t));this.data=e},set:function(e,t){var n,r,i=this.data[e];if(t instanceof dn&&(t=t.create(this,e)),"object"==typeof e){for(n in e)this.set(n,e[n]);return this}return o(i,t)||(this.data[e]=t,r={target:this,name:e,value:t,oldValue:i},this.fire("change:"+e,r),this.fire("change",r)),this},get:function(e){return this.data[e]},has:function(e){return e in this.data},bind:function(e){return dn.create(this,e)},destroy:function(){this.fire("destroy")}}),mn={},vn={add:function(e){var t=e.parent();if(t){if(!t._layout||t._layout.isNative())return;mn[t._id]||(mn[t._id]=t),fn||(fn=!0,pe.requestAnimationFrame(function(){var e,t;fn=!1;for(e in mn)t=mn[e],t.state.get("rendered")&&t.reflow();mn={}},document.body))}},remove:function(e){mn[e._id]&&delete mn[e._id]}},bn="onmousewheel"in document,yn=!1,wn=0,_n={Statics:{classPrefix:"mce-"},isRtl:function(){return hn.rtl},classPrefix:"mce-",init:function(e){function t(e){var t;for(e=e.split(" "),t=0;t<e.length;t++)o.classes.add(e[t])}var r,i,o=this;o.settings=e=j.extend({},o.Defaults,e),o._id=e.id||"mceu_"+wn++,o._aria={role:e.role},o._elmCache={},o.$=Ut,o.state=new gn({visible:!0,active:!1,disabled:!1,value:""}),o.data=new gn(e.data),o.classes=new n(function(){o.state.get("rendered")&&(o.getEl().className=this.toString())}),o.classes.prefix=o.classPrefix,r=e.classes,r&&(o.Defaults&&(i=o.Defaults.classes)&&r!==i&&t(i),t(r)),j.each("title text name visible disabled active value".split(" "),function(t){t in e&&o[t](e[t])}),o.on("click",function(){if(o.disabled())return!1}),o.settings=e,o.borderBox=Zt.parseBox(e.border),o.paddingBox=Zt.parseBox(e.padding),o.marginBox=Zt.parseBox(e.margin),e.hidden&&o.hide()},Properties:"parent,name",getContainerElm:function(){var e=Pe.getUiContainer(this);return e||Wt.getContainer()},getParentCtrl:function(e){for(var t,n=this.getRoot().controlIdLookup;e&&n&&!(t=n[e.id]);)e=e.parentNode;return t},initLayoutRect:function(){var e,t,n,r,i,o,a,s,l,c,u=this,d=u.settings,f=u.getEl();e=u.borderBox=u.borderBox||Zt.measureBox(f,"border"),u.paddingBox=u.paddingBox||Zt.measureBox(f,"padding"),u.marginBox=u.marginBox||Zt.measureBox(f,"margin"),c=Wt.getSize(f),s=d.minWidth,l=d.minHeight,i=s||c.width,o=l||c.height,n=d.width,r=d.height,a=d.autoResize,a=void 0!==a?a:!n&&!r,n=n||i,r=r||o;var h=e.left+e.right,p=e.top+e.bottom,g=d.maxWidth||65535,m=d.maxHeight||65535;return u._layoutRect=t={x:d.x||0,y:d.y||0,w:n,h:r,deltaW:h,deltaH:p,contentW:n-h,contentH:r-p,innerW:n-h,innerH:r-p,startMinWidth:s||0,startMinHeight:l||0,minW:Math.min(i,g),minH:Math.min(o,m),maxW:g,maxH:m,autoResize:a,scrollW:0},u._lastLayoutRect={},t},layoutRect:function(e){var t,n,r,i,o,a=this,s=a._layoutRect;return s||(s=a.initLayoutRect()),e?(r=s.deltaW,i=s.deltaH,void 0!==e.x&&(s.x=e.x),void 0!==e.y&&(s.y=e.y),void 0!==e.minW&&(s.minW=e.minW),void 0!==e.minH&&(s.minH=e.minH),n=e.w,void 0!==n&&(n=n<s.minW?s.minW:n,n=n>s.maxW?s.maxW:n,s.w=n,s.innerW=n-r),n=e.h,void 0!==n&&(n=n<s.minH?s.minH:n,n=n>s.maxH?s.maxH:n,s.h=n,s.innerH=n-i),n=e.innerW,void 0!==n&&(n=n<s.minW-r?s.minW-r:n,n=n>s.maxW-r?s.maxW-r:n,s.innerW=n,s.w=n+r),n=e.innerH,void 0!==n&&(n=n<s.minH-i?s.minH-i:n,n=n>s.maxH-i?s.maxH-i:n,s.innerH=n,s.h=n+i),void 0!==e.contentW&&(s.contentW=e.contentW),void 0!==e.contentH&&(s.contentH=e.contentH),t=a._lastLayoutRect,t.x===s.x&&t.y===s.y&&t.w===s.w&&t.h===s.h||(o=hn.repaintControls,
o&&o.map&&!o.map[a._id]&&(o.push(a),o.map[a._id]=!0),t.x=s.x,t.y=s.y,t.w=s.w,t.h=s.h),a):s},repaint:function(){var e,t,n,r,i,o,a,s,l,c,u=this;l=document.createRange?function(e){return e}:Math.round,e=u.getEl().style,r=u._layoutRect,s=u._lastRepaintRect||{},i=u.borderBox,o=i.left+i.right,a=i.top+i.bottom,r.x!==s.x&&(e.left=l(r.x)+"px",s.x=r.x),r.y!==s.y&&(e.top=l(r.y)+"px",s.y=r.y),r.w!==s.w&&(c=l(r.w-o),e.width=(c>=0?c:0)+"px",s.w=r.w),r.h!==s.h&&(c=l(r.h-a),e.height=(c>=0?c:0)+"px",s.h=r.h),u._hasBody&&r.innerW!==s.innerW&&(c=l(r.innerW),n=u.getEl("body"),n&&(t=n.style,t.width=(c>=0?c:0)+"px"),s.innerW=r.innerW),u._hasBody&&r.innerH!==s.innerH&&(c=l(r.innerH),n=n||u.getEl("body"),n&&(t=t||n.style,t.height=(c>=0?c:0)+"px"),s.innerH=r.innerH),u._lastRepaintRect=s,u.fire("repaint",{},!1)},updateLayoutRect:function(){var e=this;e.parent()._lastRect=null,Wt.css(e.getEl(),{width:"",height:""}),e._layoutRect=e._lastRepaintRect=e._lastLayoutRect=null,e.initLayoutRect()},on:function(e,t){var n=this;return a(n).on(e,function(e){var t,r;return"string"!=typeof e?e:function(i){return t||n.parentsAndSelf().each(function(n){var i=n.settings.callbacks;if(i&&(t=i[e]))return r=n,!1}),t?t.call(r,i):(i.action=e,void this.fire("execute",i))}}(t)),n},off:function(e,t){return a(this).off(e,t),this},fire:function(e,t,n){var r=this;if(t=t||{},t.control||(t.control=r),t=a(r).fire(e,t),!1!==n&&r.parent)for(var i=r.parent();i&&!t.isPropagationStopped();)i.fire(e,t,!1),i=i.parent();return t},hasEventListeners:function(e){return a(this).has(e)},parents:function(e){var t,n=this,r=new un;for(t=n.parent();t;t=t.parent())r.add(t);return e&&(r=r.filter(e)),r},parentsAndSelf:function(e){return new un(this).add(this.parents(e))},next:function(){var e=this.parent().items();return e[e.indexOf(this)+1]},prev:function(){var e=this.parent().items();return e[e.indexOf(this)-1]},innerHtml:function(e){return this.$el.html(e),this},getEl:function(e){var t=e?this._id+"-"+e:this._id;return this._elmCache[t]||(this._elmCache[t]=Ut("#"+t)[0]),this._elmCache[t]},show:function(){return this.visible(!0)},hide:function(){return this.visible(!1)},focus:function(){try{this.getEl().focus()}catch(e){}return this},blur:function(){return this.getEl().blur(),this},aria:function(e,t){var n=this,r=n.getEl(n.ariaTarget);return void 0===t?n._aria[e]:(n._aria[e]=t,n.state.get("rendered")&&r.setAttribute("role"===e?e:"aria-"+e,t),n)},encode:function(e,t){return!1!==t&&(e=this.translate(e)),(e||"").replace(/[&<>"]/g,function(e){return"&#"+e.charCodeAt(0)+";"})},translate:function(e){return hn.translate?hn.translate(e):e},before:function(e){var t=this,n=t.parent();return n&&n.insert(e,n.items().indexOf(t),!0),t},after:function(e){var t=this,n=t.parent();return n&&n.insert(e,n.items().indexOf(t)),t},remove:function(){var e,t,n=this,r=n.getEl(),i=n.parent();if(n.items){var o=n.items().toArray();for(t=o.length;t--;)o[t].remove()}i&&i.items&&(e=[],i.items().each(function(t){t!==n&&e.push(t)}),i.items().set(e),i._lastRect=null),n._eventsRoot&&n._eventsRoot===n&&Ut(r).off();var a=n.getRoot().controlIdLookup;return a&&delete a[n._id],r&&r.parentNode&&r.parentNode.removeChild(r),n.state.set("rendered",!1),n.state.destroy(),n.fire("remove"),n},renderBefore:function(e){return Ut(e).before(this.renderHtml()),this.postRender(),this},renderTo:function(e){return Ut(e||this.getContainerElm()).append(this.renderHtml()),this.postRender(),this},preRender:function(){},render:function(){},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'"></div>'},postRender:function(){var e,t,n,r,i,o=this,a=o.settings;o.$el=Ut(o.getEl()),o.state.set("rendered",!0);for(r in a)0===r.indexOf("on")&&o.on(r.substr(2),a[r]);if(o._eventsRoot){for(n=o.parent();!i&&n;n=n.parent())i=n._eventsRoot;if(i)for(r in i._nativeEvents)o._nativeEvents[r]=!0}s(o),a.style&&(e=o.getEl())&&(e.setAttribute("style",a.style),e.style.cssText=a.style),o.settings.border&&(t=o.borderBox,o.$el.css({"border-top-width":t.top,"border-right-width":t.right,"border-bottom-width":t.bottom,"border-left-width":t.left}));var l=o.getRoot();l.controlIdLookup||(l.controlIdLookup={}),l.controlIdLookup[o._id]=o;for(var c in o._aria)o.aria(c,o._aria[c]);!1===o.state.get("visible")&&(o.getEl().style.display="none"),o.bindStates(),o.state.on("change:visible",function(e){var t,n=e.value;o.state.get("rendered")&&(o.getEl().style.display=!1===n?"none":"",o.getEl().getBoundingClientRect()),t=o.parent(),t&&(t._lastRect=null),o.fire(n?"show":"hide"),vn.add(o)}),o.fire("postrender",{},!1)},bindStates:function(){},scrollIntoView:function(e){var t,n,r,i,o,a,s=this.getEl(),l=s.parentNode,c=function(e,t){var n,r,i=e;for(n=r=0;i&&i!==t&&i.nodeType;)n+=i.offsetLeft||0,r+=i.offsetTop||0,i=i.offsetParent;return{x:n,y:r}}(s,l);return t=c.x,n=c.y,r=s.offsetWidth,i=s.offsetHeight,o=l.clientWidth,a=l.clientHeight,"end"===e?(t-=o-r,n-=a-i):"center"===e&&(t-=o/2-r/2,n-=a/2-i/2),l.scrollLeft=t,l.scrollTop=n,this},getRoot:function(){for(var e,t=this,n=[];t;){if(t.rootControl){e=t.rootControl;break}n.push(t),e=t,t=t.parent()}e||(e=this);for(var r=n.length;r--;)n[r].rootControl=e;return e},reflow:function(){vn.remove(this);var e=this.parent();return e&&e._layout&&!e._layout.isNative()&&e.reflow(),this}};j.each("text title visible disabled active value".split(" "),function(e){_n[e]=function(t){return 0===arguments.length?this.state.get(e):(void 0!==t&&this.state.set(e,t),this)}}),hn=Jt.extend(_n);var xn,Cn,kn,Tn,Sn=hn,Dn=function(e){return!!e.getAttribute("data-mce-tabstop")},En={},Nn=Sn.extend({init:function(e){var t=this;t._super(e),e=t.settings,e.fixed&&t.state.set("fixed",!0),t._items=new un,t.isRtl()&&t.classes.add("rtl"),t.bodyClasses=new n(function(){t.state.get("rendered")&&(t.getEl("body").className=this.toString())}),t.bodyClasses.prefix=t.classPrefix,t.classes.add("container"),t.bodyClasses.add("container-body"),e.containerCls&&t.classes.add(e.containerCls),t._layout=ie.create((e.layout||"")+"layout"),t.settings.items?t.add(t.settings.items):t.add(t.render()),t._hasBody=!0},items:function(){return this._items},find:function(e){return e=En[e]=En[e]||new sn(e),e.find(this)},add:function(e){var t=this;return t.items().add(t.create(e)).parent(t),t},focus:function(e){var t,n,r,i=this;return e&&(n=i.keyboardNav||i.parents().eq(-1)[0].keyboardNav)?void n.focusFirst(i):(r=i.find("*"),i.statusbar&&r.add(i.statusbar.items()),r.each(function(e){if(e.settings.autofocus)return t=null,!1;e.canFocus&&(t=t||e)}),t&&t.focus(),i)},replace:function(e,t){for(var n,r=this.items(),i=r.length;i--;)if(r[i]===e){r[i]=t;break}i>=0&&(n=t.getEl(),n&&n.parentNode.removeChild(n),(n=e.getEl())&&n.parentNode.removeChild(n)),t.parent(this)},create:function(e){var t,n=this,r=[];return j.isArray(e)||(e=[e]),j.each(e,function(e){e&&(e instanceof Sn||("string"==typeof e&&(e={type:e}),t=j.extend({},n.settings.defaults,e),e.type=t.type=t.type||e.type||n.settings.defaultType||(t.defaults?t.defaults.type:null),e=ie.create(t)),r.push(e))}),r},renderNew:function(){var e=this;return e.items().each(function(t,n){var r;t.parent(e),t.state.get("rendered")||(r=e.getEl("body"),r.hasChildNodes()&&n<=r.childNodes.length-1?Ut(r.childNodes[n]).before(t.renderHtml()):Ut(r).append(t.renderHtml()),t.postRender(),vn.add(t))}),e._layout.applyClasses(e.items().filter(":visible")),e._lastRect=null,e},append:function(e){return this.add(e).renderNew()},prepend:function(e){var t=this;return t.items().set(t.create(e).concat(t.items().toArray())),t.renderNew()},insert:function(e,t,n){var r,i,o,a=this;return e=a.create(e),r=a.items(),!n&&t<r.length-1&&(t+=1),t>=0&&t<r.length&&(i=r.slice(0,t).toArray(),o=r.slice(t).toArray(),r.set(i.concat(e,o))),a.renderNew()},fromJSON:function(e){var t=this;for(var n in e)t.find("#"+n).value(e[n]);return t},toJSON:function(){var e=this,t={};return e.find("*").each(function(e){var n=e.name(),r=e.value();n&&void 0!==r&&(t[n]=r)}),t},renderHtml:function(){var e=this,t=e._layout,n=this.settings.role;return e.preRender(),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes+'"'+(n?' role="'+this.settings.role+'"':"")+'><div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"},postRender:function(){var e,t=this;return t.items().exec("postRender"),t._super(),t._layout.postRender(t),t.state.set("rendered",!0),t.settings.style&&t.$el.css(t.settings.style),t.settings.border&&(e=t.borderBox,t.$el.css({"border-top-width":e.top,"border-right-width":e.right,"border-bottom-width":e.bottom,"border-left-width":e.left})),t.parent()||(t.keyboardNav=l({root:t})),t},initLayoutRect:function(){var e=this,t=e._super();return e._layout.recalc(e),t},recalc:function(){var e=this,t=e._layoutRect,n=e._lastRect;if(!n||n.w!==t.w||n.h!==t.h)return e._layout.recalc(e),t=e.layoutRect(),e._lastRect={x:t.x,y:t.y,w:t.w,h:t.h},!0},reflow:function(){var e;if(vn.remove(this),this.visible()){for(Sn.repaintControls=[],Sn.repaintControls.map={},this.recalc(),e=Sn.repaintControls.length;e--;)Sn.repaintControls[e].repaint();"flow"!==this.settings.layout&&"stack"!==this.settings.layout&&this.repaint(),Sn.repaintControls=[]}return this}}),An={init:function(){var e=this;e.on("repaint",e.renderScroll)},renderScroll:function(){function e(){function e(e,o,a,s,l,c){var u,d,f,h,p,g,m,v,b;if(d=t.getEl("scroll"+e)){if(v=o.toLowerCase(),b=a.toLowerCase(),Ut(t.getEl("absend")).css(v,t.layoutRect()[s]-1),!l)return void Ut(d).css("display","none");Ut(d).css("display","block"),u=t.getEl("body"),f=t.getEl("scroll"+e+"t"),h=u["client"+a]-2*n,h-=r&&i?d["client"+c]:0,p=u["scroll"+a],g=h/p,m={},m[v]=u["offset"+o]+n,m[b]=h,Ut(d).css(m),m={},m[v]=u["scroll"+o]*g,m[b]=h*g,Ut(f).css(m)}}var r,i,o;o=t.getEl("body"),r=o.scrollWidth>o.clientWidth,i=o.scrollHeight>o.clientHeight,e("h","Left","Width","contentW",r,"Height"),e("v","Top","Height","contentH",i,"Width")}var t=this,n=2;t.settings.autoScroll&&(t._hasScroll||(t._hasScroll=!0,function(){function e(e,r,i,o,a){var s,l=t._id+"-scroll"+e,c=t.classPrefix;Ut(t.getEl()).append('<div id="'+l+'" class="'+c+"scrollbar "+c+"scrollbar-"+e+'"><div id="'+l+'t" class="'+c+'scrollbar-thumb"></div></div>'),t.draghelper=new d(l+"t",{start:function(){s=t.getEl("body")["scroll"+r],Ut("#"+l).addClass(c+"active")},drag:function(l){var c,u,d,f,h=t.layoutRect();u=h.contentW>h.innerW,d=h.contentH>h.innerH,f=t.getEl("body")["client"+i]-2*n,f-=u&&d?t.getEl("scroll"+e)["client"+a]:0,c=f/t.getEl("body")["scroll"+i],t.getEl("body")["scroll"+r]=s+l["delta"+o]/c},stop:function(){Ut("#"+l).removeClass(c+"active")}})}t.classes.add("scroll"),e("v","Top","Height","Y","Width"),e("h","Left","Width","X","Height")}(),t.on("wheel",function(n){var r=t.getEl("body");r.scrollLeft+=10*(n.deltaX||0),r.scrollTop+=10*n.deltaY,e()}),Ut(t.getEl("body")).on("scroll",e)),e())}},Rn=Nn.extend({Defaults:{layout:"fit",containerCls:"panel"},Mixins:[An],renderHtml:function(){var e=this,t=e._layout,n=e.settings.html;return e.preRender(),t.preRender(e),void 0===n?n='<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+t.renderHtml(e)+"</div>":("function"==typeof n&&(n=n.call(e)),e._hasBody=!1),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1" role="group">'+(e._preBodyHtml||"")+n+"</div>"}}),Pn={resizeToContent:function(){this._layoutRect.autoResize=!0,this._lastRect=null,this.reflow()},resizeTo:function(e,t){if(e<=1||t<=1){var n=Wt.getWindowSize();e=e<=1?e*n.w:e,t=t<=1?t*n.h:t}return this._layoutRect.autoResize=!1,this.layoutRect({minW:e,minH:t,w:e,h:t}).reflow()},resizeBy:function(e,t){var n=this,r=n.layoutRect();return n.resizeTo(r.w+e,r.h+t)}},On=[],In=[],Mn=Rn.extend({Mixins:[Xt,Pn],init:function(e){var t=this;t._super(e),t._eventsRoot=t,t.classes.add("floatpanel"),e.autohide&&(p(),m(),On.push(t)),e.autofix&&(g(),t.on("move",function(){v(this)})),t.on("postrender show",function(e){if(e.control===t){var n,r=t.classPrefix;t.modal&&!Tn&&(n=Ut("#"+r+"modal-block",t.getContainerElm()),n[0]||(n=Ut('<div id="'+r+'modal-block" class="'+r+"reset "+r+'fade"></div>').appendTo(t.getContainerElm())),pe.setTimeout(function(){n.addClass(r+"in"),Ut(t.getEl()).addClass(r+"in")}),Tn=!0),b(!0,t)}}),t.on("show",function(){t.parents().each(function(e){if(e.state.get("fixed"))return t.fixed(!0),!1})}),e.popover&&(t._preBodyHtml='<div class="'+t.classPrefix+'arrow"></div>',t.classes.add("popover").add("bottom").add(t.isRtl()?"end":"start")),t.aria("label",e.ariaLabel),t.aria("labelledby",t._id),t.aria("describedby",t.describedBy||t._id+"-none")},fixed:function(e){var t=this;if(t.state.get("fixed")!==e){if(t.state.get("rendered")){var n=Wt.getViewPort();e?t.layoutRect().y-=n.y:t.layoutRect().y+=n.y}t.classes.toggle("fixed",e),t.state.set("fixed",e)}return t},show:function(){var e,t=this,n=t._super();for(e=On.length;e--&&On[e]!==t;);return-1===e&&On.push(t),n},hide:function(){return y(this),b(!1,this),this._super()},hideAll:function(){Mn.hideAll()},close:function(){var e=this;return e.fire("close").isDefaultPrevented()||(e.remove(),b(!1,e)),e},remove:function(){y(this),this._super()},postRender:function(){var e=this;return e.settings.bodyRole&&this.getEl("body").setAttribute("role",e.settings.bodyRole),e._super()}});Mn.hideAll=function(){for(var e=On.length;e--;){var t=On[e];t&&t.settings.autohide&&(t.hide(),On.splice(e,1))}};var jn=function(e,t){return!(!e||t.settings.ui_container)},Bn=function(e,t,n){var r,i,o=re.DOM,a=z(e);a&&(i=o.select(a)[0]);var s=function(){if(r&&r.moveRel&&r.visible()&&!r._fixed){var t=e.selection.getScrollContainer(),n=e.getBody(),i=0,a=0;if(t){var s=o.getPos(n),l=o.getPos(t);i=Math.max(0,l.x-s.x),a=Math.max(0,l.y-s.y)}r.fixed(!1).moveRel(n,e.rtl?["tr-br","br-tr"]:["tl-bl","bl-tl","tr-br"]).moveBy(i,a)}},l=function(){r&&(r.show(),s(),o.addClass(e.getBody(),"mce-edit-focus"))},c=function(){r&&(r.hide(),Mn.hideAll(),o.removeClass(e.getBody(),"mce-edit-focus"))},u=function(){if(r)return void(r.visible()||l());r=t.panel=ie.create({type:i?"panel":"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:jn(i,e),fixed:jn(i,e),border:1,items:[!1===L(e)?null:{type:"menubar",border:"0 0 1 0",items:vt.createMenuButtons(e)},Me.createToolbars(e,$(e))]}),Pe.setUiContainer(e,r),ce.fireBeforeRenderUI(e),i?r.renderTo(i).reflow():r.renderTo().reflow(),fe.addKeys(e,r),l(),ze.addContextualToolbars(e),e.on("nodeChange",s),e.on("ResizeWindow",s),e.on("activate",l),e.on("deactivate",c),e.nodeChanged()};return e.settings.content_editable=!0,e.on("focus",function(){!1===J(e)&&n.skinUiCss?o.styleSheetLoader.load(n.skinUiCss,u,u):u()}),e.on("blur hide",c),e.on("remove",function(){r&&(r.remove(),r=null)}),!1===J(e)&&n.skinUiCss?o.styleSheetLoader.load(n.skinUiCss,Mt.fireSkinLoaded(e)):Mt.fireSkinLoaded(e)(),{}},Ln={render:Bn},Fn=function(e,t){var n;e.on("ProgressState",function(e){n=n||new w(t.panel.getEl("body")),e.state?n.show(e.time):n.hide()})},Hn={setup:Fn},$n=function(e,t,n){var r=ee(e);return r&&(n.skinUiCss=r+"/skin.min.css",e.contentCSS.push(r+"/content"+(e.inline?".inline":"")+".min.css")),Hn.setup(e,t),Q(e)?Ln.render(e,t,n):$t.render(e,t,n)},Un={renderUI:$n},zn=Sn.extend({Mixins:[Xt],Defaults:{classes:"widget tooltip tooltip-n"},renderHtml:function(){var e=this,t=e.classPrefix;return'<div id="'+e._id+'" class="'+e.classes+'" role="presentation"><div class="'+t+'tooltip-arrow"></div><div class="'+t+'tooltip-inner">'+e.encode(e.state.get("text"))+"</div></div>"},bindStates:function(){var e=this;return e.state.on("change:text",function(t){e.getEl().lastChild.innerHTML=e.encode(t.value)}),e._super()},repaint:function(){var e,t,n=this;e=n.getEl().style,t=n._layoutRect,e.left=t.x+"px",e.top=t.y+"px",e.zIndex=131070}}),Wn=Sn.extend({init:function(e){var t=this;t._super(e),e=t.settings,t.canFocus=!0,e.tooltip&&!1!==Wn.tooltips&&(t.on("mouseenter",function(n){var r=t.tooltip().moveTo(-65535);if(n.control===t){var i=r.text(e.tooltip).show().testMoveRel(t.getEl(),["bc-tc","bc-tl","bc-tr"]);r.classes.toggle("tooltip-n","bc-tc"===i),r.classes.toggle("tooltip-nw","bc-tl"===i),r.classes.toggle("tooltip-ne","bc-tr"===i),r.moveRel(t.getEl(),i)}else r.hide()}),t.on("mouseleave mousedown click",function(){t.tooltip().remove(),t._tooltip=null})),t.aria("label",e.ariaLabel||e.tooltip)},tooltip:function(){return this._tooltip||(this._tooltip=new zn({type:"tooltip"}),Pe.inheritUiContainer(this,this._tooltip),this._tooltip.renderTo()),this._tooltip},postRender:function(){var e=this,t=e.settings;e._super(),e.parent()||!t.width&&!t.height||(e.initLayoutRect(),e.repaint()),t.autofocus&&e.focus()},bindStates:function(){function e(e){n.aria("disabled",e),n.classes.toggle("disabled",e)}function t(e){n.aria("pressed",e),n.classes.toggle("active",e)}var n=this;return n.state.on("change:disabled",function(t){e(t.value)}),n.state.on("change:active",function(e){t(e.value)}),n.state.get("disabled")&&e(!0),n.state.get("active")&&t(!0),n._super()},remove:function(){this._super(),this._tooltip&&(this._tooltip.remove(),this._tooltip=null)}}),qn=Wn.extend({Defaults:{value:0},init:function(e){var t=this;t._super(e),t.classes.add("progress"),t.settings.filter||(t.settings.filter=function(e){return Math.round(e)})},renderHtml:function(){var e=this,t=e._id,n=this.classPrefix;return'<div id="'+t+'" class="'+e.classes+'"><div class="'+n+'bar-container"><div class="'+n+'bar"></div></div><div class="'+n+'text">0%</div></div>'},postRender:function(){var e=this;return e._super(),e.value(e.settings.value),e},bindStates:function(){function e(e){e=t.settings.filter(e),t.getEl().lastChild.innerHTML=e+"%",t.getEl().firstChild.firstChild.style.width=e+"%"}var t=this;return t.state.on("change:value",function(t){e(t.value)}),e(t.state.get("value")),t._super()}}),Vn=function(e,t){e.getEl().lastChild.textContent=t+(e.progressBar?" "+e.progressBar.value()+"%":"")},Yn=Sn.extend({Mixins:[Xt],Defaults:{classes:"widget notification"},init:function(e){var t=this;t._super(e),t.maxWidth=e.maxWidth,e.text&&t.text(e.text),e.icon&&(t.icon=e.icon),e.color&&(t.color=e.color),e.type&&t.classes.add("notification-"+e.type),e.timeout&&(e.timeout<0||e.timeout>0)&&!e.closeButton?t.closeButton=!1:(t.classes.add("has-close"),t.closeButton=!0),e.progressBar&&(t.progressBar=new qn),t.on("click",function(e){-1!==e.target.className.indexOf(t.classPrefix+"close")&&t.close()})},renderHtml:function(){var e=this,t=e.classPrefix,n="",r="",i="",o="";return e.icon&&(n='<i class="'+t+"ico "+t+"i-"+e.icon+'"></i>'),o=' style="max-width: '+e.maxWidth+"px;"+(e.color?"background-color: "+e.color+';"':'"'),e.closeButton&&(r='<button type="button" class="'+t+'close" aria-hidden="true"></button>'),e.progressBar&&(i=e.progressBar.renderHtml()),'<div id="'+e._id+'" class="'+e.classes+'"'+o+' role="presentation">'+n+'<div class="'+t+'notification-inner">'+e.state.get("text")+"</div>"+i+r+'<div style="clip: rect(1px, 1px, 1px, 1px);height: 1px;overflow: hidden;position: absolute;width: 1px;" aria-live="assertive" aria-relevant="additions" aria-atomic="true"></div></div>'},postRender:function(){var e=this;return pe.setTimeout(function(){e.$el.addClass(e.classPrefix+"in"),Vn(e,e.state.get("text"))},100),e._super()},bindStates:function(){var e=this;return e.state.on("change:text",function(t){e.getEl().firstChild.innerHTML=t.value,Vn(e,t.value)}),e.progressBar&&(e.progressBar.bindStates(),e.progressBar.state.on("change:value",function(t){Vn(e,e.state.get("text"))})),e._super()},close:function(){var e=this;return e.fire("close").isDefaultPrevented()||e.remove(),e},repaint:function(){var e,t,n=this;e=n.getEl().style,t=n._layoutRect,e.left=t.x+"px",e.top=t.y+"px",e.zIndex=65534}}),Gn=[],Kn="",Xn=Mn.extend({modal:!0,Defaults:{border:1,layout:"flex",containerCls:"panel",role:"dialog",callbacks:{submit:function(){this.fire("submit",{data:this.toJSON()})},close:function(){this.close()}}},init:function(e){var t=this;t._super(e),t.isRtl()&&t.classes.add("rtl"),t.classes.add("window"),t.bodyClasses.add("window-body"),t.state.set("fixed",!0),e.buttons&&(t.statusbar=new Rn({layout:"flex",border:"1 0 0 0",spacing:3,padding:10,align:"center",pack:t.isRtl()?"start":"end",defaults:{type:"button"},items:e.buttons}),t.statusbar.classes.add("foot"),t.statusbar.parent(t)),t.on("click",function(e){var n=t.classPrefix+"close";(Wt.hasClass(e.target,n)||Wt.hasClass(e.target.parentNode,n))&&t.close()}),t.on("cancel",function(){t.close()}),t.on("move",function(e){e.control===t&&Mn.hideAll()}),t.aria("describedby",t.describedBy||t._id+"-none"),t.aria("label",e.title),t._fullscreen=!1},recalc:function(){var e,t,n,r,i=this,o=i.statusbar;i._fullscreen&&(i.layoutRect(Wt.getWindowSize()),i.layoutRect().contentH=i.layoutRect().innerH),i._super(),e=i.layoutRect(),i.settings.title&&!i._fullscreen&&(t=e.headerW)>e.w&&(n=e.x-Math.max(0,t/2),i.layoutRect({w:t,x:n}),r=!0),o&&(o.layoutRect({w:i.layoutRect().innerW}).recalc(),(t=o.layoutRect().minW+e.deltaW)>e.w&&(n=e.x-Math.max(0,t-e.w),i.layoutRect({w:t,x:n}),r=!0)),r&&i.recalc()},initLayoutRect:function(){var e,t=this,n=t._super(),r=0;if(t.settings.title&&!t._fullscreen){e=t.getEl("head");var i=Wt.getSize(e);n.headerW=i.width,n.headerH=i.height,r+=n.headerH}t.statusbar&&(r+=t.statusbar.layoutRect().h),n.deltaH+=r,n.minH+=r,n.h+=r;var o=Wt.getWindowSize();return n.x=t.settings.x||Math.max(0,o.w/2-n.w/2),n.y=t.settings.y||Math.max(0,o.h/2-n.h/2),n},renderHtml:function(){var e=this,t=e._layout,n=e._id,r=e.classPrefix,i=e.settings,o="",a="",s=i.html;return e.preRender(),t.preRender(e),i.title&&(o='<div id="'+n+'-head" class="'+r+'window-head"><div id="'+n+'-title" class="'+r+'title">'+e.encode(i.title)+'</div><div id="'+n+'-dragh" class="'+r+'dragh"></div><button type="button" class="'+r+'close" aria-hidden="true"><i class="mce-ico mce-i-remove"></i></button></div>'),i.url&&(s='<iframe src="'+i.url+'" tabindex="-1"></iframe>'),void 0===s&&(s=t.renderHtml(e)),e.statusbar&&(a=e.statusbar.renderHtml()),'<div id="'+n+'" class="'+e.classes+'" hidefocus="1"><div class="'+e.classPrefix+'reset" role="application">'+o+'<div id="'+n+'-body" class="'+e.bodyClasses+'">'+s+"</div>"+a+"</div></div>"},fullscreen:function(e){var t,n,r=this,i=document.documentElement,o=r.classPrefix;if(e!==r._fullscreen)if(Ut(window).on("resize",function(){var e;if(r._fullscreen)if(t)r._timer||(r._timer=pe.setTimeout(function(){var e=Wt.getWindowSize();r.moveTo(0,0).resizeTo(e.w,e.h),r._timer=0},50));else{e=(new Date).getTime();var n=Wt.getWindowSize();r.moveTo(0,0).resizeTo(n.w,n.h),(new Date).getTime()-e>50&&(t=!0)}}),n=r.layoutRect(),r._fullscreen=e,e){r._initial={x:n.x,y:n.y,w:n.w,h:n.h},r.borderBox=Zt.parseBox("0"),r.getEl("head").style.display="none",n.deltaH-=n.headerH+2,Ut([i,document.body]).addClass(o+"fullscreen"),r.classes.add("fullscreen");var a=Wt.getWindowSize();r.moveTo(0,0).resizeTo(a.w,a.h)}else r.borderBox=Zt.parseBox(r.settings.border),r.getEl("head").style.display="",n.deltaH+=n.headerH,Ut([i,document.body]).removeClass(o+"fullscreen"),r.classes.remove("fullscreen"),r.moveTo(r._initial.x,r._initial.y).resizeTo(r._initial.w,r._initial.h);return r.reflow()},postRender:function(){var e,t=this;setTimeout(function(){t.classes.add("in"),t.fire("open")},0),t._super(),t.statusbar&&t.statusbar.postRender(),t.focus(),this.dragHelper=new d(t._id+"-dragh",{start:function(){e={x:t.layoutRect().x,y:t.layoutRect().y}},drag:function(n){t.moveTo(e.x+n.deltaX,e.y+n.deltaY)}}),t.on("submit",function(e){e.isDefaultPrevented()||t.close()}),Gn.push(t),x(!0)},submit:function(){return this.fire("submit",{data:this.toJSON()})},remove:function(){var e,t=this;for(t.dragHelper.destroy(),t._super(),t.statusbar&&this.statusbar.remove(),C(t.classPrefix,!1),e=Gn.length;e--;)Gn[e]===t&&Gn.splice(e,1);x(Gn.length>0)},getContentWindow:function(){var e=this.getEl().getElementsByTagName("iframe")[0];return e?e.contentWindow:null}});!function(){function e(){var e,t,n=Wt.getWindowSize();for(e=0;e<Gn.length;e++)t=Gn[e].layoutRect(),Gn[e].moveTo(Gn[e].settings.x||Math.max(0,n.w/2-t.w/2),Gn[e].settings.y||Math.max(0,n.h/2-t.h/2))}if(!Ct.desktop){var t={w:window.innerWidth,h:window.innerHeight};pe.setInterval(function(){var e=window.innerWidth,n=window.innerHeight;t.w===e&&t.h===n||(t={w:e,h:n},Ut(window).trigger("resize"))},100)}Ut(window).on("resize",e)}();var Jn=Xn.extend({init:function(e){e={border:1,padding:20,layout:"flex",pack:"center",align:"center",containerCls:"panel",autoScroll:!0,buttons:{type:"button",text:"Ok",action:"ok"},items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200}},this._super(e)},Statics:{OK:1,OK_CANCEL:2,YES_NO:3,YES_NO_CANCEL:4,msgBox:function(e){function t(e,t,n){return{type:"button",text:e,subtype:n?"primary":"",onClick:function(e){e.control.parents()[1].close(),r(t)}}}var n,r=e.callback||function(){};switch(e.buttons){case Jn.OK_CANCEL:n=[t("Ok",!0,!0),t("Cancel",!1)];break;case Jn.YES_NO:case Jn.YES_NO_CANCEL:n=[t("Yes",1,!0),t("No",0)],e.buttons===Jn.YES_NO_CANCEL&&n.push(t("Cancel",-1));break;default:n=[t("Ok",!0,!0)]}return new Xn({padding:20,x:e.x,y:e.y,minWidth:300,minHeight:100,layout:"flex",pack:"center",align:"center",buttons:n,title:e.title,role:"alertdialog",items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200,text:e.text},onPostRender:function(){this.aria("describedby",this.items()[0]._id)},onClose:e.onClose,onCancel:function(){r(!1)}}).renderTo(document.body).reflow()},alert:function(e,t){return"string"==typeof e&&(e={text:e}),e.callback=t,Jn.msgBox(e)},confirm:function(e,t){return"string"==typeof e&&(e={text:e}),e.callback=t,e.buttons=Jn.OK_CANCEL,Jn.msgBox(e)}}}),Qn=function(e){return{renderUI:function(t){return Un.renderUI(e,this,t)},resizeTo:function(t,n){return xt.resizeTo(e,t,n)},resizeBy:function(t,n){return xt.resizeBy(e,t,n)},getNotificationManagerImpl:function(){return _(e)},getWindowManagerImpl:function(){return T(e)}}},Zn={get:Qn},er=Jt.extend({Defaults:{firstControlClass:"first",lastControlClass:"last"},init:function(e){this.settings=j.extend({},this.Defaults,e)},preRender:function(e){e.bodyClasses.add(this.settings.containerClass)},applyClasses:function(e){var t,n,r,i,o=this,a=o.settings;t=a.firstControlClass,n=a.lastControlClass,e.each(function(e){e.classes.remove(t).remove(n).add(a.controlClass),e.visible()&&(r||(r=e),i=e)}),r&&r.classes.add(t),i&&i.classes.add(n)},renderHtml:function(e){var t=this,n="";return t.applyClasses(e.items()),e.items().each(function(e){n+=e.renderHtml()}),n},recalc:function(){},postRender:function(){},isNative:function(){return!1}}),tr=er.extend({Defaults:{containerClass:"abs-layout",controlClass:"abs-layout-item"},recalc:function(e){e.items().filter(":visible").each(function(e){var t=e.settings;e.layoutRect({x:t.x,y:t.y,w:t.w,h:t.h}),e.recalc&&e.recalc()})},renderHtml:function(e){return'<div id="'+e._id+'-absend" class="'+e.classPrefix+'abs-end"></div>'+this._super(e)}}),nr=Wn.extend({Defaults:{classes:"widget btn",role:"button"},init:function(e){var t,n=this;n._super(e),e=n.settings,t=n.settings.size,n.on("click mousedown",function(e){e.preventDefault()}),n.on("touchstart",function(e){n.fire("click",e),e.preventDefault()}),e.subtype&&n.classes.add(e.subtype),t&&n.classes.add("btn-"+t),e.icon&&n.icon(e.icon)},icon:function(e){return arguments.length?(this.state.set("icon",e),this):this.state.get("icon")},repaint:function(){var e,t=this.getEl().firstChild;t&&(e=t.style,e.width=e.height="100%"),this._super()},renderHtml:function(){var e,t,n=this,r=n._id,i=n.classPrefix,o=n.state.get("icon"),a=n.state.get("text"),s="",l=n.settings;return e=l.image,e?(o="none","string"!=typeof e&&(e=window.getSelection?e[0]:e[1]),e=" style=\"background-image: url('"+e+"')\""):e="",a&&(n.classes.add("btn-has-text"),s='<span class="'+i+'txt">'+n.encode(a)+"</span>"),o=o?i+"ico "+i+"i-"+o:"",t="boolean"==typeof l.active?' aria-pressed="'+l.active+'"':"",'<div id="'+r+'" class="'+n.classes+'" tabindex="-1"'+t+'><button id="'+r+'-button" role="presentation" type="button" tabindex="-1">'+(o?'<i class="'+o+'"'+e+"></i>":"")+s+"</button></div>"},bindStates:function(){function e(e){var i=n("span."+r,t.getEl());e?(i[0]||(n("button:first",t.getEl()).append('<span class="'+r+'"></span>'),i=n("span."+r,t.getEl())),i.html(t.encode(e))):i.remove(),t.classes.toggle("btn-has-text",!!e)}var t=this,n=t.$,r=t.classPrefix+"txt";return t.state.on("change:text",function(t){e(t.value)}),t.state.on("change:icon",function(n){var r=n.value,i=t.classPrefix;t.settings.icon=r,r=r?i+"ico "+i+"i-"+t.settings.icon:"";var o=t.getEl().firstChild,a=o.getElementsByTagName("i")[0];r?(a&&a===o.firstChild||(a=document.createElement("i"),o.insertBefore(a,o.firstChild)),a.className=r):a&&o.removeChild(a),e(t.state.get("text"))}),t._super()}}),rr=nr.extend({init:function(e){var t=this;e=j.extend({text:"Browse...",multiple:!1,accept:null},e),t._super(e),t.classes.add("browsebutton"),e.multiple&&t.classes.add("multiple")},postRender:function(){var e=this,t=Wt.create("input",{type:"file",id:e._id+"-browse",accept:e.settings.accept});e._super(),Ut(t).on("change",function(t){var n=t.target.files;e.value=function(){return n.length?e.settings.multiple?n:n[0]:null},t.preventDefault(),n.length&&e.fire("change",t)}),Ut(t).on("click",function(e){e.stopPropagation()}),Ut(e.getEl("button")).on("click",function(e){e.stopPropagation(),t.click()}),e.getEl().appendChild(t)},remove:function(){Ut(this.getEl("button")).off(),Ut(this.getEl("input")).off(),this._super()}}),ir=Nn.extend({Defaults:{defaultType:"button",role:"group"},renderHtml:function(){var e=this,t=e._layout;return e.classes.add("btn-group"),e.preRender(),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes+'"><div id="'+e._id+'-body">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"}}),or=Wn.extend({Defaults:{classes:"checkbox",role:"checkbox",checked:!1},init:function(e){var t=this;t._super(e),t.on("click mousedown",function(e){e.preventDefault()}),t.on("click",function(e){e.preventDefault(),t.disabled()||t.checked(!t.checked())}),t.checked(t.settings.checked)},checked:function(e){return arguments.length?(this.state.set("checked",e),this):this.state.get("checked")},value:function(e){return arguments.length?this.checked(e):this.checked()},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix;return'<div id="'+t+'" class="'+e.classes+'" unselectable="on" aria-labelledby="'+t+'-al" tabindex="-1"><i class="'+n+"ico "+n+'i-checkbox"></i><span id="'+t+'-al" class="'+n+'label">'+e.encode(e.state.get("text"))+"</span></div>"},bindStates:function(){function e(e){t.classes.toggle("checked",e),t.aria("checked",e)}var t=this;return t.state.on("change:text",function(e){t.getEl("al").firstChild.data=t.translate(e.value)}),t.state.on("change:checked change:value",function(n){t.fire("change"),e(n.value)}),t.state.on("change:icon",function(e){var n=e.value,r=t.classPrefix;if(void 0===n)return t.settings.icon;t.settings.icon=n,n=n?r+"ico "+r+"i-"+t.settings.icon:"";var i=t.getEl().firstChild,o=i.getElementsByTagName("i")[0];n?(o&&o===i.firstChild||(o=document.createElement("i"),i.insertBefore(o,i.firstChild)),o.className=n):o&&i.removeChild(o)}),t.state.get("checked")&&e(!0),t._super()}}),ar=tinymce.util.Tools.resolve("tinymce.util.VK"),sr=Wn.extend({init:function(e){var t=this;t._super(e),e=t.settings,t.classes.add("combobox"),t.subinput=!0,t.ariaTarget="inp",e.menu=e.menu||e.values,e.menu&&(e.icon="caret"),t.on("click",function(n){var r=n.target,i=t.getEl();if(Ut.contains(i,r)||r===i)for(;r&&r!==i;)r.id&&-1!==r.id.indexOf("-open")&&(t.fire("action"),e.menu&&(t.showMenu(),n.aria&&t.menu.items()[0].focus())),r=r.parentNode}),t.on("keydown",function(e){var n;13===e.keyCode&&"INPUT"===e.target.nodeName&&(e.preventDefault(),t.parents().reverse().each(function(e){if(e.toJSON)return n=e,!1}),t.fire("submit",{data:n.toJSON()}))}),t.on("keyup",function(e){if("INPUT"===e.target.nodeName){var n=t.state.get("value"),r=e.target.value;r!==n&&(t.state.set("value",r),t.fire("autocomplete",e))}}),t.on("mouseover",function(e){var n=t.tooltip().moveTo(-65535)
;if(t.statusLevel()&&-1!==e.target.className.indexOf(t.classPrefix+"status")){var r=t.statusMessage()||"Ok",i=n.text(r).show().testMoveRel(e.target,["bc-tc","bc-tl","bc-tr"]);n.classes.toggle("tooltip-n","bc-tc"===i),n.classes.toggle("tooltip-nw","bc-tl"===i),n.classes.toggle("tooltip-ne","bc-tr"===i),n.moveRel(e.target,i)}})},statusLevel:function(e){return arguments.length>0&&this.state.set("statusLevel",e),this.state.get("statusLevel")},statusMessage:function(e){return arguments.length>0&&this.state.set("statusMessage",e),this.state.get("statusMessage")},showMenu:function(){var e,t=this,n=t.settings;t.menu||(e=n.menu||[],e.length?e={type:"menu",items:e}:e.type=e.type||"menu",t.menu=ie.create(e).parent(t).renderTo(t.getContainerElm()),t.fire("createmenu"),t.menu.reflow(),t.menu.on("cancel",function(e){e.control===t.menu&&t.focus()}),t.menu.on("show hide",function(e){e.control.items().each(function(e){e.active(e.value()===t.value())})}).fire("show"),t.menu.on("select",function(e){t.value(e.control.value())}),t.on("focusin",function(e){"INPUT"===e.target.tagName.toUpperCase()&&t.menu.hide()}),t.aria("expanded",!0)),t.menu.show(),t.menu.layoutRect({w:t.layoutRect().w}),t.menu.moveRel(t.getEl(),t.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},focus:function(){this.getEl("inp").focus()},repaint:function(){var e,t,n=this,r=n.getEl(),i=n.getEl("open"),o=n.layoutRect(),a=0,s=r.firstChild;n.statusLevel()&&"none"!==n.statusLevel()&&(a=parseInt(Wt.getRuntimeStyle(s,"padding-right"),10)-parseInt(Wt.getRuntimeStyle(s,"padding-left"),10)),e=i?o.w-Wt.getSize(i).width-10:o.w-10;var l=document;return l.all&&(!l.documentMode||l.documentMode<=8)&&(t=n.layoutRect().h-2+"px"),Ut(s).css({width:e-a,lineHeight:t}),n._super(),n},postRender:function(){var e=this;return Ut(this.getEl("inp")).on("change",function(t){e.state.set("value",t.target.value),e.fire("change",t)}),e._super()},renderHtml:function(){var e,t,n=this,r=n._id,i=n.settings,o=n.classPrefix,a=n.state.get("value")||"",s="",l="",c="";return"spellcheck"in i&&(l+=' spellcheck="'+i.spellcheck+'"'),i.maxLength&&(l+=' maxlength="'+i.maxLength+'"'),i.size&&(l+=' size="'+i.size+'"'),i.subtype&&(l+=' type="'+i.subtype+'"'),c='<i id="'+r+'-status" class="mce-status mce-ico" style="display: none"></i>',n.disabled()&&(l+=' disabled="disabled"'),e=i.icon,e&&"caret"!==e&&(e=o+"ico "+o+"i-"+i.icon),t=n.state.get("text"),(e||t)&&(s='<div id="'+r+'-open" class="'+o+"btn "+o+'open" tabIndex="-1" role="button"><button id="'+r+'-action" type="button" hidefocus="1" tabindex="-1">'+("caret"!==e?'<i class="'+e+'"></i>':'<i class="'+o+'caret"></i>')+(t?(e?" ":"")+t:"")+"</button></div>",n.classes.add("has-open")),'<div id="'+r+'" class="'+n.classes+'"><input id="'+r+'-inp" class="'+o+'textbox" value="'+n.encode(a,!1)+'" hidefocus="1"'+l+' placeholder="'+n.encode(i.placeholder)+'" />'+c+s+"</div>"},value:function(e){return arguments.length?(this.state.set("value",e),this):(this.state.get("rendered")&&this.state.set("value",this.getEl("inp").value),this.state.get("value"))},showAutoComplete:function(e,t){var n=this;if(0===e.length)return void n.hideMenu();var r=function(e,t){return function(){n.fire("selectitem",{title:t,value:e})}};n.menu?n.menu.items().remove():n.menu=ie.create({type:"menu",classes:"combobox-menu",layout:"flow"}).parent(n).renderTo(),j.each(e,function(e){n.menu.add({text:e.title,url:e.previewUrl,match:t,classes:"menu-item-ellipsis",onclick:r(e.value,e.title)})}),n.menu.renderNew(),n.hideMenu(),n.menu.on("cancel",function(e){e.control.parent()===n.menu&&(e.stopPropagation(),n.focus(),n.hideMenu())}),n.menu.on("select",function(){n.focus()});var i=n.layoutRect().w;n.menu.layoutRect({w:i,minW:0,maxW:i}),n.menu.repaint(),n.menu.reflow(),n.menu.show(),n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},hideMenu:function(){this.menu&&this.menu.hide()},bindStates:function(){var e=this;e.state.on("change:value",function(t){e.getEl("inp").value!==t.value&&(e.getEl("inp").value=t.value)}),e.state.on("change:disabled",function(t){e.getEl("inp").disabled=t.value}),e.state.on("change:statusLevel",function(t){var n=e.getEl("status"),r=e.classPrefix,i=t.value;Wt.css(n,"display","none"===i?"none":""),Wt.toggleClass(n,r+"i-checkmark","ok"===i),Wt.toggleClass(n,r+"i-warning","warn"===i),Wt.toggleClass(n,r+"i-error","error"===i),e.classes.toggle("has-status","none"!==i),e.repaint()}),Wt.on(e.getEl("status"),"mouseleave",function(){e.tooltip().hide()}),e.on("cancel",function(t){e.menu&&e.menu.visible()&&(t.stopPropagation(),e.hideMenu())});var t=function(e,t){t&&t.items().length>0&&t.items().eq(e)[0].focus()};return e.on("keydown",function(n){var r=n.keyCode;"INPUT"===n.target.nodeName&&(r===ar.DOWN?(n.preventDefault(),e.fire("autocomplete"),t(0,e.menu)):r===ar.UP&&(n.preventDefault(),t(-1,e.menu)))}),e._super()},remove:function(){Ut(this.getEl("inp")).off(),this.menu&&this.menu.remove(),this._super()}}),lr=sr.extend({init:function(e){var t=this;e.spellcheck=!1,e.onaction&&(e.icon="none"),t._super(e),t.classes.add("colorbox"),t.on("change keyup postrender",function(){t.repaintColor(t.value())})},repaintColor:function(e){var t=this.getEl("open"),n=t?t.getElementsByTagName("i")[0]:null;if(n)try{n.style.background=e}catch(e){}},bindStates:function(){var e=this;return e.state.on("change:value",function(t){e.state.get("rendered")&&e.repaintColor(t.value)}),e._super()}}),cr=nr.extend({showPanel:function(){var e=this,t=e.settings;if(e.classes.add("opened"),e.panel)e.panel.show();else{var n=t.panel;n.type&&(n={layout:"grid",items:n}),n.role=n.role||"dialog",n.popover=!0,n.autohide=!0,n.ariaRoot=!0,e.panel=new Mn(n).on("hide",function(){e.classes.remove("opened")}).on("cancel",function(t){t.stopPropagation(),e.focus(),e.hidePanel()}).parent(e).renderTo(e.getContainerElm()),e.panel.fire("show"),e.panel.reflow()}var r=["bc-tc","bc-tl","bc-tr"],i=["bc-tc","bc-tr","bc-tl","tc-bc","tc-br","tc-bl"],o=e.panel.testMoveRel(e.getEl(),t.popoverAlign||(e.isRtl()?r:i));e.panel.classes.toggle("start","l"===o.substr(-1)),e.panel.classes.toggle("end","r"===o.substr(-1));var a="t"===o.substr(0,1);e.panel.classes.toggle("bottom",!a),e.panel.classes.toggle("top",a),e.panel.moveRel(e.getEl(),o)},hidePanel:function(){var e=this;e.panel&&e.panel.hide()},postRender:function(){var e=this;return e.aria("haspopup",!0),e.on("click",function(t){t.control===e&&(e.panel&&e.panel.visible()?e.hidePanel():(e.showPanel(),e.panel.focus(!!t.aria)))}),e._super()},remove:function(){return this.panel&&(this.panel.remove(),this.panel=null),this._super()}}),ur=re.DOM,dr=cr.extend({init:function(e){this._super(e),this.classes.add("splitbtn"),this.classes.add("colorbutton")},color:function(e){return e?(this._color=e,this.getEl("preview").style.backgroundColor=e,this):this._color},resetColor:function(){return this._color=null,this.getEl("preview").style.backgroundColor=null,this},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,r=e.state.get("text"),i=e.settings.icon?n+"ico "+n+"i-"+e.settings.icon:"",o=e.settings.image?" style=\"background-image: url('"+e.settings.image+"')\"":"",a="";return r&&(e.classes.add("btn-has-text"),a='<span class="'+n+'txt">'+e.encode(r)+"</span>"),'<div id="'+t+'" class="'+e.classes+'" role="button" tabindex="-1" aria-haspopup="true"><button role="presentation" hidefocus="1" type="button" tabindex="-1">'+(i?'<i class="'+i+'"'+o+"></i>":"")+'<span id="'+t+'-preview" class="'+n+'preview"></span>'+a+'</button><button type="button" class="'+n+'open" hidefocus="1" tabindex="-1"> <i class="'+n+'caret"></i></button></div>'},postRender:function(){var e=this,t=e.settings.onclick;return e.on("click",function(n){n.aria&&"down"===n.aria.key||n.control!==e||ur.getParent(n.target,"."+e.classPrefix+"open")||(n.stopImmediatePropagation(),t.call(e,n))}),delete e.settings.onclick,e._super()}}),fr=tinymce.util.Tools.resolve("tinymce.util.Color"),hr=Wn.extend({Defaults:{classes:"widget colorpicker"},init:function(e){this._super(e)},postRender:function(){function e(e,t){var n,r,i=Wt.getPos(e);return n=t.pageX-i.x,r=t.pageY-i.y,n=Math.max(0,Math.min(n/e.clientWidth,1)),r=Math.max(0,Math.min(r/e.clientHeight,1)),{x:n,y:r}}function t(e,t){var n=(360-e.h)/360;Wt.css(a,{top:100*n+"%"}),t||Wt.css(l,{left:e.s+"%",top:100-e.v+"%"}),s.style.background=fr({s:100,v:100,h:e.h}).toHex(),c.color().parse({s:e.s,v:e.v,h:e.h})}function n(n){var r;r=e(s,n),i.s=100*r.x,i.v=100*(1-r.y),t(i),c.fire("change")}function r(n){var r;r=e(o,n),i=u.toHsv(),i.h=360*(1-r.y),t(i,!0),c.fire("change")}var i,o,a,s,l,c=this,u=c.color();o=c.getEl("h"),a=c.getEl("hp"),s=c.getEl("sv"),l=c.getEl("svp"),c._repaint=function(){i=u.toHsv(),t(i)},c._super(),c._svdraghelper=new d(c._id+"-sv",{start:n,drag:n}),c._hdraghelper=new d(c._id+"-h",{start:r,drag:r}),c._repaint()},rgb:function(){return this.color().toRgb()},value:function(e){var t=this;if(!arguments.length)return t.color().toHex();t.color().parse(e),t._rendered&&t._repaint()},color:function(){return this._color||(this._color=fr()),this._color},renderHtml:function(){var e,t=this,n=t._id,r=t.classPrefix,i="#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000";return e='<div id="'+n+'-h" class="'+r+'colorpicker-h" style="background: -ms-linear-gradient(top,'+i+");background: linear-gradient(to bottom,"+i+');">'+function(){var e,t,n,o,a="";for(n="filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=",o=i.split(","),e=0,t=o.length-1;e<t;e++)a+='<div class="'+r+'colorpicker-h-chunk" style="height:'+100/t+"%;"+n+o[e]+",endColorstr="+o[e+1]+");-ms-"+n+o[e]+",endColorstr="+o[e+1]+')"></div>';return a}()+'<div id="'+n+'-hp" class="'+r+'colorpicker-h-marker"></div></div>','<div id="'+n+'" class="'+t.classes+'"><div id="'+n+'-sv" class="'+r+'colorpicker-sv"><div class="'+r+'colorpicker-overlay1"><div class="'+r+'colorpicker-overlay2"><div id="'+n+'-svp" class="'+r+'colorpicker-selector1"><div class="'+r+'colorpicker-selector2"></div></div></div></div></div>'+e+"</div>"}}),pr=Wn.extend({init:function(e){var t=this;e=j.extend({height:100,text:"Drop an image here",multiple:!1,accept:null},e),t._super(e),t.classes.add("dropzone"),e.multiple&&t.classes.add("multiple")},renderHtml:function(){var e,t,n=this,r=n.settings;return e={id:n._id,hidefocus:"1"},t=Wt.create("div",e,"<span>"+this.translate(r.text)+"</span>"),r.height&&Wt.css(t,"height",r.height+"px"),r.width&&Wt.css(t,"width",r.width+"px"),t.className=n.classes,t.outerHTML},postRender:function(){var e=this,t=function(t){t.preventDefault(),e.classes.toggle("dragenter"),e.getEl().className=e.classes},n=function(t){var n=e.settings.accept;if("string"!=typeof n)return t;var r=new RegExp("("+n.split(/\s*,\s*/).join("|")+")$","i");return j.grep(t,function(e){return r.test(e.name)})};e._super(),e.$el.on("dragover",function(e){e.preventDefault()}),e.$el.on("dragenter",t),e.$el.on("dragleave",t),e.$el.on("drop",function(t){if(t.preventDefault(),!e.state.get("disabled")){var r=n(t.dataTransfer.files);e.value=function(){return r.length?e.settings.multiple?r:r[0]:null},r.length&&e.fire("change",t)}})},remove:function(){this.$el.off(),this._super()}}),gr=Wn.extend({init:function(e){var t=this;e.delimiter||(e.delimiter=""),t._super(e),t.classes.add("path"),t.canFocus=!0,t.on("click",function(e){var n;(n=e.target.getAttribute("data-index"))&&t.fire("select",{value:t.row()[n],index:n})}),t.row(t.settings.row)},focus:function(){var e=this;return e.getEl().firstChild.focus(),e},row:function(e){return arguments.length?(this.state.set("row",e),this):this.state.get("row")},renderHtml:function(){var e=this;return'<div id="'+e._id+'" class="'+e.classes+'">'+e._getDataPathHtml(e.state.get("row"))+"</div>"},bindStates:function(){var e=this;return e.state.on("change:row",function(t){e.innerHtml(e._getDataPathHtml(t.value))}),e._super()},_getDataPathHtml:function(e){var t,n,r=this,i=e||[],o="",a=r.classPrefix;for(t=0,n=i.length;t<n;t++)o+=(t>0?'<div class="'+a+'divider" aria-hidden="true"> '+r.settings.delimiter+" </div>":"")+'<div role="button" class="'+a+"path-item"+(t===n-1?" "+a+"last":"")+'" data-index="'+t+'" tabindex="-1" id="'+r._id+"-"+t+'" aria-level="'+(t+1)+'">'+i[t].name+"</div>";return o||(o='<div class="'+a+'path-item"></div>'),o}}),mr=gr.extend({postRender:function(){function e(e){if(1===e.nodeType){if("BR"===e.nodeName||e.getAttribute("data-mce-bogus"))return!0;if("bookmark"===e.getAttribute("data-mce-type"))return!0}return!1}var t=this,n=t.settings.editor;return!1!==n.settings.elementpath&&(t.on("select",function(e){n.focus(),n.selection.select(this.row()[e.index].element),n.nodeChanged()}),n.on("nodeChange",function(r){for(var i=[],o=r.parents,a=o.length;a--;)if(1===o[a].nodeType&&!e(o[a])){var s=n.fire("ResolveName",{name:o[a].nodeName.toLowerCase(),target:o[a]});if(s.isDefaultPrevented()||i.push({name:s.name,element:o[a]}),s.isPropagationStopped())break}t.row(i)})),t._super()}}),vr=Nn.extend({Defaults:{layout:"flex",align:"center",defaults:{flex:1}},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.classes.add("formitem"),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<div id="'+e._id+'-title" class="'+n+'title">'+e.settings.title+"</div>":"")+'<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"}}),br=Nn.extend({Defaults:{containerCls:"form",layout:"flex",direction:"column",align:"stretch",flex:1,padding:15,labelGap:30,spacing:10,callbacks:{submit:function(){this.submit()}}},preRender:function(){var e=this,t=e.items();e.settings.formItemDefaults||(e.settings.formItemDefaults={layout:"flex",autoResize:"overflow",defaults:{flex:1}}),t.each(function(t){var n,r=t.settings.label;r&&(n=new vr(j.extend({items:{type:"label",id:t._id+"-l",text:r,flex:0,forId:t._id,disabled:t.disabled()}},e.settings.formItemDefaults)),n.type="formitem",t.aria("labelledby",t._id+"-l"),void 0===t.settings.flex&&(t.settings.flex=1),e.replace(t,n),n.add(t))})},submit:function(){return this.fire("submit",{data:this.toJSON()})},postRender:function(){var e=this;e._super(),e.fromJSON(e.settings.data)},bindStates:function(){function e(){var e,n,r,i=0,o=[];if(!1!==t.settings.labelGapCalc)for(r="children"===t.settings.labelGapCalc?t.find("formitem"):t.items(),r.filter("formitem").each(function(e){var t=e.items()[0],n=t.getEl().clientWidth;i=n>i?n:i,o.push(t)}),n=t.settings.labelGap||0,e=o.length;e--;)o[e].settings.minWidth=i+n}var t=this;t._super(),t.on("show",e),e()}}),yr=br.extend({Defaults:{containerCls:"fieldset",layout:"flex",direction:"column",align:"stretch",flex:1,padding:"25 15 5 15",labelGap:30,spacing:10,border:1},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.preRender(),t.preRender(e),'<fieldset id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<legend id="'+e._id+'-title" class="'+n+'fieldset-title">'+e.settings.title+"</legend>":"")+'<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></fieldset>"}}),wr=0,_r=function(e){var t=new Date,n=t.getTime(),r=Math.floor(1e9*Math.random());return wr++,e+"_"+r+wr+String(n)},xr=function(e,t){var n=t||document,r=n.createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1)throw"HTML must have a single root node";return Tr(r.childNodes[0])},Cr=function(e,t){var n=t||document,r=n.createElement(e);return Tr(r)},kr=function(e,t){var n=t||document,r=n.createTextNode(e);return Tr(r)},Tr=function(e){if(null===e||void 0===e)throw new Error("Node cannot be null or undefined");return{dom:ve(e)}},Sr=function(e,t,n){var r=e.dom();return De.from(r.elementFromPoint(t,n)).map(Tr)},Dr={fromHtml:xr,fromTag:Cr,fromText:kr,fromDom:Tr,fromPoint:Sr},Er=function(e){var t,n=!1;return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return n||(n=!0,t=e.apply(null,r)),t}},Nr={ATTRIBUTE:Node.ATTRIBUTE_NODE,CDATA_SECTION:Node.CDATA_SECTION_NODE,COMMENT:Node.COMMENT_NODE,DOCUMENT:Node.DOCUMENT_NODE,DOCUMENT_TYPE:Node.DOCUMENT_TYPE_NODE,DOCUMENT_FRAGMENT:Node.DOCUMENT_FRAGMENT_NODE,ELEMENT:Node.ELEMENT_NODE,TEXT:Node.TEXT_NODE,PROCESSING_INSTRUCTION:Node.PROCESSING_INSTRUCTION_NODE,ENTITY_REFERENCE:Node.ENTITY_REFERENCE_NODE,ENTITY:Node.ENTITY_NODE,NOTATION:Node.NOTATION_NODE},Ar=function(e){return e.dom().nodeName.toLowerCase()},Rr=function(e){return e.dom().nodeType},Pr=function(e){return e.dom().nodeValue},Or=function(e){return function(t){return Rr(t)===e}},Ir=function(e){return Rr(e)===Nr.COMMENT||"#comment"===Ar(e)},Mr=Or(Nr.ELEMENT),jr=Or(Nr.TEXT),Br=Or(Nr.DOCUMENT),Lr={name:Ar,type:Rr,value:Pr,isElement:Mr,isText:jr,isDocument:Br,isComment:Ir},Fr=function(e){var t=Lr.isText(e)?e.dom().parentNode:e.dom();return void 0!==t&&null!==t&&t.ownerDocument.body.contains(t)},Hr=Er(function(){return $r(Dr.fromDom(document))}),$r=function(e){var t=e.dom().body;if(null===t||void 0===t)throw"Body is not available yet";return Dr.fromDom(t)},Ur={body:Hr,getBody:$r,inBody:Fr},zr=function(e,t){var n=[],r=function(e){return n.push(e),t(e)},i=t(e);do{i=i.bind(r)}while(i.isSome());return n},Wr={toArray:zr},qr="undefined"!=typeof window?window:Function("return this;")(),Vr=function(e,t){for(var n=void 0!==t&&null!==t?t:qr,r=0;r<e.length&&void 0!==n&&null!==n;++r)n=n[e[r]];return n},Yr=function(e,t){var n=e.split(".");return Vr(n,t)},Gr=function(e,t){return Yr(e,t)},Kr=function(e,t){var n=Gr(e,t);if(void 0===n||null===n)throw e+" not available on this browser";return n},Xr={getOrDie:Kr},Jr=function(){return Xr.getOrDie("Node")},Qr=function(e,t,n){return 0!=(e.compareDocumentPosition(t)&n)},Zr=function(e,t){return Qr(e,t,Jr().DOCUMENT_POSITION_PRECEDING)},ei=function(e,t){return Qr(e,t,Jr().DOCUMENT_POSITION_CONTAINED_BY)},ti={documentPositionPreceding:Zr,documentPositionContainedBy:ei},ni=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}},ri=function(e,t){var n=ni(e,t);if(!n)return{major:0,minor:0};var r=function(e){return Number(t.replace(n,"$"+e))};return ai(r(1),r(2))},ii=function(e,t){var n=String(t).toLowerCase();return 0===e.length?oi():ri(e,n)},oi=function(){return ai(0,0)},ai=function(e,t){return{major:e,minor:t}},si={nu:ai,detect:ii,unknown:oi},li=function(e,t){return function(){return t===e}},ci=function(){return ui({current:void 0,version:si.unknown()})},ui=function(e){var t=e.current;return{current:t,version:e.version,isEdge:li("Edge",t),isChrome:li("Chrome",t),isIE:li("IE",t),isOpera:li("Opera",t),isFirefox:li("Firefox",t),isSafari:li("Safari",t)}},di={unknown:ci,nu:ui,edge:ve("Edge"),chrome:ve("Chrome"),ie:ve("IE"),opera:ve("Opera"),firefox:ve("Firefox"),safari:ve("Safari")},fi=function(e,t){return function(){return t===e}},hi=function(){return pi({current:void 0,version:si.unknown()})},pi=function(e){var t=e.current;return{current:t,version:e.version,isWindows:fi("Windows",t),isiOS:fi("iOS",t),isAndroid:fi("Android",t),isOSX:fi("OSX",t),isLinux:fi("Linux",t),isSolaris:fi("Solaris",t),isFreeBSD:fi("FreeBSD",t)}},gi={unknown:hi,nu:pi,windows:ve("Windows"),ios:ve("iOS"),android:ve("Android"),linux:ve("Linux"),osx:ve("OSX"),solaris:ve("Solaris"),freebsd:ve("FreeBSD")},mi=function(e,t){var n=String(t).toLowerCase();return tt(e,function(e){return e.search(n)})},vi=function(e,t){return mi(e,t).map(function(e){var n=si.detect(e.versionRegexes,t);return{current:e.name,version:n}})},bi=function(e,t){return mi(e,t).map(function(e){var n=si.detect(e.versionRegexes,t);return{current:e.name,version:n}})},yi={detectBrowser:vi,detectOs:bi},wi=function(e,t){return-1!==e.indexOf(t)},_i=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,xi=function(e){return function(t){return wi(t,e)}},Ci=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return wi(e,"edge/")&&wi(e,"chrome")&&wi(e,"safari")&&wi(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,_i],search:function(e){return wi(e,"chrome")&&!wi(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return wi(e,"msie")||wi(e,"trident")}},{name:"Opera",versionRegexes:[_i,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:xi("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:xi("firefox")},{name:"Safari",versionRegexes:[_i,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(wi(e,"safari")||wi(e,"mobile/"))&&wi(e,"applewebkit")}}],ki=[{name:"Windows",search:xi("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return wi(e,"iphone")||wi(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:xi("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:xi("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:xi("linux"),versionRegexes:[]},{name:"Solaris",search:xi("sunos"),versionRegexes:[]},{name:"FreeBSD",search:xi("freebsd"),versionRegexes:[]}],Ti={browsers:ve(Ci),oses:ve(ki)},Si=function(e){var t=Ti.browsers(),n=Ti.oses(),r=yi.detectBrowser(t,e).fold(di.unknown,di.nu),i=yi.detectOs(n,e).fold(gi.unknown,gi.nu);return{browser:r,os:i,deviceType:S(i,r,e)}},Di={detect:Si},Ei=Er(function(){var e=navigator.userAgent;return Di.detect(e)}),Ni={detect:Ei},Ai=Nr.ELEMENT,Ri=Nr.DOCUMENT,Pi=function(e,t){var n=e.dom();if(n.nodeType!==Ai)return!1;if(void 0!==n.matches)return n.matches(t);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(t);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(t);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},Oi=function(e){return e.nodeType!==Ai&&e.nodeType!==Ri||0===e.childElementCount},Ii=function(e,t){var n=void 0===t?document:t.dom();return Oi(n)?[]:Je(n.querySelectorAll(e),Dr.fromDom)},Mi=function(e,t){var n=void 0===t?document:t.dom();return Oi(n)?De.none():De.from(n.querySelector(e)).map(Dr.fromDom)},ji={all:Ii,is:Pi,one:Mi},Bi=function(e,t){return e.dom()===t.dom()},Li=function(e,t){return e.dom().isEqualNode(t.dom())},Fi=function(e,t){return Xe(t,be(Bi,e))},Hi=function(e,t){var n=e.dom(),r=t.dom();return n!==r&&n.contains(r)},$i=function(e,t){return ti.documentPositionContainedBy(e.dom(),t.dom())},Ui=Ni.detect().browser,zi=Ui.isIE()?$i:Hi,Wi={eq:Bi,isEqualNode:Li,member:Fi,contains:zi,is:ji.is},qi=function(e){return Dr.fromDom(e.dom().ownerDocument)},Vi=function(e){return Dr.fromDom(e.dom().ownerDocument.documentElement)},Yi=function(e){var t=e.dom(),n=t.ownerDocument.defaultView;return Dr.fromDom(n)},Gi=function(e){var t=e.dom();return De.from(t.parentNode).map(Dr.fromDom)},Ki=function(e){return Gi(e).bind(function(t){var n=ro(t);return nt(n,function(t){return Wi.eq(e,t)})})},Xi=function(e,t){for(var n=Ve(t)?t:ve(!1),r=e.dom(),i=[];null!==r.parentNode&&void 0!==r.parentNode;){var o=r.parentNode,a=Dr.fromDom(o);if(i.push(a),!0===n(a))break;r=o}return i},Ji=function(e){var t=function(t){return Ze(t,function(t){return!Wi.eq(e,t)})};return Gi(e).map(ro).map(t).getOr([])},Qi=function(e){var t=e.dom();return De.from(t.offsetParent).map(Dr.fromDom)},Zi=function(e){var t=e.dom();return De.from(t.previousSibling).map(Dr.fromDom)},eo=function(e){var t=e.dom();return De.from(t.nextSibling).map(Dr.fromDom)},to=function(e){return st(Wr.toArray(e,Zi))},no=function(e){return Wr.toArray(e,eo)},ro=function(e){var t=e.dom();return Je(t.childNodes,Dr.fromDom)},io=function(e,t){var n=e.dom().childNodes;return De.from(n[t]).map(Dr.fromDom)},oo=function(e){return io(e,0)},ao=function(e){return io(e,e.dom().childNodes.length-1)},so=function(e){return e.dom().childNodes.length},lo=function(e){return e.dom().hasChildNodes()},co=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(e.length!==t.length)throw new Error('Wrong number of arguments to struct. Expected "['+e.length+']", got '+t.length+" arguments");var r={};return Qe(e,function(e,n){r[e]=ve(t[n])}),r}}("element","offset"),uo=function(e,t){var n=ro(e);return n.length>0&&t<n.length?co(n[t],0):co(e,t)},fo={owner:qi,defaultView:Yi,documentElement:Vi,parent:Gi,findIndex:Ki,parents:Xi,siblings:Ji,prevSibling:Zi,offsetParent:Qi,prevSiblings:to,nextSibling:eo,nextSiblings:no,children:ro,child:io,firstChild:oo,lastChild:ao,childNodesCount:so,hasChildNodes:lo,leaf:uo},ho=function(e){return vo(Ur.body(),e)},po=function(e,t,n){return Ze(fo.parents(e,n),t)},go=function(e,t){return Ze(fo.siblings(e),t)},mo=function(e,t){return Ze(fo.children(e),t)},vo=function(e,t){var n=[];return Qe(fo.children(e),function(e){t(e)&&(n=n.concat([e])),n=n.concat(vo(e,t))}),n},bo={all:ho,ancestors:po,siblings:go,children:mo,descendants:vo},yo=function(e){return ji.all(e)},wo=function(e,t,n){return bo.ancestors(e,function(e){return ji.is(e,t)},n)},_o=function(e,t){return bo.siblings(e,function(e){return ji.is(e,t)})},xo=function(e,t){return bo.children(e,function(e){return ji.is(e,t)})},Co=function(e,t){return ji.all(t,e)},ko={all:yo,ancestors:wo,siblings:_o,children:xo,descendants:Co},To=j.trim,So=function(e){return function(t){if(t&&1===t.nodeType){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}return!1}},Do=So("true"),Eo=So("false"),No=function(e,t,n,r,i){return{type:e,title:t,url:n,level:r,attach:i}},Ao=function(e){for(;e=e.parentNode;){var t=e.contentEditable;if(t&&"inherit"!==t)return Do(e)}return!1},Ro=function(e,t){return Je(ko.descendants(Dr.fromDom(t),e),function(e){return e.dom()})},Po=function(e){return e.innerText||e.textContent},Oo=function(e){return e.id?e.id:_r("h")},Io=function(e){return e&&"A"===e.nodeName&&(e.id||e.name)},Mo=function(e){return Io(e)&&Bo(e)},jo=function(e){return e&&/^(H[1-6])$/.test(e.nodeName)},Bo=function(e){return Ao(e)&&!Eo(e)},Lo=function(e){return jo(e)&&Bo(e)},Fo=function(e){return jo(e)?parseInt(e.nodeName.substr(1),10):0},Ho=function(e){var t=Oo(e),n=function(){e.id=t};return No("header",Po(e),"#"+t,Fo(e),n)},$o=function(e){var t=e.id||e.name,n=Po(e);return No("anchor",n||"#"+t,"#"+t,0,ge)},Uo=function(e){return Je(Ze(e,Lo),Ho)},zo=function(e){return Je(Ze(e,Mo),$o)},Wo=function(e){return Ro("h1,h2,h3,h4,h5,h6,a:not([href])",e)},qo=function(e){return To(e.title).length>0},Vo=function(e){var t=Wo(e);return Ze(Uo(t).concat(zo(t)),qo)},Yo={find:Vo},Go=function(){return window.tinymce?window.tinymce.activeEditor:M.activeEditor},Ko={},Xo=function(){Ko={}},Jo=function(e){return{title:e.title,value:{title:{raw:e.title},url:e.url,attach:e.attach}}},Qo=function(e){return j.map(e,Jo)},Zo=function(e,t){return{title:e,value:{title:e,url:t,attach:ge}}},ea=function(e,t){return!Xe(t,function(t){return t.url===e})},ta=function(e,t,n){var r=t in e?e[t]:n;return!1===r?null:r},na=function(e,t,n,r){var i={title:"-"},o=function(e){var r=e.hasOwnProperty(n)?e[n]:[],i=Ze(r,function(e){return ea(e,t)});return j.map(i,function(e){return{title:e,value:{title:e,url:e,attach:ge}}})},a=function(e){var n=Ze(t,function(t){return t.type===e});return Qo(n)};return!1===r.typeahead_urls?[]:"file"===n?function(e){return et(e,function(e,t){return 0===e.length||0===t.length?e.concat(t):e.concat(i,t)},[])}([ia(e,o(Ko)),ia(e,a("header")),ia(e,function(){var e=a("anchor"),t=ta(r,"anchor_top","#top"),n=ta(r,"anchor_bottom","#bottom");return null!==t&&e.unshift(Zo("<top>",t)),null!==n&&e.push(Zo("<bottom>",n)),e}())]):ia(e,o(Ko))},ra=function(e,t){var n=Ko[t];/^https?/.test(e)&&(n?Ke(n,e).isNone()&&(Ko[t]=n.slice(0,5).concat(e)):Ko[t]=[e])},ia=function(e,t){var n=e.toLowerCase(),r=j.grep(t,function(e){return-1!==e.title.toLowerCase().indexOf(n)});return 1===r.length&&r[0].title===e?[]:r},oa=function(e){var t=e.title;return t.raw?t.raw:t},aa=function(e,t,n,r){var i=function(i){var o=Yo.find(n),a=na(i,o,r,t);e.showAutoComplete(a,i)};e.on("autocomplete",function(){i(e.value())}),e.on("selectitem",function(t){var n=t.value;e.value(n.url);var i=oa(n);"image"===r?e.fire("change",{meta:{alt:i,attach:n.attach}}):e.fire("change",{meta:{text:i,attach:n.attach}}),e.focus()}),e.on("click",function(t){0===e.value().length&&"INPUT"===t.target.nodeName&&i("")}),e.on("PostRender",function(){e.getRoot().on("submit",function(t){t.isDefaultPrevented()||ra(e.value(),r)})})},sa=function(e){var t=e.status,n=e.message;return"valid"===t?{status:"ok",message:n}:"unknown"===t?{status:"warn",message:n}:"invalid"===t?{status:"warn",message:n}:{status:"none",message:""}},la=function(e,t,n){var r=t.filepicker_validator_handler;if(r){var i=function(t){if(0===t.length)return void e.statusLevel("none");r({url:t,type:n},function(t){var n=sa(t);e.statusMessage(n.message),e.statusLevel(n.status)})};e.state.on("change:value",function(e){i(e.value)})}},ca=sr.extend({Statics:{clearHistory:Xo},init:function(e){var t,n,r,i=this,o=Go(),a=o.settings,s=e.filetype;e.spellcheck=!1,r=a.file_picker_types||a.file_browser_callback_types,r&&(r=j.makeMap(r,/[, ]/)),r&&!r[s]||(n=a.file_picker_callback,!n||r&&!r[s]?!(n=a.file_browser_callback)||r&&!r[s]||(t=function(){n(i.getEl("inp").id,i.value(),s,window)}):t=function(){var e=i.fire("beforecall").meta;e=j.extend({filetype:s},e),n.call(o,function(e,t){i.value(e).fire("change",{meta:t})},i.value(),e)}),t&&(e.icon="browse",e.onaction=t),i._super(e),i.classes.add("filepicker"),aa(i,a,o.getBody(),s),la(i,a,s)}}),ua=tr.extend({recalc:function(e){var t=e.layoutRect(),n=e.paddingBox;e.items().filter(":visible").each(function(e){e.layoutRect({x:n.left,y:n.top,w:t.innerW-n.right-n.left,h:t.innerH-n.top-n.bottom}),e.recalc&&e.recalc()})}}),da=tr.extend({recalc:function(e){var t,n,r,i,o,a,s,l,c,u,d,f,h,p,g,m,v,b,y,w,_,x,C,k,T,S,D,E,N,A,R,P,O,I,M,j,B,L,F=[],H=Math.max,$=Math.min;for(r=e.items().filter(":visible"),i=e.layoutRect(),o=e.paddingBox,a=e.settings,f=e.isRtl()?a.direction||"row-reversed":a.direction,s=a.align,l=e.isRtl()?a.pack||"end":a.pack,c=a.spacing||0,"row-reversed"!==f&&"column-reverse"!==f||(r=r.set(r.toArray().reverse()),f=f.split("-")[0]),"column"===f?(T="y",C="h",k="minH",S="maxH",E="innerH",D="top",N="deltaH",A="contentH",M="left",O="w",R="x",P="innerW",I="minW",j="right",B="deltaW",L="contentW"):(T="x",C="w",k="minW",S="maxW",E="innerW",D="left",N="deltaW",A="contentW",M="top",O="h",R="y",P="innerH",I="minH",j="bottom",B="deltaH",L="contentH"),d=i[E]-o[D]-o[D],x=u=0,t=0,n=r.length;t<n;t++)h=r[t],p=h.layoutRect(),g=h.settings,m=g.flex,d-=t<n-1?c:0,m>0&&(u+=m,p[S]&&F.push(h),p.flex=m),d-=p[k],(v=o[M]+p[I]+o[j])>x&&(x=v);if(w={},w[k]=d<0?i[k]-d+i[N]:i[E]-d+i[N],w[I]=x+i[B],w[A]=i[E]-d,w[L]=x,w.minW=$(w.minW,i.maxW),w.minH=$(w.minH,i.maxH),w.minW=H(w.minW,i.startMinWidth),w.minH=H(w.minH,i.startMinHeight),!i.autoResize||w.minW===i.minW&&w.minH===i.minH){for(y=d/u,t=0,n=F.length;t<n;t++)h=F[t],p=h.layoutRect(),b=p[S],v=p[k]+p.flex*y,v>b?(d-=p[S]-p[k],u-=p.flex,p.flex=0,p.maxFlexSize=b):p.maxFlexSize=0;for(y=d/u,_=o[D],w={},0===u&&("end"===l?_=d+o[D]:"center"===l?(_=Math.round(i[E]/2-(i[E]-d)/2)+o[D])<0&&(_=o[D]):"justify"===l&&(_=o[D],c=Math.floor(d/(r.length-1)))),w[R]=o[M],t=0,n=r.length;t<n;t++)h=r[t],p=h.layoutRect(),v=p.maxFlexSize||p[k],"center"===s?w[R]=Math.round(i[P]/2-p[O]/2):"stretch"===s?(w[O]=H(p[I]||0,i[P]-o[M]-o[j]),w[R]=o[M]):"end"===s&&(w[R]=i[P]-p[O]-o.top),p.flex>0&&(v+=p.flex*y),w[C]=v,w[T]=_,h.layoutRect(w),h.recalc&&h.recalc(),_+=v+c}else if(w.w=w.minW,w.h=w.minH,e.layoutRect(w),this.recalc(e),null===e._lastRect){var U=e.parent();U&&(U._lastRect=null,U.recalc())}}}),fa=er.extend({Defaults:{containerClass:"flow-layout",controlClass:"flow-layout-item",endClass:"break"},recalc:function(e){e.items().filter(":visible").each(function(e){e.recalc&&e.recalc()})},isNative:function(){return!0}}),ha=function(e){return ba(Ur.body(),e)},pa=function(e,t,n){for(var r=e.dom(),i=Ve(n)?n:ve(!1);r.parentNode;){r=r.parentNode
;var o=Dr.fromDom(r);if(t(o))return De.some(o);if(i(o))break}return De.none()},ga=function(e,t,n){return D(function(e){return t(e)},pa,e,t,n)},ma=function(e,t){var n=e.dom();return n.parentNode?va(Dr.fromDom(n.parentNode),function(n){return!Wi.eq(e,n)&&t(n)}):De.none()},va=function(e,t){return tt(e.dom().childNodes,me(t,Dr.fromDom)).map(Dr.fromDom)},ba=function(e,t){var n=function(e){for(var r=0;r<e.childNodes.length;r++){if(t(Dr.fromDom(e.childNodes[r])))return De.some(Dr.fromDom(e.childNodes[r]));var i=n(e.childNodes[r]);if(i.isSome())return i}return De.none()};return n(e.dom())},ya={first:ha,ancestor:pa,closest:ga,sibling:ma,child:va,descendant:ba},wa=function(e){return ji.one(e)},_a=function(e,t,n){return ya.ancestor(e,function(e){return ji.is(e,t)},n)},xa=function(e,t){return ya.sibling(e,function(e){return ji.is(e,t)})},Ca=function(e,t){return ya.child(e,function(e){return ji.is(e,t)})},ka=function(e,t){return ji.one(t,e)},Ta=function(e,t,n){return D(ji.is,_a,e,t,n)},Sa={first:wa,ancestor:_a,sibling:xa,child:Ca,descendant:ka,closest:Ta},Da=function(e,t){return function(){e.execCommand("mceToggleFormat",!1,t)}},Ea=function(e,t,n){var r=function(e){n(e,t)};e.formatter?e.formatter.formatChanged(t,r):e.on("init",function(){e.formatter.formatChanged(t,r)})},Na=function(e,t){return function(n){Ea(e,t,function(e){n.control.active(e)})}},Aa=function(e){var t=["alignleft","aligncenter","alignright","alignjustify"],n=[{text:"Left",icon:"alignleft",onclick:Da(e,"alignleft")},{text:"Center",icon:"aligncenter",onclick:Da(e,"aligncenter")},{text:"Right",icon:"alignright",onclick:Da(e,"alignright")},{text:"Justify",icon:"alignjustify",onclick:Da(e,"alignjustify")}];e.addMenuItem("align",{text:"Align",menu:n}),e.addButton("align",{type:"menubutton",icon:"alignleft",menu:n,onShowMenu:function(n){var r=n.control.menu;j.each(t,function(t,n){r.items().eq(n).each(function(n){return n.active(e.formatter.match(t))})})},onPostRender:function(n){var r=n.control;j.each(t,function(t,n){Ea(e,t,function(e){r.icon("alignleft"),e&&r.icon(t)})})}}),j.each({alignleft:["Align left","JustifyLeft"],aligncenter:["Align center","JustifyCenter"],alignright:["Align right","JustifyRight"],alignjustify:["Justify","JustifyFull"],alignnone:["No alignment","JustifyNone"]},function(t,n){e.addButton(n,{active:!1,tooltip:t[0],cmd:t[1],onPostRender:Na(e,n)})})},Ra={register:Aa},Pa=function(e){return e?e.split(",")[0]:""},Oa=function(e,t){var n,r=t?t.toLowerCase():"";return j.each(e,function(e){e.value.toLowerCase()===r&&(n=e.value)}),j.each(e,function(e){n||Pa(e.value).toLowerCase()!==Pa(r).toLowerCase()||(n=e.value)}),n},Ia=function(e,t){return function(){var n=this;n.state.set("value",null),e.on("init nodeChange",function(r){var i=e.queryCommandValue("FontName"),o=Oa(t,i);n.value(o||null),!o&&i&&n.text(Pa(i))})}},Ma=function(e){e=e.replace(/;$/,"").split(";");for(var t=e.length;t--;)e[t]=e[t].split("=");return e},ja=function(e){var t=Ma(e.settings.font_formats||"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats");return j.map(t,function(e){return{text:{raw:e[0]},value:e[1],textStyle:-1===e[1].indexOf("dings")?"font-family:"+e[1]:""}})},Ba=function(e){e.addButton("fontselect",function(){var t=ja(e);return{type:"listbox",text:"Font Family",tooltip:"Font Family",values:t,fixedWidth:!0,onPostRender:Ia(e,t),onselect:function(t){t.control.settings.value&&e.execCommand("FontName",!1,t.control.settings.value)}}})},La=function(e){Ba(e)},Fa={register:La},Ha=function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n},$a=function(e,t){return/[0-9.]+px$/.test(e)?Ha(72*parseInt(e,10)/96,t||0)+"pt":e},Ua=function(e,t,n){var r;return j.each(e,function(e){e.value===n?r=n:e.value===t&&(r=t)}),r},za=function(e,t){return function(){var n=this;e.on("init nodeChange",function(r){var i,o,a,s;if(i=e.queryCommandValue("FontSize"))for(a=3;!s&&a>=0;a--)o=$a(i,a),s=Ua(t,o,i);n.value(s||null),s||n.text(o)})}},Wa=function(e){var t=e.settings.fontsize_formats||"8pt 10pt 12pt 14pt 18pt 24pt 36pt";return j.map(t.split(" "),function(e){var t=e,n=e,r=e.split("=");return r.length>1&&(t=r[0],n=r[1]),{text:t,value:n}})},qa=function(e){e.addButton("fontsizeselect",function(){var t=Wa(e);return{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:t,fixedWidth:!0,onPostRender:za(e,t),onclick:function(t){t.control.settings.value&&e.execCommand("FontSize",!1,t.control.settings.value)}}})},Va=function(e){qa(e)},Ya={register:Va},Ga=function(e,t){var n=t.length;return j.each(t,function(t){t.menu&&(t.hidden=0===Ga(e,t.menu));var r=t.format;r&&(t.hidden=!e.formatter.canApply(r)),t.hidden&&n--}),n},Ka=function(e,t){var n=t.items().length;return t.items().each(function(t){t.menu&&t.visible(Ka(e,t.menu)>0),!t.menu&&t.settings.menu&&t.visible(Ga(e,t.settings.menu)>0);var r=t.settings.format;r&&t.visible(e.formatter.canApply(r)),t.visible()||n--}),n},Xa=function(e){var t=0,n=[],r=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}],i=function(e){var r=[];if(e)return j.each(e,function(e){var o={text:e.title,icon:e.icon};if(e.items)o.menu=i(e.items);else{var a=e.format||"custom"+t++;e.format||(e.name=a,n.push(e)),o.format=a,o.cmd=e.cmd}r.push(o)}),r};return e.on("init",function(){j.each(n,function(t){e.formatter.register(t.name,t)})}),{type:"menu",items:function(){return i(e.settings.style_formats_merge?e.settings.style_formats?r.concat(e.settings.style_formats):r:e.settings.style_formats||r)}(),onPostRender:function(t){e.fire("renderFormatsMenu",{control:t.control})},itemDefaults:{preview:!0,textStyle:function(){if(this.settings.format)return e.formatter.getCssText(this.settings.format)},onPostRender:function(){var t=this;t.parent().on("show",function(){var n,r;n=t.settings.format,n&&(t.disabled(!e.formatter.canApply(n)),t.active(e.formatter.match(n))),(r=t.settings.cmd)&&t.active(e.queryCommandState(r))})},onclick:function(){this.settings.format&&Da(e,this.settings.format)(),this.settings.cmd&&e.execCommand(this.settings.cmd)}}}},Ja=function(e,t){e.addMenuItem("formats",{text:"Formats",menu:t})},Qa=function(e,t){e.addButton("styleselect",{type:"menubutton",text:"Formats",menu:t,onShowMenu:function(){e.settings.style_formats_autohide&&Ka(e,this.menu)}})},Za=function(e){var t=Xa(e);Ja(e,t),Qa(e,t)},es={register:Za},ts=function(e){e=e.replace(/;$/,"").split(";");for(var t=e.length;t--;)e[t]=e[t].split("=");return e},ns=function(e,t,n){return function(){var r=this;e.on("nodeChange",function(i){var o=e.formatter,a=null;j.each(i.parents,function(e){if(j.each(t,function(t){if(n?o.matchNode(e,n,{value:t.value})&&(a=t.value):o.matchNode(e,t.value)&&(a=t.value),a)return!1}),a)return!1}),r.value(a)})}},rs=function(e,t){return function(){var n=[];return j.each(t,function(t){n.push({text:t[0],value:t[1],textStyle:function(){return e.formatter.getCssText(t[1])}})}),{type:"listbox",text:t[0][0],values:n,fixedWidth:!0,onselect:function(t){if(t.control){var n=t.control.value();Da(e,n)()}},onPostRender:ns(e,n)}}},is=function(e,t){return j.map(t,function(t){return{text:t[0],onclick:Da(e,t[1]),textStyle:function(){return e.formatter.getCssText(t[1])}}})},os=function(e){var t=ts(e.settings.block_formats||"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre");e.addMenuItem("blockformats",{text:"Blocks",menu:is(e,t)}),e.addButton("formatselect",rs(e,t))},as={register:os},ss=function(e,t){var n,r;if("string"==typeof t)r=t.split(" ");else if(j.isArray(t))return ot(j.map(t,function(t){return ss(e,t)}));return n=j.grep(r,function(t){return"|"===t||t in e.menuItems}),j.map(n,function(t){return"|"===t?{text:"-"}:e.menuItems[t]})},ls=function(e){return e&&"-"===e.text},cs=function(e){var t=Ze(e,function(e,t,n){return!ls(e)||!ls(n[t-1])});return Ze(t,function(e,t,n){return!ls(e)||t>0&&t<n.length-1})},us=function(e,t){var n=[{text:"-"}],r=j.grep(e.menuItems,function(e){return e.context===t});return j.each(r,function(e){"before"===e.separator&&n.push({text:"|"}),e.prependToContext?n.unshift(e):n.push(e),"after"===e.separator&&n.push({text:"|"})}),n},ds=function(e){var t=e.settings.insert_button_items;return cs(t?ss(e,t):us(e,"insert"))},fs=function(e){e.addButton("insert",{type:"menubutton",icon:"insert",menu:[],oncreatemenu:function(){this.menu.add(ds(e)),this.menu.renderNew()}})},hs=function(e){fs(e)},ps={register:hs},gs=function(e){j.each({bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript"},function(t,n){e.addButton(n,{active:!1,tooltip:t,onPostRender:Na(e,n),onclick:Da(e,n)})})},ms=function(e){j.each({outdent:["Decrease indent","Outdent"],indent:["Increase indent","Indent"],cut:["Cut","Cut"],copy:["Copy","Copy"],paste:["Paste","Paste"],help:["Help","mceHelp"],selectall:["Select all","SelectAll"],visualaid:["Visual aids","mceToggleVisualAid"],newdocument:["New document","mceNewDocument"],removeformat:["Clear formatting","RemoveFormat"],remove:["Remove","Delete"]},function(t,n){e.addButton(n,{tooltip:t[0],cmd:t[1]})})},vs=function(e){j.each({blockquote:["Blockquote","mceBlockQuote"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"]},function(t,n){e.addButton(n,{active:!1,tooltip:t[0],cmd:t[1],onPostRender:Na(e,n)})})},bs=function(e){gs(e),ms(e),vs(e)},ys=function(e){j.each({bold:["Bold","Bold","Meta+B"],italic:["Italic","Italic","Meta+I"],underline:["Underline","Underline","Meta+U"],strikethrough:["Strikethrough","Strikethrough"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],removeformat:["Clear formatting","RemoveFormat"],newdocument:["New document","mceNewDocument"],cut:["Cut","Cut","Meta+X"],copy:["Copy","Copy","Meta+C"],paste:["Paste","Paste","Meta+V"],selectall:["Select all","SelectAll","Meta+A"]},function(t,n){e.addMenuItem(n,{text:t[0],icon:n,shortcut:t[2],cmd:t[1]})}),e.addMenuItem("codeformat",{text:"Code",icon:"code",onclick:Da(e,"code")})},ws=function(e){bs(e),ys(e)},_s={register:ws},xs=function(e,t){return function(){var n=this,r=function(){var n="redo"===t?"hasRedo":"hasUndo";return!!e.undoManager&&e.undoManager[n]()};n.disabled(!r()),e.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",function(){n.disabled(e.readonly||!r())})}},Cs=function(e){e.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onPostRender:xs(e,"undo"),cmd:"undo"}),e.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onPostRender:xs(e,"redo"),cmd:"redo"})},ks=function(e){e.addButton("undo",{tooltip:"Undo",onPostRender:xs(e,"undo"),cmd:"undo"}),e.addButton("redo",{tooltip:"Redo",onPostRender:xs(e,"redo"),cmd:"redo"})},Ts=function(e){Cs(e),ks(e)},Ss={register:Ts},Ds=function(e){return function(){var t=this;e.on("VisualAid",function(e){t.active(e.hasVisual)}),t.active(e.hasVisual)}},Es=function(e){e.addMenuItem("visualaid",{text:"Visual aids",selectable:!0,onPostRender:Ds(e),cmd:"mceToggleVisualAid"})},Ns=function(e){Es(e)},As={register:Ns},Rs=function(){Wn.tooltips=!Ct.iOS,Sn.translate=function(e){return M.translate(e)}},Ps=function(e){e.settings.ui_container&&(Ct.container=Sa.descendant(Dr.fromDom(document.body),e.settings.ui_container).fold(ve(null),function(e){return e.dom()}))},Os=function(e){e.rtl&&(Sn.rtl=!0)},Is=function(e){e.on("mousedown",function(){Mn.hideAll()})},Ms=function(e){Os(e),Is(e),Ps(e),Rs(),as.register(e),Ra.register(e),_s.register(e),Ss.register(e),Ya.register(e),Fa.register(e),es.register(e),As.register(e),ps.register(e)},js={setup:Ms},Bs=tr.extend({recalc:function(e){var t,n,r,i,o,a,s,l,c,u,d,f,h,p,g,m,v,b,y,w,_,x,C,k,T,S,D,E,N,A=[],R=[];t=e.settings,i=e.items().filter(":visible"),o=e.layoutRect(),r=t.columns||Math.ceil(Math.sqrt(i.length)),n=Math.ceil(i.length/r),b=t.spacingH||t.spacing||0,y=t.spacingV||t.spacing||0,w=t.alignH||t.align,_=t.alignV||t.align,m=e.paddingBox,E="reverseRows"in t?t.reverseRows:e.isRtl(),w&&"string"==typeof w&&(w=[w]),_&&"string"==typeof _&&(_=[_]);for(d=0;d<r;d++)A.push(0);for(f=0;f<n;f++)R.push(0);for(f=0;f<n;f++)for(d=0;d<r&&(u=i[f*r+d]);d++)c=u.layoutRect(),k=c.minW,T=c.minH,A[d]=k>A[d]?k:A[d],R[f]=T>R[f]?T:R[f];for(S=o.innerW-m.left-m.right,x=0,d=0;d<r;d++)x+=A[d]+(d>0?b:0),S-=(d>0?b:0)+A[d];for(D=o.innerH-m.top-m.bottom,C=0,f=0;f<n;f++)C+=R[f]+(f>0?y:0),D-=(f>0?y:0)+R[f];if(x+=m.left+m.right,C+=m.top+m.bottom,l={},l.minW=x+(o.w-o.innerW),l.minH=C+(o.h-o.innerH),l.contentW=l.minW-o.deltaW,l.contentH=l.minH-o.deltaH,l.minW=Math.min(l.minW,o.maxW),l.minH=Math.min(l.minH,o.maxH),l.minW=Math.max(l.minW,o.startMinWidth),l.minH=Math.max(l.minH,o.startMinHeight),!o.autoResize||l.minW===o.minW&&l.minH===o.minH){o.autoResize&&(l=e.layoutRect(l),l.contentW=l.minW-o.deltaW,l.contentH=l.minH-o.deltaH);var P;P="start"===t.packV?0:D>0?Math.floor(D/n):0;var O=0,I=t.flexWidths;if(I)for(d=0;d<I.length;d++)O+=I[d];else O=r;var M=S/O;for(d=0;d<r;d++)A[d]+=I?I[d]*M:M;for(p=m.top,f=0;f<n;f++){for(h=m.left,s=R[f]+P,d=0;d<r&&(N=E?f*r+r-1-d:f*r+d,u=i[N]);d++)g=u.settings,c=u.layoutRect(),a=Math.max(A[d],c.startMinWidth),c.x=h,c.y=p,v=g.alignH||(w?w[d]||w[0]:null),"center"===v?c.x=h+a/2-c.w/2:"right"===v?c.x=h+a-c.w:"stretch"===v&&(c.w=a),v=g.alignV||(_?_[d]||_[0]:null),"center"===v?c.y=p+s/2-c.h/2:"bottom"===v?c.y=p+s-c.h:"stretch"===v&&(c.h=s),u.layoutRect(c),h+=a+b,u.recalc&&u.recalc();p+=s+y}}else if(l.w=l.minW,l.h=l.minH,e.layoutRect(l),this.recalc(e),null===e._lastRect){var j=e.parent();j&&(j._lastRect=null,j.recalc())}}}),Ls=Wn.extend({renderHtml:function(){var e=this;return e.classes.add("iframe"),e.canFocus=!1,'<iframe id="'+e._id+'" class="'+e.classes+'" tabindex="-1" src="'+(e.settings.url||"javascript:''")+'" frameborder="0"></iframe>'},src:function(e){this.getEl().src=e},html:function(e,t){var n=this,r=this.getEl().contentWindow.document.body;return r?(r.innerHTML=e,t&&t()):pe.setTimeout(function(){n.html(e)}),this}}),Fs=Wn.extend({init:function(e){var t=this;t._super(e),t.classes.add("widget").add("infobox"),t.canFocus=!1},severity:function(e){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(e)},help:function(e){this.state.set("help",e)},renderHtml:function(){var e=this,t=e.classPrefix;return'<div id="'+e._id+'" class="'+e.classes+'"><div id="'+e._id+'-body">'+e.encode(e.state.get("text"))+'<button role="button" tabindex="-1"><i class="'+t+"ico "+t+'i-help"></i></button></div></div>'},bindStates:function(){var e=this;return e.state.on("change:text",function(t){e.getEl("body").firstChild.data=e.encode(t.value),e.state.get("rendered")&&e.updateLayoutRect()}),e.state.on("change:help",function(t){e.classes.toggle("has-help",t.value),e.state.get("rendered")&&e.updateLayoutRect()}),e._super()}}),Hs=Wn.extend({init:function(e){var t=this;t._super(e),t.classes.add("widget").add("label"),t.canFocus=!1,e.multiline&&t.classes.add("autoscroll"),e.strong&&t.classes.add("strong")},initLayoutRect:function(){var e=this,t=e._super();if(e.settings.multiline){Wt.getSize(e.getEl()).width>t.maxW&&(t.minW=t.maxW,e.classes.add("multiline")),e.getEl().style.width=t.minW+"px",t.startMinH=t.h=t.minH=Math.min(t.maxH,Wt.getSize(e.getEl()).height)}return t},repaint:function(){var e=this;return e.settings.multiline||(e.getEl().style.lineHeight=e.layoutRect().h+"px"),e._super()},severity:function(e){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(e)},renderHtml:function(){var e,t,n=this,r=n.settings.forId,i=n.settings.html?n.settings.html:n.encode(n.state.get("text"));return!r&&(t=n.settings.forName)&&(e=n.getRoot().find("#"+t)[0])&&(r=e._id),r?'<label id="'+n._id+'" class="'+n.classes+'"'+(r?' for="'+r+'"':"")+">"+i+"</label>":'<span id="'+n._id+'" class="'+n.classes+'">'+i+"</span>"},bindStates:function(){var e=this;return e.state.on("change:text",function(t){e.innerHtml(e.encode(t.value)),e.state.get("rendered")&&e.updateLayoutRect()}),e._super()}}),$s=Nn.extend({Defaults:{role:"toolbar",layout:"flow"},init:function(e){var t=this;t._super(e),t.classes.add("toolbar")},postRender:function(){var e=this;return e.items().each(function(e){e.classes.add("toolbar-item")}),e._super()}}),Us=$s.extend({Defaults:{role:"menubar",containerCls:"menubar",ariaRoot:!0,defaults:{type:"menubutton"}}}),zs=nr.extend({init:function(e){var t=this;t._renderOpen=!0,t._super(e),e=t.settings,t.classes.add("menubtn"),e.fixedWidth&&t.classes.add("fixed-width"),t.aria("haspopup",!0),t.state.set("menu",e.menu||t.render())},showMenu:function(e){var t,n=this;if(n.menu&&n.menu.visible()&&!1!==e)return n.hideMenu();n.menu||(t=n.state.get("menu")||[],n.classes.add("opened"),t.length?t={type:"menu",animate:!0,items:t}:(t.type=t.type||"menu",t.animate=!0),t.renderTo?n.menu=t.parent(n).show().renderTo():n.menu=ie.create(t).parent(n).renderTo(),n.fire("createmenu"),n.menu.reflow(),n.menu.on("cancel",function(e){e.control.parent()===n.menu&&(e.stopPropagation(),n.focus(),n.hideMenu())}),n.menu.on("select",function(){n.focus()}),n.menu.on("show hide",function(e){e.control===n.menu&&(n.activeMenu("show"===e.type),n.classes.toggle("opened","show"===e.type)),n.aria("expanded","show"===e.type)}).fire("show")),n.menu.show(),n.menu.layoutRect({w:n.layoutRect().w}),n.menu.repaint(),n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"]),n.fire("showmenu")},hideMenu:function(){var e=this;e.menu&&(e.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),e.menu.hide())},activeMenu:function(e){this.classes.toggle("active",e)},renderHtml:function(){var e,t=this,n=t._id,r=t.classPrefix,i=t.settings.icon,o=t.state.get("text"),a="";return e=t.settings.image,e?(i="none","string"!=typeof e&&(e=window.getSelection?e[0]:e[1]),e=" style=\"background-image: url('"+e+"')\""):e="",o&&(t.classes.add("btn-has-text"),a='<span class="'+r+'txt">'+t.encode(o)+"</span>"),i=t.settings.icon?r+"ico "+r+"i-"+i:"",t.aria("role",t.parent()instanceof Us?"menuitem":"button"),'<div id="'+n+'" class="'+t.classes+'" tabindex="-1" aria-labelledby="'+n+'"><button id="'+n+'-open" role="presentation" type="button" tabindex="-1">'+(i?'<i class="'+i+'"'+e+"></i>":"")+a+' <i class="'+r+'caret"></i></button></div>'},postRender:function(){var e=this;return e.on("click",function(t){t.control===e&&E(t.target,e.getEl())&&(e.focus(),e.showMenu(!t.aria),t.aria&&e.menu.items().filter(":visible")[0].focus())}),e.on("mouseenter",function(t){var n,r=t.control,i=e.parent();r&&i&&r instanceof zs&&r.parent()===i&&(i.items().filter("MenuButton").each(function(e){e.hideMenu&&e!==r&&(e.menu&&e.menu.visible()&&(n=!0),e.hideMenu())}),n&&(r.focus(),r.showMenu()))}),e._super()},bindStates:function(){var e=this;return e.state.on("change:menu",function(){e.menu&&e.menu.remove(),e.menu=null}),e._super()},remove:function(){this._super(),this.menu&&this.menu.remove()}}),Ws=Mn.extend({Defaults:{defaultType:"menuitem",border:1,layout:"stack",role:"application",bodyRole:"menu",ariaRoot:!0},init:function(e){var t=this;if(e.autohide=!0,e.constrainToViewport=!0,"function"==typeof e.items&&(e.itemsFactory=e.items,e.items=[]),e.itemDefaults)for(var n=e.items,r=n.length;r--;)n[r]=j.extend({},e.itemDefaults,n[r]);t._super(e),t.classes.add("menu"),e.animate&&11!==Ct.ie&&t.classes.add("animate")},repaint:function(){return this.classes.toggle("menu-align",!0),this._super(),this.getEl().style.height="",this.getEl("body").style.height="",this},cancel:function(){var e=this;e.hideAll(),e.fire("select")},load:function(){function e(){r.throbber&&(r.throbber.hide(),r.throbber=null)}var t,n,r=this;(n=r.settings.itemsFactory)&&(r.throbber||(r.throbber=new w(r.getEl("body"),!0),0===r.items().length?(r.throbber.show(),r.fire("loading")):r.throbber.show(100,function(){r.items().remove(),r.fire("loading")}),r.on("hide close",e)),r.requestTime=t=(new Date).getTime(),r.settings.itemsFactory(function(n){if(0===n.length)return void r.hide();r.requestTime===t&&(r.getEl().style.width="",r.getEl("body").style.width="",e(),r.items().remove(),r.getEl("body").innerHTML="",r.add(n),r.renderNew(),r.fire("loaded"))}))},hideAll:function(){var e=this;return this.find("menuitem").exec("hideMenu"),e._super()},preRender:function(){var e=this;return e.items().each(function(t){var n=t.settings;if(n.icon||n.image||n.selectable)return e._hasIcons=!0,!1}),e.settings.itemsFactory&&e.on("postrender",function(){e.settings.itemsFactory&&e.load()}),e.on("show hide",function(t){t.control===e&&("show"===t.type?pe.setTimeout(function(){e.classes.add("in")},0):e.classes.remove("in"))}),e._super()}}),qs=zs.extend({init:function(e){function t(n){for(var o=0;o<n.length;o++){if(r=n[o].selected||e.value===n[o].value)return i=i||n[o].text,a.state.set("value",n[o].value),!0;if(n[o].menu&&t(n[o].menu))return!0}}var n,r,i,o,a=this;a._super(e),e=a.settings,a._values=n=e.values,n&&(void 0!==e.value&&t(n),!r&&n.length>0&&(i=n[0].text,a.state.set("value",n[0].value)),a.state.set("menu",n)),a.state.set("text",e.text||i),a.classes.add("listbox"),a.on("select",function(t){var n=t.control;o&&(t.lastControl=o),e.multiple?n.active(!n.active()):a.value(t.control.value()),o=n})},value:function(e){if(0===arguments.length)return this.state.get("value");if(void 0===e)return this;if(this.settings.values){j.grep(this.settings.values,function(t){return t.value===e}).length>0?this.state.set("value",e):null===e&&this.state.set("value",null)}else this.state.set("value",e);return this},bindStates:function(){function e(e,t){e instanceof Ws&&e.items().each(function(e){e.hasMenus()||e.active(e.value()===t)})}function t(e,n){var r;if(e)for(var i=0;i<e.length;i++){if(e[i].value===n)return e[i];if(e[i].menu&&(r=t(e[i].menu,n)))return r}}var n=this;return n.on("show",function(t){e(t.control,n.value())}),n.state.on("change:value",function(e){var r=t(n.state.get("menu"),e.value);r?n.text(r.text):n.text(n.settings.text)}),n._super()}}),Vs=function(e,t){var n=e._textStyle;if(n){var r=e.getEl("text");r.setAttribute("style",n),t&&(r.style.color="",r.style.backgroundColor="")}},Ys=Wn.extend({Defaults:{border:0,role:"menuitem"},init:function(e){var t,n=this;n._super(e),e=n.settings,n.classes.add("menu-item"),e.menu&&n.classes.add("menu-item-expand"),e.preview&&n.classes.add("menu-item-preview"),t=n.state.get("text"),"-"!==t&&"|"!==t||(n.classes.add("menu-item-sep"),n.aria("role","separator"),n.state.set("text","-")),e.selectable&&(n.aria("role","menuitemcheckbox"),n.classes.add("menu-item-checkbox"),e.icon="selected"),e.preview||e.selectable||n.classes.add("menu-item-normal"),n.on("mousedown",function(e){e.preventDefault()}),e.menu&&!e.ariaHideMenu&&n.aria("haspopup",!0)},hasMenus:function(){return!!this.settings.menu},showMenu:function(){var e,t=this,n=t.settings,r=t.parent();if(r.items().each(function(e){e!==t&&e.hideMenu()}),n.menu){e=t.menu,e?e.show():(e=n.menu,e.length?e={type:"menu",items:e}:e.type=e.type||"menu",r.settings.itemDefaults&&(e.itemDefaults=r.settings.itemDefaults),e=t.menu=ie.create(e).parent(t).renderTo(),e.reflow(),e.on("cancel",function(n){n.stopPropagation(),t.focus(),e.hide()}),e.on("show hide",function(e){e.control.items&&e.control.items().each(function(e){e.active(e.settings.selected)})}).fire("show"),e.on("hide",function(n){n.control===e&&t.classes.remove("selected")}),e.submenu=!0),e._parentMenu=r,e.classes.add("menu-sub");var i=e.testMoveRel(t.getEl(),t.isRtl()?["tl-tr","bl-br","tr-tl","br-bl"]:["tr-tl","br-bl","tl-tr","bl-br"]);e.moveRel(t.getEl(),i),e.rel=i,i="menu-sub-"+i,e.classes.remove(e._lastRel).add(i),e._lastRel=i,t.classes.add("selected"),t.aria("expanded",!0)}},hideMenu:function(){var e=this;return e.menu&&(e.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),e.menu.hide(),e.aria("expanded",!1)),e},renderHtml:function(){function e(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function t(t){var n=o.match||"";return n?t.replace(new RegExp(e(n),"gi"),function(e){return"!mce~match["+e+"]mce~match!"}):t}function n(t){return t.replace(new RegExp(e("!mce~match["),"g"),"<b>").replace(new RegExp(e("]mce~match!"),"g"),"</b>")}var r=this,i=r._id,o=r.settings,a=r.classPrefix,s=r.state.get("text"),l=r.settings.icon,c="",u=o.shortcut,d=r.encode(o.url),f="";return l&&r.parent().classes.add("menu-has-icons"),o.image&&(c=" style=\"background-image: url('"+o.image+"')\""),u&&(u=function(e){var t,n,r={};for(r=Ct.mac?{alt:"&#x2325;",ctrl:"&#x2318;",shift:"&#x21E7;",meta:"&#x2318;"}:{meta:"Ctrl"},e=e.split("+"),t=0;t<e.length;t++)(n=r[e[t].toLowerCase()])&&(e[t]=n);return e.join("+")}(u)),l=a+"ico "+a+"i-"+(r.settings.icon||"none"),f="-"!==s?'<i class="'+l+'"'+c+"></i>":"",s=n(r.encode(t(s))),d=n(r.encode(t(d))),'<div id="'+i+'" class="'+r.classes+'" tabindex="-1">'+f+("-"!==s?'<span id="'+i+'-text" class="'+a+'text">'+s+"</span>":"")+(u?'<div id="'+i+'-shortcut" class="'+a+'menu-shortcut">'+u+"</div>":"")+(o.menu?'<div class="'+a+'caret"></div>':"")+(d?'<div class="'+a+'menu-item-link">'+d+"</div>":"")+"</div>"},postRender:function(){var e=this,t=e.settings,n=t.textStyle;if("function"==typeof n&&(n=n.call(this)),n){var r=e.getEl("text");r&&(r.setAttribute("style",n),e._textStyle=n)}return e.on("mouseenter click",function(n){n.control===e&&(t.menu||"click"!==n.type?(e.showMenu(),n.aria&&e.menu.focus(!0)):(e.fire("select"),pe.requestAnimationFrame(function(){e.parent().hideAll()})))}),e._super(),e},hover:function(){var e=this;return e.parent().items().each(function(e){e.classes.remove("selected")}),e.classes.toggle("selected",!0),e},active:function(e){return Vs(this,e),void 0!==e&&this.aria("checked",e),this._super(e)},remove:function(){this._super(),this.menu&&this.menu.remove()}}),Gs=or.extend({Defaults:{classes:"radio",role:"radio"}}),Ks=Wn.extend({renderHtml:function(){var e=this,t=e.classPrefix;return e.classes.add("resizehandle"),"both"===e.settings.direction&&e.classes.add("resizehandle-both"),e.canFocus=!1,'<div id="'+e._id+'" class="'+e.classes+'"><i class="'+t+"ico "+t+'i-resize"></i></div>'},postRender:function(){var e=this;e._super(),e.resizeDragHelper=new d(this._id,{start:function(){e.fire("ResizeStart")},drag:function(t){"both"!==e.settings.direction&&(t.deltaX=0),e.fire("Resize",t)},stop:function(){e.fire("ResizeEnd")}})},remove:function(){return this.resizeDragHelper&&this.resizeDragHelper.destroy(),this._super()}}),Xs=Wn.extend({Defaults:{classes:"selectbox",role:"selectbox",options:[]},init:function(e){var t=this;t._super(e),t.settings.size&&(t.size=t.settings.size),t.settings.options&&(t._options=t.settings.options),t.on("keydown",function(e){var n;13===e.keyCode&&(e.preventDefault(),t.parents().reverse().each(function(e){if(e.toJSON)return n=e,!1}),t.fire("submit",{data:n.toJSON()}))})},options:function(e){return arguments.length?(this.state.set("options",e),this):this.state.get("options")},renderHtml:function(){var e,t=this,n="";return e=N(t._options),t.size&&(n=' size = "'+t.size+'"'),'<select id="'+t._id+'" class="'+t.classes+'"'+n+">"+e+"</select>"},bindStates:function(){var e=this;return e.state.on("change:options",function(t){e.getEl().innerHTML=N(t.value)}),e._super()}}),Js=Wn.extend({init:function(e){var t=this;e.previewFilter||(e.previewFilter=function(e){return Math.round(100*e)/100}),t._super(e),t.classes.add("slider"),"v"===e.orientation&&t.classes.add("vertical"),t._minValue=Ye(e.minValue)?e.minValue:0,t._maxValue=Ye(e.maxValue)?e.maxValue:100,t._initValue=t.state.get("value")},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix;return'<div id="'+t+'" class="'+e.classes+'"><div id="'+t+'-handle" class="'+n+'slider-handle" role="slider" tabindex="-1"></div></div>'},reset:function(){this.value(this._initValue).repaint()},postRender:function(){function e(e,t,n){return(n+e)/(t-e)}function t(e,t,n){return n*(t-e)-e}var n,r,i,o,a,s,l=this;n=l._minValue,r=l._maxValue,"v"===l.settings.orientation?(i="screenY",o="top",a="height",s="h"):(i="screenX",o="left",a="width",s="w"),l._super(),function(n,r){function i(i){var o;o=l.value(),o=t(n,r,e(n,r,o)+.05*i),o=A(o,n,r),l.value(o),l.fire("dragstart",{value:o}),l.fire("drag",{value:o}),l.fire("dragend",{value:o})}l.on("keydown",function(e){switch(e.keyCode){case 37:case 38:i(-1);break;case 39:case 40:i(1)}})}(n,r),function(e,t,n){var r,c,u,f,h;l._dragHelper=new d(l._id,{handle:l._id+"-handle",start:function(e){r=e[i],c=parseInt(l.getEl("handle").style[o],10),u=(l.layoutRect()[s]||100)-Wt.getSize(n)[a],l.fire("dragstart",{value:h})},drag:function(a){var s=a[i]-r;f=A(c+s,0,u),n.style[o]=f+"px",h=e+f/u*(t-e),l.value(h),l.tooltip().text(""+l.settings.previewFilter(h)).show().moveRel(n,"bc tc"),l.fire("drag",{value:h})},stop:function(){l.tooltip().hide(),l.fire("dragend",{value:h})}})}(n,r,l.getEl("handle"))},repaint:function(){this._super(),P(this,this.value())},bindStates:function(){var e=this;return e.state.on("change:value",function(t){P(e,t.value)}),e._super()}}),Qs=Wn.extend({renderHtml:function(){var e=this;return e.classes.add("spacer"),e.canFocus=!1,'<div id="'+e._id+'" class="'+e.classes+'"></div>'}}),Zs=zs.extend({Defaults:{classes:"widget btn splitbtn",role:"button"},repaint:function(){var e,t,n=this,r=n.getEl(),i=n.layoutRect();return n._super(),e=r.firstChild,t=r.lastChild,Ut(e).css({width:i.w-Wt.getSize(t).width,height:i.h-2}),Ut(t).css({height:i.h-2}),n},activeMenu:function(e){var t=this;Ut(t.getEl().lastChild).toggleClass(t.classPrefix+"active",e)},renderHtml:function(){var e,t,n=this,r=n._id,i=n.classPrefix,o=n.state.get("icon"),a=n.state.get("text"),s=n.settings,l="";return e=s.image,e?(o="none","string"!=typeof e&&(e=window.getSelection?e[0]:e[1]),e=" style=\"background-image: url('"+e+"')\""):e="",o=s.icon?i+"ico "+i+"i-"+o:"",a&&(n.classes.add("btn-has-text"),l='<span class="'+i+'txt">'+n.encode(a)+"</span>"),t="boolean"==typeof s.active?' aria-pressed="'+s.active+'"':"",'<div id="'+r+'" class="'+n.classes+'" role="button"'+t+' tabindex="-1"><button type="button" hidefocus="1" tabindex="-1">'+(o?'<i class="'+o+'"'+e+"></i>":"")+l+'</button><button type="button" class="'+i+'open" hidefocus="1" tabindex="-1">'+(n._menuBtnText?(o?"":"")+n._menuBtnText:"")+' <i class="'+i+'caret"></i></button></div>'},postRender:function(){var e=this,t=e.settings.onclick;return e.on("click",function(e){var n=e.target;if(e.control===this)for(;n;){if(e.aria&&"down"!==e.aria.key||"BUTTON"===n.nodeName&&-1===n.className.indexOf("open"))return e.stopImmediatePropagation(),void(t&&t.call(this,e));n=n.parentNode}}),delete e.settings.onclick,e._super()}}),el=fa.extend({Defaults:{containerClass:"stack-layout",controlClass:"stack-layout-item",endClass:"break"},isNative:function(){return!0}}),tl=Rn.extend({
Defaults:{layout:"absolute",defaults:{type:"panel"}},activateTab:function(e){var t;this.activeTabId&&(t=this.getEl(this.activeTabId),Ut(t).removeClass(this.classPrefix+"active"),t.setAttribute("aria-selected","false")),this.activeTabId="t"+e,t=this.getEl("t"+e),t.setAttribute("aria-selected","true"),Ut(t).addClass(this.classPrefix+"active"),this.items()[e].show().fire("showtab"),this.reflow(),this.items().each(function(t,n){e!==n&&t.hide()})},renderHtml:function(){var e=this,t=e._layout,n="",r=e.classPrefix;return e.preRender(),t.preRender(e),e.items().each(function(t,i){var o=e._id+"-t"+i;t.aria("role","tabpanel"),t.aria("labelledby",o),n+='<div id="'+o+'" class="'+r+'tab" unselectable="on" role="tab" aria-controls="'+t._id+'" aria-selected="false" tabIndex="-1">'+e.encode(t.settings.title)+"</div>"}),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1"><div id="'+e._id+'-head" class="'+r+'tabs" role="tablist">'+n+'</div><div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+t.renderHtml(e)+"</div></div>"},postRender:function(){var e=this;e._super(),e.settings.activeTab=e.settings.activeTab||0,e.activateTab(e.settings.activeTab),this.on("click",function(t){var n=t.target.parentNode;if(n&&n.id===e._id+"-head")for(var r=n.childNodes.length;r--;)n.childNodes[r]===t.target&&e.activateTab(r)})},initLayoutRect:function(){var e,t,n,r=this;t=Wt.getSize(r.getEl("head")).width,t=t<0?0:t,n=0,r.items().each(function(e){t=Math.max(t,e.layoutRect().minW),n=Math.max(n,e.layoutRect().minH)}),r.items().each(function(e){e.settings.x=0,e.settings.y=0,e.settings.w=t,e.settings.h=n,e.layoutRect({x:0,y:0,w:t,h:n})});var i=Wt.getSize(r.getEl("head")).height;return r.settings.minWidth=t,r.settings.minHeight=n+i,e=r._super(),e.deltaH+=i,e.innerH=e.h-e.deltaH,e}}),nl=Wn.extend({init:function(e){var t=this;t._super(e),t.classes.add("textbox"),e.multiline?t.classes.add("multiline"):(t.on("keydown",function(e){var n;13===e.keyCode&&(e.preventDefault(),t.parents().reverse().each(function(e){if(e.toJSON)return n=e,!1}),t.fire("submit",{data:n.toJSON()}))}),t.on("keyup",function(e){t.state.set("value",e.target.value)}))},repaint:function(){var e,t,n,r,i,o=this,a=0;e=o.getEl().style,t=o._layoutRect,i=o._lastRepaintRect||{};var s=document;return!o.settings.multiline&&s.all&&(!s.documentMode||s.documentMode<=8)&&(e.lineHeight=t.h-a+"px"),n=o.borderBox,r=n.left+n.right+8,a=n.top+n.bottom+(o.settings.multiline?8:0),t.x!==i.x&&(e.left=t.x+"px",i.x=t.x),t.y!==i.y&&(e.top=t.y+"px",i.y=t.y),t.w!==i.w&&(e.width=t.w-r+"px",i.w=t.w),t.h!==i.h&&(e.height=t.h-a+"px",i.h=t.h),o._lastRepaintRect=i,o.fire("repaint",{},!1),o},renderHtml:function(){var e,t,n=this,r=n.settings;return e={id:n._id,hidefocus:"1"},j.each(["rows","spellcheck","maxLength","size","readonly","min","max","step","list","pattern","placeholder","required","multiple"],function(t){e[t]=r[t]}),n.disabled()&&(e.disabled="disabled"),r.subtype&&(e.type=r.subtype),t=Wt.create(r.multiline?"textarea":"input",e),t.value=n.state.get("value"),t.className=n.classes.toString(),t.outerHTML},value:function(e){return arguments.length?(this.state.set("value",e),this):(this.state.get("rendered")&&this.state.set("value",this.getEl().value),this.state.get("value"))},postRender:function(){var e=this;e.getEl().value=e.state.get("value"),e._super(),e.$el.on("change",function(t){e.state.set("value",t.target.value),e.fire("change",t)})},bindStates:function(){var e=this;return e.state.on("change:value",function(t){e.getEl().value!==t.value&&(e.getEl().value=t.value)}),e.state.on("change:disabled",function(t){e.getEl().disabled=t.value}),e._super()},remove:function(){this.$el.off(),this._super()}}),rl=function(){return{Selector:sn,Collection:un,ReflowQueue:vn,Control:Sn,Factory:ie,KeyboardNavigation:l,Container:Nn,DragHelper:d,Scrollable:An,Panel:Rn,Movable:Xt,Resizable:Pn,FloatPanel:Mn,Window:Xn,MessageBox:Jn,Tooltip:zn,Widget:Wn,Progress:qn,Notification:Yn,Layout:er,AbsoluteLayout:tr,Button:nr,ButtonGroup:ir,Checkbox:or,ComboBox:sr,ColorBox:lr,PanelButton:cr,ColorButton:dr,ColorPicker:hr,Path:gr,ElementPath:mr,FormItem:vr,Form:br,FieldSet:yr,FilePicker:ca,FitLayout:ua,FlexLayout:da,FlowLayout:fa,FormatControls:js,GridLayout:Bs,Iframe:Ls,InfoBox:Fs,Label:Hs,Toolbar:$s,MenuBar:Us,MenuButton:zs,MenuItem:Ys,Throbber:w,Menu:Ws,ListBox:qs,Radio:Gs,ResizeHandle:Ks,SelectBox:Xs,Slider:Js,Spacer:Qs,SplitButton:Zs,StackLayout:el,TabPanel:tl,TextBox:nl,DropZone:pr,BrowseButton:rr}},il=function(e){e.ui?j.each(rl(),function(t,n){e.ui[n]=t}):e.ui=rl()},ol=function(){j.each(rl(),function(e,t){ie.add(t,e)})},al={appendTo:il,registerToFactory:ol};al.registerToFactory(),al.appendTo(window.tinymce?window.tinymce:{}),I.add("modern",function(e){return js.setup(e),Zn.get(e)})}()}(),void 0===dist||!dist)var dist={};if(void 0!==dist.Form&&dist.Form||(dist.Form={}),void 0!==dist.Form.Fields&&dist.Form.Fields||(dist.Form.Fields={}),dist.Form.Fields.DatatableUtils={getInstance:function(e){var t=$(e);return void 0!==t&&null!==t&&""!==t&&$(".dataTable",t.parents(".row")).dataTable()},getFilterform:function(e){var t=$(e);return void 0!==t&&null!==t&&""!==t&&$(".row-filter form",t.parents(".row"))},addSessionFilters:function(e,t){var n=$(".row-filter form",t.parents(".row")),r=n.serializeArray();for(var i in r)r.hasOwnProperty(i)&&e.push({name:r[i].name,value:r[i].value});return e},initFilters:function(e,t){$(e).off("click").on("click",function(e){e.preventDefault();var t=dist.Form.Fields.DatatableUtils.getFilterform(e.currentTarget),n=dist.Form.Fields.DatatableUtils.getInstance(e.currentTarget),r=t.serializeArray();for(var i in r)if(r.hasOwnProperty(i)&&"_token"!=r[i].name){var o=$('[name="'+r[i].name+'"]');o.val("");var a=$(o).data("select2");a&&$(o).select2("val","")}return jQuery(".tools a",jQuery(e.currentTarget).parents(".portlet")).click(),n.fnDraw(),!1}),$(t).off("click").on("click",function(e){return e.preventDefault(),dist.Form.Fields.DatatableUtils.getInstance(e.currentTarget).fnDraw(),jQuery(".tools a",jQuery(e.currentTarget).parents(".portlet")).click(),!1})}},void 0===dist||!dist)var dist={};void 0!==dist.Project&&dist.Project||(dist.Project={}),dist.Project.Global=function(){this.init()},dist.Project.Global.prototype={ie8:!(!document.all||!document.querySelector||document.addEventListener),init:function(){jQuery(document).ready(jQuery.proxy(this,"onDocumentReady")),jQuery(window).load(jQuery.proxy(this,"onWindowLoad"))},onDocumentReady:function(){this.initValidator(),this.initTemplate()},onWindowLoad:function(){},initValidator:function(){jQuery("form").validationEngine({promptPosition:"topLeft"})},initTemplate:function(){Metronic.init(),Layout.init(),QuickSidebar.init()}};var app=new dist.Project.Global;if(void 0===dist||!dist)var dist={};if(void 0!==dist.Form&&dist.Form||(dist.Form={}),void 0!==dist.Form.Permission&&dist.Form.Permission||(dist.Form.Permission={}),dist.Form.Permission.Global=function(){this.init()},dist.Form.Permission.Global.prototype={ie8:!(!document.all||!document.querySelector||document.addEventListener),init:function(){jQuery(document).ready(jQuery.proxy(this,"onDocumentReady")),jQuery(window).load(jQuery.proxy(this,"onWindowLoad"))},onDocumentReady:function(){this.initEvents()},onWindowLoad:function(){},initEvents:function(){jQuery("tbody .icheck").on("ifChecked",jQuery.proxy(this.changeColorInBlue,this)),jQuery("tbody .icheck").on("ifUnchecked",jQuery.proxy(this.changeColorInGrey,this)),jQuery(".check-all").on("ifChecked",jQuery.proxy(this.checkAll,this)),jQuery(".uncheck-all").on("ifChecked",jQuery.proxy(this.uncheckAll,this))},changeColorInGrey:function(e){var t=jQuery(e.target);t.addClass("icheckbox_line-grey").removeClass("icheckbox_line-blue"),t.parent().addClass("icheckbox_line-grey").removeClass("icheckbox_line-blue")},changeColorInBlue:function(e){var t=jQuery(e.target);t.addClass("icheckbox_line-blue").removeClass("icheckbox_line-grey"),t.parent().addClass("icheckbox_line-blue").removeClass("icheckbox_line-grey")},checkAll:function(e){var t=jQuery(e.target);jQuery('input[name*="['+t.prop("name")+'][]"]').iCheck("check")},uncheckAll:function(e){var t=jQuery(e.target);jQuery('input[name*="['+t.prop("name")+'][]"]').iCheck("uncheck")}},new dist.Form.Permission.Global,void 0===dist||!dist)var dist={};void 0!==dist.Form&&dist.Form||(dist.Form={}),void 0!==dist.Form.User&&dist.Form.User||(dist.Form.User={}),dist.Form.User.Global=function(){this.init()},dist.Form.User.Global.prototype={ie8:!(!document.all||!document.querySelector||document.addEventListener),init:function(){jQuery(document).ready(jQuery.proxy(this,"onDocumentReady")),jQuery(window).load(jQuery.proxy(this,"onWindowLoad"))},onDocumentReady:function(){this.initEvents();var e=jQuery("#change_password");e.length>0&&this.toogleElements();var e=jQuery('input[name="user[change_password]"]');e.length>0&&this.toogleSubElements()},onWindowLoad:function(){},initEvents:function(){jQuery("#change_password").off("click.user").on("click.user",jQuery.proxy(this.toogleElements,this)),jQuery('input[name="user[change_password]"]').off("click.user").on("click.user",jQuery.proxy(this.toogleSubElements,this))},toogleElements:function(){jQuery("#change_password").is(":checked")?(jQuery("#password").parents(".form-group").show(),jQuery("#password_match").parents(".form-group").show()):(jQuery("#password").parents(".form-group").hide(),jQuery("#password_match").parents(".form-group").hide())},toogleSubElements:function(){jQuery('input[name="user[change_password]"]').is(":checked")?(jQuery('input[name="user[password]"]').parents(".form-group").show(),jQuery('input[name="user[password_match]"]').parents(".form-group").show()):(jQuery('input[name="user[password]"]').parents(".form-group").hide(),jQuery('input[name="user[password_match]"]').parents(".form-group").hide())}},new dist.Form.User.Global,$.extend(!0,$.fn.dataTable.defaults,{dom:"<'row'<'col-md-6 col-sm-12'l><'col-md-6 col-sm-12'f>r><'table-scrollable't><'row'<'col-md-5 col-sm-12'i><'col-md-7 col-sm-12'p>>",language:{lengthMenu:" _MENU_ records ",paginate:{previous:'<i class="fa fa-angle-left"></i>',next:'<i class="fa fa-angle-right"></i>'}}}),$.extend($.fn.dataTableExt.oStdClasses,{sWrapper:"dataTables_wrapper",sFilterInput:"form-control input-small input-inline",sLengthSelect:"form-control input-xsmall input-inline"}),$.fn.dataTable.defaults.renderer="bootstrap",$.fn.dataTable.ext.renderer.pageButton.bootstrap=function(e,t,n,r,i,o){var a,s,l=new $.fn.dataTable.Api(e),c=e.oClasses,u=e.oLanguage.oPaginate,d=function(t,r){var f,h,p,g,m=function(e){e.preventDefault(),"ellipsis"!==e.data.action&&l.page(e.data.action).draw(!1)};for(f=0,h=r.length;f<h;f++)if(g=r[f],$.isArray(g))d(t,g);else{switch(a="",s="",g){case"ellipsis":a="&hellip;",s="disabled";break;case"first":a=u.sFirst,s=g+(i>0?"":" disabled");break;case"previous":a=u.sPrevious,s=g+(i>0?"":" disabled");break;case"next":a=u.sNext,s=g+(i<o-1?"":" disabled");break;case"last":a=u.sLast,s=g+(i<o-1?"":" disabled");break;default:a=g+1,s=i===g?"active":""}a&&(p=$("<li>",{class:c.sPageButton+" "+s,"aria-controls":e.sTableId,tabindex:e.iTabIndex,id:0===n&&"string"==typeof g?e.sTableId+"_"+g:null}).append($("<a>",{href:"#"}).html(a)).appendTo(t),e.oApi._fnBindAction(p,{action:g},m))}};d($(t).empty().html('<ul class="pagination"/>').children("ul"),r)},$.fn.DataTable.TableTools&&($.extend(!0,$.fn.DataTable.TableTools.classes,{container:"DTTT btn-group",buttons:{normal:"btn btn-default",disabled:"disabled"},collection:{container:"DTTT_dropdown dropdown-menu",buttons:{normal:"",disabled:"disabled"}},print:{info:"DTTT_Print_Info"},select:{row:"active"}}),$.extend(!0,$.fn.DataTable.TableTools.DEFAULTS.oTags,{collection:{container:"ul",button:"li",liner:"a"}})),$.fn.dataTableExt.oApi.fnPagingInfo=function(e){return{iStart:e._iDisplayStart,iEnd:e.fnDisplayEnd(),iLength:e._iDisplayLength,iTotal:e.fnRecordsTotal(),iFilteredTotal:e.fnRecordsDisplay(),iPage:-1===e._iDisplayLength?0:Math.ceil(e._iDisplayStart/e._iDisplayLength),iTotalPages:-1===e._iDisplayLength?0:Math.ceil(e.fnRecordsDisplay()/e._iDisplayLength)}},$.extend($.fn.dataTableExt.oPagination,{bootstrap_full_number:{fnInit:function(e,t,n){var r=e.oLanguage.oPaginate,i=function(t){t.preventDefault(),e.oApi._fnPageChange(e,t.data.action)&&n(e)};$(t).append('<ul class="pagination"><li class="prev disabled"><a href="#" title="'+r.sFirst+'"><i class="fa fa-angle-double-left"></i></a></li><li class="prev disabled"><a href="#" title="'+r.sPrevious+'"><i class="fa fa-angle-left"></i></a></li><li class="next disabled"><a href="#" title="'+r.sNext+'"><i class="fa fa-angle-right"></i></a></li><li class="next disabled"><a href="#" title="'+r.sLast+'"><i class="fa fa-angle-double-right"></i></a></li></ul>');var o=$("a",t);$(o[0]).bind("click.DT",{action:"first"},i),$(o[1]).bind("click.DT",{action:"previous"},i),$(o[2]).bind("click.DT",{action:"next"},i),$(o[3]).bind("click.DT",{action:"last"},i)},fnUpdate:function(e,t){var n,r,i,o,a,s=e.oInstance.fnPagingInfo(),l=e.aanFeatures.p,c=Math.floor(2.5);for(s.iTotalPages<5?(o=1,a=s.iTotalPages):s.iPage<=c?(o=1,a=5):s.iPage>=s.iTotalPages-c?(o=s.iTotalPages-5+1,a=s.iTotalPages):(o=s.iPage-c+1,a=o+5-1),n=0,iLen=l.length;n<iLen;n++){for(s.iTotalPages<=0?$(".pagination",l[n]).css("visibility","hidden"):$(".pagination",l[n]).css("visibility","visible"),$("li:gt(1)",l[n]).filter(":not(.next)").remove(),r=o;r<=a;r++)i=r==s.iPage+1?'class="active"':"",$("<li "+i+'><a href="#">'+r+"</a></li>").insertBefore($("li.next:first",l[n])[0]).bind("click",function(n){n.preventDefault(),e._iDisplayStart=(parseInt($("a",this).text(),10)-1)*s.iLength,t(e)});0===s.iPage?$("li.prev",l[n]).addClass("disabled"):$("li.prev",l[n]).removeClass("disabled"),s.iPage===s.iTotalPages-1||0===s.iTotalPages?$("li.next",l[n]).addClass("disabled"):$("li.next",l[n]).removeClass("disabled")}}}}),$.extend($.fn.dataTableExt.oPagination,{bootstrap_extended:{fnInit:function(e,t,n){var r=e.oLanguage.oPaginate,i=(e.oInstance.fnPagingInfo(),function(t){t.preventDefault(),e.oApi._fnPageChange(e,t.data.action)&&n(e)});$(t).append('<div class="pagination-panel"> '+r.page+' <a href="#" class="btn btn-sm default prev disabled" title="'+r.previous+'"><i class="fa fa-angle-left"></i></a><input type="text" class="pagination-panel-input form-control input-mini input-inline input-sm" maxlenght="5" style="text-align:center; margin: 0 5px;"><a href="#" class="btn btn-sm default next disabled" title="'+r.next+'"><i class="fa fa-angle-right"></i></a> '+r.pageOf+' <span class="pagination-panel-total"></span></div>');var o=$("a",t);$(o[0]).bind("click.DT",{action:"previous"},i),$(o[1]).bind("click.DT",{action:"next"},i),$(".pagination-panel-input",t).bind("change.DT",function(t){var r=e.oInstance.fnPagingInfo();t.preventDefault();var i=parseInt($(this).val());i>0&&i<=r.iTotalPages?e.oApi._fnPageChange(e,i-1)&&n(e):$(this).val(r.iPage+1)}),$(".pagination-panel-input",t).bind("keypress.DT",function(t){var r=e.oInstance.fnPagingInfo();if(13==t.which){var i=parseInt($(this).val());i>0&&i<=e.oInstance.fnPagingInfo().iTotalPages?e.oApi._fnPageChange(e,i-1)&&n(e):$(this).val(r.iPage+1),t.preventDefault()}})},fnUpdate:function(e,t){var n,r,i,o,a,s=e.oInstance.fnPagingInfo(),l=e.aanFeatures.p,c=Math.floor(2.5);for(s.iTotalPages<5?(o=1,a=s.iTotalPages):s.iPage<=c?(o=1,a=5):s.iPage>=s.iTotalPages-c?(o=s.iTotalPages-5+1,a=s.iTotalPages):(o=s.iPage-c+1,a=o+5-1),n=0,iLen=l.length;n<iLen;n++){var u=$(l[n]).parents(".dataTables_wrapper");for(s.iTotal<=0?$(".dataTables_paginate, .dataTables_length",u).hide():$(".dataTables_paginate, .dataTables_length",u).show(),s.iTotalPages<=0?$(".dataTables_paginate, .dataTables_length .seperator",u).hide():$(".dataTables_paginate, .dataTables_length .seperator",u).show(),$(".pagination-panel-total",l[n]).html(s.iTotalPages),$(".pagination-panel-input",l[n]).val(s.iPage+1),$("li:gt(1)",l[n]).filter(":not(.next)").remove(),r=o;r<=a;r++)i=r==s.iPage+1?'class="active"':"",$("<li "+i+'><a href="#">'+r+"</a></li>").insertBefore($("li.next:first",l[n])[0]).bind("click",function(n){n.preventDefault(),e._iDisplayStart=(parseInt($("a",this).text(),10)-1)*s.iLength,t(e)});0===s.iPage?$("a.prev",l[n]).addClass("disabled"):$("a.prev",l[n]).removeClass("disabled"),s.iPage===s.iTotalPages-1||0===s.iTotalPages?$("a.next",l[n]).addClass("disabled"):$("a.next",l[n]).removeClass("disabled")}}}}),function(e){"use strict";var t={init:function(n){var r=this;return r.data("jqv")&&null!=r.data("jqv")||(n=t._saveOptions(r,n),e(document).on("click",".formError",function(){e(this).fadeOut(150,function(){e(this).closest(".formError").remove()})})),this},attach:function(n){var r,i=this;return r=n?t._saveOptions(i,n):i.data("jqv"),r.validateAttribute=i.find("[data-validation-engine*=validate]").length?"data-validation-engine":"class",r.binded&&(i.on(r.validationEventTrigger,"["+r.validateAttribute+"*=validate]:not([type=checkbox]):not([type=radio]):not(.datepicker)",t._onFieldEvent),i.on("click","["+r.validateAttribute+"*=validate][type=checkbox],["+r.validateAttribute+"*=validate][type=radio]",t._onFieldEvent),i.on(r.validationEventTrigger,"["+r.validateAttribute+"*=validate][class*=datepicker]",{delay:300},t._onFieldEvent)),r.autoPositionUpdate&&e(window).bind("resize",{noAnimation:!0,formElem:i},t.updatePromptsPosition),i.on("click","a[data-validation-engine-skip], a[class*='validate-skip'], button[data-validation-engine-skip], button[class*='validate-skip'], input[data-validation-engine-skip], input[class*='validate-skip']",t._submitButtonClick),i.removeData("jqv_submitButton"),i.on("submit",t._onSubmitEvent),this},detach:function(){var n=this,r=n.data("jqv");return n.off(r.validationEventTrigger,"["+r.validateAttribute+"*=validate]:not([type=checkbox]):not([type=radio]):not(.datepicker)",t._onFieldEvent),n.off("click","["+r.validateAttribute+"*=validate][type=checkbox],["+r.validateAttribute+"*=validate][type=radio]",t._onFieldEvent),n.off(r.validationEventTrigger,"["+r.validateAttribute+"*=validate][class*=datepicker]",t._onFieldEvent),n.off("submit",t._onSubmitEvent),n.removeData("jqv"),n.off("click","a[data-validation-engine-skip], a[class*='validate-skip'], button[data-validation-engine-skip], button[class*='validate-skip'], input[data-validation-engine-skip], input[class*='validate-skip']",t._submitButtonClick),n.removeData("jqv_submitButton"),r.autoPositionUpdate&&e(window).off("resize",t.updatePromptsPosition),this},validate:function(n){var r,i=e(this),o=null;if(i.is("form")||i.hasClass("validationEngineContainer")){if(i.hasClass("validating"))return!1;i.addClass("validating"),r=n?t._saveOptions(i,n):i.data("jqv");var o=t._validateFields(this);setTimeout(function(){i.removeClass("validating")},100),o&&r.onSuccess?r.onSuccess():!o&&r.onFailure&&r.onFailure()}else{if(!i.is("form")&&!i.hasClass("validationEngineContainer")){var a=i.closest("form, .validationEngineContainer");return r=a.data("jqv")?a.data("jqv"):e.validationEngine.defaults,o=t._validateField(i,r),o&&r.onFieldSuccess?r.onFieldSuccess():r.onFieldFailure&&r.InvalidFields.length>0&&r.onFieldFailure(),!o}i.removeClass("validating")}return r.onValidationComplete?!!r.onValidationComplete(a,o):o},updatePromptsPosition:function(n){if(n&&this==window)var r=n.data.formElem,i=n.data.noAnimation;else var r=e(this.closest("form, .validationEngineContainer"));var o=r.data("jqv");return o||(o=t._saveOptions(r,o)),r.find("["+o.validateAttribute+"*=validate]").not(":disabled").each(function(){var n=e(this);o.prettySelect&&n.is(":hidden")&&(n=r.find("#"+o.usePrefix+n.attr("id")+o.useSuffix));var a=t._getPrompt(n),s=e(a).find(".formErrorContent").html();a&&t._updatePrompt(n,e(a),s,void 0,!1,o,i)}),this},showPrompt:function(e,n,r,i){var o=this.closest("form, .validationEngineContainer"),a=o.data("jqv");return a||(a=t._saveOptions(this,a)),r&&(a.promptPosition=r),a.showArrow=1==i,t._showPrompt(this,e,n,!1,a),this},hide:function(){var n=e(this).closest("form, .validationEngineContainer"),r=n.data("jqv");r||(r=t._saveOptions(n,r));var i,o=r&&r.fadeDuration?r.fadeDuration:.3;return i=n.is("form")||n.hasClass("validationEngineContainer")?"parentForm"+t._getClassName(e(n).attr("id")):t._getClassName(e(n).attr("id"))+"formError",e("."+i).fadeTo(o,0,function(){e(this).closest(".formError").remove()}),this},hideAll:function(){var t=this,n=t.data("jqv"),r=n?n.fadeDuration:300;return e(".formError").fadeTo(r,0,function(){e(this).closest(".formError").remove()}),this},_onFieldEvent:function(n){var r=e(this),i=r.closest("form, .validationEngineContainer"),o=i.data("jqv");o||(o=t._saveOptions(i,o)),o.eventTrigger="field",1==o.notEmpty?r.val().length>0&&window.setTimeout(function(){t._validateField(r,o)},n.data?n.data.delay:0):window.setTimeout(function(){t._validateField(r,o)},n.data?n.data.delay:0)},_onSubmitEvent:function(){var n=e(this),r=n.data("jqv");if(n.data("jqv_submitButton")){var i=e("#"+n.data("jqv_submitButton"));if(i&&i.length>0&&(i.hasClass("validate-skip")||"true"==i.attr("data-validation-engine-skip")))return!0}r.eventTrigger="submit";var o=t._validateFields(n);return o&&r.ajaxFormValidation?(t._validateFormWithAjax(n,r),!1):r.onValidationComplete?!!r.onValidationComplete(n,o):o},_checkAjaxStatus:function(t){var n=!0;return e.each(t.ajaxValidCache,function(e,t){if(!t)return n=!1,!1}),n},_checkAjaxFieldStatus:function(e,t){return 1==t.ajaxValidCache[e]},_validateFields:function(n){var r=n.data("jqv"),i=!1;n.trigger("jqv.form.validating");var o=null;if(n.find("["+r.validateAttribute+"*=validate]").not(":disabled").each(function(){var a=e(this),s=[];if(e.inArray(a.attr("name"),s)<0){if(i|=t._validateField(a,r),i&&null==o&&(a.is(":hidden")&&r.prettySelect?o=a=n.find("#"+r.usePrefix+t._jqSelector(a.attr("id"))+r.useSuffix):(a.data("jqv-prompt-at")instanceof jQuery?a=a.data("jqv-prompt-at"):a.data("jqv-prompt-at")&&(a=e(a.data("jqv-prompt-at"))),o=a)),r.doNotShowAllErrosOnSubmit)return!1;if(s.push(a.attr("name")),1==r.showOneMessage&&i)return!1}}),n.trigger("jqv.form.result",[i]),i){if(r.scroll){var a=o.offset().top,s=o.offset().left,l=r.promptPosition;if("string"==typeof l&&-1!=l.indexOf(":")&&(l=l.substring(0,l.indexOf(":"))),"bottomRight"!=l&&"bottomLeft"!=l){var c=t._getPrompt(o);c&&(a=c.offset().top)}if(r.scrollOffset&&(a-=r.scrollOffset),r.isOverflown){var u=e(r.overflownDIV);if(!u.length)return!1;a+=u.scrollTop()+-parseInt(u.offset().top)-5;e(r.overflownDIV).filter(":not(:animated)").animate({scrollTop:a},1100,function(){r.focusFirstField&&o.focus()})}else e("html, body").animate({scrollTop:a},1100,function(){r.focusFirstField&&o.focus()}),e("html, body").animate({scrollLeft:s},1100)}else r.focusFirstField&&o.focus();return!1}return!0},_validateFormWithAjax:function(n,r){var i=n.serialize(),o=r.ajaxFormValidationMethod?r.ajaxFormValidationMethod:"GET",a=r.ajaxFormValidationURL?r.ajaxFormValidationURL:n.attr("action"),s=r.dataType?r.dataType:"json";e.ajax({type:o,url:a,cache:!1,dataType:s,data:i,form:n,methods:t,options:r,beforeSend:function(){return r.onBeforeAjaxFormValidation(n,r)},error:function(e,n){r.onFailure?r.onFailure(e,n):t._ajaxError(e,n)},success:function(i){if("json"==s&&!0!==i){for(var o=!1,a=0;a<i.length;a++){var l=i[a],c=l[0],u=e(e("#"+c)[0]);if(1==u.length){var d=l[2];if(1==l[1])if(""!=d&&d){if(r.allrules[d]){var f=r.allrules[d].alertTextOk;f&&(d=f)}r.showPrompts&&t._showPrompt(u,d,"pass",!1,r,!0)}else t._closePrompt(u);else{if(o|=!0,r.allrules[d]){var f=r.allrules[d].alertText;f&&(d=f)}r.showPrompts&&t._showPrompt(u,d,"",!1,r,!0)}}}r.onAjaxFormComplete(!o,n,i,r)}else r.onAjaxFormComplete(!0,n,i,r)}})},_validateField:function(n,r,i){if(n.attr("id")||(n.attr("id","form-validation-field-"+e.validationEngine.fieldIdCounter),++e.validationEngine.fieldIdCounter),n.hasClass(r.ignoreFieldsWithClass))return!1;if(!r.validateNonVisibleFields&&(n.is(":hidden")&&!r.prettySelect||n.parent().is(":hidden")))return!1;var o=n.attr(r.validateAttribute),a=/validate\[(.*)\]/.exec(o);if(!a)return!1;var s=a[1],l=s.split(/\[|,|\]/),c=n.attr("name"),u="",d="",f=!1,h=!1;r.isError=!1,r.showArrow=1==r.showArrow,r.maxErrorsPerField>0&&(h=!0);for(var p=e(n.closest("form, .validationEngineContainer")),g=0;g<l.length;g++)l[g]=l[g].toString().replace(" ",""),""===l[g]&&delete l[g];for(var g=0,m=0;g<l.length;g++){if(h&&m>=r.maxErrorsPerField){if(!f){var v=e.inArray("required",l);f=-1!=v&&v>=g}break}var b=void 0;switch(l[g]){case"required":f=!0,b=t._getErrorMessage(p,n,l[g],l,g,r,t._required);break;case"custom":b=t._getErrorMessage(p,n,l[g],l,g,r,t._custom);break;case"groupRequired":var y="["+r.validateAttribute+"*="+l[g+1]+"]",w=p.find(y).eq(0);w[0]!=n[0]&&(t._validateField(w,r,i),r.showArrow=!0),b=t._getErrorMessage(p,n,l[g],l,g,r,t._groupRequired),b&&(f=!0),r.showArrow=!1;break;case"ajax":b=t._ajax(n,l,g,r),b&&(d="load");break;case"minSize":b=t._getErrorMessage(p,n,l[g],l,g,r,t._minSize);break;case"maxSize":b=t._getErrorMessage(p,n,l[g],l,g,r,t._maxSize);break;case"min":b=t._getErrorMessage(p,n,l[g],l,g,r,t._min);break;case"max":b=t._getErrorMessage(p,n,l[g],l,g,r,t._max);break;case"past":b=t._getErrorMessage(p,n,l[g],l,g,r,t._past);break;case"future":b=t._getErrorMessage(p,n,l[g],l,g,r,t._future);break;case"dateRange":var y="["+r.validateAttribute+"*="+l[g+1]+"]";r.firstOfGroup=p.find(y).eq(0),r.secondOfGroup=p.find(y).eq(1),(r.firstOfGroup[0].value||r.secondOfGroup[0].value)&&(b=t._getErrorMessage(p,n,l[g],l,g,r,t._dateRange)),b&&(f=!0),r.showArrow=!1;break;case"dateTimeRange":var y="["+r.validateAttribute+"*="+l[g+1]+"]";r.firstOfGroup=p.find(y).eq(0),r.secondOfGroup=p.find(y).eq(1),(r.firstOfGroup[0].value||r.secondOfGroup[0].value)&&(b=t._getErrorMessage(p,n,l[g],l,g,r,t._dateTimeRange)),b&&(f=!0),r.showArrow=!1;break;case"maxCheckbox":n=e(p.find("input[name='"+c+"']")),b=t._getErrorMessage(p,n,l[g],l,g,r,t._maxCheckbox);break;case"minCheckbox":n=e(p.find("input[name='"+c+"']")),b=t._getErrorMessage(p,n,l[g],l,g,r,t._minCheckbox);break;case"equals":b=t._getErrorMessage(p,n,l[g],l,g,r,t._equals);break;case"funcCall":b=t._getErrorMessage(p,n,l[g],l,g,r,t._funcCall);break;case"creditCard":b=t._getErrorMessage(p,n,l[g],l,g,r,t._creditCard);break;case"condRequired":b=t._getErrorMessage(p,n,l[g],l,g,r,t._condRequired),void 0!==b&&(f=!0);break;case"funcCallRequired":b=t._getErrorMessage(p,n,l[g],l,g,r,t._funcCallRequired),void 0!==b&&(f=!0)}var _=!1;if("object"==typeof b)switch(b.status){case"_break":_=!0;break;case"_error":b=b.message;break;case"_error_no_prompt":return!0}if(0==g&&0==s.indexOf("funcCallRequired")&&void 0!==b&&(""!=u&&(u+="<br/>"),u+=b,r.isError=!0,m++,_=!0),_)break;"string"==typeof b&&(""!=u&&(u+="<br/>"),u+=b,r.isError=!0,m++)}!f&&!n.val()&&n.val().length<1&&e.inArray("equals",l)<0&&(r.isError=!1);var x=n.prop("type"),C=n.data("promptPosition")||r.promptPosition;("radio"==x||"checkbox"==x)&&p.find("input[name='"+c+"']").length>1&&(n=e("inline"===C?p.find("input[name='"+c+"'][type!=hidden]:last"):p.find("input[name='"+c+"'][type!=hidden]:first")),r.showArrow=r.showArrowOnRadioAndCheckbox),n.is(":hidden")&&r.prettySelect&&(n=p.find("#"+r.usePrefix+t._jqSelector(n.attr("id"))+r.useSuffix)),r.isError&&r.showPrompts?t._showPrompt(n,u,d,!1,r):t._closePrompt(n),n.trigger("jqv.field.result",[n,r.isError,u]);var k=e.inArray(n[0],r.InvalidFields);return-1==k?r.isError&&r.InvalidFields.push(n[0]):r.isError||r.InvalidFields.splice(k,1),t._handleStatusCssClasses(n,r),r.isError&&r.onFieldFailure&&r.onFieldFailure(n),!r.isError&&r.onFieldSuccess&&r.onFieldSuccess(n),r.isError},_handleStatusCssClasses:function(e,t){t.addSuccessCssClassToField&&e.removeClass(t.addSuccessCssClassToField),t.addFailureCssClassToField&&e.removeClass(t.addFailureCssClassToField),t.addSuccessCssClassToField&&!t.isError&&e.addClass(t.addSuccessCssClassToField),t.addFailureCssClassToField&&t.isError&&e.addClass(t.addFailureCssClassToField)},_getErrorMessage:function(n,r,i,o,a,s,l){var c=jQuery.inArray(i,o);if("custom"===i||"funcCall"===i||"funcCallRequired"===i){i=i+"["+o[c+1]+"]",delete o[c]}var u,d=i,f=r.attr("data-validation-engine")?r.attr("data-validation-engine"):r.attr("class"),h=f.split(" ");if(void 0!=(u="future"==i||"past"==i||"maxCheckbox"==i||"minCheckbox"==i?l(n,r,o,a,s):l(r,o,a,s))){var p=t._getCustomErrorMessage(e(r),h,d,s);p&&(u=p)}return u},_getCustomErrorMessage:function(e,n,r,i){var o=!1,a=/^custom\[.*\]$/.test(r)?t._validityProp.custom:t._validityProp[r];if(void 0!=a&&void 0!=(o=e.attr("data-errormessage-"+a)))return o;if(void 0!=(o=e.attr("data-errormessage")))return o;var s="#"+e.attr("id");if(void 0!==i.custom_error_messages[s]&&void 0!==i.custom_error_messages[s][r])o=i.custom_error_messages[s][r].message;else if(n.length>0)for(var l=0;l<n.length&&n.length>0;l++){var c="."+n[l];if(void 0!==i.custom_error_messages[c]&&void 0!==i.custom_error_messages[c][r]){o=i.custom_error_messages[c][r].message;break}}return o||void 0===i.custom_error_messages[r]||void 0===i.custom_error_messages[r].message||(o=i.custom_error_messages[r].message),o},_validityProp:{required:"value-missing",custom:"custom-error",groupRequired:"value-missing",ajax:"custom-error",minSize:"range-underflow",maxSize:"range-overflow",min:"range-underflow",max:"range-overflow",past:"type-mismatch",future:"type-mismatch",dateRange:"type-mismatch",dateTimeRange:"type-mismatch",maxCheckbox:"range-overflow",minCheckbox:"range-underflow",equals:"pattern-mismatch",funcCall:"custom-error",funcCallRequired:"custom-error",creditCard:"pattern-mismatch",condRequired:"value-missing"},_required:function(t,n,r,i,o){switch(t.prop("type")){case"radio":case"checkbox":if(o){if(!t.prop("checked"))return i.allrules[n[r]].alertTextCheckboxMultiple;break}var a=t.closest("form, .validationEngineContainer"),s=t.attr("name");if(0==a.find("input[name='"+s+"']:checked").length)return 1==a.find("input[name='"+s+"']:visible").length?i.allrules[n[r]].alertTextCheckboxe:i.allrules[n[r]].alertTextCheckboxMultiple;break;case"text":case"password":case"textarea":case"file":case"select-one":case"select-multiple":default:var l=e.trim(t.val()),c=e.trim(t.attr("data-validation-placeholder")),u=e.trim(t.attr("placeholder"));if(!l||c&&l==c||u&&l==u)return i.allrules[n[r]].alertText}},_groupRequired:function(n,r,i,o){var a="["+o.validateAttribute+"*="+r[i+1]+"]",s=!1;if(n.closest("form, .validationEngineContainer").find(a).each(function(){if(!t._required(e(this),r,i,o))return s=!0,!1}),!s)return o.allrules[r[i]].alertText},_custom:function(e,t,n,r){var i,o=t[n+1],a=r.allrules[o];if(!a)return void alert("jqv:custom rule not found - "+o);if(a.regex){var s=a.regex;if(!s)return void alert("jqv:custom regex not found - "+o);if(!new RegExp(s).test(e.val()))return r.allrules[o].alertText}else{if(!a.func)return void alert("jqv:custom type not allowed "+o);if("function"!=typeof(i=a.func))return void alert("jqv:custom parameter 'function' is no function - "+o);if(!i(e,t,n,r))return r.allrules[o].alertText}},_funcCall:function(e,t,n,r){var i,o=t[n+1];if(o.indexOf(".")>-1){for(var a=o.split("."),s=window;a.length;)s=s[a.shift()];i=s}else i=window[o]||r.customFunctions[o];if("function"==typeof i)return i(e,t,n,r)},_funcCallRequired:function(e,n,r,i){return t._funcCall(e,n,r,i)},_equals:function(t,n,r,i){var o=n[r+1];if(t.val()!=e("#"+o).val())return i.allrules.equals.alertText},_maxSize:function(e,t,n,r){var i=t[n+1];if(e.val().length>i){var o=r.allrules.maxSize;return o.alertText+i+o.alertText2}},_minSize:function(e,t,n,r){var i=t[n+1];if(e.val().length<i){var o=r.allrules.minSize;return o.alertText+i+o.alertText2}},_min:function(e,t,n,r){var i=parseFloat(t[n+1]);if(parseFloat(e.val())<i){var o=r.allrules.min;return o.alertText2?o.alertText+i+o.alertText2:o.alertText+i}},_max:function(e,t,n,r){var i=parseFloat(t[n+1]);if(parseFloat(e.val())>i){var o=r.allrules.max;return o.alertText2?o.alertText+i+o.alertText2:o.alertText+i}},_past:function(n,r,i,o,a){var s,l=i[o+1],c=e(n.find("*[name='"+l.replace(/^#+/,"")+"']"))
;if("now"==l.toLowerCase())s=new Date;else if(void 0!=c.val()){if(c.is(":disabled"))return;s=t._parseDate(c.val())}else s=t._parseDate(l);if(t._parseDate(r.val())>s){var u=a.allrules.past;return u.alertText2?u.alertText+t._dateToString(s)+u.alertText2:u.alertText+t._dateToString(s)}},_future:function(n,r,i,o,a){var s,l=i[o+1],c=e(n.find("*[name='"+l.replace(/^#+/,"")+"']"));if("now"==l.toLowerCase())s=new Date;else if(void 0!=c.val()){if(c.is(":disabled"))return;s=t._parseDate(c.val())}else s=t._parseDate(l);if(t._parseDate(r.val())<s){var u=a.allrules.future;return u.alertText2?u.alertText+t._dateToString(s)+u.alertText2:u.alertText+t._dateToString(s)}},_isDate:function(e){return new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(?:(?:0?[1-9]|1[0-2])(\/|-)(?:0?[1-9]|1\d|2[0-8]))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(0?2(\/|-)29)(\/|-)(?:(?:0[48]00|[13579][26]00|[2468][048]00)|(?:\d\d)?(?:0[48]|[2468][048]|[13579][26]))$/).test(e)},_isDateTime:function(e){return new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1}$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^((1[012]|0?[1-9]){1}\/(0?[1-9]|[12][0-9]|3[01]){1}\/\d{2,4}\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1})$/).test(e)},_dateCompare:function(e,t){return new Date(e.toString())<new Date(t.toString())},_dateRange:function(e,n,r,i){return!i.firstOfGroup[0].value&&i.secondOfGroup[0].value||i.firstOfGroup[0].value&&!i.secondOfGroup[0].value?i.allrules[n[r]].alertText+i.allrules[n[r]].alertText2:t._isDate(i.firstOfGroup[0].value)&&t._isDate(i.secondOfGroup[0].value)&&t._dateCompare(i.firstOfGroup[0].value,i.secondOfGroup[0].value)?void 0:i.allrules[n[r]].alertText+i.allrules[n[r]].alertText2},_dateTimeRange:function(e,n,r,i){return!i.firstOfGroup[0].value&&i.secondOfGroup[0].value||i.firstOfGroup[0].value&&!i.secondOfGroup[0].value?i.allrules[n[r]].alertText+i.allrules[n[r]].alertText2:t._isDateTime(i.firstOfGroup[0].value)&&t._isDateTime(i.secondOfGroup[0].value)&&t._dateCompare(i.firstOfGroup[0].value,i.secondOfGroup[0].value)?void 0:i.allrules[n[r]].alertText+i.allrules[n[r]].alertText2},_maxCheckbox:function(e,t,n,r,i){var o=n[r+1],a=t.attr("name");if(e.find("input[name='"+a+"']:checked").length>o)return i.showArrow=!1,i.allrules.maxCheckbox.alertText2?i.allrules.maxCheckbox.alertText+" "+o+" "+i.allrules.maxCheckbox.alertText2:i.allrules.maxCheckbox.alertText},_minCheckbox:function(e,t,n,r,i){var o=n[r+1],a=t.attr("name");if(e.find("input[name='"+a+"']:checked").length<o)return i.showArrow=!1,i.allrules.minCheckbox.alertText+" "+o+" "+i.allrules.minCheckbox.alertText2},_creditCard:function(e,t,n,r){var i=!1,o=e.val().replace(/ +/g,"").replace(/-+/g,""),a=o.length;if(a>=14&&a<=16&&parseInt(o)>0){var s,l=0,n=a-1,c=1,u=new String;do{s=parseInt(o.charAt(n)),u+=c++%2==0?2*s:s}while(--n>=0);for(n=0;n<u.length;n++)l+=parseInt(u.charAt(n));i=l%10==0}if(!i)return r.allrules.creditCard.alertText},_ajax:function(n,r,i,o){var a=r[i+1],s=o.allrules[a],l=s.extraData,c=s.extraDataDynamic,u={fieldId:n.attr("id"),fieldValue:n.val()};if("object"==typeof l)e.extend(u,l);else if("string"==typeof l)for(var d=l.split("&"),i=0;i<d.length;i++){var f=d[i].split("=");f[0]&&f[0]&&(u[f[0]]=f[1])}if(c)for(var h=String(c).split(","),i=0;i<h.length;i++){var p=h[i];if(e(p).length){var g=n.closest("form, .validationEngineContainer").find(p).val();p.replace("#",""),escape(g);u[p.replace("#","")]=g}}if("field"==o.eventTrigger&&delete o.ajaxValidCache[n.attr("id")],!o.isError&&!t._checkAjaxFieldStatus(n.attr("id"),o))return e.ajax({type:o.ajaxFormValidationMethod,url:s.url,cache:!1,dataType:"json",data:u,field:n,rule:s,methods:t,options:o,beforeSend:function(){},error:function(e,n){o.onFailure?o.onFailure(e,n):t._ajaxError(e,n)},success:function(r){var i=r[0],a=e("#"+i).eq(0);if(1==a.length){var l=r[1],c=r[2];if(l){if(o.ajaxValidCache[i]=!0,c){if(o.allrules[c]){var u=o.allrules[c].alertTextOk;u&&(c=u)}}else c=s.alertTextOk;o.showPrompts&&(c?t._showPrompt(a,c,"pass",!0,o):t._closePrompt(a)),"submit"==o.eventTrigger&&n.closest("form").submit()}else{if(o.ajaxValidCache[i]=!1,o.isError=!0,c){if(o.allrules[c]){var u=o.allrules[c].alertText;u&&(c=u)}}else c=s.alertText;o.showPrompts&&t._showPrompt(a,c,"",!0,o)}}a.trigger("jqv.field.result",[a,o.isError,c])}}),s.alertTextLoad},_ajaxError:function(e,t){0==e.status&&null==t&&alert("The page is not served from a server! ajax call failed")},_dateToString:function(e){return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()},_parseDate:function(e){var t=e.split("-");return t==e&&(t=e.split("/")),t==e?(t=e.split("."),new Date(t[2],t[1]-1,t[0])):new Date(t[0],t[1]-1,t[2])},_showPrompt:function(n,r,i,o,a,s){n.data("jqv-prompt-at")instanceof jQuery?n=n.data("jqv-prompt-at"):n.data("jqv-prompt-at")&&(n=e(n.data("jqv-prompt-at")));var l=t._getPrompt(n);s&&(l=!1),e.trim(r)&&(l?t._updatePrompt(n,l,r,i,o,a):t._buildPrompt(n,r,i,o,a))},_buildPrompt:function(n,r,i,o,a){var s=e("<div>");switch(s.addClass(t._getClassName(n.attr("id"))+"formError"),s.addClass("parentForm"+t._getClassName(n.closest("form, .validationEngineContainer").attr("id"))),s.addClass("formError"),i){case"pass":s.addClass("greenPopup");break;case"load":s.addClass("blackPopup")}o&&s.addClass("ajaxed");var l=(e("<div>").addClass("formErrorContent").html(r).appendTo(s),n.data("promptPosition")||a.promptPosition);if(a.showArrow){var c=e("<div>").addClass("formErrorArrow");if("string"==typeof l){var u=l.indexOf(":");-1!=u&&(l=l.substring(0,u))}switch(l){case"bottomLeft":case"bottomRight":s.find(".formErrorContent").before(c),c.addClass("formErrorArrowBottom").html('<div class="line1">\x3c!-- --\x3e</div><div class="line2">\x3c!-- --\x3e</div><div class="line3">\x3c!-- --\x3e</div><div class="line4">\x3c!-- --\x3e</div><div class="line5">\x3c!-- --\x3e</div><div class="line6">\x3c!-- --\x3e</div><div class="line7">\x3c!-- --\x3e</div><div class="line8">\x3c!-- --\x3e</div><div class="line9">\x3c!-- --\x3e</div><div class="line10">\x3c!-- --\x3e</div>');break;case"topLeft":case"topRight":c.html('<div class="line10">\x3c!-- --\x3e</div><div class="line9">\x3c!-- --\x3e</div><div class="line8">\x3c!-- --\x3e</div><div class="line7">\x3c!-- --\x3e</div><div class="line6">\x3c!-- --\x3e</div><div class="line5">\x3c!-- --\x3e</div><div class="line4">\x3c!-- --\x3e</div><div class="line3">\x3c!-- --\x3e</div><div class="line2">\x3c!-- --\x3e</div><div class="line1">\x3c!-- --\x3e</div>'),s.append(c)}}a.addPromptClass&&s.addClass(a.addPromptClass);var d=n.attr("data-required-class");if(void 0!==d)s.addClass(d);else if(a.prettySelect&&e("#"+n.attr("id")).next().is("select")){var f=e("#"+n.attr("id").substr(a.usePrefix.length).substring(a.useSuffix.length)).attr("data-required-class");void 0!==f&&s.addClass(f)}s.css({opacity:0}),"inline"===l?(s.addClass("inline"),void 0!==n.attr("data-prompt-target")&&e("#"+n.attr("data-prompt-target")).length>0?s.appendTo(e("#"+n.attr("data-prompt-target"))):n.after(s)):n.before(s);var u=t._calculatePosition(n,s,a);return e("body").hasClass("rtl")?s.css({position:"inline"===l?"relative":"absolute",top:u.callerTopPosition,left:"initial",right:u.callerleftPosition,marginTop:u.marginTopSize,opacity:0}).data("callerField",n):s.css({position:"inline"===l?"relative":"absolute",top:u.callerTopPosition,left:u.callerleftPosition,right:"initial",marginTop:u.marginTopSize,opacity:0}).data("callerField",n),a.autoHidePrompt&&setTimeout(function(){s.animate({opacity:0},function(){s.closest(".formError").remove()})},a.autoHideDelay),s.animate({opacity:.87})},_updatePrompt:function(n,r,i,o,a,s,l){if(r){void 0!==o&&("pass"==o?r.addClass("greenPopup"):r.removeClass("greenPopup"),"load"==o?r.addClass("blackPopup"):r.removeClass("blackPopup")),a?r.addClass("ajaxed"):r.removeClass("ajaxed"),r.find(".formErrorContent").html(i);var c=t._calculatePosition(n,r,s);if(e("body").hasClass("rtl"))var u={top:c.callerTopPosition,left:"initial",right:c.callerleftPosition,marginTop:c.marginTopSize,opacity:.87};else var u={top:c.callerTopPosition,left:c.callerleftPosition,right:"initial",marginTop:c.marginTopSize,opacity:.87};r.css({opacity:0,display:"block"}),l?r.css(u):r.animate(u)}},_closePrompt:function(e){var n=t._getPrompt(e);n&&n.fadeTo("fast",0,function(){n.closest(".formError").remove()})},closePrompt:function(e){return t._closePrompt(e)},_getPrompt:function(n){var r=e(n).closest("form, .validationEngineContainer").attr("id"),i=t._getClassName(n.attr("id"))+"formError",o=e("."+t._escapeExpression(i)+".parentForm"+t._getClassName(r))[0];if(o)return e(o)},_escapeExpression:function(e){return e.replace(/([#;&,\.\+\*\~':"\!\^$\[\]\(\)=>\|])/g,"\\$1")},isRTL:function(t){var n=e(document),r=e("body"),i=t&&t.hasClass("rtl")||t&&"rtl"===(t.attr("dir")||"").toLowerCase()||n.hasClass("rtl")||"rtl"===(n.attr("dir")||"").toLowerCase()||r.hasClass("rtl")||"rtl"===(r.attr("dir")||"").toLowerCase();return Boolean(i)},_calculatePosition:function(e,t,n){var r,i,o,a=e.width(),s=e.position().left,l=e.position().top,c=(e.height(),t.height());r=i=0,o=-c;var u=e.data("promptPosition")||n.promptPosition,d="",f="",h=0,p=0;switch("string"==typeof u&&-1!=u.indexOf(":")&&(d=u.substring(u.indexOf(":")+1),u=u.substring(0,u.indexOf(":")),-1!=d.indexOf(",")&&(f=d.substring(d.indexOf(",")+1),d=d.substring(0,d.indexOf(",")),p=parseInt(f),isNaN(p)&&(p=0)),h=parseInt(d),isNaN(d)&&(d=0)),u){default:case"topRight":i+=s+a-27,r+=l;break;case"topLeft":r+=l,i+=s;break;case"centerRight":r=l+4,o=0,i=s+e.outerWidth(!0)+5;break;case"centerLeft":i=s-(t.width()+2),r=l+4,o=0;break;case"bottomLeft":r=l+e.height()+5,o=0,i=s;break;case"bottomRight":i=s+a-27,r=l+e.height()+5,o=0;break;case"inline":i=0,r=0,o=0}return i+=h,r+=p,{callerTopPosition:r+"px",callerleftPosition:i+"px",marginTopSize:o+"px"}},_saveOptions:function(t,n){if(e.validationEngineLanguage)var r=e.validationEngineLanguage.allRules;else e.error("jQuery.validationEngine rules are not loaded, plz add localization files to the page");e.validationEngine.defaults.allrules=r;var i=e.extend(!0,{},e.validationEngine.defaults,n);return t.data("jqv",i),i},_getClassName:function(e){if(e)return e.replace(/:/g,"_").replace(/\./g,"_")},_jqSelector:function(e){return e.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1")},_condRequired:function(e,n,r,i){var o,a;for(o=r+1;o<n.length;o++)if(a=jQuery("#"+n[o]).first(),a.length&&void 0==t._required(a,["required"],0,i,!0))return t._required(e,["required"],0,i)},_submitButtonClick:function(t){var n=e(this);n.closest("form, .validationEngineContainer").data("jqv_submitButton",n.attr("id"))}};e.fn.validationEngine=function(n){var r=e(this);return r[0]?"string"==typeof n&&"_"!=n.charAt(0)&&t[n]?("showPrompt"!=n&&"hide"!=n&&"hideAll"!=n&&t.init.apply(r),t[n].apply(r,Array.prototype.slice.call(arguments,1))):"object"!=typeof n&&n?void e.error("Method "+n+" does not exist in jQuery.validationEngine"):(t.init.apply(r,arguments),t.attach.apply(r)):r},e.validationEngine={fieldIdCounter:0,defaults:{validationEventTrigger:"blur",scroll:!0,focusFirstField:!0,showPrompts:!0,validateNonVisibleFields:!1,ignoreFieldsWithClass:"ignoreMe",promptPosition:"topRight",bindMethod:"bind",inlineAjax:!1,ajaxFormValidation:!1,ajaxFormValidationURL:!1,ajaxFormValidationMethod:"get",onAjaxFormComplete:e.noop,onBeforeAjaxFormValidation:e.noop,onValidationComplete:!1,doNotShowAllErrosOnSubmit:!1,custom_error_messages:{},binded:!0,notEmpty:!1,showArrow:!0,showArrowOnRadioAndCheckbox:!1,isError:!1,maxErrorsPerField:!1,ajaxValidCache:{},autoPositionUpdate:!1,InvalidFields:[],onFieldSuccess:!1,onFieldFailure:!1,onSuccess:!1,onFailure:!1,validateAttribute:"class",addSuccessCssClassToField:"",addFailureCssClassToField:"",autoHidePrompt:!1,autoHideDelay:1e4,fadeDuration:300,prettySelect:!1,addPromptClass:"",usePrefix:"",useSuffix:"",showOneMessage:!1}},e(function(){e.validationEngine.defaults.promptPosition=t.isRTL()?"topLeft":"topRight"})}(jQuery);var Metronic=function(){var e,t=!1,n=!1,r=!1,i=!1,o=[],a="../../assets/",s="global/img/",l="global/plugins/",c={blue:"#89C4F4",red:"#F3565D",green:"#1bbc9b",purple:"#9b59b6",grey:"#95a5a6",yellow:"#F8CB00"},u=function(){"rtl"===$("body").css("direction")&&(t=!0),n=!!navigator.userAgent.match(/MSIE 8.0/),r=!!navigator.userAgent.match(/MSIE 9.0/),i=!!navigator.userAgent.match(/MSIE 10.0/),i&&$("html").addClass("ie10"),(i||r||n)&&$("html").addClass("ie")},d=function(){for(var e=0;e<o.length;e++){o[e].call()}},f=function(){var e;if(n){var t;$(window).resize(function(){t!=document.documentElement.clientHeight&&(e&&clearTimeout(e),e=setTimeout(function(){d()},50),t=document.documentElement.clientHeight)})}else $(window).resize(function(){e&&clearTimeout(e),e=setTimeout(function(){d()},50)})},h=function(){$("body").on("click",".portlet > .portlet-title > .tools > a.remove",function(e){e.preventDefault();var t=$(this).closest(".portlet");$("body").hasClass("page-portlet-fullscreen")&&$("body").removeClass("page-portlet-fullscreen"),t.find(".portlet-title .fullscreen").tooltip("destroy"),t.find(".portlet-title > .tools > .reload").tooltip("destroy"),t.find(".portlet-title > .tools > .remove").tooltip("destroy"),t.find(".portlet-title > .tools > .config").tooltip("destroy"),t.find(".portlet-title > .tools > .collapse, .portlet > .portlet-title > .tools > .expand").tooltip("destroy"),t.remove()}),$("body").on("click",".portlet > .portlet-title .fullscreen",function(e){e.preventDefault();var t=$(this).closest(".portlet");if(t.hasClass("portlet-fullscreen"))$(this).removeClass("on"),t.removeClass("portlet-fullscreen"),$("body").removeClass("page-portlet-fullscreen"),t.children(".portlet-body").css("height","auto");else{var n=Metronic.getViewPort().height-t.children(".portlet-title").outerHeight()-parseInt(t.children(".portlet-body").css("padding-top"))-parseInt(t.children(".portlet-body").css("padding-bottom"));$(this).addClass("on"),t.addClass("portlet-fullscreen"),$("body").addClass("page-portlet-fullscreen"),t.children(".portlet-body").css("height",n)}}),$("body").on("click",".portlet > .portlet-title > .tools > a.reload",function(e){e.preventDefault();var t=$(this).closest(".portlet").children(".portlet-body"),n=$(this).attr("data-url"),r=$(this).attr("data-error-display");n?(Metronic.blockUI({target:t,animate:!0,overlayColor:"none"}),$.ajax({type:"GET",cache:!1,url:n,dataType:"html",success:function(e){Metronic.unblockUI(t),t.html(e)},error:function(e,n,i){Metronic.unblockUI(t);var o="Error on reloading the content. Please check your connection and try again.";"toastr"==r&&toastr?toastr.error(o):"notific8"==r&&$.notific8?($.notific8("zindex",11500),$.notific8(o,{theme:"ruby",life:3e3})):alert(o)}})):(Metronic.blockUI({target:t,animate:!0,overlayColor:"none"}),window.setTimeout(function(){Metronic.unblockUI(t)},1e3))}),$('.portlet .portlet-title a.reload[data-load="true"]').click(),$("body").on("click",".portlet > .portlet-title > .tools > .collapse, .portlet .portlet-title > .tools > .expand",function(e){e.preventDefault();var t=$(this).closest(".portlet").children(".portlet-body");$(this).hasClass("collapse")?($(this).removeClass("collapse").addClass("expand"),t.slideUp(200)):($(this).removeClass("expand").addClass("collapse"),t.slideDown(200))})},p=function(){if($().uniform){var e=$("input[type=checkbox]:not(.toggle, .make-switch, .icheck), input[type=radio]:not(.toggle, .star, .make-switch, .icheck)");e.size()>0&&e.each(function(){0===$(this).parents(".checker").size()&&($(this).show(),$(this).uniform())})}},g=function(){$().iCheck&&$(".icheck").each(function(){var e=$(this).attr("data-checkbox")?$(this).attr("data-checkbox"):"icheckbox_minimal-grey",t=$(this).attr("data-radio")?$(this).attr("data-radio"):"iradio_minimal-grey";e.indexOf("_line")>-1||t.indexOf("_line")>-1?$(this).iCheck({checkboxClass:e,radioClass:t,insert:'<div class="icheck_line-icon"></div>'+$(this).attr("data-label")}):$(this).iCheck({checkboxClass:e,radioClass:t})})},m=function(){$().bootstrapSwitch&&$(".make-switch").bootstrapSwitch()},v=function(){$().confirmation&&$('[data-toggle="confirmation"]').confirmation({container:"body",btnOkClass:"btn-xs btn-success",btnCancelClass:"btn-xs btn-danger"})},b=function(){$("body").on("shown.bs.collapse",".accordion.scrollable",function(e){Metronic.scrollTo($(e.target))})},y=function(){if(location.hash){var e=location.hash.substr(1);$('a[href="#'+e+'"]').parents(".tab-pane:hidden").each(function(){var e=$(this).attr("id");$('a[href="#'+e+'"]').click()}),$('a[href="#'+e+'"]').click()}},w=function(){$("body").on("hide.bs.modal",function(){$(".modal:visible").size()>1&&!1===$("html").hasClass("modal-open")?$("html").addClass("modal-open"):$(".modal:visible").size()<=1&&$("html").removeClass("modal-open")}),$("body").on("show.bs.modal",".modal",function(){$(this).hasClass("modal-scroll")&&$("body").addClass("modal-open-noscroll")}),$("body").on("hide.bs.modal",".modal",function(){$("body").removeClass("modal-open-noscroll")}),$("body").on("hidden.bs.modal",".modal:not(.modal-cached)",function(){$(this).removeData("bs.modal")})},_=function(){$(".tooltips").tooltip(),$(".portlet > .portlet-title .fullscreen").tooltip({container:"body",title:"Fullscreen"}),$(".portlet > .portlet-title > .tools > .reload").tooltip({container:"body",title:"Reload"}),$(".portlet > .portlet-title > .tools > .remove").tooltip({container:"body",title:"Remove"}),$(".portlet > .portlet-title > .tools > .config").tooltip({container:"body",title:"Settings"}),$(".portlet > .portlet-title > .tools > .collapse, .portlet > .portlet-title > .tools > .expand").tooltip({container:"body",title:"Collapse/Expand"})},x=function(){$("body").on("click",".dropdown-menu.hold-on-click",function(e){e.stopPropagation()})},C=function(){$("body").on("click",'[data-close="alert"]',function(e){$(this).parent(".alert").hide(),$(this).closest(".note").hide(),e.preventDefault()}),$("body").on("click",'[data-close="note"]',function(e){$(this).closest(".note").hide(),e.preventDefault()}),$("body").on("click",'[data-remove="note"]',function(e){$(this).closest(".note").remove(),e.preventDefault()})},k=function(){$(".popovers").popover(),$(document).on("click.bs.popover.data-api",function(t){e&&e.popover("hide")})},T=function(){Metronic.initSlimScroll(".scroller")},S=function(){jQuery.fancybox&&$(".fancybox-button").size()>0&&$(".fancybox-button").fancybox({groupAttr:"data-rel",prevEffect:"none",nextEffect:"none",closeBtn:!0,helpers:{title:{type:"inside"}}})},D=function(){(n||r)&&$("input[placeholder]:not(.placeholder-no-fix), textarea[placeholder]:not(.placeholder-no-fix)").each(function(){var e=$(this);""===e.val()&&""!==e.attr("placeholder")&&e.addClass("placeholder").val(e.attr("placeholder")),e.focus(function(){e.val()==e.attr("placeholder")&&e.val("")}),e.blur(function(){""!==e.val()&&e.val()!=e.attr("placeholder")||e.val(e.attr("placeholder"))})})},E=function(){$().select2&&$(".select2me").select2({placeholder:"Select",allowClear:!0})};return{init:function(){u(),f(),p(),g(),m(),T(),S(),E(),h(),C(),x(),y(),_(),k(),b(),w(),v(),D()},initAjax:function(){v()},initComponents:function(){this.initAjax()},setLastPopedPopover:function(t){e=t},addResizeHandler:function(e){o.push(e)},runResizeHandlers:function(){d()},scrollTo:function(e,t){var n=e&&e.size()>0?e.offset().top:0;e&&($("body").hasClass("page-header-fixed")&&(n-=$(".page-header").height()),n+=t||-1*e.height()),$("html,body").animate({scrollTop:n},"slow")},initSlimScroll:function(e){$(e).each(function(){if(!$(this).attr("data-initialized")){var e;e=$(this).attr("data-height")?$(this).attr("data-height"):$(this).css("height"),$(this).slimScroll({allowPageScroll:!0,size:"7px",color:$(this).attr("data-handle-color")?$(this).attr("data-handle-color"):"#bbb",wrapperClass:$(this).attr("data-wrapper-class")?$(this).attr("data-wrapper-class"):"slimScrollDiv",railColor:$(this).attr("data-rail-color")?$(this).attr("data-rail-color"):"#eaeaea",position:t?"left":"right",height:e,alwaysVisible:"1"==$(this).attr("data-always-visible"),railVisible:"1"==$(this).attr("data-rail-visible"),disableFadeOut:!0}),$(this).attr("data-initialized","1")}})},destroySlimScroll:function(e){$(e).each(function(){if("1"===$(this).attr("data-initialized")){$(this).removeAttr("data-initialized"),$(this).removeAttr("style");var e={};$(this).attr("data-handle-color")&&(e["data-handle-color"]=$(this).attr("data-handle-color")),$(this).attr("data-wrapper-class")&&(e["data-wrapper-class"]=$(this).attr("data-wrapper-class")),$(this).attr("data-rail-color")&&(e["data-rail-color"]=$(this).attr("data-rail-color")),$(this).attr("data-always-visible")&&(e["data-always-visible"]=$(this).attr("data-always-visible")),$(this).attr("data-rail-visible")&&(e["data-rail-visible"]=$(this).attr("data-rail-visible")),$(this).slimScroll({wrapperClass:$(this).attr("data-wrapper-class")?$(this).attr("data-wrapper-class"):"slimScrollDiv",destroy:!0});var t=$(this);$.each(e,function(e,n){t.attr(e,n)})}})},scrollTop:function(){Metronic.scrollTo()},blockUI:function(e){e=$.extend(!0,{},e);var t="";if(t=e.animate?'<div class="loading-message '+(e.boxed?"loading-message-boxed":"")+'"><div class="block-spinner-bar"><div class="bounce1"></div><div class="bounce2"></div><div class="bounce3"></div></div></div>':e.iconOnly?'<div class="loading-message '+(e.boxed?"loading-message-boxed":"")+'"><img src="'+this.getGlobalImgPath()+'loading-spinner-grey.gif" align=""></div>':e.textOnly?'<div class="loading-message '+(e.boxed?"loading-message-boxed":"")+'"><span>&nbsp;&nbsp;'+(e.message?e.message:"LOADING...")+"</span></div>":'<div class="loading-message '+(e.boxed?"loading-message-boxed":"")+'"><img src="'+this.getGlobalImgPath()+'loading-spinner-grey.gif" align=""><span>&nbsp;&nbsp;'+(e.message?e.message:"LOADING...")+"</span></div>",e.target){var n=$(e.target);n.height()<=$(window).height()&&(e.cenrerY=!0),n.block({message:t,baseZ:e.zIndex?e.zIndex:1e3,centerY:void 0!==e.cenrerY&&e.cenrerY,css:{top:"10%",border:"0",padding:"0",backgroundColor:"none"},overlayCSS:{backgroundColor:e.overlayColor?e.overlayColor:"#555",opacity:e.boxed?.05:.1,cursor:"wait"}})}else $.blockUI({message:t,baseZ:e.zIndex?e.zIndex:1e3,css:{border:"0",padding:"0",backgroundColor:"none"},overlayCSS:{backgroundColor:e.overlayColor?e.overlayColor:"#555",opacity:e.boxed?.05:.1,cursor:"wait"}})},unblockUI:function(e){e?$(e).unblock({onUnblock:function(){$(e).css("position",""),$(e).css("zoom","")}}):$.unblockUI()},startPageLoading:function(e){e&&e.animate?($(".page-spinner-bar").remove(),$("body").append('<div class="page-spinner-bar"><div class="bounce1"></div><div class="bounce2"></div><div class="bounce3"></div></div>')):($(".page-loading").remove(),$("body").append('<div class="page-loading"><img src="'+this.getGlobalImgPath()+'loading-spinner-grey.gif"/>&nbsp;&nbsp;<span>'+(e&&e.message?e.message:"Loading...")+"</span></div>"))},stopPageLoading:function(){$(".page-loading, .page-spinner-bar").remove()},alert:function(e){e=$.extend(!0,{container:"",place:"append",type:"success",message:"",close:!0,reset:!0,focus:!0,closeInSeconds:0,icon:""},e);var t=Metronic.getUniqueID("Metronic_alert"),n='<div id="'+t+'" class="Metronic-alerts alert alert-'+e.type+' fade in">'+(e.close?'<button type="button" class="close" data-dismiss="alert" aria-hidden="true"></button>':"")+(""!==e.icon?'<i class="fa-lg fa fa-'+e.icon+'"></i>  ':"")+e.message+"</div>";return e.reset&&$(".Metronic-alerts").remove(),e.container?"append"==e.place?$(e.container).append(n):$(e.container).prepend(n):$("body").hasClass("page-container-bg-solid")?$(".page-title").after(n):$(".page-bar").size()>0?$(".page-bar").after(n):$(".page-breadcrumb").after(n),e.focus&&Metronic.scrollTo($("#"+t)),e.closeInSeconds>0&&setTimeout(function(){$("#"+t).remove()},1e3*e.closeInSeconds),t},initUniform:function(e){e?$(e).each(function(){0===$(this).parents(".checker").size()&&($(this).show(),$(this).uniform())}):p()},updateUniform:function(e){$.uniform.update(e)},initFancybox:function(){S()},getActualVal:function(e){return e=$(e),e.val()===e.attr("placeholder")?"":e.val()},getURLParameter:function(e){var t,n,r=window.location.search.substring(1),i=r.split("&");for(t=0;t<i.length;t++)if(n=i[t].split("="),n[0]==e)return unescape(n[1]);return null},isTouchDevice:function(){try{return document.createEvent("TouchEvent"),!0}catch(e){return!1}},getViewPort:function(){var e=window,t="inner";return"innerWidth"in window||(t="client",e=document.documentElement||document.body),{width:e[t+"Width"],height:e[t+"Height"]}},getUniqueID:function(e){return"prefix_"+Math.floor(Math.random()*(new Date).getTime())},isIE8:function(){return n},isIE9:function(){return r},isRTL:function(){return t},isAngularJsApp:function(){return"undefined"!=typeof angular},getAssetsPath:function(){return a},setAssetsPath:function(e){a=e},setGlobalImgPath:function(e){s=e},getGlobalImgPath:function(){return a+s},setGlobalPluginsPath:function(e){l=e},getGlobalPluginsPath:function(){return a+l},getGlobalCssPath:function(){return a+"global/css/"},getBrandColor:function(e){return c[e]?c[e]:""},getResponsiveBreakpoint:function(e){var t={xs:480,sm:768,md:992,lg:1200};return t[e]?t[e]:0}}}(),Layout=function(){var e=Metronic.getResponsiveBreakpoint("md"),t=function(){var t,n=$(".page-content"),r=$(".page-sidebar"),o=$("body");if(!0===o.hasClass("page-footer-fixed")&&!1===o.hasClass("page-sidebar-fixed")){var a=Metronic.getViewPort().height-$(".page-footer").outerHeight()-$(".page-header").outerHeight();n.height()<a&&n.attr("style","min-height:"+a+"px")}else{if(o.hasClass("page-sidebar-fixed"))t=i(),!1===o.hasClass("page-footer-fixed")&&(t-=$(".page-footer").outerHeight());else{var s=$(".page-header").outerHeight(),l=$(".page-footer").outerHeight();t=Metronic.getViewPort().width<e?Metronic.getViewPort().height-s-l:r.height()+20,t+s+l<=Metronic.getViewPort().height&&(t=Metronic.getViewPort().height-s-l)}n.attr("style","min-height:"+t+"px")}},n=function(t,n){var r=location.hash.toLowerCase(),i=$(".page-sidebar-menu");if("click"===t||"set"===t?n=$(n):"match"===t&&i.find("li > a").each(function(){var e=$(this).attr("href").toLowerCase();if(e.length>1&&r.substr(1,e.length-1)==e.substr(1))return void(n=$(this))}),n&&0!=n.size()&&"javascript:;"!==n.attr("href").toLowerCase()&&"#"!==n.attr("href").toLowerCase()){parseInt(i.data("slide-speed")),i.data("keep-expanded");i.find("li.active").removeClass("active"),i.find("li > a > .selected").remove(),!1===i.hasClass("page-sidebar-menu-hover-submenu")?i.find("li.open").each(function(){0===$(this).children(".sub-menu").size()&&($(this).removeClass("open"),$(this).find("> a > .arrow.open").removeClass("open"))}):i.find("li.open").removeClass("open"),n.parents("li").each(function(){$(this).addClass("active"),$(this).find("> a > span.arrow").addClass("open"),1===$(this).parent("ul.page-sidebar-menu").size()&&$(this).find("> a").append('<span class="selected"></span>'),1===$(this).children("ul.sub-menu").size()&&$(this).addClass("open")}),"click"===t&&Metronic.getViewPort().width<e&&$(".page-sidebar").hasClass("in")&&$(".page-header .responsive-toggler").click()}},r=function(){$(".page-sidebar").on("click","li > a",function(n){var r=$(this).next().hasClass("sub-menu");if(!(Metronic.getViewPort().width>=e&&1===$(this).parents(".page-sidebar-menu-hover-submenu").size())){if(!1===r)return void(Metronic.getViewPort().width<e&&$(".page-sidebar").hasClass("in")&&$(".page-header .responsive-toggler").click());if(!$(this).next().hasClass("sub-menu always-open")){var i=$(this).parent().parent(),o=$(this),a=$(".page-sidebar-menu"),s=$(this).next(),l=a.data("auto-scroll"),c=parseInt(a.data("slide-speed"));!0!==a.data("keep-expanded")&&(i.children("li.open").children("a").children(".arrow").removeClass("open"),i.children("li.open").children(".sub-menu:not(.always-open)").slideUp(c),i.children("li.open").removeClass("open"));s.is(":visible")?($(".arrow",$(this)).removeClass("open"),$(this).parent().removeClass("open"),s.slideUp(c,function(){!0===l&&!1===$("body").hasClass("page-sidebar-closed")&&($("body").hasClass("page-sidebar-fixed")?a.slimScroll({scrollTo:o.position().top}):Metronic.scrollTo(o,-200)),t()})):r&&($(".arrow",$(this)).addClass("open"),$(this).parent().addClass("open"),s.slideDown(c,function(){!0===l&&!1===$("body").hasClass("page-sidebar-closed")&&($("body").hasClass("page-sidebar-fixed")?a.slimScroll({scrollTo:o.position().top}):Metronic.scrollTo(o,-200)),t()})),n.preventDefault()}}}),$(".page-sidebar").on("click"," li > a.ajaxify",function(t){t.preventDefault(),Metronic.scrollTop();var n=$(this).attr("href"),r=$(".page-sidebar ul"),i=($(".page-content"),$(".page-content .page-content-body"));r.children("li.active").removeClass("active"),r.children("arrow.open").removeClass("open"),$(this).parents("li").each(function(){$(this).addClass("active"),$(this).children("a > span.arrow").addClass("open")}),$(this).parents("li").addClass("active"),Metronic.getViewPort().width<e&&$(".page-sidebar").hasClass("in")&&$(".page-header .responsive-toggler").click(),Metronic.startPageLoading();var o=$(this);$.ajax({type:"GET",cache:!1,url:n,dataType:"html",success:function(e){0===o.parents("li.open").size()&&$(".page-sidebar-menu > li.open > a").click(),Metronic.stopPageLoading(),i.html(e),Layout.fixContentHeight(),Metronic.initAjax()},error:function(e,t,n){Metronic.stopPageLoading(),i.html("<h4>Could not load the requested content.</h4>")}})}),$(".page-content").on("click",".ajaxify",function(t){t.preventDefault(),Metronic.scrollTop();var n=$(this).attr("href"),r=($(".page-content"),$(".page-content .page-content-body"));Metronic.startPageLoading(),Metronic.getViewPort().width<e&&$(".page-sidebar").hasClass("in")&&$(".page-header .responsive-toggler").click(),$.ajax({type:"GET",cache:!1,url:n,dataType:"html",success:function(e){Metronic.stopPageLoading(),r.html(e),Layout.fixContentHeight(),Metronic.initAjax()},error:function(e,t,n){r.html("<h4>Could not load the requested content.</h4>"),Metronic.stopPageLoading()}})}),$(document).on("click",".page-header-fixed-mobile .page-header .responsive-toggler",function(){Metronic.scrollTop()}),a(),$(".page-sidebar").on("click",".sidebar-search .remove",function(e){e.preventDefault(),$(".sidebar-search").removeClass("open")}),$(".page-sidebar .sidebar-search").on("keypress","input.form-control",function(e){if(13==e.which)return $(".sidebar-search").submit(),!1}),$(".sidebar-search .submit").on("click",function(e){e.preventDefault(),$("body").hasClass("page-sidebar-closed")&&!1===$(".sidebar-search").hasClass("open")?(1===$(".page-sidebar-fixed").size()&&$(".page-sidebar .sidebar-toggler").click(),$(".sidebar-search").addClass("open")):$(".sidebar-search").submit()}),0!==$(".sidebar-search").size()&&($(".sidebar-search .input-group").on("click",function(e){e.stopPropagation()}),$("body").on("click",function(){$(".sidebar-search").hasClass("open")&&$(".sidebar-search").removeClass("open")}))},i=function(){var e=Metronic.getViewPort().height-$(".page-header").outerHeight();return $("body").hasClass("page-footer-fixed")&&(e-=$(".page-footer").outerHeight()),e},o=function(){var n=$(".page-sidebar-menu");if(Metronic.destroySlimScroll(n),0===$(".page-sidebar-fixed").size())return void t();Metronic.getViewPort().width>=e&&(n.attr("data-height",i()),Metronic.initSlimScroll(n),t())},a=function(){var e=$("body");e.hasClass("page-sidebar-fixed")&&$(".page-sidebar").on("mouseenter",function(){e.hasClass("page-sidebar-closed")&&$(this).find(".page-sidebar-menu").removeClass("page-sidebar-menu-closed")}).on("mouseleave",function(){
e.hasClass("page-sidebar-closed")&&$(this).find(".page-sidebar-menu").addClass("page-sidebar-menu-closed")})},s=function(){var t=$("body");$.cookie&&"1"===$.cookie("sidebar_closed")&&Metronic.getViewPort().width>=e&&($("body").addClass("page-sidebar-closed"),$(".page-sidebar-menu").addClass("page-sidebar-menu-closed")),$("body").on("click",".sidebar-toggler",function(e){var n=$(".page-sidebar"),r=$(".page-sidebar-menu");$(".sidebar-search",n).removeClass("open"),t.hasClass("page-sidebar-closed")?(t.removeClass("page-sidebar-closed"),r.removeClass("page-sidebar-menu-closed"),$.cookie&&$.cookie("sidebar_closed","0")):(t.addClass("page-sidebar-closed"),r.addClass("page-sidebar-menu-closed"),t.hasClass("page-sidebar-fixed")&&r.trigger("mouseleave"),$.cookie&&$.cookie("sidebar_closed","1")),$(window).trigger("resize")})},l=function(){$(".page-header").on("click",'.hor-menu a[data-toggle="tab"]',function(e){e.preventDefault();var t=$(".hor-menu .nav"),n=t.find("li.current");$("li.active",n).removeClass("active"),$(".selected",n).remove();var r=$(this).parents("li").last();r.addClass("current"),r.find("a:first").append('<span class="selected"></span>')}),$(".page-header").on("click",".search-form",function(e){$(this).addClass("open"),$(this).find(".form-control").focus(),$(".page-header .search-form .form-control").on("blur",function(e){$(this).closest(".search-form").removeClass("open"),$(this).unbind("blur")})}),$(".page-header").on("keypress",".hor-menu .search-form .form-control",function(e){if(13==e.which)return $(this).closest(".search-form").submit(),!1}),$(".page-header").on("mousedown",".search-form.open .submit",function(e){e.preventDefault(),e.stopPropagation(),$(this).closest(".search-form").submit()}),$('[data-hover="megamenu-dropdown"]').not(".hover-initialized").each(function(){$(this).dropdownHover(),$(this).addClass("hover-initialized")}),$(document).on("click",".mega-menu-dropdown .dropdown-menu",function(e){e.stopPropagation()})},c=function(){$("body").on("shown.bs.tab",'a[data-toggle="tab"]',function(){t()})},u=function(){navigator.userAgent.match(/iPhone|iPad|iPod/i)?$(window).bind("touchend touchcancel touchleave",function(e){$(this).scrollTop()>300?$(".scroll-to-top").fadeIn(500):$(".scroll-to-top").fadeOut(500)}):$(window).scroll(function(){$(this).scrollTop()>300?$(".scroll-to-top").fadeIn(500):$(".scroll-to-top").fadeOut(500)}),$(".scroll-to-top").click(function(e){return e.preventDefault(),$("html, body").animate({scrollTop:0},500),!1})},d=function(){var t,n=$(".full-height-content");if(t=Metronic.getViewPort().height-$(".page-header").outerHeight(!0)-$(".page-footer").outerHeight(!0)-$(".page-title").outerHeight(!0)-$(".page-bar").outerHeight(!0),n.hasClass("portlet")){var r=n.find(".portlet-body");if(Metronic.getViewPort().width<e)return void Metronic.destroySlimScroll(r.find(".full-height-content-body"));t=t-n.find(".portlet-title").outerHeight(!0)-parseInt(n.find(".portlet-body").css("padding-top"))-parseInt(n.find(".portlet-body").css("padding-bottom"))-2,n.hasClass("full-height-content-scrollable")?(t-=35,r.find(".full-height-content-body").css("height",t),Metronic.initSlimScroll(r.find(".full-height-content-body"))):r.css("min-height",t)}else{if(Metronic.getViewPort().width<e)return void Metronic.destroySlimScroll(n.find(".full-height-content-body"));n.hasClass("full-height-content-scrollable")?(t-=35,n.find(".full-height-content-body").css("height",t),Metronic.initSlimScroll(n.find(".full-height-content-body"))):n.css("min-height",t)}};return{initHeader:function(){l()},setSidebarMenuActiveLink:function(e,t){n(e,t)},initSidebar:function(){o(),r(),s(),Metronic.isAngularJsApp()&&n("match"),Metronic.addResizeHandler(o)},initContent:function(){d(),c(),Metronic.addResizeHandler(t),Metronic.addResizeHandler(d)},initFooter:function(){u()},init:function(){this.initHeader(),this.initSidebar(),this.initContent(),this.initFooter()},fixContentHeight:function(){t()},initFixedSidebarHoverEffect:function(){a()},initFixedSidebar:function(){o()},getLayoutImgPath:function(){return Metronic.getAssetsPath()+"admin/layout/img/"},getLayoutCssPath:function(){return Metronic.getAssetsPath()+"admin/layout/css/"}}}(),QuickSidebar=function(){var e=function(){$(".top-menu .dropdown-quick-sidebar-toggler a, .page-quick-sidebar-toggler").click(function(e){$("body").toggleClass("page-quick-sidebar-open")})},t=function(){var e=$(".page-quick-sidebar-wrapper"),t=e.find(".page-quick-sidebar-chat"),n=function(){var n,r=e.find(".page-quick-sidebar-chat-users");n=e.height()-e.find(".nav-justified > .nav-tabs").outerHeight(),Metronic.destroySlimScroll(r),r.attr("data-height",n),Metronic.initSlimScroll(r);var i=t.find(".page-quick-sidebar-chat-user-messages"),o=n-t.find(".page-quick-sidebar-chat-user-form").outerHeight()-t.find(".page-quick-sidebar-nav").outerHeight();Metronic.destroySlimScroll(i),i.attr("data-height",o),Metronic.initSlimScroll(i)};n(),Metronic.addResizeHandler(n),e.find(".page-quick-sidebar-chat-users .media-list > .media").click(function(){t.addClass("page-quick-sidebar-content-item-shown")}),e.find(".page-quick-sidebar-chat-user .page-quick-sidebar-back-to-list").click(function(){t.removeClass("page-quick-sidebar-content-item-shown")});var r=function(e){e.preventDefault();var n=t.find(".page-quick-sidebar-chat-user-messages"),r=t.find(".page-quick-sidebar-chat-user-form .form-control"),i=r.val();if(0!==i.length){var o=function(e,t,n,r,i){var o="";return o+='<div class="post '+e+'">',o+='<img class="avatar" alt="" src="'+Layout.getLayoutImgPath()+r+'.jpg"/>',o+='<div class="message">',o+='<span class="arrow"></span>',o+='<a href="#" class="name">Bob Nilson</a>&nbsp;',o+='<span class="datetime">'+t+"</span>",o+='<span class="body">',o+=i,o+="</span>",o+="</div>",o+="</div>"},a=new Date,s=o("out",a.getHours()+":"+a.getMinutes(),0,"avatar3",i);s=$(s),n.append(s);var l=function(){var e=0;return n.find(".post").each(function(){e+=$(this).outerHeight()}),e};n.slimScroll({scrollTo:l()}),r.val(""),setTimeout(function(){var e=new Date,t=o("in",e.getHours()+":"+e.getMinutes(),0,"avatar2","Lorem ipsum doloriam nibh...");t=$(t),n.append(t),n.slimScroll({scrollTo:l()})},3e3)}};t.find(".page-quick-sidebar-chat-user-form .btn").click(r),t.find(".page-quick-sidebar-chat-user-form .form-control").keypress(function(e){if(13==e.which)return r(e),!1})},n=function(){var e=$(".page-quick-sidebar-wrapper"),t=(e.find(".page-quick-sidebar-alerts"),function(){var t,n=e.find(".page-quick-sidebar-alerts-list");t=e.height()-e.find(".nav-justified > .nav-tabs").outerHeight(),Metronic.destroySlimScroll(n),n.attr("data-height",t),Metronic.initSlimScroll(n)});t(),Metronic.addResizeHandler(t)},r=function(){var e=$(".page-quick-sidebar-wrapper"),t=(e.find(".page-quick-sidebar-settings"),function(){var t,n=e.find(".page-quick-sidebar-settings-list");t=e.height()-e.find(".nav-justified > .nav-tabs").outerHeight(),Metronic.destroySlimScroll(n),n.attr("data-height",t),Metronic.initSlimScroll(n)});t(),Metronic.addResizeHandler(t)};return{init:function(){e(),t(),n(),r()}}}();